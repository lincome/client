{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\fjssz_UIRoomTest.js"],"names":["app","require","cc","Class","extends","subGameName","properties","cardPrefab","Prefab","icon_mapai","SpriteFrame","OnCreateInit","cards","PokerCard","RoomMgr","toUpperCase","roomID","GetEnterRoom","GetRoomProperty","RoomPosMgr","LogicRank","LogicGame","ChooseCardAddOffY","InitBtnCardPosY","cardSpcedX","cardArr","OnShow","c","totalNum","bg","node","getChildByName","i","children","length","element","destroy","model","active","push","key","sort","console","log","col","inix","iniy","row","Math","floor","card","instantiate","addComponent","Button","setPosition","addChild","on","Click_card","ShowCard","GetValue","v","or","parseInt","substring","GetName","names","Sure","test","ShowSysMsg","that","SendChat","JSON","stringify","msg","code","CloseForm","Add","event","target","parent","name","num","getComponent","Label","string","cardMap","Del","type","quickID","content","success","SendPack","cardType","btnNode","newPoker","SubCardValue","GetPokeCard","tween","delay","to","opacity","start","room","child","kexuanwanfa","GetRoomConfigByProperty","indexOf","maPaiValue","GetRoomSet","GetRoomSetProperty","clickNode","isContained","includes","y","index","splice","HuHuanPai","clickDunDict","ClearOneCard","AutoSetDun","reSortCards","disabledBtn","clickNum"],"mappings":"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","file":"fjssz_UIRoomTest.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"fjssz_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n\t\tcardPrefab: cc.Prefab,\r\n\t\ticon_mapai: cc.SpriteFrame,\r\n    },\r\n    OnCreateInit: function (cards) {\r\n        this.PokerCard = app[app.subGameName + \"_PokerCard\"]();\r\n        this.RoomMgr = app[app.subGameName.toUpperCase()+\"RoomMgr\"]();\r\n        this.roomID = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"roomID\");\r\n        this.RoomPosMgr = app[app.subGameName.toUpperCase() + \"RoomPosMgr\"]();\r\n\t\tthis.LogicRank = app[app.subGameName.toUpperCase() + \"LogicRank\"]();\r\n\t\tthis.LogicGame = app[app.subGameName.toUpperCase() + \"LogicGame\"]();\r\n\r\n        this.ChooseCardAddOffY = 45;\r\n\t\t// this.InitBtnCardPosY = -30;\r\n\t\tthis.InitBtnCardPosY = 0;\r\n\t\tthis.cardSpcedX = 10;//卡牌间的距离\r\n\r\n        this.cardArr = [];\r\n    },\r\n\r\n    OnShow: function (cards) {\r\n\r\n        let c = []\r\n   \r\n        this.totalNum = 0\r\n\r\n\r\n        // cc.log(cards)\r\n\r\n        let bg = this.node.getChildByName(\"bg\")\r\n        for (let i = 0; i < bg.children.length; i++) {\r\n            const element = bg.children[i];\r\n            element.destroy()\r\n        }\r\n        let model = this.node.getChildByName(\"model\")\r\n        model.active = false;\r\n\r\n        for (let i = 0; i < cards.length; i++) {\r\n            const element = cards[i];\r\n            c.push(element.key)\r\n        }\r\n        cards = c\r\n        cards.sort()\r\n         console.log(cards.length)\r\n         var col = 25;var inix = -500\r\n         var iniy = 250\r\n        for (let i = 0; i < cards.length; i++) {\r\n            const element = cards[i];\r\n\r\n            console.log(element)\r\n\r\n            var row = Math.floor(i / 25);\r\n            var col = i%25;\r\n            //  let cardbutton= cc.instantiate(cc.Button);\r\n            \r\n            let card = cc.instantiate(this.cardPrefab);\r\n            card.addComponent(cc.Button);  \r\n\r\n            card.setPosition(inix +col*40,iniy - row * 80);\r\n            \r\n            bg.addChild(card);\r\n            card.on('click', this.Click_card, this);\r\n            card.element = element;\r\n\r\n            \r\n           this.ShowCard(element, card);\r\n// bg.getComponent(cc.Layout).enabled = false ;\r\n     \r\n        }\r\n        \r\n\r\n\r\n       \r\n\r\n\r\n        // cc.log(this.cards)\r\n\r\n        // let c = []\r\n        // for (let i = 0; i < cards.length; i++) {\r\n        //     const element = cards[i];\r\n        //     c.push(element.key)\r\n        // }\r\n        // cards = c\r\n        // this.cards = cards\r\n        // cards.sort()\r\n        // this.totalNum = 0\r\n        // this.cardMap = {}\r\n        // for (let i = 0; i < cards.length; i++) {\r\n        //     const element = this.GetValue(cards[i]);\r\n        //     if(!element) continue\r\n        //     if (!this.cardMap[element]) {\r\n        //         this.cardMap[element] = []\r\n        //     }\r\n        //     this.cardMap[element].push(cards[i])\r\n        // }\r\n        // cc.log(this.cardMap)\r\n\r\n        // let model = this.node.getChildByName(\"model\")\r\n        // let bg = this.node.getChildByName(\"bg\")\r\n        // for (let i = 0; i < bg.children.length; i++) {\r\n        //     const element = bg.children[i];\r\n        //     element.destroy()\r\n        // }\r\n        // for (const key in this.cardMap) {\r\n        //     if (!Object.hasOwnProperty.call(this.cardMap, key)) continue;\r\n        //     let item = cc.instantiate(model)\r\n        //     item.parent = bg\r\n        //     item.active = true\r\n        //     let name = this.GetName(key)\r\n        //     item.getChildByName(\"poker\").getChildByName(\"Label\").getComponent(cc.Label).string = name\r\n        //     item.name = key\r\n        // }\r\n        // model.active = false\r\n    },\r\n    GetValue:function(v){//字符串十六进制转int型\r\n        let or = parseInt(v.substring(0,4))\r\n        v = or\r\n        if(!v) v = 0\r\n        v = v%16;\r\n        if(or > 0x40){\r\n            return 14\r\n        }\r\n        if (v == 14) {\r\n            return 1\r\n        }\r\n        if (v == 15) {\r\n            return 2\r\n        }\r\n        return v\r\n    },\r\n    GetName:function(v){\r\n        if(!v) return \"\"\r\n        let names = [\"扑克A\",\"扑克2\",\"扑克3\",\"扑克4\",\"扑克5\",\"扑克6\",\"扑克7\",\"扑克8\",\"扑克9\",\r\n        \"扑克10\",\"扑克J\",\"扑克Q\",\"扑克K\",\"小鬼\",\"大鬼\"]\r\n        return names[v-1] || \"\"\r\n    },\r\n    Sure:function(){\r\n//        [\"方块\",      \"草花\" ，   \"红桃\" , \"黑桃\" ]\r\n// 1: (4) [\"0x0e\" 14, \"0x1e\" 30, \"0x2e\" 46, \"0x3e\" 62]\r\n// 2: (3) [\"0x02\" 2, \"0x12\" 18, \"0x22\" 34]\r\n// 3: (3) [\"0x03\" 3, \"0x13\" 19, \"0x23\" 35]\r\n// 4: (3) [\"0x04\" 4, \"0x14\" 20， \"0x24\" 36]\r\n// 5: (3) [\"0x05\" 5, \"0x15\" 21, \"0x25\" 37] \r\n// 6: (3) [\"0x06\" 6, \"0x16\" 22, \"0x26\" 38]\r\n// 7: (3) [\"0x07\" 7, \"0x17\" 23, \"0x27\" 39]\r\n// 8: (3) [\"0x08\" 8, \"0x18\" 24, \"0x28\" 40]\r\n// 9: (3) [\"0x09\" 9, \"0x19\" 25, \"0x29\" 41]\r\n// 10: (4) [\"0x0a\" 10, \"0x1a\" 26, \"0x2a\" 42, \"0x3a\"58]\r\n// 11: (4) [\"0x0b\" 11, \"0x1b\" 27, \"0x2b\" 43, \"0x3b\"59]\r\n// 12: (4) [\"0x0c\" 12, \"0x1c\" 28, \"0x2c\" 44, \"0x3c\" 60]\r\n// 13: (4) [\"0x0d\" 13, \"0x1d\" 29, \"0x2d\" 45, \"0x3d\" 61]\r\n// 14: (8) [\"0x42\" 66, \"0x43\" 67, \"0x44\" 68, \"0x45\" 69, \"0x46\" 70, \"0x47\" 71, \"0x48\" 72 , \"0x49\" 73]\r\n        // let bg = this.node.getChildByName(\"bg\")\r\n        console.log('点击了确认按钮')\r\n         let test = []\r\n        // [0x3e,0x2d,0x1d,0x3b,0x25,0x05,0x24,0x43,0x3c,0x45,0x17,0x47,0x42]\r\n        //  [0x3e,0x12,0x22,0x25,0x08,0x09,0x1b,0x3b,0x2c,0x3c,0x42,0x43,0x45]\r\n        // [0x2e,0x1e,0x13,0x24,0x06,0x16,0x27,0x0a,0x3a,0x0b,0x0c,0x42,0x44]\r\n        // for (let i = 0; i < bg.children.length; i++) {\r\n        //     const element = bg.children[i].name;\r\n        //     if (!this.cardMap[element] || this.cardMap[element].length == 0) continue\r\n        //     let num = parseInt(bg.children[i].getChildByName(\"num\").getComponent(cc.Label).string)\r\n        //     for (let index = 0; index < Math.min(num, this.cardMap[element].length); index++) {\r\n        //         test.push(parseInt(this.cardMap[element][index]))\r\n        //     }\r\n        // }\r\n        if(this.cardArr.length < 13){\r\n            app[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"请选择13张牌\");\r\n            return\r\n        }\r\n      \r\n        \r\n         for (let i = 0; i < 13; i++) {\r\n          \r\n         \r\n          test.push(parseInt(this.cardArr[i]))\r\n            \r\n        }\r\n        console.log(test)\r\n   \r\n\r\n        if(!this.RoomMgr) return;\r\n\t\r\n        if(!this.roomID) return;\r\n        let that = this\r\n// 传9988 设置测试牌\r\n        this.SendChat(5, 9988, this.roomID, JSON.stringify(test),(msg)=>{\r\n            console.log(msg)\r\n            if(msg.code == \"Success\")\r\n            {\r\n                this.ShowSysMsg(msg.msg);\r\n                that.CloseForm()\r\n                this.cardArr = []\r\n            }\r\n        });\r\n        console.log(test)\r\n    },\r\n    Add:function(event){\r\n        let bg = this.node.getChildByName(\"bg\")\r\n        let key = event.target.parent.name\r\n        let num = parseInt(bg.getChildByName(key).getChildByName(\"num\").getComponent(cc.Label).string)\r\n        num ++\r\n        if (this.totalNum >= 13) return\r\n        if (num > this.cardMap[key].length) {\r\n            num = this.cardMap[key].length\r\n        }\r\n        else{\r\n            this.totalNum ++\r\n        }\r\n        bg.getChildByName(key).getChildByName(\"num\").getComponent(cc.Label).string = num\r\n    },\r\n    Del:function(event){\r\n        let bg = this.node.getChildByName(\"bg\")\r\n        let key = event.target.parent.name\r\n        let num = parseInt(bg.getChildByName(key).getChildByName(\"num\").getComponent(cc.Label).string)\r\n        num --\r\n        if (num < 0) {\r\n            num = 0\r\n        }\r\n        else{\r\n            this.totalNum --\r\n        }\r\n        bg.getChildByName(key).getChildByName(\"num\").getComponent(cc.Label).string = num\r\n    },\r\n    SendChat:function (type, quickID, roomID, content,success) {\r\n\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"Chat\", \r\n        {\"type\":type, \"quickID\":quickID, \"targetID\":roomID, \"content\":content}, success);\r\n\t},\r\n    \r\n        \r\n\tShowCard: function (cardType, btnNode) {\r\n\t\tlet newPoker = this.PokerCard.SubCardValue(cardType);\r\n\t\tthis.PokerCard.GetPokeCard(newPoker, btnNode);\r\n\r\n\t\tbtnNode.getChildByName(\"poker_back\").active = false;\r\n\t\tbtnNode.active = true\r\n\t\tcc.tween(btnNode).delay(0.1).to(0.01,{opacity:255}).start()\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) return;\r\n\r\n\t\tlet child = btnNode.getChildByName(\"icon_mapai\");\r\n\t\tlet kexuanwanfa = room.GetRoomConfigByProperty(\"kexuanwanfa\");\r\n\t\tif (kexuanwanfa.length > 0) {\r\n\t\t\tif (kexuanwanfa.indexOf(0) > -1) {\r\n\t\t\t\tlet maPaiValue = room.GetRoomSet().GetRoomSetProperty(\"mapai\");\r\n\t\t\t\tif (newPoker == maPaiValue) {\r\n\t\t\t\t\tchild.active = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchild.active = false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tchild.active = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n    Click_card: function (clickNode) {\r\n\t\r\n\r\n        \r\n\r\n        let element = clickNode.node.element;\r\n\r\n         const isContained = this.cardArr.includes(element);\r\n         if(!isContained){\r\n            if(this.cardArr.length >= 13) {\r\n                console.log('已选13张');\r\n                return;\r\n             }\r\n            this.cardArr.push(element)\r\n            clickNode.node.y += this.ChooseCardAddOffY;\r\n         }else {\r\n            let index = this.cardArr.indexOf(element);\r\n           if (index !== -1) {\r\n             this.cardArr.splice(index, 1);\r\n             }\r\n           \r\n            clickNode.node.y -= this.ChooseCardAddOffY;\r\n         }\r\n\r\n         console.log(this.cardArr)\r\n\t\t//  clickNode.node.getChildByName(\"bg_black\").active = true;\r\n\t\t// let reg = new RegExp(\"btn_\", \"g\");\r\n\t\t// if (btnName.indexOf(\"btn_\") != -1) {\r\n\t\t// \tvar result = btnName.replace(reg, \"\");\r\n\t\t// \tbtnName = result;\r\n\t\t// }\r\n\t\t// let cardIdx = btnName.toString();\r\n        \t// btnNode.y = this.InitBtnCardPosY;\r\n\t\t\t// let bSelected = this.LogicRank.CheckSelected(cardType);\r\n\t\t\t// if (bSelected) {\r\n\t\t\t\r\n\t\t\t// }\r\n            this.ShowCard(clickNode.node.element, clickNode.node);\r\n\r\n          \r\n\t\t// if (clickNode.node.y == this.InitBtnCardPosY) {\r\n        //     clickNode.node.position = cc.v2(clickNode.node.x, this.ChooseCardAddOffY);\r\n        //     console.log('1111111111');\r\n        //     // clickNode.node.setPosition(clickNode.node.x,this.ChooseCardAddOffY);\r\n\t\t// \t// this.LogicRank.SetCardSelected(cardIdx);\r\n\t\t// \t// this.HuHuanPai();\r\n\t\t// } else {\r\n\t\t// \t// this.LogicRank.DeleteCardSelected(cardIdx);\r\n        //     console.log('2222222222');\r\n        //     clickNode.node.position = cc.v2(clickNode.node.x, this.ChooseCardAddOffY);\r\n        //     // clickNode.node.setPosition(clickNode.node.x,this.InitBtnCardPosY);\r\n\t\t// }\r\n\t},\r\n\tHuHuanPai: function () {\r\n\t\tfor (let key in this.clickDunDict) {\r\n\t\t\tif (this.clickDunDict[key][3]) {\r\n\t\t\t\tthis.LogicRank.ClearOneCard(this.clickDunDict[key][0], this.clickDunDict[key][1]);\r\n\t\t\t\tthis.LogicRank.AutoSetDun();\r\n\t\t\t\tthis.reSortCards();\r\n\t\t\t\tthis.disabledBtn();\r\n\t\t\t}\r\n\t\t\tthis.clickDunDict[key][2].clickNum = 0;\r\n\t\t\tthis.clickDunDict[key][2].children[0].y = 0;\r\n\t\t\tthis.clickDunDict[key][3] = false;\r\n\t\t}\r\n\t}\r\n});\r\n"]}