{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ/assets\\script\\game\\FJSSZ\\UILSDunCards.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ","sourcesContent":["\r\nconst {ccclass, property} = cc._decorator;\r\nvar app = require(\"fjssz_app\");\r\n@ccclass\r\nexport default class UILSDunCards extends cc.Component {\r\n\r\n    posVec : cc.Vec2[] = []\r\n    angleVec : number[] = []\r\n    onLoad(){\r\n        for (let i = 1; i <= 13; i++) {\r\n\t\t\tlet node = this.node.getChildByName(\"dun_card\" + i)\r\n            this.posVec.push(cc.v2( node.x, node.y))\r\n            this.angleVec.push(0/*node.angle*/)\r\n            node.zIndex = i\r\n\t\t}\r\n        if(this.node.getChildByName(\"img_special\")){\r\n            this.node.getChildByName(\"img_special\").zIndex = cc.macro.MAX_ZINDEX\r\n        }\r\n        if (this.node.getChildByName(\"show\")) {\r\n            this.node.getChildByName(\"show\").zIndex = cc.macro.MAX_ZINDEX\r\n        }\r\n        if (this.node.getChildByName(\"reset\")) {\r\n            this.node.getChildByName(\"reset\").zIndex = cc.macro.MAX_ZINDEX\r\n        }\r\n    }\r\n    startAni() {\r\n        this.stopWaitAnim()\r\n        this.schedule(this.playWaitAnim.bind(this), 2, 99999,0.0)\r\n        let names = [\"dun_card3\", \"dun_card8\",\"dun_card13\"]\r\n        for (let dunIndex = 0; dunIndex < names.length; dunIndex++) {\r\n            let node = this.node.getChildByName(names[dunIndex]).getChildByName(\"tag\")\r\n            if(node) node.active = false\r\n        }\r\n        this.resetIndex()\r\n    }\r\n\r\n    stopWaitAnim()\r\n    {\r\n        this.unscheduleAllCallbacks()\r\n        for (let i = 1; i <= 13; i++) {\r\n\t\t\tlet node = this.node.getChildByName(\"dun_card\" + i)\r\n            node.x = this.posVec[i-1].x\r\n            node.y = this.posVec[i-1].y\r\n            node.angle = this.angleVec[i-1]\r\n            node.stopAllActions()\r\n        }\r\n    }\r\n\r\n    resetAngle()\r\n    {\r\n        for (let i = 1; i <= 13; i++) {\r\n\t\t\tlet node = this.node.getChildByName(\"dun_card\" + i)\r\n            node.x = this.posVec[i-1].x\r\n            node.y = this.posVec[i-1].y\r\n            node.angle = 0\r\n        }\r\n    }\r\n\r\n    playWaitAnim () {\r\n        // let m = this.node.getChildByName(\"dun_card11\")\r\n        // for (let i = 1; i <= 13; i++) {\r\n\t\t// \tlet node = this.node.getChildByName(\"dun_card\" + i)\r\n        //     if (i <= 3) {\r\n        //         cc.tween(node).delay(0.4)\r\n        //         .to(0.2, {position:this.posVec[i-1]})\r\n        //         .to(0.15, {angle:this.angleVec[i-1]})\r\n        //         .delay(1)\r\n        //         .to(0.2, {angle:0,position:cc.v2(m.x,m.y)})\r\n        //         .start()\r\n        //     }\r\n        //     else if (i <= 8) {\r\n        //         cc.tween(node).delay(0.2)\r\n        //         .to(0.2, {position:this.posVec[i-1]})\r\n        //         .to(0.15, {angle:this.angleVec[i-1]})\r\n        //         .delay(1.2)\r\n        //         .to(0.2, {angle:0,position:cc.v2(m.x,m.y)})\r\n        //         .start()\r\n        //     }\r\n        //     else{\r\n        //         cc.tween(node)\r\n        //         .to(0.2, {position:this.posVec[i-1]})\r\n        //         .to(0.15, {angle:this.angleVec[i-1]})\r\n        //         .delay(1.4)\r\n        //         .to(0.2, {angle:0,position:cc.v2(m.x,m.y)})\r\n        //         .start()\r\n        //     }\r\n\t\t// }\r\n    }\r\n    showCardType(dunIndex, cardType){\r\n        let names = [\"dun_card3\", \"dun_card8\",\"dun_card13\"]\r\n        let node = this.node.getChildByName(names[dunIndex]).getChildByName(\"tag\")\r\n        if(!node) return\r\n        if (cardType == 9 || cardType == 10) {\r\n            cardType = 8\r\n        }\r\n        cc.loader.loadRes(\"texture/game/ls/play/cardType_\"+cardType, cc.SpriteFrame, function (error, spriteFrame) {\r\n            if(error){\r\n                return;\r\n            }\r\n            node.active = true\r\n            node.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n        });\r\n    }\r\n\r\n    fanPaiAction(dunIndex){\r\n        let s = [[1,3], [4, 8],[9,13]]\r\n        let s2 = s[dunIndex]\r\n        if(!s2) return\r\n        for (let i = s2[0]; i <= s2[1]; i++) {\r\n            let node = this.node.getChildByName(\"dun_card\" + i)\r\n            node.stopAllActions()\r\n            if(node.zIndex < 1000) node.zIndex = 1000+node.zIndex\r\n            cc.tween(node)\r\n            .to(0.1, {scale : 1.3})\r\n            .delay(0.45)\r\n            .to(0.1, {angle:0})\r\n            .delay(0.2)\r\n            .to(0.1, {scale : 1.0})\r\n            .call(()=>{\r\n                //if(node.zIndex >= 1000) node.zIndex = node.zIndex - 1000\r\n            })\r\n            .start()\r\n        }\r\n    }\r\n\r\n    touch(){\r\n        if (this.node.parent.parent && this.node.parent.parent.name == \"sp_seat00\") {\r\n            let ranked = app[app.subGameName.toUpperCase() + \"RoomSet\"]().GetRoomSetProperty(\"ranked\");\r\n            cc.log(ranked)\r\n            if(!ranked || !ranked.dunPos || !ranked.dunPos.first) return\r\n            var dunPos = ranked.dunPos\r\n\t\t\tlet cards = dunPos.first.concat(dunPos.second).concat(dunPos.third)\r\n            for (let i = 1; i <= 13; i++) {\r\n\t\t\t\tlet node = this.node.getChildByName(\"dun_card\" + i)\r\n\t\t\t\tapp.playuissz.ShowResultCard(cards[i-1] || 0, node)\r\n\t\t\t}\r\n            this.scheduleOnce(()=>{\r\n                for (let i = 1; i <= 13; i++) {\r\n                    let node = this.node.getChildByName(\"dun_card\" + i)\r\n                    node.getChildByName(\"poker_back\").active = true\r\n                }\r\n            }, 5)\r\n        }\r\n    }\r\n\r\n    reset(){\r\n        if (this.node.parent.parent && this.node.parent.parent.name == \"sp_seat00\") {\r\n            let ranked = app[app.subGameName.toUpperCase() + \"RoomSet\"]().GetRoomSetProperty(\"ranked\");\r\n            cc.log(ranked)\r\n            if(!ranked || !ranked.dunPos || !ranked.dunPos.first) return\r\n\t\t\tapp.playuissz.Click_btn_baipai()\r\n        }\r\n    }\r\n    resetIndex() {\r\n        let s = [[1,3], [4, 8],[9,13]]\r\n        for (let dunIndex = 0; dunIndex < 3; dunIndex++) {\r\n            let s2 = s[dunIndex]\r\n            if(!s2) continue\r\n            for (let i = s2[0]; i <= s2[1]; i++) {\r\n                let node = this.node.getChildByName(\"dun_card\" + i)\r\n                node.stopAllActions()\r\n                if(node.zIndex >= 1000) node.zIndex = node.zIndex-1000\r\n                node.rotation = 0\r\n            }\r\n        }\r\n    }\r\n    protected update(dt: number): void {\r\n        let showActive = true\r\n        let showReset = true\r\n        let node = this.node.getChildByName(\"dun_card1\")\r\n        if (!this.node.parent.parent || this.node.parent.parent.name != \"sp_seat00\") {\r\n            showActive = false\r\n            showReset = false\r\n        }else if(node.getChildByName(\"poker_back\").active == false){\r\n            showActive = false\r\n        }\r\n        let RoomMgr = app[app.subGameName.toUpperCase()+\"RoomMgr\"]();\r\n        let room = RoomMgr.GetEnterRoom();\r\n\t\tlet roomState = room.GetRoomProperty(\"state\");\r\n        if (roomState != app[app.subGameName + \"_ShareDefine\"]().RoomState_Playing) {\r\n            showActive = false\r\n            showReset = false\r\n        }\r\n        let ClientPos = RoomMgr.GetEnterRoom().GetRoomPosMgr().GetClientPos();\r\n        let myPosInfo = RoomMgr.GetEnterRoom().GetRoomPosMgr().GetPlayerInfoByPos(ClientPos);\r\n        if (!myPosInfo || !myPosInfo.isCardReady) {\r\n            showReset = false\r\n        }\r\n        if (this.node.getChildByName(\"show\")) {\r\n            this.node.getChildByName(\"show\").active = showActive\r\n        }\r\n        if (this.node.getChildByName(\"reset\")) {\r\n            this.node.getChildByName(\"reset\").active = showReset\r\n        }\r\n    }\r\n}\r\n"]}