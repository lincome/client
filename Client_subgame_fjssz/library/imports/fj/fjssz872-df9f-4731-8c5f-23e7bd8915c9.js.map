{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\net/assets\\script\\net\\fjssz_emitter.js"],"names":["module","exports","Emitter","obj","mixin","key","prototype","on","addEventListener","event","fn","target","_callbacks","isRegetEventByTarget","i","length","console","log","push","once","self","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","emit","args","slice","call","len","listeners","hasListeners"],"mappings":"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","file":"fjssz_emitter.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\net","sourcesContent":["\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nmodule.exports = Emitter;\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`. when occurred error, call errcb.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @param {Function} errcb\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn, target){\r\n\r\n  //注册回掉函数绑定运行对象\r\n  if(!target){\r\n    target = this;\r\n  }\r\n  fn.target = target;\r\n\r\n  this._callbacks = this._callbacks || {};\r\n  //同一个event只能被一个target注册一次\r\n  let isRegetEventByTarget = false;\r\n  if (this._callbacks[event]) {\r\n    for (let i = 0; i < this._callbacks[event].length; i++) {\r\n        if (this._callbacks[event][i].target == target) {\r\n          isRegetEventByTarget = true;\r\n          this._callbacks[event][i] = fn;\r\n          break;\r\n        }\r\n    }\r\n  }\r\n  if (isRegetEventByTarget) {\r\n    console.log(event +\" 事件已经被同一个target注册\");\r\n    return this;\r\n  }\r\n\r\n  (this._callbacks[event] = this._callbacks[event] || []).push(fn);\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn, target){\r\n  var self = this;\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  if(!target){\r\n    target = this;\r\n  }\r\n\r\n  function on() {\r\n    self.off(event, on);\r\n    fn.apply(target, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks[event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks[event];\r\n    return this;\r\n  }\r\n  \r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  \r\n  this._callbacks = this._callbacks || {};\r\n  var callbacks = this._callbacks[event];\r\n  if(!callbacks) {\r\n    return this\r\n  }\r\n\r\n  var args = [].slice.call(arguments, 1);\r\n\r\n  callbacks = callbacks.slice(0);\r\n\r\n  for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(callbacks[i].target, args);\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks[event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n"]}