{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ\\ui/assets\\script\\game\\FJSSZ\\ui\\UIFJSSZ_Result01.js"],"names":["app","require","cc","Class","extends","subGameName","properties","btn_share","Node","btn_exit","btn_xipai","btn_continue","sp_winLose","win","SpriteFrame","lose","ping","result_Item1","Prefab","icon_mapai","layout","OnCreateInit","SSSRoomMgr","toUpperCase","SSSRoomPosMgr","SoundManager","HeroManager","SSSRoomSet","PokerCard","ComTool","SDKManager","LogicSSSGame","RegEvent","Event_XiPai","showGameResult","allInfo","GetEnterRoom","GetRoomProperty","isCoinRoom","active","isXiPai","GetRoomSetProperty","allResultInfo","sRankingResult","posResultList","cardsInfo","rankeds","zjid","beishu","ShowResultNormal","room","playerResult","sortFun","a","b","posIdx","sort","infoIdx","length","data","hasCardsInfo","pid","GetHeroID","imagePath","shui","getComponent","Sprite","spriteFrame","PlaySound","path","vancacy","GetWndNode","no_vacancy","lb_path","winNode","loseNode","Label","string","head_path","name_path","id_path","card_path","special_path","zhuangjia_path","beishu_path","zj","bs","head","ShowHeroHead","playerInfo","GetPlayerInfoByPos","name","id","GetPid","cards","dunPos","sTag","cardIdx","special","that","loader","loadRes","error","ErrLog","pokers","first","concat","second","third","tonghuas","SanTongHua","ShowAllCard","i","cardNode","getChildByName","toString","ShowResultCard","OnShow","FormManager","CloseForm","removeAllChildren","playerCount","GetPosCount","idx","item","instantiate","addChild","OnClick","btnName","btnNode","SendPack","practiceId","OnSuccess","bind","OnEnterRoomFailed","console","roomID","SendContinueGame","ShareScreen","AddDefaultFormName","LoadScene","self","event","cardType","node","newPoker","SubCardValue","GetPokeCard","child","removeFromParent","maPaiValue","GetRoomSet","icon","sp","addComponent","serverPack"],"mappings":"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","file":"UIFJSSZ_Result01.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ\\ui","sourcesContent":["var app = require(\"fjssz_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n        btn_share:cc.Node,\r\n        btn_exit:cc.Node,\r\n        btn_xipai:cc.Node,\r\n        btn_continue:cc.Node,\r\n        sp_winLose:cc.Node,\r\n        win:cc.SpriteFrame,\r\n        lose:cc.SpriteFrame,\r\n        ping:cc.SpriteFrame,\r\n        result_Item1:cc.Prefab,\r\n        icon_mapai:cc.SpriteFrame,\r\n        layout:cc.Node,\r\n    },\r\n\r\n    OnCreateInit: function () {\r\n\r\n        this.SSSRoomMgr = app[app.subGameName.toUpperCase() + \"RoomMgr\"]();\r\n        this.SSSRoomPosMgr = app[app.subGameName.toUpperCase() + \"RoomPosMgr\"]();\r\n        this.SoundManager = app[app.subGameName + \"_SoundManager\"]();\r\n        this.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n        this.SSSRoomSet = app[app.subGameName.toUpperCase() + \"RoomPosSet\"]();\r\n        this.PokerCard = app[app.subGameName + \"_PokerCard\"]();\r\n        this.ComTool = app[app.subGameName+\"_ComTool\"]();\r\n        this.SDKManager = app[app.subGameName + \"_SDKManager\"]();\r\n        this.LogicSSSGame = app[app.subGameName.toUpperCase() + \"LogicGame\"]();\r\n\r\n        this.RegEvent(\"Event_XiPai\", this.Event_XiPai);\r\n    },\r\n\r\n    showGameResult:function(){\r\n        let allInfo = this.SSSRoomMgr.GetEnterRoom().GetRoomProperty(\"resultInfo\");\r\n\r\n        if(!app[app.subGameName + \"_ShareDefine\"]().isCoinRoom){\r\n            this.btn_exit.active = false;\r\n            this.btn_xipai.active = true;\r\n            let isXiPai = this.SSSRoomSet.GetRoomSetProperty(\"isXiPai\");\r\n            if(isXiPai){\r\n                this.btn_xipai.active = false;\r\n            }\r\n            else{\r\n                this.btn_xipai.active = true;\r\n            }\r\n        }\r\n        else{\r\n            this.btn_exit.active = true;\r\n            this.btn_xipai.active = false;\r\n        }\r\n\r\n        if(allInfo){\r\n            //正常结算\r\n            let allResultInfo = allInfo.sRankingResult.posResultList;\r\n            let cardsInfo = allInfo.sRankingResult.rankeds;\r\n            this.zjid = allInfo.sRankingResult.zjid;\r\n            this.beishu = allInfo.sRankingResult.beishu;\r\n            this.ShowResultNormal(allResultInfo, cardsInfo);\r\n        }else{\r\n            //中途退出然后进入结算\r\n            let room = this.SSSRoomMgr.GetEnterRoom();\r\n            //每局的水数\r\n            let playerResult = room.GetRoomProperty(\"posResultList\");\r\n            let rankeds = room.GetRoomProperty('rankeds');\r\n            this.zjid = room.GetRoomProperty('zjid');\r\n            this.beishu = room.GetRoomProperty('beishu');\r\n            this.ShowResultNormal(playerResult, rankeds);\r\n        }\r\n        \r\n    },\r\n\r\n    sortFun:function(a, b){\r\n        return a.posIdx - b.posIdx;\r\n    },\r\n\r\n    ShowResultNormal:function(allResultInfo, cardsInfo){\r\n        //先排序一下\r\n        allResultInfo.sort(this.sortFun);\r\n\r\n        for (let infoIdx = 0; infoIdx < allResultInfo.length; infoIdx++) {\r\n            let data = allResultInfo[infoIdx];\r\n            let hasCardsInfo = false;\r\n            for (let a = 0; a < cardsInfo.length; a++) {\r\n                if (data.pid == cardsInfo[a].pid) {\r\n                    hasCardsInfo = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!hasCardsInfo) continue;\r\n            \r\n            //显示胜利或失败图片和音效\r\n            if(data.pid == this.HeroManager.GetHeroID()){\r\n                let imagePath = \"\";\r\n                if(data.shui > 0){\r\n                    this.sp_winLose.getComponent(cc.Sprite).spriteFrame = this.win;\r\n                    this.SoundManager.PlaySound(\"sssResult_Win\");\r\n                }\r\n                else if(data.shui == 0){\r\n                    this.sp_winLose.getComponent(cc.Sprite).spriteFrame = this.ping;\r\n                    this.SoundManager.PlaySound(\"sssResult_Ping\");\r\n                }else{\r\n                    this.sp_winLose.getComponent(cc.Sprite).spriteFrame = this.lose;\r\n                    this.SoundManager.PlaySound(\"sssResult_Lose\");\r\n                }\r\n            }\r\n\r\n            let path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/vacancy\";\r\n            let vancacy = this.GetWndNode(path);\r\n            vancacy.active = false;\r\n\r\n            path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy\"\r\n            let no_vacancy = this.GetWndNode(path);\r\n            no_vacancy.active = true;\r\n\r\n            //玩家水数\r\n            let lb_path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy/lb_win\";\r\n            let winNode = this.GetWndNode(lb_path);\r\n            lb_path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy/lb_lose\";\r\n            let loseNode = this.GetWndNode(lb_path);\r\n            winNode.active = false;\r\n            loseNode.active = false;\r\n\r\n            let shui = data.shui;\r\n            if(shui >= 0){\r\n                winNode.active = true;\r\n                winNode.getComponent(cc.Label).string = \"+\" + shui;\r\n            }\r\n            else{\r\n                loseNode.active = true;\r\n                loseNode.getComponent(cc.Label).string = shui;\r\n            }\r\n\r\n            //玩家头像\r\n            let head_path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy/touxiang/btn_head\";\r\n            let name_path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy/lb_name\";\r\n            let id_path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy/lb_id\";\r\n            let card_path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy/cardNode\";\r\n            let special_path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy/special_tag\";\r\n            let zhuangjia_path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy/zhuangjia\";\r\n            let beishu_path = \"bg/layout\" + \"/result_Item\" + infoIdx + \"/no_vacancy/beishu\";\r\n\r\n            //显示庄家\r\n            let zj = this.GetWndNode(zhuangjia_path);\r\n            let bs = this.GetWndNode(beishu_path);\r\n            zj.active = false;\r\n            bs.active = false;\r\n            if(this.zjid == data.pid){\r\n                zj.active = true;\r\n                //显示倍数\r\n                if(this.beishu != 0){\r\n                    bs.active = true;\r\n                    bs.getComponent(cc.Label).string = \"x\"+this.beishu;\r\n                }\r\n            }\r\n            \r\n            let head = this.GetWndNode(head_path).getComponent(app.subGameName + \"_WeChatHeadImage\");\r\n            head.ShowHeroHead(data.pid);\r\n            //玩家名字\r\n            let playerInfo = this.SSSRoomPosMgr.GetPlayerInfoByPos(data.posIdx);\r\n            \r\n            let name = this.GetWndNode(name_path).getComponent(cc.Label);\r\n            name.string = playerInfo[\"name\"];\r\n\r\n            let id = this.GetWndNode(id_path).getComponent(cc.Label);\r\n            id.string = this.ComTool.GetPid(playerInfo[\"pid\"]);\r\n\r\n            let cards = this.GetWndNode(card_path);\r\n\r\n            let dunPos = {};\r\n            let sTag = -1;\r\n            for(var cardIdx = 0;cardIdx<cardsInfo.length;cardIdx++){\r\n                if(playerInfo.pid == cardsInfo[cardIdx].pid){\r\n                    dunPos = cardsInfo[cardIdx].dunPos;\r\n                    sTag = cardsInfo[cardIdx].special;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if(sTag != -1){\r\n                //显示特殊牌型\r\n                let special = this.GetWndNode(special_path);\r\n                special.active = true;\r\n                let imagePath = \"texture/game/sss/special/special_\" + sTag;\r\n                //加载图片精灵\r\n                let that = this;\r\n                cc.loader.loadRes(imagePath, cc.SpriteFrame, function (error, spriteFrame) {\r\n                    if(error){\r\n                        that.ErrLog(\"ShowMap imagePath(%s) loader error:%s\", imagePath, error);\r\n                        return;\r\n                    }\r\n                    special.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n                });\r\n            }\r\n\r\n            if(sTag == 85 || sTag == 95){\r\n                let pokers = dunPos.first.concat(dunPos.second,dunPos.third);\r\n                let tonghuas = this.LogicSSSGame.SanTongHua(pokers);\r\n                dunPos.first = tonghuas[0];\r\n                dunPos.second = tonghuas[1];\r\n                dunPos.third = tonghuas[2];\r\n            }\r\n    \r\n            this.ShowAllCard(dunPos, cards);\r\n        }\r\n    },\r\n\r\n    ShowAllCard:function(dunPos, cards){\r\n        for (let i = 0; i < dunPos.first.length; i++) {\r\n            let cardNode = cards.getChildByName(\"dun_card\"+(i+1).toString());\r\n            this.ShowResultCard(dunPos.first[i], cardNode);\r\n        }\r\n\r\n        for (let i = 0; i < dunPos.second.length; i++) {\r\n            let cardNode = cards.getChildByName(\"dun_card\"+(i+4).toString());\r\n            this.ShowResultCard(dunPos.second[i], cardNode);\r\n        }\r\n\r\n        for (let i = 0; i < dunPos.third.length; i++) {\r\n            let cardNode = cards.getChildByName(\"dun_card\"+(i+9).toString());\r\n            this.ShowResultCard(dunPos.third[i], cardNode);\r\n        }\r\n    },\r\n\r\n    OnShow:function(){\r\n        this.FormManager.CloseForm(\"game/SSS/UISSS_CardType\");\r\n        this.FormManager.CloseForm(\"UIChat\");\r\n        this.btn_xipai.active = true;\r\n        this.layout.removeAllChildren();\r\n        this.playerCount = this.SSSRoomPosMgr.GetPosCount();\r\n        for(let idx = 0; idx < 8; idx++){\r\n            let item = cc.instantiate(this.result_Item1);\r\n            item.name = \"result_Item\" + idx;\r\n            item.getChildByName(\"vacancy\").active = true;\r\n            item.getChildByName(\"no_vacancy\").active = false;\r\n            this.layout.addChild(item);\r\n        }\r\n        this.showGameResult();\r\n    },\r\n\r\n    OnClick:function(btnName, btnNode){\r\n\r\n        if(btnName == \"btn_goon\"){\r\n            //this.CloseForm();\r\n            if(app[app.subGameName + \"_ShareDefine\"]().isCoinRoom){\r\n                app[app.subGameName + \"_NetManager\"]().SendPack('game.CGoldRoom', {practiceId:app[app.subGameName + \"_ShareDefine\"]().practiceId}, this.OnSuccess.bind(this),this.OnEnterRoomFailed.bind(this));\r\n            }\r\n            else{\r\n                let room = this.SSSRoomMgr.GetEnterRoom();\r\n                if(!room){\r\n                    console.error(\"Click_btn_ready not enter room\");\r\n                    return\r\n                }\r\n                let roomID = room.GetRoomProperty(\"roomID\");\r\n                app[app.subGameName + \"_GameManager\"]().SendContinueGame(roomID);\r\n            }\r\n            //this.SSSRoomMgr.SendContinueGame(roomID);\r\n        }\r\n        else if(btnName == \"btn_share\"){\r\n            this.SDKManager.ShareScreen();\r\n        }\r\n        else if(btnName == \"btn_exit\"){\r\n            app[app.subGameName + \"_FormManager\"]().AddDefaultFormName(\"UIPractice\");\r\n            app[app.subGameName + \"_SceneManager\"]().LoadScene(\"mainScene\");\r\n        }\r\n        else if(btnName == \"btn_xipai\"){\r\n            let room = this.SSSRoomMgr.GetEnterRoom();\r\n            if(!room)  return;\r\n            let roomID = room.GetRoomProperty(\"roomID\");\r\n            let self = this;\r\n            app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"XiPai\", {\"roomID\":roomID});\r\n        }\r\n    },\r\n\r\n    Event_XiPai:function(event){\r\n        //this.btn_xipai.active = false;\r\n    },\r\n\r\n    ShowResultCard:function(cardType, node){\r\n        let newPoker = this.PokerCard.SubCardValue(cardType);\r\n        this.PokerCard.GetPokeCard(newPoker, node);\r\n        \r\n        node.getChildByName(\"poker_back\").active = false;\r\n\r\n        let room = this.SSSRoomMgr.GetEnterRoom();\r\n        if(!room)  return;\r\n\r\n        let child = node.getChildByName(\"icon_mapai\");\r\n        if(child){\r\n            child.removeFromParent();\r\n        }\r\n        let maPaiValue = room.GetRoomSet().GetRoomSetProperty(\"mapai\");\r\n        if(newPoker == maPaiValue){\r\n            let icon = new cc.Node();\r\n            icon.name = \"icon_mapai\";\r\n            let sp = icon.addComponent(cc.Sprite);\r\n            sp.spriteFrame = this.icon_mapai;\r\n            node.addChild(icon);\r\n        }\r\n    },\r\n\r\n    OnSuccess:function(serverPack){\r\n        let roomID = serverPack.roomID;\r\n        app[app.subGameName + \"_NetManager\"]().SendPack('sss.CSSSGetRoomInfo', {\"roomID\":roomID});\r\n    },\r\n\r\n    OnEnterRoomFailed:function(serverPack){\r\n        app[app.subGameName + \"_SceneManager\"]().LoadScene(\"mainScene\");\r\n    },\r\n});\r\n"]}