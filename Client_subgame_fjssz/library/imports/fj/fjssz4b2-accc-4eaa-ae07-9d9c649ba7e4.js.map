{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ\\RoomLogic/assets\\script\\game\\FJSSZ\\RoomLogic\\FJSSZRoomPosMgr.js"],"names":["app","require","FJSSZRoomPosMgr","BaseClass","extend","Init","JS_Name","ComTool","subGameName","ShareDefine","WeChatManager","OnReload","Log","dataInfo","clientPos","downPos","upPos","facePos","fivePos","sixPos","sevenPos","eightPos","posCount","posId","isLook","OnInitRoomPosData","roomPosInfoList","realPosCount","heroImageUrlDict","heroID","GetHeroID","length","LookCount","index","roomPosInfo","pid","pos","headImageUrl","InitHeroHeadImageByDict","GetRoomPlayerCount","OnPosLeave","playerInfo","console","error","OnSetStart","posInfo","i","data","idx","isPlaying","OnChangeStatus","OnPosOpCard","serverPack","isFlash","falshCnt","OnPosUpdate","InitHeroHeadImage","heroID2","onPosJifen","player","posIdx","point","shui1","onPosSportsPoint","sportsPoint","onPosTotalJifen","posList","OnPosIsReady","isReady","isCardReady","reSetCardReady","OnPosReadyChg","roomReady","GetNoReadyNum","j","OnPosContinueGame","OnSetEnd","setEnd","OnSportsPointChange","log","sp","parseFloat","toFixed","addSp","totalSp","GetPlayerReadyState","roomSetID","ReadyState","GetPlayerInfoByPos","SetPlayerOfflineState","isLostConnect","isShowLeave","hasOwnProperty","GetRoomAllPlayerInfo","GetPlayerInfoByPid","GetIsLook","GetClientPos","GetClientUpPos","GetClientDownPos","GetClientFacePos","GetClientFivePos","GetClientSixPos","GetClientSevenPos","GetClientEightPos","GetPosCount","GetUIPosByDataPos","dataPos","back","g_FJSSZRoomPosMgr","exports","GetModel"],"mappings":"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","file":"FJSSZRoomPosMgr.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ\\RoomLogic","sourcesContent":["/*\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @copyright: Copyright (c) 2004, 2010 Xiamen DDM Network Technology Co.,Ltd., All rights reserved.\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @package FJSSZRoomPosMgr.js\r\n *  @todo: 自由扑克房间\r\n *\r\n *  @author hongdian\r\n *  @date 2014-10-30 16:04\r\n *  @version 1.0\r\n *\r\n *  修改时间 修改人 修改内容\r\n *  -------------------------------------------------------------------------------\r\n *\r\n */\r\nvar app = require(\"fjssz_app\");\r\n\r\n/**\r\n * 类构造\r\n */\r\nvar FJSSZRoomPosMgr = app.BaseClass.extend({\r\n\r\n\t/**\r\n\t * 初始化\r\n\t */\r\n\tInit: function () {\r\n\r\n\t\tthis.JS_Name = \"FJSSZRoomPosMgr\";\r\n\r\n\t\tthis.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n\t\tthis.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n\t\tthis.WeChatManager = app[app.subGameName + \"_WeChatManager\"]();\r\n\r\n\t\t// S2228_LostConnect\r\n\t\tthis.OnReload();\r\n\r\n\t\tthis.Log(\"Init\");\r\n\r\n\r\n\t},\r\n\r\n\tOnReload: function () {\r\n\t\t//{\r\n\t\t//\t1:{\r\n\t\t//\t\t\"pos\":pos,\r\n\t\t//\t\t\"pid\":pid,//pid=0未有玩家坐下\r\n\t\t//\t\t\"name\":name,\r\n\t\t//\t\t\"roomReady\":false,\r\n\t\t//\t\t\"gameReady\":false,\r\n\t\t//\t\t\"giveUpGame\":0,\r\n\t\t//\t\t\"point\":100,\r\n\t\t//\t\t\"flashCnt\":10,\r\n\t\t//\t\t\"paiPin\":100,\r\n\t\t//\t\t\"up\":10,\r\n\t\t//\t\t\"down\":10\r\n\t\t// \t\t\"isLostConnect\":false\r\n\t\t// },\r\n\t\t//}\r\n\t\tthis.dataInfo = {};\r\n\r\n\t\tthis.clientPos = 0;\r\n\t\tthis.downPos = -1;\r\n\t\tthis.upPos = -1;\r\n\t\tthis.facePos = -1;\r\n\t\tthis.fivePos = -1;\r\n\t\tthis.sixPos = -1;\r\n\t\tthis.sevenPos = -1;\r\n\t\tthis.eightPos = -1;\r\n\t\tthis.posCount = -1;\r\n\t\tthis.posId = -1\r\n\t\tthis.isLook = false\r\n\t},\r\n\r\n\r\n\t//-----------------------回调函数-----------------------------\r\n\tOnInitRoomPosData: function (roomPosInfoList) {\r\n\t\tthis.dataInfo = {};\r\n\r\n\t\tthis.clientPos = 0;\r\n\t\tthis.downPos = -1;\r\n\t\tthis.upPos = -1;\r\n\t\tthis.facePos = -1;\r\n\t\tthis.fivePos = -1;\r\n\t\tthis.sixPos = -1;\r\n\t\tthis.sevenPos = -1;\r\n\t\tthis.eightPos = -1;\r\n\t\tthis.posCount = -1;\r\n\t\tthis.realPosCount = 0;\r\n\t\tthis.isLook = false\r\n\t\tthis.posId = -1\r\n\t\tlet heroImageUrlDict = {};\r\n\t\tlet heroID = app[app.subGameName + \"_HeroManager\"]().GetHeroID();\r\n\t\tthis.posCount = roomPosInfoList.length - this.ShareDefine.LookCount;\r\n\t\tfor (let index = 0; index < roomPosInfoList.length; index++) {\r\n\t\t\tlet roomPosInfo = roomPosInfoList[index];\r\n\t\t\tlet pid = roomPosInfo[\"pid\"];\r\n\t\t\tif (pid == heroID) {\r\n\t\t\t\tthis.isLook = roomPosInfo.isLook;\r\n\t\t\t\tthis.posId = roomPosInfo.pos\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let index = 0; index < this.posCount; index++) {\r\n\t\t\tlet roomPosInfo = roomPosInfoList[index];\r\n\t\t\tlet pos = roomPosInfo[\"pos\"];\r\n\t\t\tthis.dataInfo[pos] = roomPosInfo;\r\n\r\n\t\t\tlet pid = roomPosInfo[\"pid\"];\r\n\t\t\tlet headImageUrl = roomPosInfo[\"headImageUrl\"];\r\n\t\t\tif (pid == heroID) {\r\n\t\t\t\tthis.clientPos = pos;\r\n\t\t\t}\r\n\t\t\tif (pid && headImageUrl) {\r\n\t\t\t\theroImageUrlDict[pid] = headImageUrl;\r\n\t\t\t\tthis.realPosCount++;\r\n\t\t\t}\r\n\t\t\tif (pid == 0) {\r\n\t\t\t\troomPosInfo[\"roomReady\"] = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.WeChatManager.InitHeroHeadImageByDict(heroImageUrlDict);\r\n\t\tthis.Log(\"OnInitRoomPosData:\", this.dataInfo);\r\n\t},\r\n\t//获取房间有几个玩家\r\n\tGetRoomPlayerCount: function () {\r\n\t\treturn this.posCount;\r\n\t},\r\n\r\n\tOnPosLeave: function (pos) {\r\n\t\tlet playerInfo = this.dataInfo[pos];\r\n\t\tif (!playerInfo) {\r\n\t\t\tconsole.error(\"OnPosLeave not find:%s\", pos);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tplayerInfo[\"pid\"] = 0;\r\n\t\tplayerInfo[\"name\"] = 0;\r\n\t\tplayerInfo[\"roomReady\"] = false;\r\n\t\tplayerInfo[\"gameReady\"] = false;\r\n\t\tplayerInfo[\"giveUpGame\"] = 0;\r\n\t\tplayerInfo[\"point\"] = 0;\r\n\t\tplayerInfo[\"flashCnt\"] = 0;\r\n\t\tplayerInfo[\"paiPin\"] = 0;\r\n\t\tplayerInfo[\"up\"] = 0;\r\n\t\tplayerInfo[\"down\"] = 0;\r\n\t},\r\n\tOnSetStart: function (posInfo) {\r\n\t\tfor (let i = 0; i < posInfo.length; i++) {\r\n\t\t\tlet data = posInfo[i];\r\n\t\t\tfor (let idx in this.dataInfo) {\r\n\t\t\t\tif (data.pid == this.dataInfo[idx].pid) {\r\n\t\t\t\t\tthis.dataInfo[idx].isPlaying = data.isPlaying;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tOnChangeStatus: function (posInfo) {\r\n\t\tfor (let i = 0; i < posInfo[\"posList\"].length; i++) {\r\n\t\t\tlet data = posInfo[\"posList\"][i];\r\n\t\t\tfor (let idx in this.dataInfo) {\r\n\t\t\t\tif (data.pid == this.dataInfo[idx].pid) {\r\n\t\t\t\t\tthis.dataInfo[idx].isPlaying = data.isPlaying;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tOnPosOpCard: function (serverPack) {\r\n\t\tlet isFlash = serverPack[\"isFlash\"];\r\n\t\tlet pos = serverPack[\"pos\"];\r\n\t\tlet falshCnt = this.dataInfo[pos][\"flashCnt\"];\r\n\t\tif (isFlash) {\r\n\t\t\tfalshCnt++;\r\n\t\t\tthis.dataInfo[pos][\"flashCnt\"] = falshCnt;\r\n\t\t}\r\n\t},\r\n\t//座位信息更新\r\n\tOnPosUpdate: function (pos, posInfo) {\r\n\t\tlet playerInfo = this.dataInfo[pos];\r\n\t\tif (!playerInfo) {\r\n\t\t\tthis.Log(\"OnPosUpdate not find:%s\", pos);\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tthis.dataInfo[pos] = posInfo;\r\n\r\n\t\tlet heroID = posInfo[\"pid\"];\r\n\t\tlet headImageUrl = posInfo[\"headImageUrl\"];\r\n\t\tif (heroID && headImageUrl) {\r\n\t\t\tthis.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\r\n\t\t}\r\n\t\tlet heroID2 = app[app.subGameName + \"_HeroManager\"]().GetHeroID();\r\n\t\tif (heroID2 == heroID) {\r\n\t\t\tthis.isLook = posInfo.isLook;\r\n\t\t}\r\n\t\treturn true\r\n\t},\r\n\r\n\t//每局积分更新\r\n\tonPosJifen: function (player) {\r\n\r\n\t\tlet playerInfo = this.dataInfo[player.posIdx];\r\n\t\tif (!playerInfo) {\r\n\t\t\tthis.Log(\"OnPosUpdate not find:%s\", pos);\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tplayerInfo.point += player.shui1;\r\n\r\n\t},\r\n\t//每局竞技点更新\r\n\tonPosSportsPoint: function (player) {\r\n\t\tlet playerInfo = this.dataInfo[player.posIdx];\r\n\t\tif (!playerInfo) {\r\n\t\t\tthis.Log(\"OnPosUpdate not find:%s\", posIdx);\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tplayerInfo.sportsPoint += player.sportsPoint;\r\n\t},\r\n\r\n\tonPosTotalJifen: function (posList) {\r\n\t\tfor (let idx = 0; idx < posList.length; idx++) {\r\n\t\t\tlet player = posList[idx];\r\n\t\t\tlet playerInfo = this.dataInfo[player.pos];\r\n\t\t\tif (!playerInfo) {\r\n\t\t\t\tthis.Log(\"onPosTotalJifen not find:%s\", player.pos);\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tplayerInfo.point = player.point;\r\n\t\t}\r\n\t},\r\n\r\n\tOnPosIsReady: function (pos, isReady) {\r\n\t\tlet playerInfo = this.dataInfo[pos];\r\n\t\tif (!playerInfo) {\r\n\t\t\tthis.Log(\"onPosTotalJifen not find:%s\", pos);\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tplayerInfo.isCardReady = isReady;\r\n\r\n\t},\r\n\r\n\t//重置cardReady\r\n\treSetCardReady: function () {\r\n\t\tfor (let idx in this.dataInfo) {\r\n\t\t\tlet player = this.dataInfo[idx];\r\n\t\t\tplayer.isCardReady = false;\r\n\t\t}\r\n\t},\r\n\r\n\t//开局准备\r\n\tOnPosReadyChg: function (pos, roomReady) {\r\n\t\tlet playerInfo = this.dataInfo[pos];\r\n\t\tif (!playerInfo) {\r\n\t\t\tthis.Log(\"OnPosReadyChg not find:%s\", pos);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tplayerInfo[\"roomReady\"] = roomReady;\r\n\t\treturn true;\r\n\t},\r\n\tGetNoReadyNum: function () {\r\n\t\tlet i = 0;\r\n\t\tlet j = 0;\r\n\t\tfor (let idx in this.dataInfo) {\r\n\t\t\tlet player = this.dataInfo[idx];\r\n\t\t\tif (player.isCardReady == true) {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tj++;\r\n\t\t}\r\n\t\treturn j - i;\r\n\t},\r\n\t//准备下一句\r\n\tOnPosContinueGame: function (pos) {\r\n\t\tlet playerInfo = this.dataInfo[pos];\r\n\t\tif (!playerInfo) {\r\n\t\t\tconsole.error(\"OnPosContinueGame not find:%s\", pos);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tplayerInfo[\"gameReady\"] = true;\r\n\t},\r\n\r\n\tOnSetEnd: function (setEnd) {\r\n\t\t//let posHuList = setEnd[\"posHuList\"];\r\n\t\t//清除准备状态\r\n\t\tfor (let pos in this.dataInfo) {\r\n\t\t\tlet playerInfo = this.dataInfo[pos];\r\n\t\t\t//playerInfo[\"point\"] += posHuList[pos][\"point\"];\r\n\t\t\tplayerInfo[\"gameReady\"] = false;\r\n\t\t}\r\n\t},\r\n\tOnSportsPointChange:function(serverPack){\r\n\t\t//同步更新竞技点\r\n\t\tconsole.log(\"同步更新竞技点\", serverPack);\r\n\t\tfor(let pos in this.dataInfo){\r\n\t\t\tlet playerInfo = this.dataInfo[pos];\r\n\t\t\tif (pos == serverPack.posId &&\r\n\t\t\t\tplayerInfo.pid == serverPack.pid) {\r\n\t\t\t\tlet sp = parseFloat(playerInfo[\"sportsPoint\"]).toFixed(2);\r\n\t\t\t\tlet addSp = parseFloat(serverPack.sportsPoint).toFixed(2);\r\n\t\t\t\tlet totalSp = parseFloat(sp) + parseFloat(addSp);\r\n\t\t\t\t//保留小数点后面两位\r\n\t\t\t\tplayerInfo[\"sportsPoint\"] = totalSp.toFixed(2);\r\n\t\t\t\tthis.dataInfo[pos]['sportsPoint'] = totalSp.toFixed(2);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//-------------------------获取接口---------------------\r\n\t//获取客户端玩家准备状态\r\n\tGetPlayerReadyState: function (roomSetID) {\r\n\t\tlet ReadyState = \"\";\r\n\t\tif (roomSetID > 0) {\r\n\t\t\tReadyState = \"gameReady\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tReadyState = \"roomReady\";\r\n\t\t}\r\n\t\treturn this.GetPlayerInfoByPos(this.clientPos)[ReadyState];\r\n\t},\r\n\r\n\t//设置玩家离线状态\r\n\tSetPlayerOfflineState: function (pos, isLostConnect, isShowLeave) {\r\n\t\tif (!this.dataInfo.hasOwnProperty(pos)) {\r\n\t\t\tconsole.error(\"SetPlayerOfflineState not find:%s\", pos);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.dataInfo[pos][\"isLostConnect\"] = isLostConnect;\r\n\t\tthis.dataInfo[pos][\"isShowLeave\"] = isShowLeave;\r\n\t},\r\n\r\n\t//获取房间所有玩家信息\r\n\tGetRoomAllPlayerInfo: function () {\r\n\t\treturn this.dataInfo\r\n\t},\r\n\r\n\tGetPlayerInfoByPid: function (pid) {\r\n\t\tfor (let i in this.dataInfo) {\r\n\t\t\tif (pid == this.dataInfo[i].pid)\r\n\t\t\t\treturn this.dataInfo[i];\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\t//获取房间指定位置玩家信息\r\n\tGetPlayerInfoByPos: function (pos) {\r\n\t\tif (!this.dataInfo.hasOwnProperty(pos)) {\r\n\t\t\tconsole.error(\"GetPlayerInfoByPos(%s) not find\", pos);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this.dataInfo[pos];\r\n\t},\r\n\t//获取是否观战\r\n\tGetIsLook: function () {\r\n\t\treturn this.isLook\r\n\t},\r\n\t//获取客户端玩家的座位\r\n\tGetClientPos: function () {\r\n\t\treturn this.clientPos\r\n\t},\r\n\r\n\t//获取客户端玩家的上家位置ID\r\n\tGetClientUpPos: function () {\r\n\t\treturn this.upPos;\r\n\t},\r\n\r\n\t//获取客户端玩家下家位置ID\r\n\tGetClientDownPos: function () {\r\n\t\treturn this.downPos;\r\n\t},\r\n\r\n\t//获取客户端玩家对家位置ID\r\n\tGetClientFacePos: function () {\r\n\t\treturn this.facePos;\r\n\t},\r\n\t//获取客户端玩家位置ID\r\n\tGetClientFivePos: function () {\r\n\t\treturn this.fivePos;\r\n\t},\r\n\t//获取客户端玩家位置ID\r\n\tGetClientSixPos: function () {\r\n\t\treturn this.sixPos;\r\n\t},\r\n\t//获取客户端玩家位置ID\r\n\tGetClientSevenPos: function () {\r\n\t\treturn this.sevenPos;\r\n\t},\r\n\t//获取客户端玩家位置ID\r\n\tGetClientEightPos: function () {\r\n\t\treturn this.eightPos;\r\n\t},\r\n\r\n\t//获取开设房间位置的数量\r\n\tGetPosCount: function () {\r\n\t\treturn this.posCount;\r\n\t},\r\n\r\n\t//服务端位置转客户端位置\r\n\tGetUIPosByDataPos: function (dataPos, realPosCount) {//realPosCoun\r\n\t\tlet back = this.clientPos\r\n\t\tif (this.clientPos >= this.posCount || this.clientPos == -1) {\r\n\t\t\tthis.clientPos = 0\r\n\t\t}\r\n\t\tif (2 == this.posCount) {//0,4\r\n\t\t\tthis.fivePos = this.clientPos == 0 ? 1 : 0;\r\n\t\t} if (3 == this.posCount) {//0,3,5,6\r\n\t\t\tthis.sevenPos = (this.clientPos + this.posCount - 1) % this.posCount;\r\n\t\t\tthis.fivePos = (this.clientPos + 1) % this.posCount;\r\n\t\t} else if (4 == this.posCount) {//0,3,5,6\r\n\t\t\tthis.sevenPos = (this.clientPos + this.posCount - 1) % this.posCount;\r\n\t\t\tthis.upPos = (this.clientPos + 1) % this.posCount;\r\n\t\t\tthis.sixPos = (this.clientPos + 2) % this.posCount;\r\n\t\t} else if (5 == this.posCount) {//0,3,4,5,6\r\n\t\t\tthis.sevenPos = (this.clientPos + this.posCount - 1) % this.posCount;\r\n\t\t\tthis.upPos = (this.clientPos + 1) % this.posCount;\r\n\t\t\tthis.fivePos = (this.clientPos + 2) % this.posCount;\r\n\t\t\tthis.sixPos = (this.clientPos + 3) % this.posCount;\r\n\t\t} else if (6 == this.posCount) {\r\n\t\t\tthis.sevenPos = (this.clientPos + this.posCount - 1) % this.posCount;\r\n\t\t\tthis.downPos = (this.clientPos + 1) % this.posCount;\r\n\t\t\tthis.upPos = (this.clientPos + 2) % this.posCount;\r\n\t\t\tthis.fivePos = (this.clientPos + 3) % this.posCount;\r\n\t\t\tthis.sixPos = (this.clientPos + 4) % this.posCount;\r\n\t\t} else if (7 == this.posCount) {\r\n\t\t\tthis.sevenPos = (this.clientPos + this.posCount - 1) % this.posCount;\r\n\t\t\tthis.downPos = (this.clientPos + 1) % this.posCount;\r\n\t\t\tthis.facePos = (this.clientPos + 2) % this.posCount;\r\n\t\t\tthis.upPos = (this.clientPos + 3) % this.posCount;\r\n\t\t\tthis.fivePos = (this.clientPos + 4) % this.posCount;\r\n\t\t\tthis.sixPos = (this.clientPos + 5) % this.posCount;\r\n\t\t} else if (8 == this.posCount) {\r\n\t\t\tthis.eightPos = (this.clientPos + this.posCount - 1) % this.posCount;//7\r\n\t\t\tthis.downPos = (this.clientPos + 1) % this.posCount;//1\r\n\t\t\tthis.facePos = (this.clientPos + 2) % this.posCount;//2\r\n\t\t\tthis.upPos = (this.clientPos + 3) % this.posCount;//3\r\n\t\t\tthis.fivePos = (this.clientPos + 4) % this.posCount;//4\r\n\t\t\tthis.sixPos = (this.clientPos + 5) % this.posCount;//5\r\n\t\t\tthis.sevenPos = (this.clientPos + 6) % this.posCount;//6\r\n\t\t}\r\n\t\t\r\n\t\tif (dataPos == this.clientPos) {\r\n\t\t\tthis.clientPos = back\r\n\t\t\treturn 0;\r\n\t\t} \r\n\t\tthis.clientPos = back\r\n\t\tif(dataPos == this.downPos) {\r\n\t\t\treturn 1;\r\n\t\t} else if (dataPos == this.facePos) {\r\n\t\t\treturn 2;\r\n\t\t} else if (dataPos == this.upPos) {\r\n\t\t\treturn 3;\r\n\t\t} else if (dataPos == this.fivePos) {\r\n\t\t\treturn 4;\r\n\t\t} else if (dataPos == this.sixPos) {\r\n\t\t\treturn 5;\r\n\t\t} else if (dataPos == this.sevenPos) {\r\n\t\t\treturn 6;\r\n\t\t} else if (dataPos == this.eightPos) {\r\n\t\t\treturn 7;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nvar g_FJSSZRoomPosMgr = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function () {\r\n\tif (!g_FJSSZRoomPosMgr)\r\n\t\tg_FJSSZRoomPosMgr = new FJSSZRoomPosMgr();\r\n\treturn g_FJSSZRoomPosMgr;\r\n};\r\n"]}