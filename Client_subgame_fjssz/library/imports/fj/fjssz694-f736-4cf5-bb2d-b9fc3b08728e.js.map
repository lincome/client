{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ\\GameLogic/assets\\script\\game\\FJSSZ\\GameLogic\\FJSSZLogicRank.js"],"names":["app","require","FJSSZLogicRank","BaseClass","extend","Init","JS_Name","dunTypes","ComTool","subGameName","ShareDefine","HeroManager","HUA_LEN","RoomMgr","toUpperCase","RoomSet","RoomPosMgr","LogicGame","SetPos","NetManager","SysNotifyManager","InitCount","lastShouCard","cardStateList","idx","length","state","Log","InitDunState","shouCardList","GetSetPosProperty","SortCardByMax","specialType","isSpecial","isSixteen","count","i","card","indexOf","roomID","GetEnterRoom","GetRoomProperty","SendGetRoomInfo","cc","log","GetIsSixteen","duiziCount","liangduiCount","santiaoCount","shunziCount","tonghuaCount","huluCount","zhadanCount","tonghuaShunCount","wutongCount","GetSpecialType","SetSpecialCard","GetDunLength","dun","getDunListByType","type","SetDunListByType","list","clearSelectedCards","OnEvent","SetCardSelected","cardIdx","cardType","pos","console","push","DeleteCardSelected","splice","CheckDaoShui","tempSelectCards","DaoShui","NotDaoShui","CheckCardBigOrSmall","AutoSetDun","downList","ClearDun","ShowSysMsg","slice","SetDun","selectCardType","dunPos","downPos","pushDownCards","pokers","cardX16","trigger","error","ClearOneCard","GetDunCard","CheckAllRanked","bAllRanked","CheckSelected","SendRankList","special","room","pid","GetHeroProperty","posIdx","GetClientPos","sendPack","first","second","third","JSON","stringify","parseInt","SendPack","data","CheckDuiZi","duizis","GetDuiZi","duizi","CheckLiangDui","GetLiangDuiEX","firstDui","liangdui","CheckSanTiao","santiaos","GetSanTiao","santiao","CheckShunzi","shunzis","GetShunzi","shunzi","CheckTonghua","tonghuas","GetTonghua","tonghua","CheckHulu","hulus","GetHuluEx","CheckZhaDang","zhadangs","GetZhaDan","zhadan","CheckTongHuaShun","tonghuaShuns","GetTongHuaShunEx","tonghuashun","CheckWuTong","wutongs","GetWuTong","wutong","CheckLiuTong","liutongs","GetLiuTongs","liutong","CheckWuGui","wuguis","GetWuGuis","wugui","SetDunEx","catlist","g_FJSSZLogicRank","exports","GetModel"],"mappings":"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","file":"FJSSZLogicRank.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ\\GameLogic","sourcesContent":["var app = require(\"fjssz_app\");\r\n\r\nvar FJSSZLogicRank = app.BaseClass.extend({\r\n\r\n\r\n\tInit: function () {\r\n\t\tthis.JS_Name = \"FJSSZLogicRank\";\r\n\t\tthis.dunTypes = [\"DOWN\", \"SELECTED\", \"DUN1\", \"DUN2\", \"DUN3\"];\r\n\t\tthis.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n\t\tthis.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n\t\tthis.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n\t\tthis.HUA_LEN = 4;\r\n\t\tthis.RoomMgr = app[app.subGameName.toUpperCase() + \"RoomMgr\"]();\r\n\t\tthis.RoomSet = app[app.subGameName.toUpperCase() + \"RoomSet\"]();\r\n\t\tthis.RoomPosMgr = app[app.subGameName.toUpperCase() + \"RoomPosMgr\"]();\r\n\t\tthis.LogicGame = app[app.subGameName.toUpperCase() + \"LogicGame\"]();\r\n\t\tthis.SetPos = app[app.subGameName.toUpperCase() + \"SetPos\"]();\r\n\t\tthis.NetManager = app[app.subGameName + \"_NetManager\"]();\r\n\t\tthis.SysNotifyManager = app[app.subGameName + \"_SysNotifyManager\"]();\r\n\r\n\t\tthis.InitCount();\r\n\t\tthis.lastShouCard = [];\r\n\t\tthis.cardStateList = [];\r\n\t\tfor (let idx = 0; idx < this.dunTypes.length; idx++) {\r\n\t\t\tlet state = this.dunTypes[idx];\r\n\t\t\tthis.cardStateList[state] = [];\r\n\t\t}\r\n\t\tthis.Log(\"Init\");\r\n\t},\r\n\r\n\tInitDunState: function () {\r\n\t\tlet shouCardList = this.SetPos.GetSetPosProperty(\"shouCard\");\r\n\t\tthis.LogicGame.SortCardByMax(shouCardList);\r\n\t\tthis.specialType = this.SetPos.GetSetPosProperty(\"special\");\r\n\t\tthis.isSpecial = false;\r\n\r\n\t\tif (shouCardList.length > 13) {\r\n\t\t\tthis.isSixteen = true;\r\n\t\t} else {\r\n\t\t\tthis.isSixteen = false;\r\n\t\t}\r\n\r\n\t\t//如果和上一把牌相同，重新获取getRoomInfo\r\n\t\tif (this.lastShouCard.length) {\r\n\t\t\tlet count = 0;\r\n\t\t\tfor (let i = 0; i < shouCardList.length; i++) {\r\n\t\t\t\tlet card = shouCardList[i];\r\n\t\t\t\tif (this.lastShouCard.indexOf(card) != -1) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (count == 13) {\r\n\t\t\t\tlet roomID = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"roomID\");\r\n\t\t\t\tthis.RoomMgr.SendGetRoomInfo(roomID);\r\n\t\t\t\tthis.lastShouCard = [];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.lastShouCard = shouCardList;\r\n\t\tcc.log(\"FJSSZLogicRank 初始化\");\r\n\t\tthis.cardStateList[\"DOWN\"] = [];\r\n\t\tfor (let idx = 0; idx < shouCardList.length; idx++) {\r\n\t\t\tthis.cardStateList[\"DOWN\"][idx] = shouCardList[idx];\r\n\t\t}\r\n\r\n\t\tthis.cardStateList[\"DUN1\"] = [];\r\n\t\tthis.cardStateList[\"DUN2\"] = [];\r\n\t\tthis.cardStateList[\"DUN3\"] = [];\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tcc.log(\"FJSSZLogicRank 初始化完成\");\r\n\t\tthis.InitCount();\r\n\t},\r\n\r\n\tGetIsSixteen: function () {\r\n\t\treturn this.isSixteen;\r\n\t},\r\n\r\n\tInitCount: function () {\r\n\t\tthis.duiziCount = 0;\r\n\t\tthis.liangduiCount = 0;\r\n\t\tthis.santiaoCount = 0;\r\n\t\tthis.shunziCount = 0;\r\n\t\tthis.tonghuaCount = 0;\r\n\t\tthis.huluCount = 0;\r\n\t\tthis.zhadanCount = 0;\r\n\t\tthis.tonghuaCount = 0;\r\n\t\tthis.tonghuaShunCount = 0;\r\n\t\tthis.wutongCount = 0;\r\n\t},\r\n\r\n\tGetSpecialType: function () {\r\n\t\treturn this.specialType;\r\n\t},\r\n\r\n\tSetSpecialCard: function () {\r\n\t\tthis.isSpecial = true;\r\n\t},\r\n\r\n\tGetDunLength: function (dun) {\r\n\t\treturn this.cardStateList[dun].length;\r\n\t},\r\n\r\n\tgetDunListByType: function (type) {\r\n\t\treturn this.cardStateList[type];\r\n\t},\r\n\tSetDunListByType: function (type, list) {\r\n\t\tthis.cardStateList[type] = list;\r\n\t},\r\n\r\n\tclearSelectedCards: function () {\r\n\t\tif (this.cardStateList[\"SELECTED\"].length) {\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t}\r\n\t},\r\n\r\n\tSetCardSelected: function (cardIdx) {\r\n\t\t//查询\r\n\t\tlet cardType = this.cardStateList[\"DOWN\"][cardIdx - 1];\r\n\t\tlet pos = this.cardStateList[\"SELECTED\"].indexOf(cardType);\r\n\t\tif (pos) {\r\n\t\t\tconsole.log(\"CheckDuiZi this.cardStateList[SELECTED]\", this.cardStateList[\"SELECTED\"]);\r\n\t\t\tthis.cardStateList[\"SELECTED\"].push(cardType);\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t} else {\r\n\t\t\tthis.Log(\"can not find cardtype %d\", cardType);\r\n\t\t}\r\n\t\t\t\r\n\t},\r\n\r\n\tDeleteCardSelected: function (cardIdx) {\r\n\t\tlet cardType = this.cardStateList[\"DOWN\"][cardIdx - 1];\r\n\t\tlet pos = this.cardStateList[\"SELECTED\"].indexOf(cardType);\r\n\t\tif (pos > -1) {\r\n\t\t\tthis.cardStateList[\"SELECTED\"].splice(pos, 1);\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t}\r\n\t},\r\n\r\n\tCheckDaoShui: function (dun) {\r\n\t\tlet tempSelectCards = [];\r\n\t\tlet DaoShui = 0;//倒水\r\n\t\tlet NotDaoShui = 1;//没倒水\r\n//前端不判断倒水了，让服务端来判断\r\n\t\treturn 1;\r\n\r\n\t\tfor (let i = 0; i < this.cardStateList[dun].length; i++) {\r\n\t\t\ttempSelectCards.push(this.cardStateList[dun][i]);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < this.cardStateList[\"SELECTED\"].length; i++) {\r\n\t\t\ttempSelectCards.push(this.cardStateList[\"SELECTED\"][i]);\r\n\t\t\tif (dun == \"DUN1\" && i == 2) {\r\n\t\t\t\tbreak;\r\n\t\t\t} else if ((dun == \"DUN2\" || dun == \"DUN3\") && i == 4) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dun == \"DUN1\" && tempSelectCards.length != 3) {\r\n\t\t\treturn NotDaoShui;\r\n\t\t} else if (dun == \"DUN1\" && tempSelectCards.length == 3) {\r\n\t\t\tif (this.cardStateList[\"DUN2\"].length != 5 && this.cardStateList[\"DUN3\"].length != 5) {\r\n\t\t\t\treturn NotDaoShui;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dun == \"DUN2\" && tempSelectCards.length != 5) {\r\n\t\t\treturn NotDaoShui;\r\n\t\t} else if (dun == \"DUN2\" && tempSelectCards.length == 5) {\r\n\t\t\tif (this.cardStateList[\"DUN3\"].length != 5 && this.cardStateList[\"DUN1\"].length != 3) {\r\n\t\t\t\treturn NotDaoShui;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dun == \"DUN3\" && tempSelectCards.length != 5) {\r\n\t\t\treturn NotDaoShui;\r\n\t\t}\r\n\r\n\t\tif (dun == \"DUN1\") {\r\n\t\t\tif (this.cardStateList[\"DUN2\"].length == 0 && this.cardStateList[\"DUN3\"].length == 0) {\r\n\t\t\t\treturn NotDaoShui;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.cardStateList[\"DUN2\"].length == 5) {//dun1 与 dun2 相比\r\n\t\t\t\tif (this.LogicGame.CheckCardBigOrSmall(tempSelectCards, this.cardStateList[\"DUN2\"]) == 0) {\r\n\t\t\t\t\treturn DaoShui;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.cardStateList[\"DUN3\"].length == 5) {// dun1 与 dun3 相比\r\n\t\t\t\tif (this.LogicGame.CheckCardBigOrSmall(tempSelectCards, this.cardStateList[\"DUN3\"]) == 0) {\r\n\t\t\t\t\treturn DaoShui;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (dun == \"DUN2\") {\r\n\t\t\tif (this.cardStateList[\"DUN3\"].length == 0 && this.cardStateList[\"DUN1\"].length == 0) {\r\n\t\t\t\treturn NotDaoShui;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.cardStateList[\"DUN1\"].length == 3) {\r\n\t\t\t\tif (this.LogicGame.CheckCardBigOrSmall(this.cardStateList[\"DUN1\"], tempSelectCards) == 0) {\r\n\t\t\t\t\treturn DaoShui;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.cardStateList[\"DUN3\"].length == 5) {\r\n\t\t\t\tif (this.LogicGame.CheckCardBigOrSmall(tempSelectCards, this.cardStateList[\"DUN3\"]) == 0) {\r\n\t\t\t\t\treturn DaoShui;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (dun == \"DUN3\") {\r\n\t\t\tconsole.log(\"开始判断墩3\");\r\n\t\t\tif (this.cardStateList[\"DUN1\"].length == 0 && this.cardStateList[\"DUN2\"].length == 0) {\r\n\t\t\t\treturn NotDaoShui;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.cardStateList[\"DUN1\"].length == 3) {\r\n\t\t\t\tif (this.LogicGame.CheckCardBigOrSmall(this.cardStateList[\"DUN1\"], tempSelectCards) == 0) {\r\n\t\t\t\t\treturn DaoShui;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.cardStateList[\"DUN2\"].length == 5) {\r\n\t\t\t\t\r\n\t\t\tconsole.log(\"开始判断墩3，并且是5张\");\r\n\t\t\t\tif (this.LogicGame.CheckCardBigOrSmall(this.cardStateList[\"DUN2\"], tempSelectCards) == 0) {\r\n\t\t\t\t\treturn DaoShui;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn NotDaoShui;\r\n\t},\r\n\tAutoSetDun: function () {\r\n\t\tif (this.isSixteen) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ((this.cardStateList[\"DUN1\"].length == 3 && this.cardStateList[\"DUN2\"].length == 5) ||\r\n\t\t\t(this.cardStateList[\"DUN1\"].length == 3 && this.cardStateList[\"DUN3\"].length == 5) ||\r\n\t\t\t(this.cardStateList[\"DUN2\"].length == 5 && this.cardStateList[\"DUN3\"].length == 5)) {\r\n\t\t\tlet downList = [];\r\n\t\t\tdownList = this.cardStateList[\"DOWN\"];\r\n\t\t\tthis.cardStateList[\"DOWN\"] = [];\r\n\t\t\tthis.clearSelectedCards();\r\n\r\n\t\t\tif (this.cardStateList[\"DUN1\"].length < 3) {\r\n\t\t\t\tfor (let idx = 0; idx < downList.length; idx++) {\r\n\t\t\t\t\tthis.cardStateList[\"DUN1\"].push(downList[idx]);\r\n\t\t\t\t}\r\n\t\t\t} else if (this.cardStateList[\"DUN2\"].length < 5) {\r\n\t\t\t\tfor (let idx = 0; idx < downList.length; idx++) {\r\n\t\t\t\t\tthis.cardStateList[\"DUN2\"].push(downList[idx]);\r\n\t\t\t\t}\r\n\t\t\t} else if (this.cardStateList[\"DUN3\"].length < 5) {\r\n\t\t\t\tfor (let idx = 0; idx < downList.length; idx++) {\r\n\t\t\t\t\tthis.cardStateList[\"DUN3\"].push(downList[idx]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.CheckDaoShui(\"DUN3\") == 0) {\r\n\t\t\t\tthis.ClearDun(\"DUN3\", false);\r\n\t\t\t\tthis.SysNotifyManager.ShowSysMsg(\"MSG_CARD_DAOSHUI2\");\r\n\t\t\t\tthis.cardStateList[\"DUN3\"] = this.cardStateList[\"DUN2\"].slice()\r\n\t\t\t\tthis.cardStateList[\"DUN2\"] = this.cardStateList[\"DOWN\"].slice()\r\n\t\t\t\tthis.cardStateList[\"DOWN\"] = []\r\n\t\t\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\t\t}\r\n\t\t\telse if (this.CheckDaoShui('DUN2') == 0) {\r\n\t\t\t\tthis.SysNotifyManager.ShowSysMsg(\"MSG_CARD_DAOSHUI\");\r\n\t\t\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\t\t\tthis.ClearDun(\"DUN2\", false);\r\n\t\t\t}\r\n\t\t\telse if (this.CheckDaoShui('DUN1') == 0) {\r\n\t\t\t\tthis.SysNotifyManager.ShowSysMsg(\"MSG_CARD_DAOSHUI\");\r\n\t\t\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\t\t\tthis.ClearDun(\"DUN1\", false);\r\n\t\t\t}\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t}\r\n\t},\r\n\r\n\tSetDun: function (dun) {\r\n\t\t//未选中或墩位已满\r\n\t\tif (this.cardStateList[\"SELECTED\"] == []) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.CheckDaoShui(dun) == 0) {\r\n\t\t\tthis.SysNotifyManager.ShowSysMsg(\"MSG_CARD_DAOSHUI\");\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\t\tthis.ClearDun(dun, true);\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < this.cardStateList[\"SELECTED\"].length; i++) {\r\n\t\t\t//选中的太多了\r\n\t\t\tif (dun == \"DUN1\" && this.cardStateList[dun].length >= 3) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (dun == \"DUN2\" && this.cardStateList[dun].length >= 5) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (dun == \"DUN3\" && this.cardStateList[dun].length >= 5) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tlet selectCardType = this.cardStateList[\"SELECTED\"][i];\r\n\t\t\tlet dunPos = this.cardStateList[dun].indexOf(selectCardType);\r\n\t\t\tlet downPos = this.cardStateList[\"DOWN\"].indexOf(selectCardType);\r\n\r\n\t\t\tif (dunPos == -1 && downPos > -1) {\r\n\t\t\t\tthis.cardStateList[\"DOWN\"].splice(downPos, 1);\r\n\t\t\t\tthis.cardStateList[dun].push(selectCardType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t},\r\n\r\n\tpushDownCards: function (pokers) {\r\n\t\tthis.cardStateList[\"DOWN\"] = [];\r\n\t\tfor (let idx = 0; idx < pokers.length; idx++) {\r\n\t\t\tlet card = pokers[idx].cardX16;\r\n\t\t\tthis.cardStateList[\"DOWN\"].push(card);\r\n\t\t}\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t},\r\n\r\n\tClearDun: function (dun, trigger) {\r\n\t\tfor (let i = 0; i < this.cardStateList[dun].length; i++) {\r\n\t\t\tlet cardType = this.cardStateList[dun][i];\r\n\t\t\tlet downPos = this.cardStateList[\"DOWN\"].indexOf(cardType);\r\n\t\t\tif (-1 == downPos) {\r\n\t\t\t\tthis.cardStateList[\"DOWN\"].push(cardType);\r\n\t\t\t} else {\r\n\t\t\t\t//少牌的时候需要把牌找回来\r\n\t\t\t\tconsole.error(\"failed to clear because down has this cardType %s\", cardType);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.cardStateList[dun] = [];\r\n\t\tif (this.cardStateList[\"DUN1\"].length == 0 &&\r\n\t\t\tthis.cardStateList[\"DUN2\"].length == 0 &&\r\n\t\t\tthis.cardStateList[\"DUN3\"].length == 0) {\r\n\t\t\tif (this.cardStateList[\"DOWN\"].length < 13) {\r\n\t\t\t\tthis.cardStateList[\"DOWN\"] = this.SetPos.GetSetPosProperty(\"shouCard\");\r\n\t\t\t\tconsole.log(\"最新手牌\", this.cardStateList[\"DOWN\"]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (trigger) {\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t}\r\n\t},\r\n\r\n\tClearOneCard: function (dun, idx) {\r\n\r\n\t\t//如果该位置上没牌\r\n\t\tconsole.log(\"SELECTED数组 + \", this.cardStateList);\r\n\t\tif (!this.cardStateList[dun][idx]) {//牌墩上没牌\r\n\t\t\tif (this.cardStateList[\"SELECTED\"].length) {//就把选择的牌放到牌墩上\r\n\t\t\t\tthis.SetDun(dun);\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {//牌墩上有牌。\r\n\t\t\tif (this.cardStateList[\"SELECTED\"].length == 1) {//选择了一张牌\r\n\t\t\t\t//先把牌墩上的牌放到手牌中。\r\n\t\t\t\tlet cardType = this.cardStateList[dun][idx];\r\n\t\t\t\tlet downPos = this.cardStateList[\"DOWN\"].indexOf(cardType);\r\n\t\t\t\tif (-1 == downPos) {\r\n\t\t\t\t\tfor (let i = 0; i < this.cardStateList[dun].length; i++) {\r\n\t\t\t\t\t\tif (cardType == this.cardStateList[dun][i]) {\r\n\t\t\t\t\t\t\tthis.cardStateList[dun].splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cardStateList[\"DOWN\"].push(cardType);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error(\"failed to clear because down has this cardType %s\", cardType);\r\n\t\t\t\t}\r\n\t\t\t\t//再把选择的牌放到牌墩上\r\n\t\t\t\tthis.SetDun(dun);\r\n\t\t\t} else {\r\n\t\t\t\t//牌墩上有牌没有被选中的牌。\r\n\t\t\t\tlet cardType = this.cardStateList[dun][idx];\r\n\t\t\t\tlet downPos = this.cardStateList[\"DOWN\"].indexOf(cardType);\r\n\t\t\t\tif (-1 == downPos) {\r\n\t\t\t\t\tfor (let i = 0; i < this.cardStateList[dun].length; i++) {\r\n\t\t\t\t\t\tif (cardType == this.cardStateList[dun][i]) {\r\n\t\t\t\t\t\t\tthis.cardStateList[dun].splice(i, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.cardStateList[\"DOWN\"].push(cardType);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error(\"failed to clear because down has this cardType %s\", cardType);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t},\r\n\tGetDunCard: function (dun, idx) {\r\n\t\tif (!this.cardStateList[dun][idx]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn this.cardStateList[dun][idx];\r\n\t\t}\r\n\r\n\t},\r\n\tCheckAllRanked: function () {\r\n\t\tlet bAllRanked = true;\r\n\t\tif (this.isSixteen) {\r\n\t\t\tif (this.cardStateList[\"DOWN\"].length > 3) {\r\n\t\t\t\tbAllRanked = false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.cardStateList[\"DOWN\"].length > 0) {\r\n\t\t\t\tbAllRanked = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn bAllRanked;\r\n\r\n\t},\r\n\r\n\tCheckSelected: function (cardType) {\r\n\t\t// console.log(\"SELECTED数组 + \", this.cardStateList[\"SELECTED\"]);\r\n\t\tlet downPos = this.cardStateList[\"SELECTED\"].indexOf(cardType);\r\n\t\tif (-1 == downPos) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tSendRankList: function (dun = {}, special = -1) {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet roomID = room.GetRoomProperty(\"roomID\");\r\n\t\tlet pid = this.HeroManager.GetHeroProperty(\"pid\");\r\n\t\tlet posIdx = this.RoomPosMgr.GetClientPos();\r\n\r\n\t\tlet sendPack = {\r\n\t\t\troomID: roomID, //房间id\r\n\t\t\tpid: pid,    //玩家id\r\n\t\t\tposIdx: posIdx,  //玩家位置\r\n\t\t\tisSpecial: this.isSpecial,\r\n\t\t\tspecial: special,\r\n\t\t\tdunPos: {\r\n\t\t\t\tfirst: this.cardStateList[\"DUN1\"],\r\n\t\t\t\tsecond: this.cardStateList[\"DUN2\"],\r\n\t\t\t\tthird: this.cardStateList[\"DUN3\"],\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (JSON.stringify(dun) != \"{}\" && special != -1) {\r\n\t\t\tsendPack[\"dunPos\"][\"first\"] = dun[\"first\"];\r\n\t\t\tsendPack[\"dunPos\"][\"second\"] = dun[\"second\"];\r\n\t\t\tsendPack[\"dunPos\"][\"third\"] = dun[\"third\"];\r\n\t\t\tsendPack[\"special\"] = parseInt(special);\r\n\t\t\tsendPack[\"isSpecial\"] = true;\r\n\t\t}\r\n\t\tthis.NetManager.SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"Ranked\", sendPack, function (data) {\r\n\t\t\tconsole.log(\"提交整理好的牌\", data);\r\n\t\t}, function (error) {\r\n\t\t\tconsole.log(\"整理好的牌提交失败\", error);\r\n\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"摆牌有误请重新摆牌,请重新摆牌\");\r\n\t\t});\r\n\t},\r\n\r\n\tCheckDuiZi: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet duizis = this.LogicGame.GetDuiZi(downList);\r\n\r\n\t\tif (duizis.length > 0) {\r\n\t\t\tlet duizi = [];\r\n\r\n\t\t\tif (this.duiziCount >= duizis.length) {\r\n\t\t\t\tthis.duiziCount = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (1 == duizis.length) {\r\n\t\t\t\tduizi = duizis[0];\r\n\t\t\t} else {\r\n\t\t\t\tduizi = duizis[this.duiziCount];\r\n\t\t\t}\r\n\t\t\tthis.duiziCount++;\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = duizi;\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t}\r\n\t},\r\n\r\n\tCheckLiangDui: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet duizis = this.LogicGame.GetLiangDuiEX(downList);\r\n\t\tif (this.liangduiCount >= duizis.length) {\r\n\t\t\tthis.liangduiCount = 0;\r\n\t\t}\r\n\r\n\t\tif (duizis.length >= 1) {\r\n\t\t\tlet firstDui = duizis[this.liangduiCount];\r\n\t\t\tthis.liangduiCount++;\r\n\t\t\tif (this.liangduiCount >= duizis.length) {\r\n\t\t\t\tthis.liangduiCount = 0;\r\n\t\t\t}\r\n\r\n\t\t\tlet liangdui = firstDui;\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = liangdui;\r\n\t\t}\r\n\t\tif (this.cardStateList[\"SELECTED\"].length < 4) {\r\n\t\t\t//对子数量不足\r\n\t\t\tconsole.log(\"this.cardStateList[SELECTED]\", this.cardStateList[\"SELECTED\"]);\r\n\t\t\tthis.SysNotifyManager.ShowSysMsg(\"SSS_DUIZI_NOT_ENOUGH\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\r\n\t},\r\n\r\n\tCheckSanTiao: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet santiaos = this.LogicGame.GetSanTiao(downList);\r\n\r\n\t\tif (santiaos.length) {\r\n\t\t\tlet santiao = [];\r\n\t\t\tif (1 == santiaos.length) {\r\n\t\t\t\tsantiao = santiaos[0];\r\n\t\t\t} else {\r\n\t\t\t\tsantiao = santiaos[this.santiaoCount];\r\n\t\t\t}\r\n\t\t\tthis.santiaoCount++;\r\n\t\t\tif (this.santiaoCount >= santiaos.length) {\r\n\t\t\t\tthis.santiaoCount = 0;\r\n\t\t\t}\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = santiao;\r\n\t\t} else {\r\n\t\t\tthis.SysNotifyManager.ShowSysMsg(\"SSS_SANTIAO_NOT_ENOUGH\");\r\n\t\t}\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\r\n\t},\r\n\r\n\tCheckShunzi: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet shunzis = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tshunzis = this.LogicGame.GetShunzi(downList);\r\n\t\tif (shunzis.length) {\r\n\t\t\tlet shunzi = [];\r\n\t\t\tif (this.shunziCount >= shunzis.length) {\r\n\t\t\t\tthis.shunziCount = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (1 == shunzis.length) {\r\n\t\t\t\tshunzi = shunzis[0];\r\n\t\t\t} else {\r\n\t\t\t\tshunzi = shunzis[this.shunziCount];\r\n\t\t\t}\r\n\t\t\tthis.shunziCount++;\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = shunzi;\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t} else {\r\n\t\t\tthis.SysNotifyManager.ShowSysMsg(\"SSS_SHUNZI_NOT_ENOUGH\");\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t}\r\n\t},\r\n\r\n\tCheckTonghua: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet tonghuas = this.LogicGame.GetTonghua(downList);\r\n\r\n\t\tif (tonghuas.length) {\r\n\t\t\tlet tonghua = [];\r\n\r\n\t\t\tif (this.tonghuaCount >= tonghuas.length) {\r\n\t\t\t\tthis.tonghuaCount = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (1 == tonghuas.length) {\r\n\t\t\t\ttonghua = tonghuas[0];\r\n\t\t\t} else {\r\n\t\t\t\ttonghua = tonghuas[this.tonghuaCount];\r\n\t\t\t}\r\n\t\t\tthis.tonghuaCount++;\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = tonghua;\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t}\r\n\t},\r\n\r\n\tCheckHulu: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet hulus = this.LogicGame.GetHuluEx(downList);\r\n\t\tthis.huluCount++;\r\n\t\tif (this.huluCount >= hulus.length) {\r\n\t\t\tthis.huluCount = 0;\r\n\t\t}\r\n\t\tthis.cardStateList[\"SELECTED\"] = hulus[this.huluCount];\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t},\r\n\r\n\tCheckZhaDang: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet zhadangs = this.LogicGame.GetZhaDan(downList);\r\n\r\n\t\tif (zhadangs.length > 0) {\r\n\t\t\tlet zhadan = [];\r\n\r\n\t\t\tif (this.zhadanCount >= zhadangs.length)\r\n\t\t\t\tthis.zhadanCount = 0;\r\n\r\n\t\t\tif (1 == zhadangs.length) {\r\n\t\t\t\tzhadan = zhadangs[0];\r\n\t\t\t} else {\r\n\t\t\t\tzhadan = zhadangs[this.zhadanCount];\r\n\t\t\t}\r\n\t\t\tthis.zhadanCount++;\r\n\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = zhadan;\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t} else {\r\n\t\t\tthis.SysNotifyManager.ShowSysMsg(\"SSS_ZHADAN_NOT_ENOUGH\");\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\r\n\t\t}\r\n\t},\r\n\r\n\tCheckTongHuaShun: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet tonghuaShuns = this.LogicGame.GetTongHuaShunEx(downList);\r\n\r\n\t\tif (tonghuaShuns.length) {\r\n\t\t\tlet tonghuashun = [];\r\n\r\n\t\t\tif (this.tonghuaShunCount >= tonghuaShuns.length)\r\n\t\t\t\tthis.tonghuaShunCount = 0;\r\n\r\n\t\t\tif (1 == tonghuaShuns.length) {\r\n\t\t\t\ttonghuashun = tonghuaShuns[0];\r\n\t\t\t} else {\r\n\t\t\t\ttonghuashun = tonghuaShuns[this.tonghuaShunCount];\r\n\t\t\t}\r\n\t\t\tthis.tonghuaShunCount++;\r\n\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = tonghuashun;\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.SysNotifyManager.ShowSysMsg(\"SSS_TONGHUASHUN_NOT_ENOUGH\");\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t}\r\n\t},\r\n\r\n\tCheckWuTong: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet wutongs = this.LogicGame.GetWuTong(downList);\r\n\r\n\t\tif (wutongs.length) {\r\n\t\t\tlet wutong = [];\r\n\r\n\t\t\tif (this.wutongCount >= wutongs.length) {\r\n\t\t\t\tthis.wutongCount = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (1 == wutongs.length) {\r\n\t\t\t\twutong = wutongs[0];\r\n\t\t\t} else {\r\n\t\t\t\twutong = wutongs[this.wutongCount];\r\n\t\t\t}\r\n\t\t\tthis.wutongCount++;\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = wutong;\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t} else {\r\n\t\t\t//this.SysNotifyManager.ShowSysMsg(\"SSS_TONGHUASHUN_NOT_ENOUGH\");\r\n\t\t\t//app[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t\t// console.log('没有五同');\r\n\t\t}\r\n\t},\r\n\tCheckLiuTong: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet liutongs = this.LogicGame.GetLiuTongs(downList);\r\n\r\n\t\tif (liutongs.length) {\r\n\t\t\tlet liutong = [];\r\n\r\n\t\t\tif (this.wutongCount >= liutongs.length) {\r\n\t\t\t\tthis.wutongCount = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (1 == liutongs.length) {\r\n\t\t\t\tliutong = liutongs[0];\r\n\t\t\t} else {\r\n\t\t\t\tliutong = liutongs[this.wutongCount];\r\n\t\t\t}\r\n\t\t\tthis.wutongCount++;\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = liutong;\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t} else {\r\n\t\t\t//this.SysNotifyManager.ShowSysMsg(\"SSS_TONGHUASHUN_NOT_ENOUGH\");\r\n\t\t\t//app[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t\t// console.log('没有五同');\r\n\t\t}\r\n\t},\r\n\tCheckWuGui: function () {\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t\tlet downList = this.cardStateList[\"DOWN\"];\r\n\t\tlet wuguis = this.LogicGame.GetWuGuis(downList);\r\n\r\n\t\tif (wuguis.length) {\r\n\t\t\tlet wugui = [];\r\n\r\n\t\t\tif (this.wutongCount >= wuguis.length) {\r\n\t\t\t\tthis.wutongCount = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (1 == wuguis.length) {\r\n\t\t\t\twugui = wuguis[0];\r\n\t\t\t} else {\r\n\t\t\t\twugui = wuguis[this.wutongCount];\r\n\t\t\t}\r\n\t\t\tthis.wutongCount++;\r\n\t\t\tthis.cardStateList[\"SELECTED\"] = wugui;\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t} else {\r\n\t\t\t//this.SysNotifyManager.ShowSysMsg(\"SSS_TONGHUASHUN_NOT_ENOUGH\");\r\n\t\t\t//app[app.subGameName + \"Client\"].OnEvent(\"EVT_DUN_UPDATE\");\r\n\t\t\t// console.log('没有五同');\r\n\t\t}\r\n\t},\r\n\tSetDunEx: function (dun, catlist) {\r\n\t\tthis.cardStateList[\"SELECTED\"] = catlist;\r\n\t\tfor (let i = 0; i < this.cardStateList[\"SELECTED\"].length; i++) {\r\n\r\n\t\t\t//选中的太多了\r\n\t\t\tif (dun == \"DUN1\" && this.cardStateList[dun].length >= 3) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (dun == \"DUN2\" && this.cardStateList[dun].length >= 5) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (dun == \"DUN3\" && this.cardStateList[dun].length >= 5) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tlet selectCardType = this.cardStateList[\"SELECTED\"][i];\r\n\t\t\tlet dunPos = this.cardStateList[dun].indexOf(selectCardType);\r\n\t\t\tlet downPos = this.cardStateList[\"DOWN\"].indexOf(selectCardType);\r\n\r\n\t\t\tif (dunPos == -1 && downPos > -1) {\r\n\t\t\t\tthis.cardStateList[\"DOWN\"].splice(downPos, 1);\r\n\t\t\t\tthis.cardStateList[dun].push(selectCardType);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.cardStateList[\"SELECTED\"] = [];\r\n\t},\r\n\r\n});\r\n\r\nvar g_FJSSZLogicRank = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function () {\r\n\tif (!g_FJSSZLogicRank) {\r\n\t\tg_FJSSZLogicRank = new FJSSZLogicRank();\r\n\t}\r\n\treturn g_FJSSZLogicRank;\r\n};"]}