{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ/assets\\script\\game\\FJSSZ\\FJSSZRoomMgr.js"],"names":["app","require","FJSSZRoomMgr","BaseClass","extend","Init","gameName","JS_Name","toUpperCase","ComTool","ShareDefine","NetManager","SysNotifyManager","Room","RoomPosMgr","RegNetPack","OnPack_CreateRoom","OnPack_GetRoomInfo","OnPack_RoomRecord","OnPack_CardReadyChg","OnPack_ChangeStatus","OnPack_SetStart","OnPack_SetEnd","OnPack_RoomEnd","OnPack_RoomStart","OnPack_PosUpdate","OnPack_Reward","OnPack_RankingResult","OnPack_BeiShuSelect","OnPack_YaZhuBeiShu","OnPack_ZJBeiShu","OnPack_QiangZhuangBeiShu","OnPack_ChatMessage","subGameName","OnPack_SportsPointNotEnough","OnPack_SportsPointEnough","OnPack_SportsPointChange","HeroManager","OnReload","Log","enterRoomID","loginEnterRoomKey","OnSwithSceneEnd","sceneType","serverPack","agrs","Object","keys","length","createType","ShowForm","CloseForm","SendGetRoomInfo","roomID","console","log","ShowSysMsg","ExitGame","clubId","unionId","OnInitRoomData","OnTotalScoreFromLogin","posList","OnDissolve","dissolve","idx","LookCount","playerInfo","GetHeroID","pid","SetAutoPlayIng","trusteeship","GetSceneType","LoadScene","OnEvent","OnZhuangJia","setInfo","OnSetStart","setEnd","OnSetEnd","error","OnInitRoomPosData","SetRoomProperty","OnRoomEnd","records","RoomRecord","OnPosCardReady","OnChangeStatus","OnResult","OnSportsPointChange","GetEnterRoomID","GetEnterRoom","SendGetCurRoomID","SendPack","SendEvaKouBei","pos","targetPos","kouBeiType","SendCreateRoom","sendPack","data","callback","SendDissolveRoom","SendReady","posIndex","SendUnReady","SendKickPosIndex","SendStartRoomGame","SendContinueGame","SendDissolveRoomAgree","SendDissolveRoomRefuse","SendPosAction","cardID","opType","roomSet","GetRoomSet","setID","GetRoomSetProperty","setRound","roundID","SendExitRoom","SendRoomRecord","SendPlayerReward","sendEveryGameRecord","SendBeiShu","beishu","SendEndRoom","SendSelectPosRoom","posID","SendStand","SendSit","SendQiangZhuang","SendConfirmBeiShu","g_FJSSZRoomMgr","exports","GetModel"],"mappings":"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","file":"FJSSZRoomMgr.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ","sourcesContent":["/*\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @copyright: Copyright (c) 2004, 2010 Xiamen DDM Network Technology Co.,Ltd., All rights reserved.\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @package FJSSZRoomMgr.js\r\n *  @todo: 自由扑克麻将\r\n *\r\n *  @date 2014-10-30 16:04\r\n *  @version 1.0\r\n *\r\n *  修改时间 修改人 修改内容\r\n *  -------------------------------------------------------------------------------\r\n *\r\n */\r\nvar app = require(\"fjssz_app\");\r\n\r\n/**\r\n * 类构造\r\n */\r\nvar FJSSZRoomMgr = app.BaseClass.extend({\r\n\r\n\t/**\r\n\t * 初始化\r\n\t */\r\n\tInit: function () {\r\n\t\tthis.gameName = app[\"subGameName\"];\r\n\t\tthis.JS_Name = this.gameName.toUpperCase() + \"RoomMgr\";\r\n\r\n\t\tthis.ComTool = app[this.gameName + \"_ComTool\"]();\r\n\t\tthis.ShareDefine = app[this.gameName + \"_ShareDefine\"]();\r\n\t\tthis.NetManager = app[this.gameName + \"_NetManager\"]();\r\n\t\tthis.SysNotifyManager = app[this.gameName + \"_SysNotifyManager\"]();\r\n\r\n\t\tthis.Room = app[this.gameName.toUpperCase() + \"Room\"]();\r\n\t\tthis.RoomPosMgr = app[this.gameName.toUpperCase() + \"RoomPosMgr\"]();\r\n\r\n\t\tthis.NetManager.RegNetPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"CreateRoom\", this.OnPack_CreateRoom, this);\r\n\t\tthis.NetManager.RegNetPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"GetRoomInfo\", this.OnPack_GetRoomInfo, this);\r\n\t\tthis.NetManager.RegNetPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"RoomRecord\", this.OnPack_RoomRecord, this);\r\n\r\n\t\t//notify\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_CardReadyChg\", this.OnPack_CardReadyChg, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_ChangeStatus\", this.OnPack_ChangeStatus, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_SetStart\", this.OnPack_SetStart, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_SetEnd\", this.OnPack_SetEnd, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_RoomEnd\", this.OnPack_RoomEnd, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_RoomStart\", this.OnPack_RoomStart, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_PosUpdate\", this.OnPack_PosUpdate, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_reward\", this.OnPack_Reward, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_Result\", this.OnPack_RankingResult, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_BeiShuSelect\", this.OnPack_BeiShuSelect, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_YaZhuBeiShu\", this.OnPack_YaZhuBeiShu, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_SetZhuangJia\", this.OnPack_ZJBeiShu, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_QiangZhuangBeiShu\", this.OnPack_QiangZhuangBeiShu, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + this.gameName.toUpperCase() + \"_Chatmessage\", this.OnPack_ChatMessage, this);\r\n\r\n\t\t//竞技点通知\r\n\t\tthis.NetManager.RegNetPack(\"S\" + app.subGameName.toUpperCase() + \"_SportsPointNotEnough\", this.OnPack_SportsPointNotEnough, this);\r\n\t\tthis.NetManager.RegNetPack(\"S\" + app.subGameName.toUpperCase() + \"_SportsPointEnough\", this.OnPack_SportsPointEnough, this);\r\n\t\tthis.NetManager.RegNetPack(\"SRoom_SportsPointChange\", this.OnPack_SportsPointChange, this);\r\n\r\n\t\tthis.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n\r\n\t\tthis.OnReload();\r\n\r\n\t\tthis.Log(\"Init\");\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * 重登\r\n\t */\r\n\tOnReload: function () {\r\n\t\tthis.enterRoomID = 0;\r\n\t\t//获取启动客户端进入的房间KEY\r\n\t\tthis.loginEnterRoomKey = 0;\r\n\r\n\t\tthis.Room.OnReload();\r\n\t},\r\n\r\n\tOnSwithSceneEnd: function (sceneType) {\r\n\t\t//如果退出房间场景了,清除数据\r\n\t\tif (sceneType != \"fightScene\") {\r\n\t\t\tthis.OnReload();\r\n\t\t}\r\n\t},\r\n\r\n\t//----------------------收包接口-----------------------------\r\n\t//创建房间完成\r\n\tOnPack_CreateRoom: function (serverPack) {\r\n\t\tlet agrs = Object.keys(serverPack);\r\n\t\tif (0 == agrs.length)//亲友圈会回空包\r\n\t\t\treturn;\r\n\t\tif (serverPack.createType == 2) {\r\n\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm('UIDaiKai');\r\n\t\t\tapp[app.subGameName + \"_FormManager\"]().CloseForm('UICreatRoom');\r\n\t\t} else {\r\n\t\t\tthis.SendGetRoomInfo(serverPack.roomID);\r\n\t\t}\r\n\t},\r\n\t//获取到房间完整信息\r\n\tOnPack_GetRoomInfo: function (serverPack) {\r\n\t\tconsole.log(\"获取到房间完整信息 OnPack_GetRoomInfo\", serverPack[\"key\"], serverPack);\r\n\t\tif (serverPack[\"NotFind_Player\"]) {\r\n\t\t\tthis.SysNotifyManager.ShowSysMsg(\"PLAYER_NOT_ROOM\");\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t\treturn;\r\n\t\t} else if (serverPack[\"NotFind_Room\"]) {\r\n\t\t\tthis.SysNotifyManager.ShowSysMsg(\"Room_NotFindRoom\");\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.enterRoomID = serverPack[\"roomID\"];\r\n\t\tthis.clubId = serverPack[\"cfg\"][\"clubId\"];\r\n\t\tthis.unionId = serverPack[\"cfg\"][\"unionId\"];\r\n\t\tthis.Room.OnInitRoomData(serverPack);\r\n\t\tthis.Room.OnTotalScoreFromLogin(serverPack.posList);\r\n\t\tthis.Room.OnDissolve(serverPack.dissolve);\r\n\t\tfor (let idx = 0; idx < serverPack.posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\tlet playerInfo = serverPack.posList[idx];\r\n\t\t\tif (app[app.subGameName + \"_HeroManager\"]().GetHeroID() == playerInfo.pid) {\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SetAutoPlayIng(playerInfo.trusteeship);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//进入打牌场景\r\n\t\tif (app[app.subGameName + \"_SceneManager\"]().GetSceneType() != \"gdyScene\") {\r\n\t\t\tapp[app.subGameName + \"_SceneManager\"]().LoadScene(app.subGameName + \"Scene\");\r\n\t\t} else {\r\n\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UILSPlay\");\r\n\t\t}\r\n\t},\r\n\t//--------------notify-----------------\r\n\r\n\t//倍数选择通知\r\n\tOnPack_BeiShuSelect: function (serverPack) {\r\n\t\tconsole.log(\"倍数选择通知 OnPack_BeiShuSelect\", serverPack);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(this.gameName.toUpperCase() + \"_BeiShu\", serverPack);\r\n\t},\r\n\r\n\t//通知玩家谁抢到庄了 多少倍\t\r\n\tOnPack_ZJBeiShu: function (serverPack) {\r\n\t\tconsole.log(\"通知玩家谁抢到庄了 OnPack_ZJBeiShu\", serverPack);\r\n\t\tthis.Room.OnZhuangJia(serverPack[\"posID\"], serverPack[\"beiShu\"]);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(this.gameName.toUpperCase() + \"_ZJBeiShu\", serverPack);\r\n\t},\r\n\t//通知玩家谁加了多少倍\r\n\tOnPack_YaZhuBeiShu: function (serverPack) {\r\n\t\tconsole.log(\"通知玩家谁加了多少倍 OnPack_YaZhuBeiShu\", serverPack);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(this.gameName.toUpperCase() + \"_YaZhuBeiShu\", serverPack);\r\n\t},\r\n\t//通知玩家谁抢庄了 多少倍\r\n\tOnPack_QiangZhuangBeiShu: function (serverPack) {\r\n\t\tconsole.log(\"通知玩家谁抢庄了 OnPack_QiangZhuangBeiShu\", serverPack);\r\n\t\tthis.Room.OnZhuangJia(serverPack[\"posID\"], serverPack[\"beiShu\"]);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(this.gameName.toUpperCase() + \"_QiangZhuangBeiShu\", serverPack);\r\n\t},\r\n\r\n\t//set开始\r\n\tOnPack_SetStart: function (serverPack) {\r\n\t\tlet roomID = serverPack[\"roomID\"];\r\n\t\tlet setInfo = serverPack[\"setInfo\"];\r\n\t\tthis.Room.OnSetStart(setInfo);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"FJSSZSetStart\", serverPack);\r\n\t},\r\n\r\n\r\n\t//set结束\r\n\tOnPack_SetEnd: function (serverPack) {\r\n\t\tlet roomID = serverPack[\"roomID\"];\r\n\t\tlet setEnd = serverPack[\"setState\"];\r\n\t\tthis.Room.OnSetEnd(setEnd);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"FJSSZSetEnd\", serverPack);\r\n\t},\r\n\r\n\t//房间开始\r\n\tOnPack_RoomStart: function (serverPack) {\r\n\t\tconsole.error(\"OnPack_RoomStart:\", serverPack);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"RoomStart\", {});\r\n\t},\r\n\t//位置变化通知\r\n\tOnPack_PosUpdate: function (serverPack) {\r\n\t\tconsole.log(\"位置变化通知 OnPack_PosUpdate\", serverPack);\r\n\t\tif (this.enterRoomID == serverPack[\"roomID\"]) {\r\n\t\t\tthis.RoomPosMgr.OnInitRoomPosData(serverPack[\"posList\"]);\r\n\t\t\tthis.Room.SetRoomProperty(\"posList\", serverPack[\"posList\"]);\r\n\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"FJSSZ_AllPosUpdate\", serverPack[\"posList\"]);\r\n\t\t}\r\n\t},\r\n\t//房间结束\r\n\tOnPack_RoomEnd: function (serverPack) {\r\n\t\tthis.Room.OnRoomEnd(serverPack);\r\n\t},\r\n\r\n\t//获取对局记录信息\r\n\tOnPack_RoomRecord: function (serverPack) {\r\n\t\tlet records = serverPack[\"records\"];\r\n\t\tthis.Room.RoomRecord(records);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"RoomRecord\", records);\r\n\t},\r\n\t//收到玩家打赏\r\n\tOnPack_Reward: function (serverPack) {\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"Reward\", serverPack);\r\n\t},\r\n\r\n\r\n\tOnPack_CardReadyChg: function (serverPack) {\r\n\t\tconsole.log(\"CardReadyChg\", serverPack);\r\n\t\tthis.Room.OnPosCardReady(serverPack);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(this.gameName.toUpperCase() + \"_EVT_Card_Ready\", serverPack);\r\n\t},\r\n\tOnPack_ChangeStatus: function (serverPack) {\r\n\t\tconsole.log(\"改变玩家游戏状态\", serverPack);\r\n\t\tthis.Room.OnChangeStatus(serverPack);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ChangeStatus\", serverPack);\r\n\t\t/*var serverPack = {\r\n\t\t\t\"roomID\": 710300000001437,\r\n\t\t\t\"setID\": 1,\r\n\t\t\t\"state\": \"FJSSZ_GAME_STATUS_CONFIRMBanker\",\r\n\t\t\t\"posList\": [{\r\n\t\t\t\t\"posID\": 1,\r\n\t\t\t\t\"shouCard\": [\"0x2d\", \"0x3b\", \"0x3a\", \"0x39\", \"0x05\", \"0x24\", \"0x33\", \"0x32\", \"0x3e\", \"0x19\", \"0x23\", \"0x34\", \"0x2c\"],\r\n\t\t\t\t\"special\": {},\r\n\t\t\t\t\"showEightCard\": [\"0x2d\", \"0x3b\", \"0x3a\", \"0x39\", \"0x05\", \"0x24\", \"0x33\", \"0x32\"]\r\n\t\t\t}, {\r\n\t\t\t\t\"posID\": 0,\r\n\t\t\t\t\"shouCard\": [\"0x1c\", \"0x2b\", \"0x09\", \"0x27\", \"0x36\", \"0x35\", \"0x25\", \"0x04\", \"0x1a\", \"0x02\", \"0x12\", \"0x17\", \"0x26\"],\r\n\t\t\t\t\"special\": {},\r\n\t\t\t\t\"showEightCard\": [\"0x1c\", \"0x2b\", \"0x09\", \"0x27\", \"0x36\", \"0x35\", \"0x25\", \"0x04\"]\r\n\t\t\t}]\r\n\t\t};*/\r\n\t},\r\n\t//开始比牌\r\n\tOnPack_RankingResult: function (serverPack) {\r\n\t\tconsole.log(\"开始比牌 OnPack_RankingResult\", serverPack);\r\n\t\tthis.Room.OnResult(serverPack);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"RankingResult\");\r\n\t},\r\n\r\n\tOnPack_ChatMessage: function (serverPack) {\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ChatMessage\", serverPack);\r\n\t},\r\n\t//竞技点不足时通知\r\n\tOnPack_SportsPointNotEnough: function (serverPack) {\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"SportsPointNotEnough\", serverPack);\r\n\t},\r\n\tOnPack_SportsPointEnough: function (serverPack) {\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"SportsPointEnough\", serverPack);\r\n\t},\r\n\t//玩家的竞技点在游戏外被改变通知\r\n\tOnPack_SportsPointChange: function (serverPack) {\r\n\t\tthis.Room.OnSportsPointChange(serverPack);\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"RoomSportsPointChange\", serverPack);\r\n\t},\r\n\t//---------------------获取接口------------------------------\r\n\tGetEnterRoomID: function () {\r\n\t\treturn this.enterRoomID\r\n\t},\r\n\r\n\tGetEnterRoom: function () {\r\n\t\tif (!this.enterRoomID) {\r\n\t\t\tconsole.error(\"GetEnterRoom not enterRoom\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this.Room\r\n\t},\r\n\t//-----------------------发包函数-----------------------------\r\n\r\n\r\n\t//登录获取当前进入的房间ID\r\n\tSendGetCurRoomID: function () {\r\n\t\tthis.NetManager.SendPack(\"game.C1101GetRoomID\", {});\r\n\t},\r\n\r\n\t//给玩家点赞封包\r\n\tSendEvaKouBei: function (roomID, pos, targetPos, kouBeiType) {\r\n\t\tthis.NetManager.SendPack(\"game.C1103EvaKouBei\", {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"pos\": pos,\r\n\t\t\t\"targetPos\": targetPos,\r\n\t\t\t\"kouBeiType\": kouBeiType\r\n\t\t});\r\n\t},\r\n\r\n\r\n\t//发送创建房间\r\n\tSendCreateRoom: function (sendPack) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"CreateRoom\", sendPack, (data) => {\r\n\t\t\tconsole.log(\"发送创建房间成功\", data);\r\n\t\t}, (error) => {\r\n\t\t\tconsole.log(\"发送创建房间失败\", error);\r\n\t\t});\r\n\t},\r\n\r\n\t//获取房间信息\r\n\tSendGetRoomInfo: function (roomID, callback) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"GetRoomInfo\", {\"roomID\": roomID}, callback);\r\n\t},\r\n\r\n\t//解散房间\r\n\tSendDissolveRoom: function (roomID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"DissolveRoom\", {\"roomID\": roomID});\r\n\t},\r\n\r\n\t//位置发送准备状态\r\n\tSendReady: function (roomID, posIndex) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"ReadyRoom\", {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"posIndex\": posIndex\r\n\t\t});\r\n\t},\r\n\r\n\t//发送取消准备状态\r\n\tSendUnReady: function (roomID, posIndex) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"UnReadyRoom\", {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"posIndex\": posIndex\r\n\t\t});\r\n\t},\r\n\r\n\t//房主T人\r\n\tSendKickPosIndex: function (roomID, posIndex) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"KickRoom\", {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"posIndex\": posIndex\r\n\t\t});\r\n\t},\r\n\r\n\t//开始游戏\r\n\tSendStartRoomGame: function (roomID) {\r\n\t\tconsole.log('SendStartRoomGame roomID', roomID);\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"StartGame\", {\"roomID\": roomID});\r\n\t},\r\n\r\n\t//发送继续游戏\r\n\tSendContinueGame: function (roomID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"ContinueGame\", {\"roomID\": roomID});\r\n\t},\r\n\r\n\t//发送同意解散房间\r\n\tSendDissolveRoomAgree: function (roomID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"DissolveRoomAgree\", {\"roomID\": roomID});\r\n\t},\r\n\r\n\t//发送拒绝解散房间\r\n\tSendDissolveRoomRefuse: function (roomID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"DissolveRoomRefuse\", {\"roomID\": roomID});\r\n\t},\r\n\r\n\t//发送位置执行指令\r\n\tSendPosAction: function (cardID, opType) {\r\n\r\n\t\tif (!this.enterRoomID) {\r\n\t\t\tconsole.error(\"SendPosAction not enterRoomID\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roomID = this.enterRoomID;\r\n\r\n\t\tlet roomSet = this.GetEnterRoom().GetRoomSet();\r\n\t\tif (!roomSet) {\r\n\t\t\tconsole.error(\"SendPosAction not find roomSet\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet setID = roomSet.GetRoomSetProperty(\"setID\");\r\n\t\tlet setRound = roomSet.GetRoomSetProperty(\"setRound\");\r\n\t\tif (!setRound) {\r\n\t\t\tconsole.error(\"SendPosAction not find setRound\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roundID = setRound[\"waitID\"];\r\n\r\n\t\tlet sendPack = {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"setID\": setID,\r\n\t\t\t\"roundID\": roundID,\r\n\t\t\t\"cardID\": cardID,\r\n\t\t\t\"opType\": opType,\r\n\t\t};\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"OpCard\", sendPack);\r\n\t},\r\n\r\n\t//退出房间\r\n\tSendExitRoom: function (roomID, pos) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"ExitRoom\", {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"posIndex\": pos\r\n\t\t});\r\n\t},\r\n\r\n\t//请求对局记录封包\r\n\tSendRoomRecord: function (roomID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"RoomRecord\", {\"roomID\": roomID});\r\n\t},\r\n\r\n\t//发送打赏玩家封包\r\n\tSendPlayerReward: function (roomID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"Reward\", {\"roomID\": roomID});\r\n\t},\r\n\t//获取每一局的玩家记录\r\n\tsendEveryGameRecord: function (roomID) {\r\n\t\tthis.NetManager.SendPack(\"game.CPlayerSetRoomRecord\", {\"roomID\": roomID});\r\n\t},\r\n\tSendBeiShu: function (roomID, pos, beishu) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"RoomBeiShu\", {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"posIndex\": pos,\r\n\t\t\t\"beishu\": beishu\r\n\t\t});\r\n\t},\r\n\tSendEndRoom: function (roomID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"EndRoom\", {\"roomID\": roomID});\r\n\t},\r\n\t//切换座位\r\n\tSendSelectPosRoom: function (roomID, posID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"SelectPosRoom\", {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"posID\": posID\r\n\t\t});\r\n\t},\r\n\t//站起\r\n\tSendStand: function (roomID, posID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"Stand\", {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"posID\": posID\r\n\t\t});\r\n\t},\r\n\t//坐下\r\n\tSendSit: function (roomID, posID) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"Sit\", {\r\n\t\t\t\"roomID\": roomID,\r\n\t\t\t\"posID\": posID\r\n\t\t});\r\n\t},\r\n\t//抢庄\r\n\tSendQiangZhuang: function (beishu) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"QiangZhuang\", {\r\n\t\t\t\"roomID\": this.enterRoomID,\r\n\t\t\t\"beishu\": beishu\r\n\t\t});\r\n\t},\r\n\t//加倍\r\n\tSendConfirmBeiShu: function (beishu) {\r\n\t\tthis.NetManager.SendPack(this.gameName + \".C\" + this.gameName.toUpperCase() + \"ConfirmBeiShu\", {\r\n\t\t\t\"roomID\": this.enterRoomID,\r\n\t\t\t\"beishu\": beishu\r\n\t\t});\r\n\t},\r\n});\r\n\r\n\r\nvar g_FJSSZRoomMgr = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function () {\r\n\tif (!g_FJSSZRoomMgr)\r\n\t\tg_FJSSZRoomMgr = new FJSSZRoomMgr();\r\n\treturn g_FJSSZRoomMgr;\r\n};\r\n"]}