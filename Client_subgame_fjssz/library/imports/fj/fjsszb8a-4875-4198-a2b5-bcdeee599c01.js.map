{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\fjssz_UITop.js"],"names":["app","require","cc","Class","extends","subGameName","properties","OnCreateInit","closeformPath","node_head","GetWndNode","RegEvent","Event_HeroProperty","WeChatHeadImage1","getComponent","OnShow","formPath","isShowFangka","isShowQuanka","isShowLedou","path","lb_heroName","Label","lb_heroID","rightTop","getChildByName","active","ShowFastCount","ShowRoomCard","ShowClubCard","ShowHero_NameOrID","event","argDict","gold","GetHeroProperty","string","heroRoomCard","heroClubCard","heroName","width","node","length","substring","heroID","i18n","t","ComTool","GetPid","ShowHeroHead","OnClick","btnName","btnNode","sys","isNative","RemoveClientManager","SendPack","LocalDataManager","SetConfigProperty","StopSceneMusic","gamePath","jsb","fileUtils","getWritablePath","window","error","console","log","CloseForm","ShowForm"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,WAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQD,IAAIK,WAAJ,GAAkB,WAA1B,CADJ;;AAGLC,gBAAY,EAHP;AAILC,kBAAc,wBAAY;AACtB,aAAKC,aAAL,GAAqB,EAArB;AACH,aAAKC,SAAL,GAAiB,KAAKC,UAAL,CAAgB,2CAAhB,CAAjB;AACG,aAAKC,QAAL,CAAc,cAAd,EAA8B,KAAKC,kBAAnC;AACA,aAAKC,gBAAL,GAAwB,KAAKJ,SAAL,CAAeK,YAAf,CAA4Bd,IAAIK,WAAJ,GAAkB,kBAA9C,CAAxB;AACH,KATI;AAULU,YAAQ,gBAAUC,QAAV,EAAqF;AAAA,YAAjEC,YAAiE,uEAAlD,KAAkD;AAAA,YAA3CC,YAA2C,uEAA5B,KAA4B;AAAA,YAArBC,WAAqB,uEAAP,KAAO;;AAC5F,YAAIC,OAAO,mCAAX;AACA,aAAKC,WAAL,GAAmB,KAAKX,UAAL,CAAgBU,OAAO,YAAvB,EAAqCN,YAArC,CAAkDZ,GAAGoB,KAArD,CAAnB;AACA,aAAKC,SAAL,GAAiB,KAAKb,UAAL,CAAgBU,OAAO,UAAvB,EAAmCN,YAAnC,CAAgDZ,GAAGoB,KAAnD,CAAjB;AACA,aAAKE,QAAL,GAAgB,KAAKd,UAAL,CAAgB,kCAAhB,CAAhB;AACG,aAAKF,aAAL,GAAqBQ,QAArB;AACA,YAAIC,YAAJ,EAAkB;AACd,iBAAKO,QAAL,CAAcC,cAAd,CAA6B,QAA7B,EAAuCC,MAAvC,GAAgD,IAAhD;AACH,SAFD,MAEK;AACD,iBAAKF,QAAL,CAAcC,cAAd,CAA6B,QAA7B,EAAuCC,MAAvC,GAAgD,KAAhD;AACH;AACD,YAAIR,YAAJ,EAAkB;AACd,iBAAKM,QAAL,CAAcC,cAAd,CAA6B,QAA7B,EAAuCC,MAAvC,GAAgD,IAAhD;AACH,SAFD,MAEK;AACD,iBAAKF,QAAL,CAAcC,cAAd,CAA6B,QAA7B,EAAuCC,MAAvC,GAAgD,KAAhD;AACH;AACD,YAAIP,WAAJ,EAAiB;AACb,iBAAKK,QAAL,CAAcC,cAAd,CAA6B,OAA7B,EAAsCC,MAAtC,GAA+C,IAA/C;AACH,SAFD,MAEK;AACD,iBAAKF,QAAL,CAAcC,cAAd,CAA6B,OAA7B,EAAsCC,MAAtC,GAA+C,KAA/C;AACH;AACD,aAAKC,aAAL;AACA,aAAKC,YAAL;AACA,aAAKC,YAAL;AACA,aAAKC,iBAAL;AACH,KAnCI;;AAqCLlB,wBAAmB,4BAAUmB,KAAV,EAAiB;AAChC,YAAIC,UAAUD,KAAd;AACA,YAAGC,QAAQ,UAAR,KAAuB,MAA1B,EAAiC;AAC7B,iBAAKL,aAAL;AACH,SAFD,MAGK,IAAGK,QAAQ,UAAR,KAAuB,UAA1B,EAAqC;AACtC,iBAAKJ,YAAL;AACH,SAFI,MAEC,IAAGI,QAAQ,UAAR,KAAuB,UAA1B,EAAqC;AACvC,iBAAKH,YAAL;AACH;AACJ,KA/CI;AAgDLF,mBAAc,yBAAY;AACtB,YAAIM,OAAOjC,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC6B,eAAxC,CAAwD,MAAxD,CAAX;AACA,aAAKV,QAAL,CAAcC,cAAd,CAA6B,OAA7B,EAAsCA,cAAtC,CAAqD,OAArD,EAA8DX,YAA9D,CAA2EZ,GAAGoB,KAA9E,EAAqFa,MAArF,GAA4FF,IAA5F;AACH,KAnDI;AAoDLL,kBAAa,wBAAY;AACrB,YAAIQ,eAAepC,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC6B,eAAxC,CAAwD,UAAxD,CAAnB;AACA,aAAKV,QAAL,CAAcC,cAAd,CAA6B,QAA7B,EAAuCA,cAAvC,CAAsD,OAAtD,EAA+DX,YAA/D,CAA4EZ,GAAGoB,KAA/E,EAAsFa,MAAtF,GAA6FC,YAA7F;AACH,KAvDI;AAwDLP,kBAAa,wBAAY;AACrB,YAAIQ,eAAerC,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC6B,eAAxC,CAAwD,UAAxD,CAAnB;AACA,aAAKV,QAAL,CAAcC,cAAd,CAA6B,QAA7B,EAAuCA,cAAvC,CAAsD,OAAtD,EAA+DX,YAA/D,CAA4EZ,GAAGoB,KAA/E,EAAsFa,MAAtF,GAA6FE,YAA7F;AACH,KA3DI;;AA6DLP,uBAAkB,6BAAY;AAC1B,YAAIQ,WAAWtC,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC6B,eAAxC,CAAwD,MAAxD,CAAf;AACA,aAAKb,WAAL,CAAiBc,MAAjB,GAA0BG,QAA1B;AACA,YAAIC,QAAQ,KAAKlB,WAAL,CAAiBmB,IAAjB,CAAsBD,KAAlC;AACA,YAAGD,SAASG,MAAT,GAAkB,CAAlB,IAAuBF,QAAQ,GAAlC,EACI,KAAKlB,WAAL,CAAiBc,MAAjB,GAA0B,KAAKd,WAAL,CAAiBc,MAAjB,CAAwBO,SAAxB,CAAkC,CAAlC,EAAoC,CAApC,CAA1B;AACJ,YAAIC,SAAS3C,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC6B,eAAxC,CAAwD,KAAxD,CAAb;AACA,aAAKX,SAAL,CAAeY,MAAf,GAAwBnC,IAAI4C,IAAJ,CAASC,CAAT,CAAW,gBAAX,EAA4B,EAAC,OAAM,KAAKC,OAAL,CAAaC,MAAb,CAAoBJ,MAApB,CAAP,EAA5B,CAAxB;AACA,aAAK9B,gBAAL,CAAsBmC,YAAtB,CAAmCL,MAAnC;AAEH,KAvEI;AAwELM,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAG,eAAeD,OAAlB,EAA0B;AACtB,gBAAG,KAAK1C,aAAL,IAAsB,EAAzB,EAA4B;AACxB,oBAAI,KAAKA,aAAL,IAAsBR,IAAIK,WAAJ,GAAkB,SAA5C,EAAuD;AACnD,wBAAI,CAACH,GAAGkD,GAAH,CAAOC,QAAZ,EAAsB;AACtB;AACArD,wBAAIA,IAAIK,WAAJ,GAAkB,QAAtB,EAAgCiD,mBAAhC;AACAtD,wBAAIA,IAAIK,WAAJ,GAAkB,aAAtB,IAAuCkD,QAAvC,CAAgD,gBAAhD,EAAkE,EAAC,YAAW,MAAZ,EAAlE,EAAuF,UAASxB,KAAT,EAAe;AAClG/B,4BAAIwD,gBAAJ,GAAuBC,iBAAvB,CAAyC,SAAzC,EAAoD,MAApD,EAA4D1B,KAA5D;AACA;AACA/B,4BAAIA,IAAIK,WAAJ,GAAkB,eAAtB,IAAyCqD,cAAzC;AACA,4BAAIC,WAAW,CAACC,IAAIC,SAAJ,GAAgBD,IAAIC,SAAJ,CAAcC,eAAd,EAAhB,GAAkD,GAAnD,IAA0D,aAAzE;AACAC,+BAAO9D,OAAP,CAAe0D,WAAW,gBAA1B;AACH,qBAND,EAMG,UAASK,KAAT,EAAe;AACdC,gCAAQC,GAAR,CAAY,UAAZ;AACH,qBARD;AASH,iBAbD,MAaO;AACHlE,wBAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC8D,SAAxC,CAAkD,KAAK3D,aAAvD;AACA,yBAAK2D,SAAL;AACAnE,wBAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC+D,QAAxC,CAAiDpE,IAAIK,WAAJ,GAAkB,SAAnE;AACH;AACJ;AACJ,SArBD,MAqBM,IAAG,cAAc6C,OAAjB,EAAyB;AAC3B;AACH,SAFK,MAEA,IAAG,iBAAiBA,OAApB,EAA4B;AAC9B;AACH,SAFK,MAEA,IAAG,qBAAqBA,OAAxB,EAAgC;AAClC;AACH,SAFK,MAEA,IAAG,qBAAqBA,OAAxB,EAAgC;AAClC;AACH;AAEJ;AAxGI,CAAT","file":"fjssz_UITop.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"fjssz_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {},\r\n    OnCreateInit: function () {\r\n        this.closeformPath = \"\";\r\n\t    this.node_head = this.GetWndNode(\"img_syright_up/bgcreate/userinfo/btn_head\");\r\n        this.RegEvent(\"HeroProperty\", this.Event_HeroProperty);\r\n        this.WeChatHeadImage1 = this.node_head.getComponent(app.subGameName + \"_WeChatHeadImage\");\r\n    },\r\n    OnShow: function (formPath, isShowFangka = false, isShowQuanka = false, isShowLedou = false) {\r\n\t    let path = \"img_syright_up/bgcreate/userinfo/\";\r\n\t    this.lb_heroName = this.GetWndNode(path + \"label_name\").getComponent(cc.Label);\r\n\t    this.lb_heroID = this.GetWndNode(path + \"label_id\").getComponent(cc.Label);\r\n\t    this.rightTop = this.GetWndNode(\"img_syright_up/bgcreate/rightTop\");\r\n        this.closeformPath = formPath;\r\n        if (isShowFangka) {\r\n            this.rightTop.getChildByName('fangka').active = true;\r\n        }else{\r\n            this.rightTop.getChildByName('fangka').active = false;\r\n        }\r\n        if (isShowQuanka) {\r\n            this.rightTop.getChildByName('quanka').active = true;\r\n        }else{\r\n            this.rightTop.getChildByName('quanka').active = false;\r\n        }\r\n        if (isShowLedou) {\r\n            this.rightTop.getChildByName('ledou').active = true;\r\n        }else{\r\n            this.rightTop.getChildByName('ledou').active = false;\r\n        }\r\n        this.ShowFastCount();\r\n        this.ShowRoomCard();\r\n        this.ShowClubCard();\r\n        this.ShowHero_NameOrID();\r\n    },\r\n\r\n    Event_HeroProperty:function (event) {\r\n        let argDict = event;\r\n        if(argDict[\"Property\"] == \"gold\"){\r\n            this.ShowFastCount();\r\n        }\r\n        else if(argDict[\"Property\"] == \"roomCard\"){\r\n            this.ShowRoomCard();\r\n        }else if(argDict[\"Property\"] == \"clubCard\"){\r\n            this.ShowClubCard();\r\n        }\r\n    },\r\n    ShowFastCount:function () {\r\n        let gold = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty('gold');\r\n        this.rightTop.getChildByName('ledou').getChildByName('label').getComponent(cc.Label).string=gold;\r\n    },\r\n    ShowRoomCard:function () {\r\n        let heroRoomCard = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"roomCard\");\r\n        this.rightTop.getChildByName('fangka').getChildByName('label').getComponent(cc.Label).string=heroRoomCard;\r\n    },\r\n    ShowClubCard:function () {\r\n        let heroClubCard = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"clubCard\");\r\n        this.rightTop.getChildByName('quanka').getChildByName('label').getComponent(cc.Label).string=heroClubCard;\r\n    },\r\n\r\n    ShowHero_NameOrID:function () {\r\n        let heroName = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"name\");\r\n        this.lb_heroName.string = heroName;\r\n        let width = this.lb_heroName.node.width;\r\n        if(heroName.length > 9 && width > 200)\r\n            this.lb_heroName.string = this.lb_heroName.string.substring(0,9);\r\n        let heroID = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"pid\");\r\n        this.lb_heroID.string = app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\r\n        this.WeChatHeadImage1.ShowHeroHead(heroID);\r\n\r\n    },\r\n    OnClick:function(btnName, btnNode){\r\n        if('btn_close' == btnName){\r\n            if(this.closeformPath != \"\"){\r\n                if (this.closeformPath == app.subGameName + \"_UIMain\") {\r\n                    if (!cc.sys.isNative) return;\r\n                    //如果是游戏切换需要释放内存，重新加载\r\n                    app[app.subGameName + \"Client\"].RemoveClientManager();\r\n                    app[app.subGameName + \"_NetManager\"]().SendPack(\"base.C1110UUID\", {\"gameName\":\"hall\"}, function(event){\r\n                        app.LocalDataManager().SetConfigProperty(\"Account\", \"uuid\", event);\r\n                        //停止场景音乐\r\n                        app[app.subGameName + \"_SceneManager\"]().StopSceneMusic();\r\n                        let gamePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + \"ALLGame/sss\";\r\n                        window.require(gamePath + \"/src/dating.js\");\r\n                    }, function(error){\r\n                        console.log(\"获取uuid失败\");\r\n                    });\r\n                } else {\r\n                    app[app.subGameName + \"_FormManager\"]().CloseForm(this.closeformPath);\r\n                    this.CloseForm();\r\n                    app[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIMain\");\r\n                }\r\n            }\r\n        }else if('btn_head' == btnName){\r\n            // this.FormManager.ShowForm(\"UIUserInfo\");\r\n        }else if('btn_addGold' == btnName){\r\n            // this.FormManager.ShowForm(\"UIStore\",'btn_table0');\r\n        }else if('btn_addRoomCard' == btnName){\r\n            // this.FormManager.ShowForm(\"UIStore\",'btn_table1');\r\n        }else if('btn_addQuanCard' == btnName){\r\n            // this.FormManager.ShowForm('ui/club/UIClubStore');\r\n        }\r\n        \r\n    }\r\n});\r\n"]}