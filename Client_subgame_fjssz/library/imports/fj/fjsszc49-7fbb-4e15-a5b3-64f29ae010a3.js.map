{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\fjssz_UIPractice.js"],"names":["app","require","cc","Class","extends","subGameName","properties","OnCreateInit","ZorderLv","contentNode","GetWndNode","practiceConfig","GetTableDict","GameManager","FormManager","NetManager","playerNumList","practiceId","RegEvent","Event_GetCurRoomID","Event_CodeError","OnShow","gameType","SetGameType","curRoomID","curGameTypeStr","SetGetRoomIDByUI","SendPack","SetAutoPlayIng","CloseForm","ShowForm","sendGameType","sendPack","toUpperCase","OnSuccessInitData","bind","serverPack","list","gameLists","length","splice","idx","push","UpdatePractice","refreshList","key","i","childNode","children","baseNum","baseMark","toFixed","toString","getChildByName","getComponent","Label","string","playerNum","min","max","needStr","parseInt","event","roomID","toLowerCase","codeInfo","code","ShareDefine","NotFind_Room","ShowSysMsg","NotEnoughCoin","WaitForConfirm","Confirm","MuchCoin","ConfirmOK","OnClose","SetWaitForConfirm","msgID","type","msgArg","cbArg","ConfirmManager","SetWaitForConfirmForm","OnConFirm","ShowConfirm","clickType","backArgList","Click_btn_goRoom","sys","isNative","testData","action","fromName","localStorage","setItem","JSON","stringify","RemoveClientManager","LocalDataManager","SetConfigProperty","gamePath","jsb","fileUtils","getWritablePath","window","error","console","log","clubId","clubCardNtfs","data","setTimeout","clubName","roomcardattention","GetCfgByGameName","gameName","cfgList","sendPracticeId","argList","Array","prototype","slice","call","arguments","Math","floor","substring","OnSuccess","OnEnterRoomFailed","OnClick","btnName","btnNode","needCfgList","id","gold","GetHeroProperty","needId"],"mappings":"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","file":"fjssz_UIPractice.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"fjssz_app\");\r\ncc.Class({\r\n\textends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n\tproperties: {},\r\n\tOnCreateInit: function () {\r\n\t\tthis.ZorderLv = 5;\r\n\t\tthis.contentNode = this.GetWndNode(\"gameScrollView/view/content\");\r\n\r\n\t\tthis.practiceConfig = app[app.subGameName + \"_SysDataManager\"]().GetTableDict(\"practice\");\r\n\t\tthis.GameManager = app[app.subGameName + \"_GameManager\"]();\r\n\t\tthis.FormManager = app[app.subGameName + \"_FormManager\"]();\r\n\t\tthis.NetManager = app[app.subGameName + \"_NetManager\"]();\r\n\t\tthis.playerNumList = [];\r\n\t\tthis.practiceId = 0;\r\n\t\tthis.RegEvent(\"GetCurRoomID\", this.Event_GetCurRoomID, this);\r\n\t\tthis.RegEvent(\"CodeError\", this.Event_CodeError, this);\r\n\t},\r\n\t//-----------------显示函数------------------\r\n\tOnShow: function () {\r\n\t\tthis.gameType = app.subGameName;\r\n\t\tapp[app.subGameName + \"Client\"].SetGameType('');\r\n\t\tthis.curRoomID = 0;\r\n\t\tthis.curGameTypeStr = \"\";\r\n\t\tthis.GameManager.SetGetRoomIDByUI(true);\r\n\t\tthis.NetManager.SendPack(\"game.C1101GetRoomID\", {});\r\n\t\tthis.GameManager.SetAutoPlayIng(false);\r\n\t\tthis.FormManager.CloseForm(\"UIAutoPlay\");\r\n\t\tthis.FormManager.ShowForm(app.subGameName + \"_UITop\", app.subGameName + \"_UIPractice\", true, false, true);\r\n\t\tthis.sendGameType();\r\n\t},\r\n\tsendGameType: function () {\r\n\t\tlet sendPack = {\r\n\t\t\t'gameType': this.gameType\r\n\t\t};\r\n\t\tthis.NetManager.SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"GoldList\", sendPack, this.OnSuccessInitData.bind(this));\r\n\t},\r\n\tOnSuccessInitData: function (serverPack) {\r\n\t\t//获取服务端传过来的数据\r\n\t\tlet list = serverPack.gameLists;\r\n\t\tif (this.playerNumList && this.playerNumList.length) {\r\n\t\t\tthis.playerNumList.splice(0, this.playerNumList.length);\r\n\t\t}\r\n\t\tfor (let idx = 0; idx < list.length; idx++) {\r\n\t\t\tthis.playerNumList.push(list[idx]);\r\n\t\t}\r\n\t\tthis.UpdatePractice();\r\n\t},\r\n\tUpdatePractice: function () {\r\n\t\tlet refreshList = [];\r\n\t\tfor (let key in this.practiceConfig) {\r\n\t\t\tif (this.gameType == this.practiceConfig[key]['gameType'])\r\n\t\t\t\trefreshList.push(this.practiceConfig[key]);\r\n\t\t}\r\n\t\tfor (let i = 0; i < refreshList.length; i++) {\r\n\t\t\tif (i > 3) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tlet childNode = this.contentNode.children[i];\r\n\t\t\tlet baseNum = refreshList[i]['baseMark'];\r\n\t\t\tlet baseMark = '';\r\n\t\t\tif (baseMark >= 10000)\r\n\t\t\t\tbaseMark = (baseNum / 10000).toFixed(1) + '万';\r\n\t\t\telse if (baseMark > 1000)\r\n\t\t\t\tbaseMark = (baseNum / 1000).toFixed(1) + '千';\r\n\t\t\telse\r\n\t\t\t\tbaseMark = baseNum.toString();\r\n\t\t\tchildNode.getChildByName('lb_difen').getComponent(cc.Label).string = \"底分:\" + baseMark;\r\n\t\t\tif (this.playerNumList.length) {\r\n\t\t\t\tchildNode.getChildByName('lb_renshu').getComponent(cc.Label).string = (this.playerNumList[i].playerNum).toString() + '人';\r\n\t\t\t}\r\n\t\t\tlet min = refreshList[i]['min'];\r\n\t\t\tlet max = refreshList[i]['max'];\r\n\t\t\tlet needStr = '';\r\n\t\t\tif (0 == max) {\r\n\t\t\t\tif (min < 1000)\r\n\t\t\t\t\tneedStr = min.toString();\r\n\t\t\t\telse if (min >= 10000)\r\n\t\t\t\t\tneedStr = parseInt(min / 10000).toString() + '万以上';\r\n\t\t\t\telse\r\n\t\t\t\t\tneedStr = parseInt(min / 1000).toString() + '千以上';\r\n\t\t\t} else {\r\n\t\t\t\tif (min < 1000)\r\n\t\t\t\t\tneedStr = min.toString() + '-';\r\n\t\t\t\telse if (min >= 10000)\r\n\t\t\t\t\tneedStr = parseInt(min / 10000).toString() + '万-';\r\n\t\t\t\telse\r\n\t\t\t\t\tneedStr = parseInt(min / 1000).toString() + '千-';\r\n\r\n\t\t\t\tif (max < 1000)\r\n\t\t\t\t\tneedStr += max.toString();\r\n\t\t\t\telse if (max >= 10000)\r\n\t\t\t\t\tneedStr += parseInt(max / 10000).toString() + '万';\r\n\t\t\t\telse\r\n\t\t\t\t\tneedStr += parseInt(max / 1000).toString() + '千';\r\n\t\t\t}\r\n\t\t\tchildNode.getChildByName('lb_zhunru').getComponent(cc.Label).string = \"准入:\" + needStr;\r\n\t\t}\r\n\t},\r\n\tEvent_GetCurRoomID: function (event) {\r\n\t\tlet serverPack = event;\r\n\t\tthis.curRoomID = serverPack.roomID;\r\n\t\tif (0 != this.curRoomID) {\r\n\t\t\tthis.curGameTypeStr = serverPack.gameType.toLowerCase();\r\n\t\t}\r\n\t},\r\n\tEvent_CodeError: function (event) {\r\n\t\tlet codeInfo = event;\r\n\t\tlet code = codeInfo[\"Code\"];\r\n\t\tif (code == this.ShareDefine.NotFind_Room) {\r\n\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg('DissolveRoom');\r\n\t\t\tthis.curRoomID = 0;\r\n\t\t\tthis.curGameTypeStr = '';\r\n\t\t} else if (code == this.ShareDefine.NotEnoughCoin) {\r\n\t\t\tthis.WaitForConfirm(\"MSG_NOTROOMCOIN\", [], [], this.ShareDefine.Confirm);\r\n\t\t}\r\n\t\telse if (code == this.ShareDefine.MuchCoin) {\r\n\t\t\tthis.WaitForConfirm(\"MSG_TOOMUCHCOIN\", [], [], this.ShareDefine.ConfirmOK);\r\n\t\t}\r\n\t},\r\n\tOnClose: function () {\r\n\t},\r\n\t//---------点击函数---------------------\r\n\tSetWaitForConfirm: function (msgID, type, msgArg = [], cbArg = []) {\r\n\t\tlet ConfirmManager = app[app.subGameName + \"_ConfirmManager\"]();\r\n\t\tConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, cbArg);\r\n\t\tConfirmManager.ShowConfirm(type, msgID, msgArg);\r\n\t},\r\n\tOnConFirm: function (clickType, msgID, backArgList) {\r\n\t\tif (clickType != \"Sure\") {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif ('MSG_GO_ROOM' == msgID) {\r\n\t\t\tthis.Click_btn_goRoom();\r\n\t\t} else if ('MSG_NOTROOMCOIN' == msgID) {\r\n\t\t\tif (!cc.sys.isNative) return;\r\n\t\t\tlet testData = {action: \"showForm\", fromName: \"UIStore\"};\r\n\t\t\tcc.sys.localStorage.setItem(\"switchGameData\", JSON.stringify(testData));\r\n\t\t\tthis.NetManager.SendPack(\"base.C1110UUID\", {\"gameName\": \"hall\"}, function (event) {\r\n\t\t\t\t//如果是游戏切换需要释放内存，重新加载\r\n\t\t\t\tapp[app.subGameName + \"Client\"].RemoveClientManager();\r\n\t\t\t\tapp.LocalDataManager().SetConfigProperty(\"Account\", \"uuid\", event);\r\n\t\t\t\tlet gamePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + \"ALLGame/fjssz\";\r\n\t\t\t\twindow.require(gamePath + \"/src/dating.js\");\r\n\t\t\t}, function (error) {\r\n\t\t\t\tconsole.log(\"获取uuid失败\");\r\n\t\t\t});\r\n\t\t} else if ('MSG_CLUB_RoomCard_Not_Enough' == msgID) {\r\n\t\t\tlet clubId = backArgList[0];\r\n\t\t\tfor (let i = 0; i < this.clubCardNtfs.length; i++) {\r\n\t\t\t\tif (this.clubCardNtfs[i].clubId == clubId) {\r\n\t\t\t\t\tthis.clubCardNtfs.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (0 != this.clubCardNtfs.length) {\r\n\t\t\t\tlet data = this.clubCardNtfs[0];\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg('MSG_CLUB_RoomCard_Not_Enough', [data.clubName, data.roomcardattention]);\r\n\t\t\t\t}, 200);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tGetCfgByGameName: function (gameName) {\r\n\t\tlet cfgList = [];\r\n\t\tfor (let key in this.practiceConfig) {\r\n\t\t\tif (gameName == this.practiceConfig[key].gameType)\r\n\t\t\t\tcfgList.push(this.practiceConfig[key]);\r\n\t\t}\r\n\t\treturn cfgList;\r\n\t},\r\n\tsendPracticeId: function () {\r\n\t\tvar argList = Array.prototype.slice.call(arguments);\r\n\t\tlet idx = 0;\r\n\t\tif (typeof argList[0] == 'string') {\r\n\t\t\tidx = Math.floor(argList[0].substring(('item').length));\r\n\t\t}\r\n\t\telse if (typeof argList[0] == 'number') {\r\n\t\t\tidx = argList[0];\r\n\t\t}\r\n\t\tthis.practiceId = idx;\r\n\r\n\t\tlet sendPack = {\r\n\t\t\tpracticeId: idx\r\n\t\t};\r\n\t\tthis.NetManager.SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"GoldRoom\", sendPack, this.OnSuccess.bind(this), this.OnEnterRoomFailed.bind(this));\r\n\t},\r\n\tOnClick: function (btnName, btnNode) {\r\n\t\tlet needCfgList = [];\r\n\t\tif ('btn_xsc' == btnName) {\r\n\t\t\tneedCfgList = this.GetCfgByGameName(this.gameType);\r\n\t\t\tthis.sendPracticeId(needCfgList[0].id);\r\n\t\t} else if ('btn_cjc' == btnName) {\r\n\t\t\tneedCfgList = this.GetCfgByGameName(this.gameType);\r\n\t\t\tthis.sendPracticeId(needCfgList[1].id);\r\n\t\t} else if ('btn_zjc' == btnName) {\r\n\t\t\tneedCfgList = this.GetCfgByGameName(this.gameType);\r\n\t\t\tthis.sendPracticeId(needCfgList[2].id);\r\n\t\t} else if ('btn_gjc' == btnName) {\r\n\t\t\tneedCfgList = this.GetCfgByGameName(this.gameType);\r\n\t\t\tthis.sendPracticeId(needCfgList[3].id);\r\n\t\t} else if ('btn_go' == btnName) {\r\n\t\t\tlet gold = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty('gold');\r\n\t\t\tneedCfgList = this.GetCfgByGameName(this.gameType);\r\n\t\t\tif (0 == needCfgList.length) {\r\n\t\t\t\tconsole.error('needCfgList Error curGameName :' + this.gameType);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (gold < needCfgList[0].min) {\r\n\t\t\t\tthis.WaitForConfirm(\"MSG_NOTROOMCOIN\", [], [], this.ShareDefine.Confirm);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet needId = -1;\r\n\t\t\tfor (let i = 0; i < needCfgList.length; i++) {\r\n\t\t\t\tif (gold >= needCfgList[i].min &&\r\n\t\t\t\t\t(gold <= needCfgList[i].max || 0 == needCfgList[i].max)) {\r\n\t\t\t\t\tneedId = needCfgList[i].id;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (-1 == needId) {\r\n\t\t\t\tconsole.error('CfgError needId = -1');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.sendPracticeId(needId);\r\n\t\t} else {\r\n\t\t\tconsole.error(\"OnClick(%s) not find\", btnName);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tOnSuccess: function (serverPack) {\r\n\t\tconsole.log('OnSuccess serverPack', serverPack);\r\n\t\tlet roomID = serverPack.roomID;\r\n\t\tthis.NetManager.SendPack('sss.CSSSGetRoomInfo', {\"roomID\": roomID});\r\n\t\tapp[app.subGameName+\"_ShareDefine\"]().practiceId = this.practiceId;\r\n\t},\r\n\r\n\tOnEnterRoomFailed: function (serverPack) {\r\n\t\tconsole.log('OnEnterRoomFailed serverPack', serverPack);\r\n\t},\r\n});"]}