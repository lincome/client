{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\fjssz_BaseForm.js"],"names":["app","require","ZorderLvEnum","cc","Enum","ZorderLv0","ZorderLv1","ZorderLv2","ZorderLv3","ZorderLv4","ZorderLv5","ZorderLv6","ZorderLv7","ZorderLv8","ZorderLv9","ShowEffectEnum","None","FromTop","FromBottom","FromLeft","FromRight","FromCenter","CloseEffectEnum","ToTop","ToBottom","ToLeft","ToRight","ToCenter","sss_BaseForm","Class","extends","subGameName","properties","OnCreate","formName","JS_Name","OpenActionTag","InitNodeScale","node","scale","_dataInfo","InitBaseData","OnCreateInit","ShowFormName","SysNotifyManager","ConfirmManager","SysDataManager","ShareDefine","ComTool","EffectManager","FormManager","SoundManager","LocalDataManager","SDKManager","IntegrateImage","GetTableDict","Effect","on","OnEffectAnimationEnd","bind","_effectDict","_eventFuncDict","_childFormComponentDict","_cacheChildFormDict","_loadWndImageDict","onLoad","Destroy","UnRegTargetEvent","OnDestroy","destroy","update","dt","OnUpdate","error","console","stack","ShowForm","argList","parent","find","addChild","ZorderLv","ShowFormAction","eventName","RegEvent","AddShowingForm","OnShow","apply","log","ScaleIn","stopAllActions","tween","to","start","CloseForm","isDestory","CloseFormAction","OnClose","removeFromParent","RemoveShowingForm","CloseCurAllFrom","lastIs3DShow","GetConfigProperty","toUpperCase","ShowOrCloseForm","IsFormShow","OnFormActionEnd","sender","userData","getChildByName","Node","setPosition","label","addComponent","Label","string","GetFormProperty","fontSize","color","Color_Orange","IsShow","uiName","childs","children","i","length","name","active","openAction","startScale","ShowEffectType","scaleTo","easing","easeElasticOut","stopActionByTag","action","sequence","callFunc","setTag","runAction","CreateChildForm","childComponentName","childPrefab","parentNode","pos","zorderLv","argument","isShowForm","childFormNode","NewChildFormNode","childFormComponent","getComponent","WarnLog","AddChildFormComponent","hasOwnProperty","get","instantiate","childFormComponentList","SetDefault","push","GetChildComponentByUserData","allChildFormComponentList","count","index","childComponent","childUserData","GetChildComponentByChildIndex","childIndex","GetAllChildComponentByName","ClearAllChildComponentByName","allChildFormList","NodePool","cacheNodePool","put","ClearFormAllChildComponent","GetChildFormCacheNodePool","TriggerChildEvent","argDict","OnParentEvent","TriggerChildEventByChildComponent","TriggerAllChildEvent","GetFormContentSize","getContentSize","property","GetWndNode","wndPath","wndNode","GetWndComponent","componentType","wndComponent","GetWndProperty","EditBox","getPosition","opacity","Button","interactable","ProgressBar","progress","SetFormPosition","SetFormProperty","value","SetWndProperty","RichText","SetWndImage","imageName","fileName","imageInfo","filePath","fileNameList","SetWndImageByFilePath","SetNodeImageByFilePath","isHideFirst","nodeSprite","Sprite","that","CreateLoadPromise","SpriteFrame","then","spriteFrame","bluebird","resolve","sprite","resType","SpriteAtlas","loadWndImageInfo","getSpriteFrame","catch","ClearWndImage","SetWndFlyTo","startPos","endPos","time","useData","WndRunAction","SetWndOpacity","endFade","SetWndDelay","delayTime","StopWndFly","StopWndOpacity","StopWndDelay","actionType","WndFlyUseData","starPos","moveTo","OnRunActionEnd","fadeTo","FlyWnd_FlyEnd","OpacityWnd_End","FlyWnd_DelayEnd","wndName","GetWndEffectPos","wndObj","postType","offPosList","EffectPosType_5","size","posX","posY","EffectPosType_1","width","height","EffectPosType_2","EffectPosType_3","EffectPosType_4","EffectPosType_6","EffectPosType_7","EffectPosType_8","EffectPosType_9","EffectPosType_10","halfWidth","halfHeight","RandInt","v2","AddWndEffect","effectName","effectRes","repeatCount","posType","effectTableInfo","effectPos","allEffectDict","effectComponent","GetModelProperty","DeleteWndEffect","CreateEffectByEffectRes","OnCreateEffectEnd","ErrLog","AddModelToParent","SetModelProperty","animationState","ShowEffect","wrapMode","WrapMode","Default","PingPong","Loop","event","modelComponent","OnEffectEnd","DeleteEffect","DeleteWndAllEffect","DeleteEffectByDict","DeleteFormAllEffect","func","ShowSysMsg","msgID","msgArgList","WaitForConfirm","backArgList","curConFirmType","Confirm","SetWaitForConfirmForm","OnConFirm","SetUpTipFormConfirmList","InArray","ShowConfirm","ConfirmUse","ShowUseMsg","ConfirmBuy","ShowBuyMsg","clickType","SimulateOnClick","btnNode","buttonComponent","btnName","OnClick","OnClick_Close","OnClick_BtnWnd","eventTouch","eventData","PlaySound","currentTarget","OnClick_Toggle","toggle","OnClick_Form","OnClickForm","passSecond","OnReload","InitWeiXinShare","sys","isNative","OnWeChatReady","IsIphoneX","FrameSize","view","getFrameSize","OnScrollEnded","GetTuiGuangUrl","TuiGuangUrl","heroID","GetHeroProperty","ShortHeroID","GetPid","long_url","SendPack","GetShorTuiGuangUrl","FailTuiGuangUrl","getRandom","min","max","r","Math","random","re","round","GetRandBaseUrl","urls","GetClientConfigProperty","urlList","split","rand","serverPack","randUrl","SetConfigProperty","requestUrl","jsonStr","replace","ShareUrl","eval","url_short","SuccessTcnUrl","shareUrl","text","ShareText","FailTcnUrl","BeginShare","roomKey","Click_btn_Sharelink","title","shareShortRoomID","desc","playerNameList","join","weChatAppShareUrl","shareLongRoomID","Share","GetAppName","appName","localStorage","getItem","Click_btn_weixin","room","WeChatShare","setCount","GetRoomConfigByProperty","GetRoomProperty","allPlayerInfo","GetRoomPosMgr","GetRoomAllPlayerInfo","joinPlayerCount","GetRoomPlayerCount","nowJoin","pid","gamedesc","autoCardIdx","que","teshuwanfan","WanFa","ShareLineLink","Click_btn_fzkl","str","toString","CallToNative","gameCreateConfig","playGame","sign","gameType","wanfa","key","gameName","GameName","isWanFa","dataKey","Key","ToggleType","ToggleDesc","baseDiZhus","dizhuIdx","dizhu","dingzhu","j","GameTyepStringUp","DestroyFromParent","CheckUpdateNotice","gameTypeId","GametTypeNameDict","status","content","module","exports"],"mappings":"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","file":"fjssz_BaseForm.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\r\n BaseForm 界面基类(又FormManager控制创建和销毁)\r\n */\r\n\r\nvar app = require(\"fjssz_app\");\r\n\r\n//界面层级枚举\r\nvar ZorderLvEnum = cc.Enum({\r\n\r\n\t//置底界面层(UIFightTower)\r\n\tZorderLv0: 0,\r\n\r\n\t//聊天层(UIChat)\r\n\tZorderLv1: 1,\r\n\r\n\t//玩家头像层(UIPlayer)\r\n\tZorderLv2: 2,\r\n\r\n\t//通用背景层(UIResource)\r\n\tZorderLv3: 3,\r\n\r\n\t//布阵层\r\n\tZorderLv4: 4,\r\n\r\n\t//主场景工具层(UIMenu)\r\n\tZorderLv5: 5,\r\n\r\n\t//正常界面层(多数界面)\r\n\tZorderLv6: 6,\r\n\r\n\t//置顶层(3级界面使用到,UICardPackFragSale)\r\n\tZorderLv7: 7,\r\n\r\n\t//模态层,消息提示层(UIMessage)\r\n\tZorderLv8: 8,\r\n\r\n\t//debugTool界面\r\n\tZorderLv9: 9,\r\n});\r\n\r\n//界面显示动画枚举\r\n\r\nvar ShowEffectEnum = cc.Enum({\r\n\r\n\t//没有效果\r\n\tNone: 0,\r\n\t//从上划入\r\n\tFromTop: 1,\r\n\t//从下划入\r\n\tFromBottom: 2,\r\n\t//从左划入\r\n\tFromLeft: 3,\r\n\t//从右划入\r\n\tFromRight: 4,\r\n\t//从中间从小变大\r\n\tFromCenter: 5,\r\n});\r\n\r\n\r\n//界面关闭动画枚举\r\nvar CloseEffectEnum = cc.Enum({\r\n\r\n\t//没有效果\r\n\tNone: 0,\r\n\t//从上划入\r\n\tToTop: 1,\r\n\t//从下划入\r\n\tToBottom: 2,\r\n\t//从左划入\r\n\tToLeft: 3,\r\n\t//从右划入\r\n\tToRight: 4,\r\n\t//从中间从小变大\r\n\tToCenter: 5,\r\n});\r\n\r\n\r\nvar sss_BaseForm = cc.Class({\r\n\r\n\textends: require(app.subGameName + \"_BaseComponent\"),\r\n\r\n\tproperties: {\r\n\r\n\t\t//显示界面效果类型\r\n\t\t\"ShowEffectType\": {\r\n\t\t\t\"default\": ShowEffectEnum.None,\r\n\t\t\t\"tooltip\": \"显示界面动画\",\r\n\t\t\t\"type\": ShowEffectEnum,\r\n\t\t},\r\n\r\n\t\t//关闭界面效果类型\r\n\t\t\"CloseEffectType\": {\r\n\t\t\t\"default\": CloseEffectEnum.None,\r\n\t\t\t\"tooltip\": \"关闭界面动画\",\r\n\t\t\t\"type\": CloseEffectEnum,\r\n\t\t},\r\n\r\n\t\t//场景精灵层级\r\n\t\t\"ZorderLv\": {\r\n\t\t\t\"default\": ZorderLvEnum.ZorderLv6,\r\n\t\t\t\"tooltip\": \"界面层级\",\r\n\t\t\t\"type\": ZorderLvEnum,\r\n\t\t},\r\n\r\n\t},\r\n\t//创建对象是被调用(OnLoad前,还未执行addChild,逻辑层初始化)\r\n\tOnCreate: function (formName) {\r\n\t\tthis.JS_Name = formName;\r\n\r\n\t\tthis.OpenActionTag = 1000;\r\n\t\tthis.InitNodeScale = this.node.scale;\r\n\r\n\t\t//界面数据\r\n\t\tthis._dataInfo = {\r\n\t\t\t\"FormName\": formName,\r\n\t\t};\r\n\r\n\r\n\t\tthis.InitBaseData();\r\n\r\n\t\tthis.OnCreateInit();\r\n\t\tthis.ShowFormName();\r\n\t},\r\n\r\n\t//BaseChildForm也需要初始化调用这个接口\r\n\tInitBaseData: function () {\r\n\t\t//管理器\r\n\t\tthis.SysNotifyManager = app[app.subGameName + \"_SysNotifyManager\"]();\r\n\t\tthis.ConfirmManager = app[app.subGameName + \"_ConfirmManager\"]();\r\n\t\tthis.SysDataManager = app[app.subGameName + \"_SysDataManager\"]();\r\n\t\tthis.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n\t\tthis.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n\t\tthis.EffectManager = app[app.subGameName + \"_EffectManager\"]();\r\n\t\tthis.FormManager = app[app.subGameName + \"_FormManager\"]();\r\n\t\tthis.SoundManager = app[app.subGameName + \"_SoundManager\"]();\r\n\t\tthis.LocalDataManager = app.LocalDataManager();\r\n\t\tthis.SDKManager = app[app.subGameName + \"_SDKManager\"]();\r\n\t\t//表配置\r\n\t\tthis.IntegrateImage = this.SysDataManager.GetTableDict(\"IntegrateImage\");\r\n\t\tthis.Effect = this.SysDataManager.GetTableDict(\"Effect\");\r\n\r\n\r\n\t\tthis.node.on(\"EffectAnimationEnd\", this.OnEffectAnimationEnd.bind(this));\r\n\r\n\t\t//-----成员变量----------------\r\n\t\t//控件特效\r\n\t\t// {    spt_card/icon\r\n\t\t//     wndPath:{effectName:effectComponent},\r\n\t\t// }\r\n\t\tthis._effectDict = {};\r\n\r\n\t\t//-----事件注册函数字典------------\r\n\t\tthis._eventFuncDict = {};\r\n\r\n\t\t//子类界面组件字典\r\n\t\tthis._childFormComponentDict = {};\r\n\r\n\t\t//子类界面缓存字典\r\n\t\t// {\r\n\t\t//     'UICardReplace_Child':new cc.NodePool('UICardReplace_Child'),\r\n\t\t// }\r\n\t\tthis._cacheChildFormDict = {};\r\n\t\t//等待加载的贴图信息字典\r\n\t\tthis._loadWndImageDict = {};\r\n\r\n\t},\r\n\r\n\t//------------回掉函数----------------\r\n\r\n\t// active node时调用\r\n\tonLoad: function () {\r\n\r\n\t},\r\n\r\n\t//销毁界面\r\n\tDestroy: function () {\r\n\r\n\t\tapp[app.subGameName + \"Client\"].UnRegTargetEvent(this);\r\n\r\n\t\tthis._eventFuncDict = {};\r\n\r\n\t\tthis.OnDestroy();\r\n\t\t//销毁节点\r\n\t\tthis.node.destroy();\r\n\t},\r\n\r\n\t//没帧回掉\r\n\tupdate: function (dt) {\r\n\t\ttry {\r\n\t\t\tthis.OnUpdate(dt);\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(\"update:%s\", error.stack);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t//显示界面\r\n\tShowForm: function (argList) {\r\n\r\n\t\tif (!argList) {\r\n\t\t\targList = [];\r\n\t\t}\r\n\r\n\t\tlet formName = this._dataInfo[\"FormName\"];\r\n\t\t//获取到当前场景的画布\r\n\t\tlet parent = cc.find('Canvas/uiLayer');\r\n\t\tif (!parent) {\r\n\t\t\tconsole.error(\"ShowForm not find uiLayer\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (this.node.parent == parent) {\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//设置界面新父类\r\n\t\t\tparent.addChild(this.node, this.ZorderLv);\r\n\r\n\t\t\tthis.ShowFormAction();\r\n\r\n\t\t\t//开启界面重新注册已经注册的监听事件\r\n\t\t\tfor (let eventName in this._eventFuncDict) {\r\n\t\t\t\tapp[app.subGameName + \"Client\"].RegEvent(eventName, this._eventFuncDict[eventName], this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.FormManager.AddShowingForm(formName, this);\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tthis.OnShow.apply(this, argList);\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.log(\"ShowForm error:\" + error.stack);\r\n\t\t}\r\n\r\n\t},\r\n\tScaleIn : function(node){\r\n        node.stopAllActions()\r\n\t\tvar scale = 1\r\n\t\tnode.scale = 0\r\n        cc.tween(node).to(0.1, {scale : scale*1.1})\r\n\t\t\t\t\t.to(0.075, {scale : scale*0.88})\r\n\t\t\t\t\t.to(0.075, {scale : scale})\r\n\t\t\t\t\t.start()\r\n\r\n\t},\r\n\t//关闭界面\r\n\tCloseForm: function (isDestory = false) {\r\n\t\t//获取到当前场景的画布\r\n\t\tlet parent = cc.find('Canvas/uiLayer');\r\n\r\n\t\tif (this.node.parent != parent) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t//关闭界面则取消所有事件监听\r\n\t\tapp[app.subGameName + \"Client\"].UnRegTargetEvent(this);\r\n\r\n\t\tthis.CloseFormAction();\r\n\r\n\t\tthis.OnClose();\r\n\r\n\t\tthis.node.removeFromParent(false);\r\n\t\tif (isDestory) {\r\n\t\t\tthis.node.destroy();\r\n\t\t}\r\n\r\n\t\tthis.FormManager.RemoveShowingForm(this._dataInfo[\"FormName\"]);\r\n\r\n\t},\r\n\t//如果当前不是play界面，关闭当前所有界面\r\n\tCloseCurAllFrom: function () {\r\n\t\tlet lastIs3DShow = app.LocalDataManager().GetConfigProperty(\"SysSetting\", app.subGameName + \"_is3DShow\");\r\n\t\tif (lastIs3DShow == 0) {\r\n\t\t\tapp[app.subGameName + \"_FormManager\"]().CloseForm(\"game/\" + app.subGameName.toUpperCase() + \"/ui/UI\" + app.subGameName.toUpperCase() + \"Play\");\r\n\t\t} else if (lastIs3DShow == 1) {\r\n\t\t\tapp[app.subGameName + \"_FormManager\"]().CloseForm(\"game/\" + app.subGameName.toUpperCase() + \"/ui/UILSPlay\");\r\n\t\t}\r\n\t\tthis.CloseForm();\r\n\t},\r\n\t//开启或者关闭界面\r\n\tShowOrCloseForm: function (argList) {\r\n\t\tif (this.IsFormShow()) {\r\n\t\t\tthis.CloseForm();\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.ShowForm(argList);\r\n\t\t\treturn true\r\n\t\t}\r\n\t},\r\n\r\n\t//界面动作执行界面回调\r\n\tOnFormActionEnd: function (sender, userData) {\r\n\r\n\t},\r\n\r\n\tShowFormName: function () {\r\n\t\t//不显示界面名字\r\n\t\treturn;\r\n\t\tif (this.node.getChildByName(\"LabelFormName\")) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet node = new cc.Node(\"LabelFormName\");\r\n\r\n\t\tnode.parent = this.node;\r\n\t\tnode.setPosition(10, -10);\r\n\t\tlet label = node.addComponent(cc.Label);\r\n\t\tlabel.string = this.GetFormProperty(\"FormName\");\r\n\t\tlabel.fontSize = 25\r\n\t\tnode.color = this.ShareDefine.Color_Orange;\r\n\t},\r\n\r\n\t//--------------获取接口-----------------\r\n\r\n\t//界面是否显示中\r\n\tIsFormShow: function () {\r\n\t\tlet parent = cc.find('Canvas/uiLayer');\r\n\r\n\t\tif (this.node.parent == parent) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t},\r\n\r\n\tIsShow: function (uiName = '') {\r\n\t\tlet childs = this.node.parent.children;\r\n\t\tfor (let i = 0; i < childs.length; i++) {\r\n\t\t\tif (uiName == childs[i].name && childs[i].active)\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t//--------------动作函数------------\r\n\t//显示界面动作\r\n\tShowFormAction: function () {\r\n\r\n\t\tlet openAction = null;\r\n\r\n\t\t//设置起点缩放倍速\r\n\t\tlet startScale = this.InitNodeScale * 0.5;\r\n\r\n\t\tswitch (this.ShowEffectType) {\r\n\r\n\t\t\tcase ShowEffectEnum.None:\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromTop:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromBottom:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromLeft:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromRight:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromCenter:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.error(\"ShowEffectType:%s error\", this.ShowEffectType);\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\t//如果之前有打开动作,先停止\r\n\t\tthis.node.stopActionByTag(this.OpenActionTag);\r\n\r\n\t\tif (openAction) {\r\n\t\t\tlet action = cc.sequence(\r\n\t\t\t\topenAction,\r\n\t\t\t\tcc.callFunc(this.OnFormActionEnd, this, \"OpenAction\"),\r\n\t\t\t);\r\n\t\t\taction.setTag(this.OpenActionTag);\r\n\t\t\tthis.node.scale = startScale;\r\n\t\t\tthis.node.runAction(action);\r\n\t\t}\r\n\t},\r\n\r\n\t//关闭界面动作\r\n\tCloseFormAction: function () {\r\n\t\t//let closeAction = cc.scaleTo(0.5, 1).easing(cc.easeElasticIn());\r\n\t},\r\n\r\n\t//-------------子类界面操作接口------------------\r\n\t//创建子类界面\r\n\t/*\r\n\t childComponentName:子类界面的组件名字 字符串类型 \"UIBuyCard_Child\"\r\n\t childPrefab:子类界面的预制对象,cc.Prefab类型\r\n\t userData:子界面特殊数据 默认0\r\n\t parentNode:子界面的父类node 默认为界面自身对象node\r\n\t pos:子类创建时的坐标,可不传\r\n\t zorderLv:子类层级\r\n\t argument:传递给子类的显示参数 ShowForm(argument) 最终在OnShow(argument)接收\r\n\t isShowForm:创建子类默认是否显示\r\n\t */\r\n\tCreateChildForm: function (childComponentName, childPrefab, userData = 0, parentNode = null, pos = null, zorderLv = 0, argument = null, isShowForm = true) {\r\n\r\n\t\tif (!parentNode) {\r\n\t\t\tparentNode = this.node;\r\n\t\t}\r\n\t\tlet childFormNode = this.NewChildFormNode(childComponentName, childPrefab);\r\n\r\n\t\tlet childFormComponent = childFormNode.getComponent(childComponentName);\r\n\t\tif (!childFormComponent) {\r\n\t\t\t//如果子类node没有这个组件,则主动添加组件对象\r\n\t\t\tthis.WarnLog(\"CreateChildForm not find:%s addComponent\", childComponentName);\r\n\t\t\tchildFormComponent = childFormNode.addComponent(childComponentName);\r\n\t\t\tif (!childFormComponent) {\r\n\t\t\t\tconsole.error(\"CreateChildForm(%s) fail\", childComponentName);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\tchildFormComponent.OnCreate(this, childComponentName, 0, userData, pos);\r\n\t\tparentNode.addChild(childFormNode, zorderLv);\r\n\r\n\t\tthis.AddChildFormComponent(childComponentName, childFormComponent);\r\n\r\n\t\tif (isShowForm) {\r\n\t\t\tchildFormComponent.ShowForm(argument);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tchildFormComponent.CloseForm(argument);\r\n\t\t}\r\n\r\n\t\treturn childFormComponent\r\n\r\n\t},\r\n\r\n\t//new一个字界面node\r\n\tNewChildFormNode: function (childComponentName, childPrefab) {\r\n\r\n\t\tlet childFormNode = null;\r\n\r\n\t\t//如果有缓存从缓存中取\r\n\t\tif (this._cacheChildFormDict.hasOwnProperty(childComponentName)) {\r\n\t\t\tchildFormNode = this._cacheChildFormDict[childComponentName].get()\r\n\t\t}\r\n\r\n\t\t//如果没有创建缓存,创建一个新对象\r\n\t\tif (!childFormNode) {\r\n\t\t\tchildFormNode = cc.instantiate(childPrefab);\r\n\t\t}\r\n\r\n\t\treturn childFormNode\r\n\t},\r\n\r\n\tAddChildFormComponent: function (childComponentName, childFormComponent) {\r\n\t\tlet childFormComponentList = this._childFormComponentDict.SetDefault(childComponentName, []);\r\n\t\tchildFormComponentList.push(childFormComponent)\r\n\t},\r\n\r\n\t//通过userData获取子类的组件对象\r\n\tGetChildComponentByUserData: function (childComponentName, userData) {\r\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\r\n\t\tif (!allChildFormComponentList) {\r\n\t\t\tconsole.error(\"GetChildComponentByUserData not find(%s)\", childComponentName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet count = allChildFormComponentList.length;\r\n\t\tfor (let index = 0; index < count; index++) {\r\n\t\t\tlet childComponent = allChildFormComponentList[index];\r\n\t\t\tlet childUserData = childComponent.GetFormProperty(\"UserData\");\r\n\t\t\tif (childUserData == userData) {\r\n\t\t\t\treturn childComponent\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//通过索引获取子类界面\r\n\tGetChildComponentByChildIndex: function (childComponentName, childIndex) {\r\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\r\n\t\tif (!allChildFormComponentList) {\r\n\t\t\tconsole.error(\"GetChildComponentByChildIndex not find(%s)\", childComponentName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet childComponent = allChildFormComponentList[childIndex];\r\n\t\tif (!childComponent) {\r\n\t\t\tconsole.error(\"GetChildComponentByChildIndex(%s,%s) not find child\", childComponentName, childIndex);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn childComponent\r\n\t},\r\n\r\n\t//返回子界面列表\r\n\tGetAllChildComponentByName: function (childComponentName) {\r\n\r\n\t\tif (this._childFormComponentDict.hasOwnProperty(childComponentName)) {\r\n\t\t\treturn this._childFormComponentDict[childComponentName];\r\n\t\t}\r\n\t\treturn []\r\n\t},\r\n\r\n\t//清楚掉指定的子类\r\n\tClearAllChildComponentByName: function (childComponentName) {\r\n\r\n\t\tif (!this._childFormComponentDict.hasOwnProperty(childComponentName)) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet allChildFormList = this._childFormComponentDict[childComponentName];\r\n\r\n\t\tdelete this._childFormComponentDict[childComponentName];\r\n\r\n\t\tif (!this._cacheChildFormDict.hasOwnProperty(childComponentName)) {\r\n\t\t\tthis._cacheChildFormDict[childComponentName] = new cc.NodePool(childComponentName)\r\n\t\t}\r\n\t\tlet cacheNodePool = this._cacheChildFormDict[childComponentName];\r\n\r\n\t\tlet count = allChildFormList.length;\r\n\t\tfor (let index = 0; index < count; index++) {\r\n\t\t\tlet childFormComponent = allChildFormList[index];\r\n\t\t\tcacheNodePool.put(childFormComponent.node);\r\n\t\t}\r\n\t},\r\n\r\n\tClearFormAllChildComponent: function () {\r\n\r\n\t\tfor (let childComponentName in this._childFormComponentDict) {\r\n\r\n\t\t\tif (!this._cacheChildFormDict.hasOwnProperty(childComponentName)) {\r\n\t\t\t\tthis._cacheChildFormDict[childComponentName] = new cc.NodePool(childComponentName)\r\n\t\t\t}\r\n\t\t\tlet cacheNodePool = this._cacheChildFormDict[childComponentName];\r\n\r\n\t\t\tlet allChildFormList = this._childFormComponentDict[childComponentName];\r\n\t\t\tlet count = allChildFormList.length;\r\n\t\t\tfor (let index = 0; index < count; index++) {\r\n\t\t\t\tcacheNodePool.put(allChildFormList[index].node);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._childFormComponentDict = {};\r\n\t},\r\n\r\n\t//获取指定子类的缓存池对象\r\n\tGetChildFormCacheNodePool: function (childComponentName) {\r\n\t\tif (!this._cacheChildFormDict.hasOwnProperty(childComponentName)) {\r\n\t\t\tthis._cacheChildFormDict[childComponentName] = new cc.NodePool(childComponentName)\r\n\t\t}\r\n\t\treturn this._cacheChildFormDict[childComponentName];\r\n\t},\r\n\r\n\t//触发子类事件\r\n\tTriggerChildEvent: function (childComponentName, userData, eventName, argDict) {\r\n\r\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\r\n\t\tif (!allChildFormComponentList) {\r\n\t\t\tconsole.error(\"TriggerChildEvent not find(%s)\", childComponentName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet count = allChildFormComponentList.length;\r\n\t\tfor (let index = 0; index < count; index++) {\r\n\t\t\tlet childComponent = allChildFormComponentList[index];\r\n\t\t\tlet childUserData = childComponent.GetFormProperty(\"UserData\");\r\n\r\n\t\t\t//找到一个子类,执行则跳出\r\n\t\t\tif (childUserData == userData) {\r\n\t\t\t\tchildComponent.OnParentEvent(eventName, argDict);\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//触发子界面事件\r\n\tTriggerChildEventByChildComponent: function (childComponent, eventName, argDict) {\r\n\t\tchildComponent.OnParentEvent(eventName, argDict);\r\n\t},\r\n\r\n\t//触发所有子类的事件\r\n\tTriggerAllChildEvent: function (childComponentName, eventName, argDict) {\r\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\r\n\t\tif (!allChildFormComponentList) {\r\n\t\t\tconsole.error(\"TriggerAllChildEvent not find(%s)\", childComponentName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet count = allChildFormComponentList.length;\r\n\t\tfor (let index = 0; index < count; index++) {\r\n\t\t\tallChildFormComponentList[index].OnParentEvent(eventName, argDict);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t//-------------获取接口-------------------\r\n\tGetFormContentSize: function () {\r\n\t\treturn this.node.getContentSize();\r\n\t},\r\n\t//获取界面属性\r\n\tGetFormProperty: function (property) {\r\n\r\n\t\tif (!this._dataInfo.hasOwnProperty(property)) {\r\n\t\t\tconsole.error(\"GetFormProperty not find:%s\", property);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this._dataInfo[property];\r\n\t},\r\n\r\n\tGetWndNode: function (wndPath) {\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"GetWndNode(%s) not find\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn wndNode\r\n\t},\r\n\r\n\t//获取指定控件的组件对象\r\n\tGetWndComponent: function (wndPath, componentType) {\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"GetWndComponent wndPath(%s) error\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet wndComponent = wndNode.getComponent(componentType);\r\n\r\n\t\tif (!wndComponent) {\r\n\t\t\tconsole.error(\"GetWndComponent wndPath(%s) not find Component(%s)\", wndPath, componentType.name);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn wndComponent\r\n\t},\r\n\r\n\tGetWndProperty: function (wndPath, property) {\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"GetWndProperty(%s,%s) not find wndPath\", wndPath, property);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet wndComponent = null;\r\n\t\tif (property == \"text\") {\r\n\t\t\twndComponent = wndNode.getComponent(cc.Label);\r\n\t\t\t//可能是label\r\n\t\t\tif (wndComponent) {\r\n\t\t\t}\r\n\t\t\t//没有label可能是editbox\r\n\t\t\telse {\r\n\t\t\t\twndComponent = wndNode.getComponent(cc.EditBox);\r\n\t\t\t}\r\n\r\n\t\t\tif (!wndComponent) {\r\n\t\t\t\tconsole.error(\"GetWndProperty(%s,%s) wnd not find cc.Label cc.EditBox\", wndPath, property);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\treturn wndComponent.string;\r\n\t\t}\r\n\t\telse if (property == \"position\") {\r\n\t\t\treturn wndNode.getPosition()\r\n\t\t}\r\n\t\telse if (property == \"active\") {\r\n\t\t\treturn wndNode.active;\r\n\t\t}\r\n\t\telse if (property == \"color\") {\r\n\t\t\treturn wndNode.color;\r\n\t\t}\r\n\t\telse if (property == \"scale\") {\r\n\t\t\treturn wndNode.scale;\r\n\t\t}\r\n\t\telse if (property == \"opacity\") {\r\n\t\t\treturn wndNode.opacity;\r\n\t\t}\r\n\t\telse if (property == \"interactable\") {\r\n\t\t\twndComponent = wndNode.getComponent(cc.Button);\r\n\t\t\tif (!wndComponent) {\r\n\t\t\t\tconsole.error(\"GetWndProperty(%s,%s) wnd not find cc.Button\", wndPath, property);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\treturn wndComponent.interactable;\r\n\t\t}\r\n\t\telse if (property == \"progress\") {\r\n\t\t\twndComponent = wndNode.getComponent(cc.ProgressBar);\r\n\t\t\tif (!wndComponent) {\r\n\t\t\t\tconsole.error(\"GetWndProperty(%s,%s) wnd not find cc.ProgressBar\", wndPath, property);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\treturn wndComponent.progress;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.error(\"GetWndProperty(%s,%s) property error\", wndPath, property);\r\n\t\t\treturn\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t//-------------设置接口-----------------\r\n\r\n\tSetFormPosition: function (pos) {\r\n\t\tthis.node.setPosition(pos);\r\n\t},\r\n\r\n\t//获取界面属性\r\n\tSetFormProperty: function (property, value) {\r\n\r\n\t\tif (!this._dataInfo.hasOwnProperty(property)) {\r\n\t\t\tconsole.error(\"SetFormProperty not find:%s\", property);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis._dataInfo[property] = value;\r\n\t},\r\n\r\n\t//设置控件属性\r\n\tSetWndProperty: function (wndPath, property, value) {\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"SetWndProperty(%s,%s,%s) not find wndPath\", wndPath, property, value);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet wndComponent = null;\r\n\t\tif (property == \"text\") {\r\n\t\t\twndComponent = wndNode.getComponent(cc.Label);\r\n\t\t\t//可能是label\r\n\t\t\tif (wndComponent) {\r\n\t\t\t}\r\n\t\t\t//没有label可能是editbox\r\n\t\t\telse if (wndNode.getComponent(cc.RichText)) {\r\n\t\t\t\twndComponent = wndNode.getComponent(cc.RichText);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\twndComponent = wndNode.getComponent(cc.EditBox);\r\n\t\t\t}\r\n\r\n\t\t\tif (!wndComponent) {\r\n\t\t\t\tconsole.error(\"SetWndProperty(%s,%s,%s) wnd not find cc.Label cc.EditBox\", wndPath, property, value);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\twndComponent.string = value + \"\";\r\n\t\t}\r\n\t\telse if (property == \"position\") {\r\n\t\t\twndNode.setPosition(value)\r\n\t\t}\r\n\t\telse if (property == \"active\") {\r\n\t\t\twndNode.active = value;\r\n\t\t}\r\n\t\telse if (property == \"color\") {\r\n\t\t\twndNode.color = value\r\n\t\t}\r\n\t\telse if (property == \"image\") {\r\n\t\t\tthis.SetWndImage(wndPath, value);\r\n\t\t}\r\n\t\telse if (property == \"scale\") {\r\n\t\t\twndNode.scale = value\r\n\t\t}\r\n\t\telse if (property == \"opacity\") {\r\n\t\t\twndNode.opacity = value\r\n\t\t}\r\n\t\telse if (property == \"interactable\") {\r\n\t\t\twndComponent = wndNode.getComponent(cc.Button);\r\n\t\t\tif (!wndComponent) {\r\n\t\t\t\tconsole.error(\"SetWndProperty(%s,%s,%s) wnd not find cc.Button\", wndPath, property, value);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\twndComponent.interactable = value;\r\n\t\t}\r\n\t\telse if (property == \"progress\") {\r\n\t\t\twndComponent = wndNode.getComponent(cc.ProgressBar);\r\n\t\t\tif (!wndComponent) {\r\n\t\t\t\tconsole.error(\"SetWndProperty(%s,%s,%s) wnd not find cc.ProgressBar\", wndPath, property, value);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\twndComponent.progress = value;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.error(\"SetWndProperty(%s,%s,%s) property error\", wndPath, property, value);\r\n\t\t\treturn\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tSetWndImage: function (wndPath, imageName) {\r\n\r\n\t\tlet fileName = \"\";\r\n\t\t//如果有传图片\r\n\t\tlet imageInfo = this.IntegrateImage[imageName];\r\n\t\tif (!imageInfo) {\r\n\t\t\tconsole.error(\"SetWndImage IntegrateImage.txt not find key(%s)\", imageName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet filePath = imageInfo[\"FilePath\"];\r\n\t\tlet fileNameList = imageInfo[\"FileNameList\"];\r\n\r\n\t\tif (fileNameList && fileNameList.length) {\r\n\t\t\tfileName = fileNameList[0];\r\n\t\t}\r\n\t\tthis.SetWndImageByFilePath(wndPath, filePath, fileName);\r\n\t},\r\n\tSetNodeImageByFilePath: function (node, filePath, isHideFirst = false) {\r\n\t\tlet nodeSprite = node.getComponent(cc.Sprite);\r\n\t\tif (!nodeSprite) {\r\n\t\t\tconsole.error('SetNodeImageByFilePath error not cc.Sprite');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet that = this;\r\n\t\treturn app[app.subGameName + \"_ControlManager\"]().CreateLoadPromise(filePath, cc.SpriteFrame)\r\n\t\t\t.then(function (spriteFrame) {\r\n\t\t\t\tif (!spriteFrame) {\r\n\t\t\t\t\t// that.ErrLog(\"SetNodeImageByFilePath load spriteFrame fail filePath : \", filePath);\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tnodeSprite.spriteFrame = spriteFrame;\r\n\t\t\t\tif (isHideFirst)\r\n\t\t\t\t\tnode.active = true;\r\n\t\t\t});\r\n\t},\r\n\t//通过图片路径设置控件贴图\r\n\tSetWndImageByFilePath: function (wndPath, filePath, fileName = \"\", isHideFirst = false) {\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"(%s) SetWndImageByFilePath(%s,%s) not find node\", wndPath, filePath, fileName);\r\n\t\t\treturn app.bluebird.resolve(false)\r\n\t\t}\r\n\r\n\t\tlet sprite = wndNode.getComponent(cc.Sprite);\r\n\t\tif (!sprite) {\r\n\t\t\tconsole.error(\"SetWndImageByFilePath(%s) not find cc.Sprite\", wndPath);\r\n\t\t\treturn app.bluebird.resolve(false)\r\n\t\t}\r\n\r\n\t\tlet that = this;\r\n\r\n\t\tlet resType = cc.SpriteFrame;\r\n\t\tif (fileName) {\r\n\t\t\tresType = cc.SpriteAtlas;\r\n\t\t}\r\n\r\n\t\t//记录图片设置的贴图信息\r\n\t\tthis._loadWndImageDict[wndPath] = {\"FilePath\": filePath, \"FileName\": fileName, \"IsHideFirst\": isHideFirst};\r\n\r\n\t\t//是否先隐藏节点,等待资源加载完成在显示节点\r\n\t\tif (isHideFirst) {\r\n\t\t\t//闲隐藏掉控件,加注完成在显示\r\n\t\t\twndNode.active = 0;\r\n\t\t}\r\n\r\n\t\treturn app[app.subGameName + \"_ControlManager\"]().CreateLoadPromise(filePath, resType)\r\n\t\t\t.then(function (spriteFrame) {\r\n\r\n\t\t\t\t//重新激活控件显示\r\n\t\t\t\tif (isHideFirst && !wndNode.active) {\r\n\t\t\t\t\twndNode.active = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!spriteFrame) {\r\n\t\t\t\t\t// that.ErrLog(\"SetWndImageByFilePath(%s,%s,%s) load spriteFrame fail\", wndPath, filePath, fileName);\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet loadWndImageInfo = that._loadWndImageDict[wndPath];\r\n\t\t\t\tif (!loadWndImageInfo) {\r\n\t\t\t\t\tthat.WarnLog(\"_loadWndImageDict not find:%s\", wndPath);\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//如果设置的贴图路径异步回调回来判断已经被更新设置贴图路径了,则跳出\r\n\t\t\t\tif (loadWndImageInfo[\"FilePath\"] != filePath) {\r\n\t\t\t\t\tthat.WarnLog(\"wndPath:%s FilePath(%s)!=(%s)\", wndPath, loadWndImageInfo[\"FilePath\"], filePath);\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (fileName) {\r\n\t\t\t\t\t//如果设置的贴图路径异步回调回来判断已经被更新设置贴图路径下的贴图了,则跳出\r\n\t\t\t\t\tif (loadWndImageInfo[\"FileName\"] != fileName) {\r\n\t\t\t\t\t\tthat.WarnLog(\"wndPath:%s FileName(%s)!=(%s)\", wndPath, loadWndImageInfo[\"FilePath\"], filePath);\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsprite.spriteFrame = spriteFrame.getSpriteFrame(fileName);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsprite.spriteFrame = spriteFrame;\r\n\t\t\t\t}\r\n\t\t\t\treturn true\r\n\t\t\t})\r\n\t\t\t.catch(function (error) {\r\n\t\t\t\t// that.ErrLog(\"SetWndImageByFilePath(%s,%s,%s) error:%s\", wndPath, filePath, fileName, error.stack);\r\n\t\t\t})\r\n\r\n\t},\r\n\r\n\t//清除控件贴图\r\n\tClearWndImage: function (wndPath) {\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"ClearWndImage(%s) not find node\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet sprite = wndNode.getComponent(cc.Sprite);\r\n\t\tif (!sprite) {\r\n\t\t\tconsole.error(\"ClearWndImage(%s) not find cc.Sprite\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsprite.spriteFrame = null;\r\n\t},\r\n\r\n\t//------------控件飞行--------------------\r\n\r\n\t//设置控件飞行\r\n\tSetWndFlyTo: function (wndPath, startPos, endPos, time, useData = 0) {\r\n\r\n\t\tlet argDict = {\r\n\t\t\t\"StartPos\": startPos,\r\n\t\t\t\"EndPos\": endPos,\r\n\t\t\t\"Time\": time,\r\n\t\t};\r\n\r\n\t\tthis.WndRunAction(wndPath, \"FlyAction\", argDict, useData);\r\n\t},\r\n\r\n\t//设置控件透明度\r\n\tSetWndOpacity: function (wndPath, endFade, time, useData = 0) {\r\n\t\tlet argDict = {\r\n\t\t\t\"EndFade\": endFade,\r\n\t\t\t\"Time\": time,\r\n\t\t};\r\n\r\n\t\tthis.WndRunAction(wndPath, \"OpacityAction\", argDict, useData);\r\n\t},\r\n\r\n\tSetWndDelay: function (wndPath, delayTime, useData = 0) {\r\n\t\tlet argDict = {\r\n\t\t\t\"DelayTime\": delayTime,\r\n\t\t};\r\n\r\n\t\tthis.WndRunAction(wndPath, \"DelayAction\", argDict, useData);\r\n\t},\r\n\r\n\t//停止控件飞行\r\n\tStopWndFly: function (wndPath) {\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"StopWndFly(%s) wndPath not find\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\twndNode.stopActionByTag(11111);\r\n\t},\r\n\r\n\t//停止控件渐变\r\n\tStopWndOpacity: function (wndPath) {\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"StopWndFly(%s) wndPath not find\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\twndNode.stopActionByTag(22222);\r\n\t},\r\n\r\n\tStopWndDelay: function (wndPath) {\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"StopWndDelay(%s) wndPath not find\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\twndNode.stopActionByTag(33333);\r\n\t},\r\n\r\n\t/**\r\n\t * 控件动作接口\r\n\t */\r\n\tWndRunAction: function (wndPath, actionType, argDict, useData) {\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"WndRunAction(%s,%s) wndPath not find\", wndPath, actionType);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\twndNode.WndFlyUseData = useData;\r\n\r\n\t\t//控件飞行效果\r\n\t\tif (actionType == \"FlyAction\") {\r\n\t\t\tvar starPos = argDict[\"StartPos\"];\r\n\t\t\tvar endPos = argDict[\"EndPos\"];\r\n\t\t\tvar time = argDict[\"Time\"];\r\n\r\n\t\t\twndNode.setPosition(starPos);\r\n\t\t\twndNode.stopActionByTag(11111);\r\n\r\n\t\t\tvar action = cc.sequence(\r\n\t\t\t\tcc.moveTo(time, endPos),\r\n\t\t\t\tcc.callFunc(this.OnRunActionEnd, this, \"FlyWndEnd\")\r\n\t\t\t);\r\n\t\t\taction.setTag(11111);\r\n\t\t\twndNode.runAction(action);\r\n\t\t}\r\n\t\t//控件透明度效果\r\n\t\telse if (actionType == \"OpacityAction\") {\r\n\t\t\tvar endFade = argDict[\"EndFade\"];\r\n\t\t\tvar time = argDict[\"Time\"];\r\n\r\n\t\t\tvar action = cc.sequence(\r\n\t\t\t\tcc.fadeTo(time, endFade),\r\n\t\t\t\tcc.callFunc(this.OnRunActionEnd, this, \"OpacityWndEnd\")\r\n\t\t\t);\r\n\r\n\t\t\taction.setTag(22222);\r\n\t\t\twndNode.runAction(action);\r\n\t\t}\r\n\t\t//停留等待\r\n\t\telse if (actionType == \"DelayAction\") {\r\n\t\t\tvar delayTime = argDict[\"DelayTime\"];\r\n\t\t\tvar action = cc.sequence(\r\n\t\t\t\tcc.delayTime(delayTime),\r\n\t\t\t\tcc.callFunc(this.OnRunActionEnd, this, \"DelayEnd\")\r\n\t\t\t);\r\n\r\n\t\t\taction.setTag(33333);\r\n\t\t\twndNode.runAction(action);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.error(\"WndRunAction(%s) error\", actionType);\r\n\t\t\treturn\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * runAction结束回调\r\n\t */\r\n\tOnRunActionEnd: function (sender, useData) {\r\n\r\n\t\tif (useData == \"FlyWndEnd\") {\r\n\t\t\tthis.FlyWnd_FlyEnd(sender.name, sender);\r\n\t\t}\r\n\t\telse if (useData == \"OpacityWndEnd\") {\r\n\t\t\tthis.OpacityWnd_End(sender.name, sender);\r\n\t\t}\r\n\t\telse if (useData == \"DelayEnd\") {\r\n\t\t\tthis.FlyWnd_DelayEnd(sender.name, sender);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.error(\"OnRunActionEnd useData:%s error\", useData);\r\n\t\t}\r\n\t},\r\n\r\n\t//控件飞行结束回调\r\n\tFlyWnd_FlyEnd: function (wndName, wndNode) {\r\n\r\n\t},\r\n\r\n\tOpacityWnd_End: function (wndName, wndNode) {\r\n\r\n\t},\r\n\r\n\tFlyWnd_DelayEnd: function (wndName, wndNode) {\r\n\r\n\t},\r\n\t//------------特效接口-------------------\r\n\r\n\tGetWndEffectPos: function (wndObj, postType, offPosList) {\r\n\r\n\t\tif (!postType) {\r\n\t\t\tpostType = this.ShareDefine.EffectPosType_5;\r\n\t\t}\r\n\r\n\t\tlet size = wndObj.getContentSize();\r\n\t\tlet posX = 0;\r\n\t\tlet posY = 0;\r\n\r\n\t\tswitch (postType) {\r\n\t\t\t// 控件特效位置1左下\r\n\t\t\tcase this.ShareDefine.EffectPosType_1:\r\n\t\t\t\t//在控件中心添加特效\r\n\t\t\t\tposX = -size.width / 2;\r\n\t\t\t\tposY = -size.height / 2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置2下中\r\n\t\t\tcase this.ShareDefine.EffectPosType_2:\r\n\t\t\t\tposX = 0;\r\n\t\t\t\tposY = -size.height / 2;\r\n\t\t\t\tbreak\r\n\t\t\t// 控件特效位置3右下\r\n\t\t\tcase this.ShareDefine.EffectPosType_3:\r\n\t\t\t\tposX = size.width / 2;\r\n\t\t\t\tposY = -size.height / 2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置中左\r\n\t\t\tcase this.ShareDefine.EffectPosType_4:\r\n\t\t\t\tposX = -size.width / 2;\r\n\t\t\t\tposY = 0;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置中间\r\n\t\t\tcase this.ShareDefine.EffectPosType_5:\r\n\t\t\t\t//在控件中心添加特效\r\n\t\t\t\tposX = 0;\r\n\t\t\t\tposY = 0;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置中右\r\n\t\t\tcase this.ShareDefine.EffectPosType_6:\r\n\t\t\t\t//在控件中心添加特效\r\n\t\t\t\tposX = size.width / 2;\r\n\t\t\t\tposY = 0;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置上左\r\n\t\t\tcase this.ShareDefine.EffectPosType_7:\r\n\t\t\t\tposX = -size.width / 2;\r\n\t\t\t\tposY = size.height / 2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置上中\r\n\t\t\tcase this.ShareDefine.EffectPosType_8:\r\n\t\t\t\tposX = 0;\r\n\t\t\t\tposY = size.height / 2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置上右\r\n\t\t\tcase this.ShareDefine.EffectPosType_9:\r\n\t\t\t\tposX = size.width / 2;\r\n\t\t\t\tposY = size.height / 2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t//随机位置\r\n\t\t\tcase this.ShareDefine.EffectPosType_10:\r\n\t\t\t\tlet halfWidth = size.width / 2;\r\n\t\t\t\tlet halfHeight = size.height / 2;\r\n\t\t\t\tposX = this.ComTool.RandInt(-halfWidth, halfWidth);\r\n\t\t\t\tposY = this.ComTool.RandInt(-halfHeight, halfHeight);\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\t// if(offPosList.length == 2){\r\n\t\t// \tposX += offPosList[0];\r\n\t\t// \tposY += offPosList[1];\r\n\t\t// }\r\n\r\n\t\treturn cc.v2(posX, posY);\r\n\t},\r\n\r\n\t//给控件加特效\r\n\tAddWndEffect: function (wndPath, effectName, effectRes, repeatCount = 0, userData = 0, offPosList = null, posType = null) {\r\n\r\n\t\tlet effectTableInfo = this.Effect[effectRes];\r\n\t\tif (!effectTableInfo) {\r\n\t\t\tconsole.error(\"AddWndEffect Effect.txt not find:%s\", effectRes);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif (!wndNode) {\r\n\t\t\tconsole.error(\"AddWndEffect wndPath(%s) error\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t//如果没有传递偏移坐标,取配置表默认偏移坐标\r\n\t\tif (!offPosList) {\r\n\t\t\toffPosList = effectTableInfo[\"OffPosList\"];\r\n\t\t}\r\n\t\tif (!posType) {\r\n\t\t\tposType = effectTableInfo[\"PosType\"];\r\n\t\t}\r\n\t\tlet effectPos = this.GetWndEffectPos(wndNode, posType, offPosList);\r\n\r\n\r\n\t\t//初始化父类的特效字典\r\n\t\tlet allEffectDict = this._effectDict.SetDefault(wndPath, {});\r\n\r\n\t\t//如果子控件已经被加上这个特效了,需要删除,因为可能特效名一样但是特效使用的资源不一样了\r\n\t\tif (allEffectDict.hasOwnProperty(effectName)) {\r\n\r\n\t\t\tlet effectComponent = allEffectDict[effectName];\r\n\r\n\t\t\tif (effectComponent) {\r\n\r\n\t\t\t\t//如果特效名和特效资源名都一样,则不添加新特效\r\n\t\t\t\tif (effectComponent.GetModelProperty(\"EffectRes\") == effectRes) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t//资源不一样需要删除旧的特效\r\n\t\t\t\tthis.DeleteWndEffect(wndPath, effectName);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t//初始化特效对象null避免AddWndEffect重复调用时出现CreateEffectByEffectRes被多次调用\r\n\t\tallEffectDict[effectName] = 0;\r\n\r\n\t\tlet that = this;\r\n\r\n\t\tthis.EffectManager.CreateEffectByEffectRes(effectName, effectRes, userData)\r\n\t\t\t.then(function (effectComponent) {\r\n\t\t\t\treturn that.OnCreateEffectEnd(wndPath, wndNode, effectName, effectComponent, effectPos, repeatCount);\r\n\t\t\t})\r\n\t\t\t.catch(function (error) {\r\n\t\t\t\tthat.ErrLog(\"CreateFormEffect(%s,%s,%s):%s\", effectName, effectRes, userData, error.stack);\r\n\t\t\t})\r\n\r\n\t},\r\n\r\n\r\n\t//创建特效成功回调\r\n\tOnCreateEffectEnd: function (wndPath, wndNode, effectName, effectComponent, effectPos, repeatCount) {\r\n\t\tif (!effectComponent) {\r\n\t\t\tconsole.error(\"OnCreateEffectEnd(%s) fail\", effectName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet allEffectDict = this._effectDict.SetDefault(wndPath, {});\r\n\r\n\t\t//默认初始化为0\r\n\t\tif (allEffectDict[effectName]) {\r\n\t\t\tconsole.error(\"OnCreateEffectEnd allEffectDict have find:%s \", effectName);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\teffectComponent.AddModelToParent(wndNode, this.node, effectPos);\r\n\t\teffectComponent.SetModelProperty(\"WndPath\", wndPath);\r\n\r\n\t\tlet animationState = effectComponent.ShowEffect();\r\n\t\tif (!animationState) {\r\n\t\t\tconsole.error(\"OnCreateEffectEnd ShowEffect fail\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t//如果是0代表循环播放\r\n\t\tif (repeatCount > 0) {\r\n\t\t\tanimationState.wrapMode = cc.WrapMode.Default;\r\n\t\t\tanimationState.repeatCount = repeatCount;\r\n\t\t}\r\n\t\t//如果是-1,播放结束马上倒序播放\r\n\t\telse if (repeatCount == -1) {\r\n\t\t\tanimationState.wrapMode = cc.WrapMode.PingPong;\r\n\t\t}\r\n\t\t//0是循环播放\r\n\t\telse {\r\n\t\t\t//需要注意的是，修改wrapMode时，会重置time以及repeatCount\r\n\t\t\tanimationState.wrapMode = cc.WrapMode.Loop;\r\n\t\t}\r\n\r\n\t\tallEffectDict[effectName] = effectComponent;\r\n\r\n\t\treturn effectComponent\r\n\t},\r\n\r\n\tOnEffectAnimationEnd: function (event) {\r\n\t\tlet modelComponent = event[\"Model\"];\r\n\t\t//let animationName = event[\"AnimationName\"];\r\n\r\n\t\tlet wndPath = modelComponent.GetModelProperty(\"WndPath\");\r\n\t\tlet effectName = modelComponent.GetModelProperty(\"EffectName\");\r\n\r\n\t\t//特效播放结束删除掉\r\n\t\tthis.DeleteWndEffect(wndPath, effectName);\r\n\t\tthis.OnEffectEnd(wndPath, effectName);\r\n\t},\r\n\r\n\t//删除控件特效\r\n\tDeleteWndEffect: function (wndPath, effectName) {\r\n\t\tlet allEffectDict = this._effectDict[wndPath];\r\n\t\tif (!allEffectDict) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet effectComponent = allEffectDict[effectName];\r\n\t\tif (!effectComponent) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tdelete allEffectDict[effectName];\r\n\r\n\t\tthis.EffectManager.DeleteEffect(effectComponent);\r\n\t},\r\n\r\n\t//删除控件所有的特效\r\n\tDeleteWndAllEffect: function (wndPath) {\r\n\t\tlet allEffectDict = this._effectDict[wndPath];\r\n\t\tif (!allEffectDict) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.EffectManager.DeleteEffectByDict(allEffectDict);\r\n\r\n\t\tdelete this._effectDict[wndPath]\r\n\t},\r\n\r\n\t//删除界面所有特效\r\n\tDeleteFormAllEffect: function () {\r\n\r\n\t\tfor (let wndPath in this._effectDict) {\r\n\t\t\tthis.EffectManager.DeleteEffectByDict(this._effectDict[wndPath]);\r\n\t\t}\r\n\t\tthis._effectDict = {};\r\n\t},\r\n\t//------------快捷功能函数-------------\r\n\r\n\t//注冊事件函数\r\n\tRegEvent: function (eventName, func) {\r\n\t\tthis._eventFuncDict[eventName] = func;\r\n\t},\r\n\r\n\t//系统提示\r\n\tShowSysMsg: function (msgID, msgArgList) {\r\n\t\tthis.SysNotifyManager.ShowSysMsg(msgID, msgArgList);\r\n\t},\r\n\r\n\t//------------------2次确认框----------------------------\r\n\r\n\t/**\r\n\t * 等待\"是\"\"否\"确认框\r\n\t */\r\n\tWaitForConfirm: function (msgID, msgArgList, backArgList, curConFirmType) {\r\n\r\n\t\t// 事件类型参数\r\n\t\tif (!backArgList) {\r\n\t\t\tbackArgList = [];\r\n\t\t}\r\n\t\t// 默认确认框类型\r\n\t\tif (!curConFirmType) {\r\n\t\t\tcurConFirmType = this.ShareDefine.Confirm;\r\n\t\t}\r\n\r\n\t\tthis.ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, backArgList);\r\n\r\n\t\t// frmSetUpTips 界面的确认框类型\r\n\t\tif (this.ShareDefine.SetUpTipFormConfirmList.InArray(curConFirmType)) {\r\n\t\t\tthis.ConfirmManager.ShowConfirm(curConFirmType, msgID, msgArgList);\r\n\t\t}\r\n\t\t// frmSetUpTipsUse 使用道具界面\r\n\t\telse if (curConFirmType == this.ShareDefine.ConfirmUse) {\r\n\t\t\tthis.ConfirmManager.ShowUseMsg(msgID, msgArgList);\r\n\t\t}\r\n\t\t// frmSetUpTips01 购买道具界面\r\n\t\telse if (curConFirmType == this.ShareDefine.ConfirmBuy) {\r\n\t\t\tthis.ConfirmManager.ShowBuyMsg(msgID, backArgList);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.error(\"WaitForConfirm((%s, %s), (%s), %s) error\", msgID, msgArgList, backArgList, curConFirmType);\r\n\t\t\treturn;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * 2次确认点击回调\r\n\t * @param curEventType\r\n\t * @param curArgList\r\n\t */\r\n\tOnConFirm: function (clickType, msgID, backArgList) {\r\n\t\t// 如果子类没有继承接口报错提示\r\n\t\tconsole.error(\"Not have func OnConFirm(%s,%s,%s)\", clickType, msgID, backArgList);\r\n\t},\r\n\r\n\r\n\t//-------------点击函数-------------\r\n\r\n\t//模拟点击控件\r\n\tSimulateOnClick: function (wndPath) {\r\n\r\n\t\tlet btnNode = cc.find(wndPath, this.node);\r\n\t\tif (!btnNode) {\r\n\t\t\tconsole.error(\"SimulateOnClick not find (%s)\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet buttonComponent = btnNode.getComponent(cc.Button);\r\n\t\tif (!buttonComponent) {\r\n\t\t\tconsole.error(\"SimulateOnClick(%s) not find cc.Button\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet btnName = btnNode.name;\r\n\t\tthis.OnClick(btnName, btnNode);\r\n\t},\r\n\r\n\t//关闭界面\r\n\tOnClick_Close: function () {\r\n\t\ttry {\r\n\t\t\tthis.CloseForm();\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(\"OnClick_Close:%s\", error.stack);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t//控件点击回调\r\n\tOnClick_BtnWnd: function (eventTouch, eventData) {\r\n\t\ttry {\r\n\t\t\tthis.SoundManager.PlaySound(\"BtnClick\");\r\n\t\t\tlet btnNode = eventTouch.currentTarget;\r\n\t\t\tlet btnName = btnNode.name;\r\n\t\t\tthis.OnClick(btnName, btnNode);\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(\"OnClick_BtnWnd:%s\", error.stack);\r\n\t\t}\r\n\t},\r\n\r\n\tOnClick_Toggle: function (toggle) {\r\n\r\n\t\ttry {\r\n\t\t\tthis.SoundManager.PlaySound(\"BtnClick\");\r\n\t\t\tlet btnNode = toggle.node;\r\n\t\t\tlet btnName = btnNode.name;\r\n\t\t\tthis.OnClick(btnName, btnNode);\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(\"OnClick_Toggle:%s\", error.stack);\r\n\t\t}\r\n\t},\r\n\r\n\tOnClick_Form: function (eventTouch, eventData) {\r\n\t\ttry {\r\n\t\t\tthis.OnClickForm(eventTouch);\r\n\t\t}\r\n\t\tcatch (error) {\r\n\t\t\tconsole.error(\"OnClick_Form:%s\", error.stack);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t//--------------子类重载接口---------------\r\n\t//创建界面被调用一次\r\n\tOnCreateInit: function () {\r\n\t},\r\n\r\n\t//每次显示界面被调用\r\n\tOnShow: function (/*..*/) {\r\n\t},\r\n\r\n\t//每次关闭界面被调用\r\n\tOnClose: function () {\r\n\t},\r\n\r\n\t//销毁界面被调用\r\n\tOnDestroy: function () {\r\n\r\n\t},\r\n\t//定时回掉\r\n\tOnUpdate: function (passSecond) {\r\n\r\n\t},\r\n\r\n\t//切换账号\r\n\tOnReload: function () {\r\n\r\n\t},\r\n\r\n\t//控件被点击\r\n\tOnClick: function (btnName, eventData) {\r\n\r\n\t},\r\n\r\n\t//界面被点击\r\n\tOnClickForm: function () {\r\n\r\n\t},\r\n\r\n\t//特效播放结束\r\n\tOnEffectEnd: function (wndPath, effectName) {\r\n\r\n\t},\r\n\t//网页版微信分享处理\r\n\tInitWeiXinShare: function () {\r\n\t\tconsole.log(\"XiaoFu InitWeiXinShare\");\r\n\t\tif (!cc.sys.isNative) {\r\n\t\t\t//更新微信分享信息\r\n\t\t\tconsole.log(\"XiaoFu InitWeiXinShare OnWeChatReady\");\r\n\t\t\tapp[app.subGameName + \"_WeChatManager\"]().OnWeChatReady();\r\n\t\t}\r\n\t},\r\n\tIsIphoneX: function () {\r\n\t\tlet FrameSize = cc.view.getFrameSize();\r\n\t\tif (FrameSize.width == 2436 && FrameSize.height == 1125) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t//{ name: 'IPhone X', width: 375, height: 812, ratio: 3 },\r\n\t\tif (!cc.sys.isNative) {\r\n\t\t\tif (FrameSize.width == 812 && FrameSize.height == 375) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t//滑动结束\r\n\tOnScrollEnded: function () {\r\n\r\n\t},\r\n\t//获取用户推广Url\r\n\tGetTuiGuangUrl: function () {\r\n\t\tconsole.log(\"GetTuiGuangUrl begin\");\r\n\t\tthis.TuiGuangUrl = this.LocalDataManager.GetConfigProperty(\"SysSetting\", \"TuiGuangUrl\");\r\n\t\tconsole.log(\"GetTuiGuangUrl this.TuiGuangUrl:\", this.TuiGuangUrl);\r\n\t\tif (this.TuiGuangUrl == '') {\r\n\t\t\tconsole.log(\"GetTuiGuangUrl 1\");\r\n\t\t\tlet heroID = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"pid\");\r\n\t\t\tconsole.log(\"GetTuiGuangUrl 2\");\r\n\t\t\tlet ShortHeroID = this.ComTool.GetPid(heroID);\r\n\t\t\tconsole.log(\"GetTuiGuangUrl 3\");\r\n\t\t\tlet long_url = \"http://api.t.sina.com.cn/short_url/shorten.json?source=3271760578&url_long=https://www.qp355.com/\" + ShortHeroID + '/';\r\n\t\t\t//let long_url=\"http://api.t.sina.com.cn/short_url/shorten.json?source=3271760578&url_long=http://m.zle.com/xiaofu.php\";\r\n\t\t\tconsole.log(\"GetTuiGuangUrl 4\");\r\n\t\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(\"game.CShortenGenerate\", {\"url\": long_url}, this.GetShorTuiGuangUrl.bind(this), this.FailTuiGuangUrl.bind(this));\r\n\t\t\tconsole.log(\"GetTuiGuangUrl 5\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.log(\"GetTuiGuangUrl 6\");\r\n\t\t\tthis.InitWeiXinShare();\r\n\t\t}\r\n\t\tconsole.log(\"GetTuiGuangUrl end\");\r\n\t},\r\n\tgetRandom: function (min, max) {\r\n\t\tvar r = Math.random() * (max - min);\r\n\t\tvar re = Math.round(r + min);\r\n\t\tre = Math.max(Math.min(re, max), min)\r\n\t\treturn re;\r\n\t},\r\n\tGetRandBaseUrl: function () {\r\n\t\tlet urls = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"UrlLists\");\r\n\t\tif (urls == 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tlet urlList = urls.split(',');\r\n\t\tlet count = urlList.length;\r\n\t\tlet rand = this.getRandom(0, count - 1);\r\n\t\treturn urlList[rand] + \":89\";  //走89端口\r\n\t},\r\n\tFailTuiGuangUrl: function (serverPack) {\r\n\t\tlet heroID = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"pid\");\r\n\t\tlet ShortHeroID = this.ComTool.GetPid(heroID);\r\n\t\tlet randUrl = this.GetRandBaseUrl();\r\n\t\tthis.TuiGuangUrl = 'http://' + randUrl + \"/\" + ShortHeroID + \"/\";\r\n\t\tthis.LocalDataManager.SetConfigProperty(\"SysSetting\", \"TuiGuangUrl\", this.TuiGuangUrl);\r\n\t\tthis.InitWeiXinShare();\r\n\t},\r\n\t//获取微信短域名并且设置到字典\r\n\tGetShorTuiGuangUrl: function (serverPack) {\r\n\t\tif (typeof(serverPack.requestUrl) == \"undefined\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet jsonStr = serverPack.requestUrl;\r\n\t\tjsonStr = jsonStr.replace('[', '');\r\n\t\tjsonStr = jsonStr.replace(']', '');\r\n\t\tlet ShareUrl = eval('(' + jsonStr + ')');\r\n\t\tthis.TuiGuangUrl = ShareUrl.url_short;\r\n\t\tthis.LocalDataManager.SetConfigProperty(\"SysSetting\", \"TuiGuangUrl\", this.TuiGuangUrl);\r\n\t\tthis.InitWeiXinShare();\r\n\r\n\t},\r\n\t//微信分享获取短域名并且启动分享\r\n\tSuccessTcnUrl: function (serverPack) {\r\n\t\tlet shareUrl = \"https://www.qp355.com/\" + app[app.subGameName + \"_ComTool\"]().GetPid(app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"pid\")) + \"/\";\r\n\t\tif (this.TuiGuangUrl) {\r\n\t\t\ttext = this.ShareText + \"\\n\" + \"下载地址:\" + shareUrl;\r\n\t\t} else {\r\n\t\t\tif (url_short) {\r\n\t\t\t\ttext = this.ShareText;\r\n\t\t\t} else {\r\n\t\t\t\ttext = this.ShareText;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(\"SuccessTcnUrl text:\", text);\r\n\t\tthis.SDKManager.ShareText(text, \"0\");\r\n\t},\r\n\t//微信分享获取短域名失败分享\r\n\tFailTcnUrl: function (event) {\r\n\t\tlet shareUrl = \"https://www.qp355.com/\" + app[app.subGameName + \"_ComTool\"]().GetPid(app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"pid\")) + \"/\";\r\n\t\tlet text = this.ShareText + \"\\n\" + \"下载地址:\" + shareUrl;\r\n\t\tthis.SDKManager.ShareText(text, \"0\");\r\n\t},\r\n\r\n\t//启动微信房间分享\r\n\tBeginShare: function (roomKey, text) {\r\n\t\tthis.ShareText = text;\r\n\t\tthis.roomKey = roomKey;\r\n\t\t//校服\r\n\t\tlet long_url = \"http://api.t.sina.com.cn/short_url/shorten.json?source=3271760578&url_long=https://www.qp355.com/room\" + roomKey;\r\n\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(\"game.CShortenGenerate\", {\"url\": long_url}, this.SuccessTcnUrl.bind(this), this.FailTcnUrl.bind(this));\r\n\t},\r\n\tClick_btn_Sharelink: function () {\r\n\t\tlet title = '房号：' + this.shareShortRoomID + ' 互动中';\r\n\t\tlet desc = '[' + this.playerNameList.join('] [') + ']';\r\n\t\tlet weChatAppShareUrl = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"ChatRoomUrl\") + this.shareLongRoomID;\r\n\t\tthis.SDKManager.Share(title, desc, weChatAppShareUrl, \"0\");\r\n\t},\r\n\tGetAppName:function(){\r\n        let appName=cc.sys.localStorage.getItem('appName');\r\n        if (appName==\"baodao\") {\r\n            return \"baodao\";\r\n        }\r\n        if (appName==\"sansan\") {\r\n            return \"sansan\";\r\n        }\r\n        return \"xinhua\";\r\n    },\r\n\tClick_btn_weixin: function () {\r\n\t\tlet room = app[app.subGameName.toUpperCase() + \"Room\"]();\r\n\t\tvar WeChatShare = app[app.subGameName + \"_WeChatManager\"]().WeChatShare(app.subGameName);\r\n\t\tlet title = null;\r\n\t\tif (WeChatShare['special']) {\r\n\t\t\ttitle = WeChatShare['special'];\r\n\t\t} else {\r\n\t\t\ttitle = WeChatShare['title'];\r\n\t\t}\r\n\t\tlet weChatAppShareUrl = WeChatShare['url'];\r\n\t\tlet setCount = room.GetRoomConfigByProperty(\"setCount\");  //多少局\r\n\t\tlet roomKey = room.GetRoomProperty(\"key\");  //房间号\r\n\r\n\t\tlet allPlayerInfo = room.GetRoomPosMgr().GetRoomAllPlayerInfo();\r\n\t\tlet joinPlayerCount = room.GetRoomPosMgr().GetRoomPlayerCount();  //几人场\r\n\t\tlet nowJoin = 0;\r\n\r\n\t\tfor (let i = 0; i < joinPlayerCount; i++) {\r\n\t\t\tif (allPlayerInfo[i].pid > 0)\r\n\t\t\t\tnowJoin++;\r\n\t\t}\r\n\t\ttitle = title.replace('{房间号}', roomKey);\r\n\t\tlet gamedesc = \"\";\r\n\t\tgamedesc = joinPlayerCount + \"人场\";\r\n\t\tgamedesc = gamedesc + \",\" + setCount + \"局\";\r\n\t\tlet autoCardIdx = room.GetRoomConfigByProperty(\"paymentRoomCardType\");\r\n\t\tif (0 == autoCardIdx)\r\n\t\t\tgamedesc = gamedesc + \",房主出卡\";\r\n\t\telse if (1 == autoCardIdx)\r\n\t\t\tgamedesc = gamedesc + \",平分房卡\";\r\n\t\telse\r\n\t\t\tgamedesc = gamedesc + \",大赢家出卡\";\r\n\t\tlet que = joinPlayerCount - nowJoin;\r\n\t\tgamedesc += \",\" + nowJoin + \"缺\" + que;\r\n\t\tlet teshuwanfan = this.WanFa();\r\n\t\t//let CheckShareContent();\r\n\t\tif (teshuwanfan) {\r\n\t\t\tgamedesc += \",\" + teshuwanfan;\r\n\t\t}\r\n\t\t//this.BeginShare(room.GetRoomProperty(\"key\"),text);\r\n\t\tconsole.log(\"Click_btn_weixin:\", title);\r\n\t\tconsole.log(\"Click_btn_weixin:\", gamedesc);\r\n\t\tconsole.log(\"Click_btn_weixin:\", weChatAppShareUrl);\r\n\t\t//this.SDKManager.Share(title, gamedesc, weChatAppShareUrl, \"0\");\r\n\t\tlet appName=this.GetAppName();\r\n        if(appName == \"baodao\"){\r\n            this.SDKManager.ShareLineLink(title, gamedesc, weChatAppShareUrl);\r\n        }else{\r\n\t\t\tthis.FormManager.ShowForm(app.subGameName + '_UIRoomCopy', roomKey, title, gamedesc, weChatAppShareUrl);\r\n\t\t}\r\n\t},\r\n\r\n\tClick_btn_fzkl: function (str) {\r\n\t\tif (cc.sys.isNative) {\r\n\t\t\tlet argList = [{\"Name\": \"msg\", \"Value\": str.toString()}];\r\n\t\t\tapp[app.subGameName + \"_NativeManager\"]().CallToNative(\"copyText\", argList);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.log(\"真机复制分享cc.sys.isNative\", str);\r\n\t\t}\r\n\t},\r\n\r\n\tWanFa: function () {\r\n\t\tthis.gameCreateConfig = this.SysDataManager.GetTableDict(\"gameCreate\");\r\n\t\tlet playGame = app.subGameName;\r\n\t\tif (playGame == '') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tlet room = app[app.subGameName.toUpperCase() + \"Room\"]();\r\n\t\tlet sign = room.GetRoomConfigByProperty(\"sign\");\r\n\t\tlet gameType = playGame;\r\n\t\tif (gameType == \"sss\") {\r\n\t\t\tif (sign == 1) {\r\n\t\t\t\tgameType = \"sss_zz\";\r\n\t\t\t} else {\r\n\t\t\t\tgameType = \"sss_dr\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet wanfa = '';\r\n\t\tfor (let key in this.gameCreateConfig) {\r\n\t\t\tlet gameName = this.gameCreateConfig[key].GameName;\r\n\t\t\tlet isWanFa = this.gameCreateConfig[key].isWanFa;\r\n\t\t\tif (gameType == gameName && isWanFa == 1) {\r\n\t\t\t\tlet dataKey = this.gameCreateConfig[key].Key;\r\n\t\t\t\tlet value = room.GetRoomConfigByProperty(dataKey);\r\n\t\t\t\tif (value < 0) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tlet ToggleType = this.gameCreateConfig[key].ToggleType;\r\n\t\t\t\tlet ToggleDesc = this.gameCreateConfig[key].ToggleDesc.split(',');\r\n\t\t\t\tif (ToggleType == 0) {\r\n\t\t\t\t\t//单选\r\n\t\t\t\t\tlet str = '';\r\n\t\t\t\t\tstr = ToggleDesc[value];\r\n\t\t\t\t\tif ('zjh' == gameType && ('dingzhu' == dataKey || 'dizhu' == dataKey)) {\r\n\t\t\t\t\t\tlet baseDiZhus = [1, 2, 5, 10];\r\n\t\t\t\t\t\tlet dizhuIdx = room.GetRoomConfigByProperty('dizhu');\r\n\t\t\t\t\t\tlet dizhu = baseDiZhus[dizhuIdx];\r\n\t\t\t\t\t\tlet dingzhu = 0;\r\n\t\t\t\t\t\tif (0 == value)\r\n\t\t\t\t\t\t\tdingzhu = dizhu * 5;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tdingzhu = dizhu * 10;\r\n\t\t\t\t\t\tdizhu = dizhu * room.GetRoomConfigByProperty('baseMark');\r\n\t\t\t\t\t\tdingzhu = dingzhu * room.GetRoomConfigByProperty('baseMark');\r\n\r\n\t\t\t\t\t\tif ('dingzhu' == dataKey)\r\n\t\t\t\t\t\t\tstr = dingzhu.toString() + '分';\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tstr = dizhu.toString() + '分';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof(str) == \"undefined\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (wanfa == '') {\r\n\t\t\t\t\t\twanfa = str;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twanfa = wanfa + \",\" + str;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (ToggleType == 1) {\r\n\t\t\t\t\t//多选\r\n\t\t\t\t\tfor (let j = 0; j < value.length; j++) {\r\n\t\t\t\t\t\tif (gameType == 'pdk_lyfj') {\r\n\t\t\t\t\t\t\tif (value[j] == 4 || value[j] == 15 || value[j] == 18) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet str = '';\r\n\t\t\t\t\t\tif (gameType == 'pdk_lyfj') {\r\n\t\t\t\t\t\t\tif (value[j] == 11) {\r\n\t\t\t\t\t\t\t\tstr = ToggleDesc[3];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (value[j] == 21) {\r\n\t\t\t\t\t\t\t\tstr = ToggleDesc[4];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstr = ToggleDesc[value[j]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tstr = ToggleDesc[value[j]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof(str) == \"undefined\") {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (wanfa == '') {\r\n\t\t\t\t\t\t\twanfa = str;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\twanfa = wanfa + \",\" + str;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn wanfa;\r\n\t},\r\n\tGameTyepStringUp: function () {\r\n\t\treturn app.subGameName.toUpperCase();\r\n\t},\r\n\t//手动释放内存\r\n\tDestroyFromParent: function (node) {\r\n\t\tnode.removeFromParent();\r\n\t\t//销毁节点\r\n\t\tnode.destroy();\r\n\t},\r\n\tCheckUpdateNotice: function () {\r\n\t\tlet gameTypeId = this.ShareDefine.GametTypeNameDict[this.GameTyepStringUp()];\r\n\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(\"game.CMaintainGameNotice\", {\"gameTypeId\": gameTypeId}, function (event) {\r\n\t\t\tif (typeof(event.status) == \"undefined\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(\"game.CMaintainGameIsGetNotice\", {\"gameTypeId\": gameTypeId});\r\n\t\t\tif (typeof(event.content) != \"undefined\") {\r\n\t\t\t\tif (event.content != \"\" && event.content != null) {\r\n\t\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(event.content); //弹窗提示用户\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n});\r\n\r\nmodule.exports = sss_BaseForm;\r\n\r\n\r\n\r\n"]}