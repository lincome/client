{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\fjssz_UICreatRoom.js"],"names":["app","require","cc","Class","extends","subGameName","properties","prefab_Toggles","Prefab","OnCreateInit","ZorderLv","btnSave","GetWndNode","scrollTip","scroll_Right","getComponent","ScrollView","btnCreate","node_RightLayout","roomcostConfig","SysDataManager","GetTableDict","gameCreateConfig","LocalDataManager","FormManager","ComTool","RedColor1","Color","RedColor2","WhiteClolor","gameType","lastParentBtnIcon","lastChildBtnIcon","Toggles","sign","addPrefabWidth","rightPrefabSpacing","Layout","spacingY","find","node","on","Node","EventType","TOUCH_START","OnRightBgClick","RegEvent","Event_CodeError","OnShow","serverPack","gamename","clubData","clubWinnerPayConsume","ShowForm","enableGameType","RefreshAllToggles","CloseForm","ShowBtn","event","codeInfo","ShareDefine","CLUB_CreateCfgMax","ShowSysMsg","GetLocalConfig","configName","clubId","roomKey","sys","localStorage","getItem","SetLocalConfig","configInfo","setItem","stopAutoScroll","removeAllChildren","isHideZhadanfenshu","helpIndex","key","dataKey","toggleCount","AtRows","AtRow","toString","split","instantiate","addCount","console","error","i","prefabNode","getChildByName","newNode","name","addChild","x","nodeHelp","active","fristPos","y","lastPos","curNode","height","OnToggleClick","checkNode","icon_selectBg","showList","ShowIndexs","linshi","gameIndex","linshiList","j","length","parseInt","ToggleType","imgPath","addComponent","Toggle","SetNodeImageByFilePath","push","UpdateTogglesLabel","UpdateLabelColor","line","addline","ShowTogglesBySign","setHelpBtnPos","scrollToTop","EditBoxChanged","str","EditBox","string","isClick","placeholder","OnClose","TogglesNode","curKey","substring","reg","GameName","Key","AAfangfeiDatas","WinfangfeiDatas","FangZhufangfeiDatas","clubFangFeiDatas","clubWinFangFeiDatas","title","Title","replace","Label","descList","ToggleDesc","children","jushuIndex","renshu","publicCosts","getCostData","getCurSelectRenShu","SpiltCosts","curCostData","mark","SetCount","AaCostCount","WinCostCount","CostCount","ClubCount","ClubWinCostCount","descInde","startsWith","ffNodes","s","needNode","toggleNode","isChecked","label","color","fangkaNode","helpNode","lastNode","labelNode","maxWidth","width","fangfeiNode","n","costs","toUpperCase","PeopleMin","PeopleMax","OnClickForm","OnHelpBtnClick","btnNode","target","btnName","Click_btn_help","toggles","parent","toggle","toggleIndex","needClearList","needShowIndexList","ClearToggleCheck","showIndexList","OnScrollEnded","OnClick","Click_btn_create","that","curIndex","msgID","then","formComponent","wndSize","GetMsgWndSize","btnNodeParentPosition","convertToWorldSpaceAR","getPosition","btnX","btnY","SetFormPosition","v2","catch","ErrLog","stack","close","Click_btn_buy","clientConfig","GetClientConfig","PackDefine","APPLE_CHECK","needIndex","AtRowArr","createType","isSpiltRoomCard","GetIdxByKey","needCostData","hasRoomCard","GetHeroProperty","costCoun","desc","GetSysMsgContentByMsgID","SetWaitForConfirmForm","OnConFirm","bind","ConfirmBuyGoTo","wangpai","test","setCount","sendPack","kexuanwanfa","fangjian","gaoji","daqiang","moshi","difen","xianShi","jiesan","roomMgr","log","item","configData","dataType","linshi2","default1","new1","default2","new2","clubCostType","SendCreateRoom","SetGameType","SetConfigProperty","clickType","backArgList"],"mappings":"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","file":"fjssz_UICreatRoom.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"fjssz_app\");\r\ncc.Class({\r\n\textends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n\tproperties: {\r\n\t\tprefab_Toggles: cc.Prefab,\r\n\t},\r\n\r\n\t//初始化\r\n\tOnCreateInit: function () {\r\n\t\tthis.ZorderLv = 7;\r\n\r\n\t\tthis.btnSave = this.GetWndNode(\"sp_room/rightFrame/btn_save\");\r\n\t\tthis.scrollTip = this.GetWndNode(\"sp_room/rightFrame/scrollTip\");\r\n\t\tthis.scroll_Right = this.GetWndNode(\"sp_room/rightFrame/mark\").getComponent(cc.ScrollView);\r\n\t\tthis.btnCreate = this.GetWndNode(\"sp_room/rightFrame/btn_create\");\r\n\t\tthis.node_RightLayout = this.GetWndNode(\"sp_room/rightFrame/mark/layout\");\r\n\r\n\t\tthis.roomcostConfig = this.SysDataManager.GetTableDict(\"roomcost\");\r\n\t\tthis.gameCreateConfig = this.SysDataManager.GetTableDict(\"gameCreate\");\r\n\t\tthis.LocalDataManager = app.LocalDataManager();\r\n\t\tthis.FormManager = app[app.subGameName + \"_FormManager\"]();\r\n\t\tthis.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n\r\n\t\tthis.RedColor1 = new cc.Color(0, 155, 46);\r\n\t\tthis.RedColor2 = new cc.Color(158, 49, 16);\r\n\t\tthis.WhiteClolor = new cc.Color(79, 79, 79);\r\n\r\n\t\tthis.gameType = \"\";\r\n\t\tthis.lastParentBtnIcon = null;\r\n\t\tthis.lastChildBtnIcon = null;\r\n\t\tthis.Toggles = {};\r\n\t\tthis.sign = 1;\r\n\r\n\t\tthis.addPrefabWidth = 320;\r\n\t\tthis.rightPrefabSpacing = this.node_RightLayout.getComponent(cc.Layout).spacingY;\r\n\r\n\t\tcc.find('sp_room/rightFrame/mark', this.node).on(cc.Node.EventType.TOUCH_START, this.OnRightBgClick, this);\r\n\r\n\t\tthis.RegEvent(\"CodeError\", this.Event_CodeError, this);\r\n\t},\r\n\t//--------------显示函数-----------------\r\n\tOnShow: function (serverPack, gamename = \"fjssz\", clubData = null) {\r\n\t\tthis.clubWinnerPayConsume = 0;\r\n\t\tthis.gameType = gamename;\r\n\t\tthis.clubData = clubData;\r\n\t\tthis.FormManager.ShowForm(app.subGameName + \"_UITop\", app.subGameName + \"_UICreatRoom\", true, true, false);\r\n\r\n\t\tif (clubData && '' != clubData.enableGameType) {\r\n\t\t\tthis.gameType = clubData.enableGameType;\r\n\t\t}\r\n\r\n\t\tthis.RefreshAllToggles();\r\n\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t\t//设置按钮\r\n\t\tthis.ShowBtn();\r\n\t},\r\n\r\n\tEvent_CodeError: function (event) {\r\n\t\tlet codeInfo = event;\r\n\t\tif (codeInfo[\"Code\"] == this.ShareDefine.CLUB_CreateCfgMax) {\r\n\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg('MSG_CLUB_CreateCfgMax');\r\n\t\t}\r\n\t},\r\n\t//获取创建缓存\r\n\tGetLocalConfig: function (configName, clubId, roomKey) {\r\n\t\treturn cc.sys.localStorage.getItem(this.gameType + \"_\" + clubId + \"_\" + roomKey + \"_\" + configName);\r\n\t},\r\n\tSetLocalConfig: function (configName, configInfo, clubId, roomKey) {\r\n\t\tcc.sys.localStorage.setItem(this.gameType + \"_\" + clubId + \"_\" + roomKey + \"_\" + configName, configInfo);\r\n\t},\r\n\tRefreshAllToggles: function () {\r\n\t\tthis.Toggles = {};\r\n\t\tthis.scroll_Right.stopAutoScroll();\r\n\t\tthis.node_RightLayout.removeAllChildren();\r\n\r\n\t\tlet isHideZhadanfenshu = false;\r\n\r\n\t\tlet helpIndex = 1;//01是总帮助\r\n\t\tfor (let key in this.gameCreateConfig) {\r\n\t\t\tif (this.gameType == this.gameCreateConfig[key][\"GameName\"]) {\r\n\t\t\t\tlet node = null;\r\n\t\t\t\tlet dataKey = this.gameCreateConfig[key][\"Key\"];\r\n\t\t\t\tlet toggleCount = this.gameCreateConfig[key][\"ToggleCount\"];\r\n\t\t\t\tlet AtRows = this.gameCreateConfig[key].AtRow.toString().split(',');\r\n\t\t\t\tif (this.clubData && \"fangfei\" == dataKey) {\r\n\t\t\t\t\ttoggleCount = 3;  //一个管理付，一个大赢家付\r\n\t\t\t\t\tAtRows = [1, 2, 3];\r\n\t\t\t\t}\r\n\t\t\t\tnode = cc.instantiate(this.prefab_Toggles);\r\n\t\t\t\t//需要判断添更加多的Toggle\r\n\t\t\t\tlet addCount = toggleCount - 1;\r\n\t\t\t\tif (addCount < 0) {\r\n\t\t\t\t\tconsole.error('gameCreate Config ToggleCount error');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let i = 2; i <= toggleCount; i++) {\r\n\t\t\t\t\t\tlet prefabNode = node.getChildByName('Toggle1');\r\n\t\t\t\t\t\tlet newNode = cc.instantiate(prefabNode);\r\n\t\t\t\t\t\tnewNode.name = 'Toggle' + i;\r\n\t\t\t\t\t\tnode.addChild(newNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnode.name = \"Toggles_\" + dataKey;\r\n\t\t\t\tnode.x = 10;\r\n\t\t\t\tlet nodeHelp = node.getChildByName(\"btn_help\");\r\n\t\t\t\tnodeHelp.active = false;\r\n\t\t\t\t/*if (this.gameCreateConfig[key].IsShowHelp) {\r\n\t\t\t\t\tnodeHelp.name = \"btn_help0\" + helpIndex;\r\n\t\t\t\t\tnodeHelp.on(\"click\", this.OnHelpBtnClick, this);\r\n\t\t\t\t\tnodeHelp.active = true;\r\n\t\t\t\t\thelpIndex++;\r\n\t\t\t\t}*/\r\n\r\n\r\n\t\t\t\tif (!this.Toggles[dataKey]) {\r\n\t\t\t\t\tthis.Toggles[dataKey] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet fristPos = {x: 0, y: 0};\r\n\t\t\t\tlet lastPos = {x: 0, y: 0};\r\n\t\t\t\tfor (let i = 1; i <= toggleCount; i++) {\r\n\t\t\t\t\tlet curNode = node.getChildByName(\"Toggle\" + i);\r\n\t\t\t\t\tif (curNode) {\r\n\t\t\t\t\t\t//位置宽高设置下\r\n\t\t\t\t\t\t//记录下第一个的位置方便换行\r\n\t\t\t\t\t\tif (1 == i) {\r\n\t\t\t\t\t\t\tfristPos.x = curNode.x;\r\n\t\t\t\t\t\t\tfristPos.y = curNode.y;\r\n\t\t\t\t\t\t\tlastPos.x = curNode.x;\r\n\t\t\t\t\t\t\tlastPos.y = curNode.y;\r\n\t\t\t\t\t\t} else if (1 < i) {//第1个以后都是新增的\r\n\t\t\t\t\t\t\tif (AtRows[i - 2] != AtRows[i - 1]) {\r\n\t\t\t\t\t\t\t\tcurNode.x = fristPos.x;\r\n\t\t\t\t\t\t\t\tcurNode.y = lastPos.y - curNode.height - this.rightPrefabSpacing;\r\n\t\t\t\t\t\t\t\tnode.height = node.height + curNode.height + this.rightPrefabSpacing;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcurNode.x = lastPos.x + this.addPrefabWidth;\r\n\t\t\t\t\t\t\t\tcurNode.y = lastPos.y;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastPos.x = curNode.x;\r\n\t\t\t\t\t\tlastPos.y = curNode.y;\r\n\r\n\t\t\t\t\t\t// console.log(\"OnToggleClick\", this);\r\n\t\t\t\t\t\tcurNode.on(cc.Node.EventType.TOUCH_START, this.OnToggleClick, this);\r\n\t\t\t\t\t\tlet checkNode = curNode.getChildByName(\"checkmark\");\r\n\t\t\t\t\t\tlet icon_selectBg = curNode.getChildByName(\"icon_selectBg\");\r\n\t\t\t\t\t\tlet showList = this.gameCreateConfig[key].ShowIndexs.toString().split(',');\r\n\t\t\t\t\t\t//尝试获取缓存\r\n\t\t\t\t\t\tlet clubId = 0;\r\n\t\t\t\t\t\tlet roomKey = '0';\r\n\t\t\t\t\t\tlet linshi = null;\r\n\t\t\t\t\t\tif (this.clubData) {\r\n\t\t\t\t\t\t\tclubId = this.clubData.clubId;\r\n\t\t\t\t\t\t\troomKey = this.clubData.gameIndex;\r\n\t\t\t\t\t\t\tlinshi = this.GetLocalConfig(this.gameCreateConfig[key][\"Key\"], clubId, roomKey);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//第一次创建俱乐部房间没有roomKey为0\r\n\t\t\t\t\t\tif (!linshi) {\r\n\t\t\t\t\t\t\tlinshi = this.GetLocalConfig(this.gameCreateConfig[key][\"Key\"], clubId, '0');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (linshi) {\r\n\t\t\t\t\t\t\tlet linshiList = linshi.split(',');\r\n\t\t\t\t\t\t\tfor (let j = 0; j < linshiList.length; j++) {//缓存可能出BUG(配置删除了按钮数量)\r\n\t\t\t\t\t\t\t\tif (parseInt(linshiList[j]) > toggleCount) {\r\n\t\t\t\t\t\t\t\t\tlinshiList = ['1'];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tshowList = linshiList;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.clubData && \"fangfei\" == dataKey) {\r\n\t\t\t\t\t\t\tshowList = [3];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//尝试获取缓存\r\n\t\t\t\t\t\tif (0 == this.gameCreateConfig[key].ToggleType && 1 != showList.length) {\r\n\t\t\t\t\t\t\tconsole.error('gameCreate Config ToggleType and ShowIndexs error');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (1 == this.gameCreateConfig[key].ToggleType) {//多选的图片设置下(不放上面是因为路径)\r\n\t\t\t\t\t\t\tlet imgPath = \"texture/ui/fjssz_UICreateRoom/icon_checkin02\";\r\n\t\t\t\t\t\t\tnode.addComponent(cc.Toggle);\r\n\t\t\t\t\t\t\tthis.SetNodeImageByFilePath(checkNode, imgPath);\r\n\t\t\t\t\t\t\tthis.SetNodeImageByFilePath(icon_selectBg, \"texture/ui/fjssz_UICreateRoom/icon_check02\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (let j = 0; j < showList.length; j++) {\r\n\t\t\t\t\t\t\tif (i == parseInt(showList[j])) {\r\n\t\t\t\t\t\t\t\tcheckNode.active = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcheckNode.active = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.Toggles[dataKey].push(curNode);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.UpdateTogglesLabel(node);\r\n\t\t\t\tthis.UpdateLabelColor(node);\r\n\t\t\t\tthis.node_RightLayout.addChild(node);\r\n\t\t\t\tlet line = this.scroll_Right.node.getChildByName(\"line\");\r\n\t\t\t\tlet addline = cc.instantiate(line);\r\n\t\t\t\taddline.active = true;\r\n\t\t\t\tthis.node_RightLayout.addChild(addline);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ShowTogglesBySign();\r\n\t\tthis.setHelpBtnPos();\r\n\t\tthis.scroll_Right.scrollToTop();\r\n\t\t//如果可以滚动，显示滚动提示节点\r\n\t\tif (this.node_RightLayout.height > this.scroll_Right.node.height) {\r\n\t\t\tthis.scrollTip.active = true;\r\n\t\t} else {\r\n\t\t\tthis.scrollTip.active = false;\r\n\t\t}\r\n\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").on('editing-did-ended', this.EditBoxChanged, this);\r\n\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").on('editing-return', this.EditBoxChanged, this);\r\n\t\tthis.EditBoxChanged()\r\n\t},\r\n\tEditBoxChanged : function(){\r\n\t\tlet str = this.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").getComponent(cc.EditBox).string\r\n\t\tif (str && parseInt(str) && parseInt(str) >= 13) {\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").getComponent(cc.EditBox).string = \"13\"\r\n\t\t}\r\n\t\telse if (!parseInt(str) || parseInt(str)< 2) {\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").getComponent(cc.EditBox).string = \"2\"\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").getComponent(cc.EditBox).string = parseInt(str)\r\n\t\t}\r\n\t},\r\n\tShowTogglesBySign: function (isClick = false) {\r\n\t\tif (!isClick) {\r\n\t\t\tif (this.Toggles[\"leixing\"] && this.Toggles[\"leixing\"].length > 0) {\r\n\t\t\t\tfor (let i = 0; i < this.Toggles[\"leixing\"].length; i++) {\r\n\t\t\t\t\tif (this.Toggles[\"leixing\"][i].getChildByName(\"checkmark\").active) {\r\n\t\t\t\t\t\tthis.sign = i + 1;\r\n\t\t\t\t\t\tif(this.sign == 2) this.sign = 3\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.sign == 1) {//经典场\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").active = true;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"icon_selectBg\").active = false;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"checkmark\").active = false;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"label\").active = false;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").x = 150;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").getComponent(cc.EditBox).placeholder = \"请输入2-13正整数\";\r\n\t\t\tthis.Toggles[\"kexuanwanfa\"][4].active = true;\r\n\t\t} \r\n\t\telse {//特殊王牌场\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").active = true;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"icon_selectBg\").active = false;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"checkmark\").active = false;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"label\").active = false;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").x = 150;\r\n\t\t\tthis.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").getComponent(cc.EditBox).placeholder = \"请输入2-13正整数\";\r\n\t\t\tthis.Toggles[\"kexuanwanfa\"][4].active = false;\r\n\t\t}\r\n\t},\r\n\tOnClose: function () {\r\n\r\n\t},\r\n\tShowBtn: function () {\r\n\t\tif (this.clubData) {\r\n\t\t\tthis.btnCreate.active = false;\r\n\t\t\tthis.btnSave.active = false;\r\n\t\t\tif (0 == this.clubData.gameIndex) {\r\n\t\t\t\tthis.btnCreate.active = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.btnSave.active = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.btnCreate.active = true;\r\n\t\t\tthis.btnSave.active = false;\r\n\r\n\t\t}\r\n\t},\r\n\tUpdateTogglesLabel: function (TogglesNode) {\r\n\t\tlet curKey = TogglesNode.name.substring((\"Toggles_\").length, TogglesNode.name.length);\r\n\t\tlet reg = /\\/s/g;\r\n\t\tfor (let key in this.gameCreateConfig) {\r\n\t\t\tif (this.gameType == this.gameCreateConfig[key].GameName) {\r\n\t\t\t\tif (curKey == this.gameCreateConfig[key].Key) {\r\n\t\t\t\t\tlet AAfangfeiDatas = [];\r\n\t\t\t\t\tlet WinfangfeiDatas = [];\r\n\t\t\t\t\tlet FangZhufangfeiDatas = [];\r\n\t\t\t\t\tlet clubFangFeiDatas = [];\r\n\t\t\t\t\tlet clubWinFangFeiDatas = [];\r\n\t\t\t\t\tlet title = this.gameCreateConfig[key].Title.replace(reg, ' ');\r\n\t\t\t\t\tTogglesNode.getChildByName('title').getComponent(cc.Label).string = title;\r\n\t\t\t\t\tlet descList = [];\r\n\t\t\t\t\tif (\"jushu\" != curKey) {//局数读roomcost\r\n\t\t\t\t\t\tdescList = this.gameCreateConfig[key].ToggleDesc.split(',');\r\n\t\t\t\t\t\tif (this.clubData && \"fangfei\" == curKey) {\r\n\t\t\t\t\t\t\tdescList = [\"管理付\", \"AA付\", \"胜家付\"];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (descList.length != TogglesNode.children.length - 2) {//减去标题和帮助按钮\r\n\t\t\t\t\t\t\tconsole.error('gameCreate config ToggleDesc and Toggle count error');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet jushuIndex = -1;\r\n\t\t\t\t\tlet renshu = [];//0表示读房主支付配置\r\n\t\t\t\t\tif (\"renshu\" == curKey ||\r\n\t\t\t\t\t\t\"fangfei\" == curKey ||\r\n\t\t\t\t\t\t\"jushu\" == curKey ||\r\n\t\t\t\t\t\t\"leixing\" == curKey) {\r\n\t\t\t\t\t\tlet publicCosts = this.getCostData(renshu);\r\n\t\t\t\t\t\tif (this.Toggles[\"renshu\"]) {\r\n\t\t\t\t\t\t\trenshu = this.getCurSelectRenShu();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet SpiltCosts = this.getCostData(renshu);\r\n\t\t\t\t\t\tlet curCostData = null;\r\n\t\t\t\t\t\tif (0 == renshu.length) {\r\n\t\t\t\t\t\t\tcurCostData = publicCosts;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcurCostData = SpiltCosts;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.Toggles[\"jushu\"]) {\r\n\t\t\t\t\t\t\tjushuIndex = 0;\r\n\t\t\t\t\t\t\tfor (let i = 0; i < this.Toggles[\"jushu\"].length; i++) {\r\n\t\t\t\t\t\t\t\tlet mark = this.Toggles[\"jushu\"][i].getChildByName(\"checkmark\").active;\r\n\t\t\t\t\t\t\t\tif (mark) {\r\n\t\t\t\t\t\t\t\t\tjushuIndex = i;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tjushuIndex++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (let i = 0; i < curCostData.length; i++) {\r\n\t\t\t\t\t\t\t\tthis.Toggles[\"jushu\"][i].getChildByName(\"label\").getComponent(cc.Label).string = curCostData[i].SetCount + '局';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.Toggles[\"fangfei\"] && -1 != jushuIndex) {\r\n\t\t\t\t\t\t\tif (jushuIndex < publicCosts.length) {\r\n\t\t\t\t\t\t\t\tAAfangfeiDatas.push(publicCosts[jushuIndex].AaCostCount);\r\n\t\t\t\t\t\t\t\tWinfangfeiDatas.push(publicCosts[jushuIndex].WinCostCount);\r\n\t\t\t\t\t\t\t\tFangZhufangfeiDatas.push(publicCosts[jushuIndex].CostCount);\r\n\r\n\t\t\t\t\t\t\t\tclubFangFeiDatas.push(publicCosts[jushuIndex].ClubCount);\r\n\t\t\t\t\t\t\t\tclubWinFangFeiDatas.push(publicCosts[jushuIndex].ClubWinCostCount);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (jushuIndex < SpiltCosts.length) {\r\n\t\t\t\t\t\t\t\tAAfangfeiDatas.push(SpiltCosts[jushuIndex].AaCostCount);\r\n\t\t\t\t\t\t\t\tWinfangfeiDatas.push(SpiltCosts[jushuIndex].WinCostCount);\r\n\t\t\t\t\t\t\t\tFangZhufangfeiDatas.push(SpiltCosts[jushuIndex].CostCount);\r\n\r\n\t\t\t\t\t\t\t\tclubFangFeiDatas.push(SpiltCosts[jushuIndex].ClubCount);\r\n\t\t\t\t\t\t\t\tclubWinFangFeiDatas.push(SpiltCosts[jushuIndex].ClubWinCostCount);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (\"jushu\" != curKey) {\r\n\t\t\t\t\t\tlet descInde = 0;\r\n\t\t\t\t\t\tfor (let i = 0; i < TogglesNode.children.length; i++) {\r\n\t\t\t\t\t\t\tif (TogglesNode.children[i].name.startsWith(\"Toggle\")) {\r\n\t\t\t\t\t\t\t\tTogglesNode.children[i].getChildByName(\"label\").getComponent(cc.Label).string = descList[descInde];\r\n\t\t\t\t\t\t\t\tdescInde++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (0 != AAfangfeiDatas.length) {\r\n\t\t\t\t\t\tlet ffNodes = this.Toggles[\"fangfei\"];\r\n\t\t\t\t\t\tfor (let s = 0; s < ffNodes.length; s++) {\r\n\t\t\t\t\t\t\tlet needNode = ffNodes[s].getChildByName(\"fangfeiNode\");\r\n\t\t\t\t\t\t\tneedNode.active = true;\r\n\t\t\t\t\t\t\tif (this.clubData == null) {\r\n\t\t\t\t\t\t\t\tif (0 == s) {\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"needNum\").getComponent(cc.Label).string = 'x' + FangZhufangfeiDatas[FangZhufangfeiDatas.length - 1];\r\n\t\t\t\t\t\t\t\t} else if (1 == s) {\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"needNum\").getComponent(cc.Label).string = 'x' + AAfangfeiDatas[AAfangfeiDatas.length - 1];\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"needNum\").getComponent(cc.Label).string = 'x' + WinfangfeiDatas[WinfangfeiDatas.length - 1];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (0 == s) {\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"needNum\").getComponent(cc.Label).string = 'x' + renshu[0] * AAfangfeiDatas[AAfangfeiDatas.length - 1];\r\n\t\t\t\t\t\t\t\t} else if (1 == s) {\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"icon\").active = false;\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"icon_qk\").active = true;\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"needNum\").getComponent(cc.Label).string = 'x' + clubFangFeiDatas[clubFangFeiDatas.length - 1];\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"needNum\").clubWinnerPayConsume = clubFangFeiDatas[clubFangFeiDatas.length - 1];\r\n\t\t\t\t\t\t\t\t\tffNodes[s].getChildByName(\"editbox\").x = 477;\r\n\t\t\t\t\t\t\t\t\tffNodes[s].getChildByName(\"editbox\").getComponent(cc.EditBox).placeholder = \"大于默认圈卡，否则默认\";\r\n\t\t\t\t\t\t\t\t\tffNodes[s].getChildByName(\"editbox\").active = true;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"icon\").active = false;\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"icon_qk\").active = true;\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"needNum\").getComponent(cc.Label).string = 'x' + clubWinFangFeiDatas[clubWinFangFeiDatas.length - 1];\r\n\t\t\t\t\t\t\t\t\tneedNode.getChildByName(\"needNum\").clubWinnerPayConsume = clubWinFangFeiDatas[clubWinFangFeiDatas.length - 1];\r\n\t\t\t\t\t\t\t\t\tffNodes[s].getChildByName(\"editbox\").x = 477;\r\n\t\t\t\t\t\t\t\t\tffNodes[s].getChildByName(\"editbox\").getComponent(cc.EditBox).placeholder = \"大于默认圈卡，否则默认\";\r\n\t\t\t\t\t\t\t\t\tffNodes[s].getChildByName(\"editbox\").active = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tUpdateLabelColor: function (TogglesNode) {\r\n\t\tfor (let i = 0; i < TogglesNode.children.length; i++) {\r\n\t\t\tlet toggleNode = TogglesNode.children[i];\r\n\t\t\tif (toggleNode.name.startsWith(\"Toggle\")) {\r\n\t\t\t\tlet isChecked = toggleNode.getChildByName(\"checkmark\").active;\r\n\t\t\t\tfor (let j = 0; j < toggleNode.children.length; j++) {\r\n\t\t\t\t\tlet label = toggleNode.children[j].getComponent(cc.Label);\r\n\t\t\t\t\tif (null != label) {\r\n\t\t\t\t\t\tif (isChecked) {\r\n\t\t\t\t\t\t\ttoggleNode.children[j].color = this.RedColor1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttoggleNode.children[j].color = this.RedColor2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet fangkaNode = toggleNode.getChildByName(\"fangfeiNode\");\r\n\t\t\t\t\tif (fangkaNode.active) {\r\n\t\t\t\t\t\tlabel = null;\r\n\t\t\t\t\t\tfor (let s = 0; s < fangkaNode.children.length; s++) {\r\n\t\t\t\t\t\t\tlabel = fangkaNode.children[s].getComponent(cc.Label);\r\n\t\t\t\t\t\t\tif (null != label) {\r\n\t\t\t\t\t\t\t\tif (isChecked) {\r\n\t\t\t\t\t\t\t\t\tfangkaNode.children[s].color = this.RedColor1;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tfangkaNode.children[s].color = this.RedColor2;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tsetHelpBtnPos: function () {//垃圾label控件自适应宽度有BUG草泥马\r\n\t\tlet helpNode = null;\r\n\t\tlet lastNode = null;\r\n\t\tlet Toggles = null;\r\n\t\tfor (let j = 0; j < this.node_RightLayout.children.length; j++) {\r\n\t\t\tif (j % 2 == 1) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tToggles = this.node_RightLayout.children[j];\r\n\t\t\thelpNode = null;\r\n\t\t\tlastNode = null;\r\n\t\t\tfor (let i = 0; i < Toggles.children.length; i++) {\r\n\t\t\t\tif (Toggles.children[i].name.startsWith(\"Toggle\")) {\r\n\t\t\t\t\tlastNode = Toggles.children[i];\r\n\t\t\t\t} else if (Toggles.children[i].name.startsWith(\"btn_help\")) {\r\n\t\t\t\t\thelpNode = Toggles.children[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (helpNode && helpNode.active && lastNode) {\r\n\t\t\t\t\tlet labelNode = lastNode.getChildByName(\"label\");\r\n\t\t\t\t\tlet str = lastNode.getChildByName(\"label\").getComponent(cc.Label);\r\n\t\t\t\t\tlet maxWidth = 0;\r\n\t\t\t\t\tlet label = lastNode.getChildByName(\"label\");\r\n\t\t\t\t\tif (label) {\r\n\t\t\t\t\t\tmaxWidth = label.x + label.width;\r\n\t\t\t\t\t\tlabel = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet fangfeiNode = lastNode.getChildByName(\"fangfeiNode\");\r\n\t\t\t\t\tif (fangfeiNode.active) {\r\n\t\t\t\t\t\tfor (let n = 0; n < fangfeiNode.children.length; n++) {\r\n\t\t\t\t\t\t\tlet label = fangfeiNode.children[n].getComponent(cc.Label);\r\n\t\t\t\t\t\t\tif (label) {\r\n\t\t\t\t\t\t\t\tmaxWidth = fangfeiNode.x + label.node.x + label.node.width;\r\n\t\t\t\t\t\t\t\tlabel = null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\thelpNode.x = lastNode.x + maxWidth + 60;\r\n\t\t\t\t\thelpNode.y = lastNode.y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetCostData: function (renshu) {//renshu =0 房主支付\r\n\t\tlet costs = [];\r\n\t\tif (renshu.length != 2) {\r\n\t\t\treturn costs;\r\n\t\t}\r\n\t\tlet sign = this.sign;\r\n\t\tfor (let key in this.roomcostConfig) {\r\n\t\t\tif (this.gameType.toUpperCase() == this.roomcostConfig[key][\"GameType\"] &&\r\n\t\t\t\tparseInt(renshu[0]) == this.roomcostConfig[key].PeopleMin &&\r\n\t\t\t\tparseInt(renshu[1]) == this.roomcostConfig[key].PeopleMax &&\r\n\t\t\t\tsign == this.roomcostConfig[key][\"Sign\"]) {\r\n\t\t\t\tcosts.push(this.roomcostConfig[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (0 == costs.length) {\r\n\t\t\t// console.error(\"roomcost Config error\");\r\n\t\t}\r\n\t\treturn costs;\r\n\t},\r\n\tOnClickForm: function () {\r\n\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t},\r\n\r\n\t//---------点击函数---------------------\r\n\tOnHelpBtnClick: function (event) {\r\n\t\tlet btnNode = event.target;\r\n\t\tlet btnName = btnNode.name;\r\n\t\tif (btnName.startsWith(\"btn_help\")) {\r\n\t\t\tthis.Click_btn_help(btnName, btnNode);\r\n\t\t}\r\n\t},\r\n\tOnToggleClick: function (event) {\r\n\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t\tlet toggles = event.target.parent;\r\n\t\tlet toggle = event.target;\r\n\t\tlet key = toggles.name.substring(('Toggles_').length, toggles.name.length);\r\n\t\tlet toggleIndex = parseInt(toggle.name.substring((\"Toggle\").length, toggle.name.length)) - 1;\r\n\t\tlet needClearList = [];\r\n\t\tlet needShowIndexList = [];\r\n\t\tneedClearList = this.Toggles[key];\r\n\t\tneedShowIndexList.push(toggleIndex);\r\n\t\tif (\"jushu\" == key || \"renshu\" == key || \"fangfei\" == key) {\r\n\t\t\tthis.ClearToggleCheck(needClearList, needShowIndexList);\r\n\t\t\tthis.UpdateLabelColor(toggles);\r\n\t\t\tthis.UpdateTogglesLabel(toggles);\r\n\t\t\treturn;\r\n\t\t} else if (\"leixing\" == key) {\r\n\t\t\tthis.sign = toggleIndex + 1;\r\n\t\t\tif(this.sign == 2) this.sign = 3\r\n\t\t\tthis.UpdateTogglesLabel(toggles);\r\n\t\t\tthis.ShowTogglesBySign(true);\r\n\t\t}\r\n\t\tif (toggles.getComponent(cc.Toggle)) {//复选框\r\n\t\t\tneedShowIndexList = [];\r\n\t\t\tfor (let i = 0; i < needClearList.length; i++) {\r\n\t\t\t\tlet mark = needClearList[i].getChildByName(\"checkmark\").active;\r\n\t\t\t\t//如果复选框为勾选状态并且点击的复选框不是该复选框，则继续保持勾选状态\r\n\t\t\t\tif (mark && i != toggleIndex) {\r\n\t\t\t\t\tneedShowIndexList.push(i);\r\n\t\t\t\t}\r\n\t\t\t\t//如果复选框为未勾选状态并且点击的复选框是该复选框，则切换为勾选状态\r\n\t\t\t\telse if (!mark && i == toggleIndex) {\r\n\t\t\t\t\tneedShowIndexList.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ClearToggleCheck(needClearList, needShowIndexList);\r\n\t\tthis.UpdateLabelColor(toggles, \"fangfei\" == key ? true : false);\r\n\t},\r\n\tClearToggleCheck: function (toggles, showIndexList) {\r\n\t\tfor (let i = 0; i < toggles.length; i++) {\r\n\t\t\ttoggles[i].getChildByName(\"checkmark\").active = false;\r\n\t\t}\r\n\r\n\t\tif (showIndexList) {\r\n\t\t\tfor (let i = 0; i < toggles.length; i++) {\r\n\t\t\t\tfor (let j = 0; j < showIndexList.length; j++) {\r\n\t\t\t\t\tif (i == showIndexList[j])\r\n\t\t\t\t\t\ttoggles[i].getChildByName(\"checkmark\").active = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tOnRightBgClick: function (event) {\r\n\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t},\r\n\t//滑动结束\r\n\tOnScrollEnded: function () {\r\n\t\tthis.scrollTip.active = false;\r\n\t},\r\n\tOnClick: function (btnName, btnNode) {\r\n\t\tif ('btn_create' == btnName) {\r\n\t\t\tthis.Click_btn_create(1);\r\n\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t\t} else if ('btn_save' == btnName) {\r\n\t\t\tthis.Click_btn_create(3);\r\n\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t\t} else if ('btn_close' == btnName) {\r\n\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t\t\tthis.CloseForm();\r\n\t\t} else if ('rightFrame' == btnName) {\r\n\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t\t} else if (btnName == \"btn_help01\") {\r\n\t\t\tthis.FormManager.ShowForm(app.subGameName + \"_UIGameHelp\");\r\n\t\t\t// this.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t\t} else if (btnName.startsWith(\"Toggle\")) {\r\n\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t\t} else {\r\n\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessageTip\");\r\n\t\t\tconsole.error(\"OnClick(%s) not find\", btnName);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tClick_btn_help: function (btnName, btnNode) {\r\n\t\tlet that = this;\r\n\t\tlet gameType = this.gameType;\r\n\t\tlet curIndex = btnName.substring((\"btn_help0\").length, btnName.length);\r\n\t\tlet msgID = 'UIMessageTip_Help' + curIndex + \"_\" + gameType;\r\n\t\tthis.FormManager.ShowForm(app.subGameName + \"_UIMessageTip\", msgID)\r\n\t\t\t.then(function (formComponent) {\r\n\t\t\t\tlet wndSize = formComponent.GetMsgWndSize();\r\n\t\t\t\tlet btnNodeParentPosition = btnNode.parent.convertToWorldSpaceAR(btnNode.getPosition());\r\n\t\t\t\tlet btnX = btnNodeParentPosition.x - that.node.width / 2 - wndSize.width / 2 - btnNode.width / 2;\r\n\t\t\t\tlet btnY = 0;\r\n\t\t\t\tif (wndSize.height > that.node.height / 2) {\r\n\t\t\t\t\tbtnY = that.node.convertToWorldSpaceAR(that.node.getPosition()).y - that.node.height / 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbtnY = btnNodeParentPosition.y - that.node.height / 2;\r\n\t\t\t\t}\r\n\t\t\t\t-wndSize.height / 2 + btnNode.height / 2;\r\n\t\t\t\tformComponent.SetFormPosition(cc.v2(btnX, btnY));\r\n\t\t\t})\r\n\t\t\t.catch(function (error) {\r\n\t\t\t\tthat.ErrLog(\"error:%s\", error.stack);\r\n\t\t\t})\r\n\t},\r\n\tclose: function () {\r\n\t\tthis.FormManager.CloseForm(\"UICreatRoom\");\r\n\t},\r\n\tClick_btn_buy: function () {\r\n\t\tlet clientConfig = app[app.subGameName + \"Client\"].GetClientConfig();\r\n\t\tif (app.PackDefine.APPLE_CHECK == clientConfig[\"appPackType\"]) return;\r\n\t\tthis.FormManager.ShowForm(\"UIStore\");\r\n\t},\r\n\tgetCurSelectRenShu: function () {\r\n\t\tlet renshu = 0;\r\n\t\tlet needIndex = -1;\r\n\t\tif (this.Toggles[\"renshu\"]) {\r\n\t\t\tfor (let i = 0; i < this.Toggles[\"renshu\"].length; i++) {\r\n\t\t\t\tlet toggle = this.Toggles[\"renshu\"][i].getChildByName(\"checkmark\");\r\n\t\t\t\tif (toggle.active) {\r\n\t\t\t\t\tneedIndex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let key in this.gameCreateConfig) {\r\n\t\t\tif (this.gameType == this.gameCreateConfig[key].GameName && 'renshu' == this.gameCreateConfig[key].Key) {\r\n\t\t\t\tlet AtRows = this.gameCreateConfig[key].ToggleDesc.toString().split(',');\r\n\t\t\t\t// return AtRows[needIndex].replace('人','').replace('2-','');\r\n\t\t\t\tlet AtRowArr = [];\r\n\t\t\t\tAtRowArr = AtRows[needIndex].replace('人', '').split('-');\r\n\t\t\t\tif (AtRowArr.length == 1) {\r\n\t\t\t\t\t//只是固定人数，没有配置浮动人数，最大最小都一样\r\n\t\t\t\t\tAtRowArr.push(AtRowArr[0]);\r\n\t\t\t\t}\r\n\t\t\t\treturn AtRowArr;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//创建房间\r\n\tClick_btn_create: function (createType) {\r\n\t\tlet isSpiltRoomCard = this.GetIdxByKey(\"fangfei\");\r\n\t\tlet renshu = [];\r\n\t\tif (isSpiltRoomCard) {\r\n\t\t\trenshu = this.getCurSelectRenShu();\r\n\t\t}\r\n\t\trenshu = this.getCurSelectRenShu();//发给服务器人数用选的\r\n\t\tlet needCostData = this.getCostData(renshu);\r\n\t\tif (!needCostData) {\r\n\t\t\tconsole.error('Click_btn_create Not CostData');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet hasRoomCard = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"roomCard\");\r\n\r\n\t\tlet jushuIndex = this.GetIdxByKey('jushu');\r\n\t\tif (-1 == jushuIndex || jushuIndex >= needCostData.length) {\r\n\t\t\tconsole.error('Click_btn_create error -1 == jushuIndex || jushuIndex >= needCostData.length');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet costCoun = needCostData[jushuIndex].CostCount;\r\n\t\tif (this.clubData == null) {\r\n\t\t\tif (hasRoomCard < costCoun) {//金币不足\r\n\t\t\t\tlet desc = app[app.subGameName + \"_SysNotifyManager\"]().GetSysMsgContentByMsgID(\"MSG_NotRoomCard\");\r\n\t\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().SetWaitForConfirmForm(this.OnConFirm.bind(this), \"goBuyCard\", []);\r\n\t\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIMessage\", null, this.ShareDefine.ConfirmBuyGoTo, 0, 0, desc)\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet wangpai = this.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").getComponent(cc.EditBox).string;\r\n\t\tlet reg = /^[1-9]\\d*$/;\r\n\t\tif (!reg.test(wangpai)) {\r\n\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"请输入2-13之间的王牌数量\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (parseInt(wangpai) < 2 || parseInt(wangpai) > 13) {\r\n\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"请输入2-13之间的正整数-13张\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tlet setCount = needCostData[jushuIndex].SetCount;\r\n\t\tlet sendPack = {};\r\n\t\tif (app.subGameName == this.gameType) {\r\n\t\t\tlet kexuanwanfa = [];\r\n\t\t\tfor (let i = 0; i < this.Toggles[\"kexuanwanfa\"].length; i++) {\r\n\t\t\t\tif (this.Toggles[\"kexuanwanfa\"][i].getChildByName(\"checkmark\").active) {\r\n\t\t\t\t\tkexuanwanfa.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet fangjian = [];\r\n\t\t\tfor (let i = 0; i < this.Toggles[\"fangjian\"].length; i++) {\r\n\t\t\t\tif (this.Toggles[\"fangjian\"][i].getChildByName(\"checkmark\").active) {\r\n\t\t\t\t\tfangjian.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet gaoji = []\r\n\t\t\tfor (let i = 0; i < this.Toggles['gaoji'].length; i++) {\r\n\t\t\t\tif (this.Toggles['gaoji'][i].getChildByName('checkmark').active) {\r\n\t\t\t\t\tgaoji.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//打枪倍数\r\n\t\t\tlet daqiang = this.GetIdxByKey(\"daqiang\");\r\n\t\t\t//模式\r\n\t\t\tlet moshi = this.GetIdxByKey(\"moshi\");\r\n\t\t\t//王牌\r\n\t\t\tlet wangpai = this.GetIdxByKey(\"wangpai\");\r\n\t\t\t//底分\r\n\t\t\tlet difen = this.GetIdxByKey(\"difen\");\r\n\t\t\t//限时\r\n\t\t\tlet xianShi = this.GetIdxByKey(\"xianShi\");\r\n\t\t\t//解散\r\n\t\t\tlet jiesan = this.GetIdxByKey(\"jiesan\");\r\n\t\t\twangpai = this.Toggles[\"wangpai\"][0].getChildByName(\"editbox\").getComponent(cc.EditBox).string;\r\n\t\t\tsendPack = {\r\n\t\t\t\t\"playerMinNum\": renshu[0],\r\n\t\t\t\t\"playerNum\": renshu[1],\r\n\t\t\t\t\"sign\": this.sign,\r\n\t\t\t\t\"setCount\": setCount,\r\n\t\t\t\t\"paymentRoomCardType\": isSpiltRoomCard,\r\n\t\t\t\t\"kexuanwanfa\": kexuanwanfa,\r\n\t\t\t\t\"fangjian\": fangjian,\r\n\t\t\t\t\"moshi\": moshi,\r\n\t\t\t\t\"wangpai\": wangpai,\r\n\t\t\t\t\"daqiang\": daqiang,\r\n\t\t\t\t\"difen\": difen,\r\n\t\t\t\t\"xianShi\": xianShi,\r\n\t\t\t\t\"jiesan\": jiesan,\r\n\t\t\t\t\"gaoji\": gaoji,\r\n\t\t\t\t\"beishu\":4,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tlet roomMgr = app[app.subGameName.toUpperCase() + \"RoomMgr\"]();\r\n\t\t//记录到本地缓存\r\n\t\tconsole.log(\"记录到本地缓存\", sendPack);\r\n\t\tfor (var item in sendPack) {\r\n\t\t\tlet configData = sendPack[item];\r\n\t\t\tlet dataType = typeof(configData);\r\n\t\t\tif (dataType == 'object') {\r\n\t\t\t\tlet linshi2 = '0';\r\n\t\t\t\tfor (let i = 0; i < configData.length; i++) {\r\n\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\tlinshi2 = configData[0] + 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlinshi2 = linshi2 + ',' + (configData[i] + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconfigData = linshi2;\r\n\t\t\t} else {\r\n\t\t\t\tif (item == 'playerNum') {\r\n\t\t\t\t\titem = 'renshu';\r\n\t\t\t\t} else if (item == 'setCount') {\r\n\t\t\t\t\titem = 'jushu';\r\n\t\t\t\t} else if (item == 'paymentRoomCardType') {\r\n\t\t\t\t\titem = 'fangfei';\r\n\t\t\t\t} else if (item == 'cardNum') {\r\n\t\t\t\t\titem = 'shoupai';\r\n\t\t\t\t} else if (item == 'resultCalc') {\r\n\t\t\t\t\titem = 'jiesuan';\r\n\t\t\t\t} else if (item == 'maxAddDouble') {\r\n\t\t\t\t\titem = 'fengdingbeishu';\r\n\t\t\t\t} else if (item == 'sign') {\r\n\t\t\t\t\titem = 'leixing';\r\n\t\t\t\t}\r\n\t\t\t\tconfigData = this.GetIdxByKey(item) + 1;\r\n\t\t\t}\r\n\t\t\tlet clubId = 0;\r\n\t\t\tlet roomKey = '0';\r\n\t\t\tif (this.clubData) {\r\n\t\t\t\tclubId = this.clubData.clubId;\r\n\t\t\t\troomKey = this.clubData.gameIndex;\r\n\t\t\t}\r\n\t\t\tthis.SetLocalConfig(item, configData, clubId, roomKey);\r\n\t\t}\r\n\t\t//记录到本地缓存\r\n\t\tif (roomMgr) {\r\n\t\t\tif (1 == createType || 3 == createType) {\r\n\t\t\t\tif (this.clubData) {\r\n\t\t\t\t\tsendPack.clubId = this.clubData.clubId;\r\n\t\t\t\t\tsendPack.gameIndex = this.clubData.gameIndex;\r\n\t\t\t\t\tif (this.clubData != null) {\r\n\t\t\t\t\t\tif (isSpiltRoomCard == 0) {\r\n\t\t\t\t\t\t\tthis.clubWinnerPayConsume = 0;\r\n\t\t\t\t\t\t} else if (isSpiltRoomCard == 1) {\r\n\t\t\t\t\t\t\tlet default1 = this.Toggles[\"fangfei\"][1].getChildByName(\"fangfeiNode\").getChildByName('needNum').clubWinnerPayConsume;\r\n\t\t\t\t\t\t\tlet new1 = parseInt(this.Toggles[\"fangfei\"][1].getChildByName(\"editbox\").getComponent(cc.EditBox).string);\r\n\t\t\t\t\t\t\tif (new1 > 0 && new1 > default1) {\r\n\t\t\t\t\t\t\t\tthis.clubWinnerPayConsume = new1;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.clubWinnerPayConsume = default1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (isSpiltRoomCard == 2) {\r\n\t\t\t\t\t\t\tlet default2 = this.Toggles[\"fangfei\"][2].getChildByName(\"fangfeiNode\").getChildByName('needNum').clubWinnerPayConsume;\r\n\t\t\t\t\t\t\tlet new2 = parseInt(this.Toggles[\"fangfei\"][2].getChildByName(\"editbox\").getComponent(cc.EditBox).string);\r\n\t\t\t\t\t\t\tif (new2 > 0 && new2 > default2) {\r\n\t\t\t\t\t\t\t\tthis.clubWinnerPayConsume = new2;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.clubWinnerPayConsume = default2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.clubWinnerPayConsume = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsendPack.clubWinnerPayConsume = this.clubWinnerPayConsume;\r\n\t\t\t\t\tif (this.clubWinnerPayConsume > 0) {\r\n\t\t\t\t\t\tsendPack.clubCostType = 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsendPack.clubCostType = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcreateType = 3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsendPack.createType = createType;\r\n\t\t\troomMgr.SendCreateRoom(sendPack);\r\n\t\t\tapp[app.subGameName + \"Client\"].SetGameType(this.gameType);\r\n\t\t\tthis.LocalDataManager.SetConfigProperty(\"SysSetting\", \"LastGameType\", this.gameType);\r\n\t\t}\r\n\t},\r\n\tGetIdxByKey: function (key) {\r\n\t\tif (!this.Toggles[key])\r\n\t\t\treturn -1;\r\n\t\tfor (let i = 0; i < this.Toggles[key].length; i++) {\r\n\t\t\tlet mark = this.Toggles[key][i].getChildByName(\"checkmark\").active;\r\n\t\t\tif (mark)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\tOnConFirm: function (clickType, msgID, backArgList) {\r\n\t\tif (clickType != \"Sure\") {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (\"goBuyCard\" == msgID) {\r\n\t\t\t// let clientConfig = app[app.subGameName + \"Client\"].GetClientConfig();\r\n\t\t\t// if (app.PackDefine.APPLE_CHECK == clientConfig[\"appPackType\"]) return\r\n\t\t\t// app[app.subGameName + \"_FormManager\"]().ShowForm(\"UIStore\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n});"]}