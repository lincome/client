{"version":3,"sources":["fjssz_UIRoomCopy.js"],"names":["app","require","cc","Class","extends","subGameName","properties","OnCreateInit","RegEvent","OnEvt_CopyTextNtf","OnEvt_DDShare","OnEvt_XLShare","SDKManager","OnShow","roomID","title","gamedesc","weChatAppShareUrl","ScaleIn","node","event","code","ShowSysMsg","msg","OnClick","btnName","btnNode","ShareWX","CloseForm","ShareDD","ShareMW","console","error","Share","CopyRoomKey","str","sys","isNative","argList","toString","promisefunc","resolve","reject","zjpls_NativeManager","CallToNative","bluebird"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,WAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACRC,UAASH,QAAQD,IAAIK,WAAJ,GAAkB,WAA1B,CADD;;AAGRC,aAAY,EAHJ;AAIRC,eAAc,wBAAY;AACzB,OAAKC,QAAL,CAAc,eAAd,EAA+B,KAAKC,iBAApC;AACA,OAAKD,QAAL,CAAc,WAAd,EAA2B,KAAKE,aAAhC;AACA,OAAKF,QAAL,CAAc,WAAd,EAA2B,KAAKG,aAAhC;AACA,OAAKC,UAAL,GAAkBZ,IAAIA,IAAIK,WAAJ,GAAkB,aAAtB,GAAlB;AACA,EATO;AAURQ,SAAQ,gBAAUC,MAAV,EAAkBC,KAAlB,EAAyBC,QAAzB,EAAmCC,iBAAnC,EAAsD;AAC7D,OAAKH,MAAL,GAAcA,MAAd;AACA,OAAKC,KAAL,GAAaA,KAAb;AACA,OAAKC,QAAL,GAAgBA,QAAhB;AACA,OAAKC,iBAAL,GAAyBA,iBAAzB;AACA,OAAKC,OAAL,CAAa,KAAKC,IAAlB;AACA,EAhBO;AAiBRV,oBAAmB,2BAAUW,KAAV,EAAiB;AACnC,MAAI,KAAKA,MAAMC,IAAf,EACC,KAAKC,UAAL,CAAgB,SAASF,MAAMG,GAA/B,EADD,KAGC,KAAKD,UAAL,CAAgB,QAAhB;AACD,EAtBO;AAuBRZ,gBAAe,uBAAUU,KAAV,EAAiB;AAC/B;;;;;;;;;;;AAYA,EApCO;AAqCRT,gBAAe,uBAAUS,KAAV,EAAiB;AAC/B;AACA;;;;;;;;;AASA,EAhDO;AAiDRI,UAAS,iBAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AACpC,MAAID,WAAW,QAAf,EAAyB;AACxB,QAAKE,OAAL;AACA,QAAKC,SAAL;AACA,GAHD,MAGO,IAAIH,WAAW,QAAf,EAAyB;AAC/B,QAAKI,OAAL;AACA,QAAKD,SAAL;AACA,GAHM,MAGA,IAAIH,WAAW,QAAf,EAAyB;AAC/B,QAAKK,OAAL;AACA,QAAKF,SAAL;AACA,GAHM,MAGA;AACNG,WAAQC,KAAR,CAAc,sBAAd,EAAsCP,OAAtC;AACA;AACD,EA9DO;AA+DRE,UAAS,mBAAY;AACpB,OAAKf,UAAL,CAAgBqB,KAAhB,CAAsB,KAAKlB,KAA3B,EAAkC,KAAKC,QAAvC,EAAiD,KAAKC,iBAAtD,EAAyE,GAAzE;AACA,EAjEO;AAkERY,UAAS,mBAAY;AACpB,OAAKjB,UAAL,CAAgBiB,OAAhB,CAAwB,KAAKd,KAA7B,EAAoC,KAAKC,QAAzC,EAAmD,KAAKC,iBAAxD;AACA,EApEO;AAqERa,UAAS,mBAAY;AACpB,OAAKlB,UAAL,CAAgBkB,OAAhB,CAAwB,KAAKf,KAA7B,EAAoC,KAAKC,QAAzC,EAAmD,KAAKC,iBAAxD;AACA,EAvEO;AAwERiB,cAAa,uBAAY;AACxB,MAAIC,MAAM,QAAQ,KAAKrB,MAAvB;AACA,MAAIZ,GAAGkC,GAAH,CAAOC,QAAX,EAAqB;AACpB,OAAIC,UAAU,CAAC,EAAC,QAAQ,KAAT,EAAgB,SAASH,IAAII,QAAJ,EAAzB,EAAD,CAAd;AACA,OAAIC,cAAc,SAAdA,WAAc,CAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C1C,QAAI2C,mBAAJ,GAA0BC,YAA1B,CAAuC,UAAvC,EAAmDN,OAAnD;AACA,IAFD;AAGA,UAAO,IAAItC,IAAI6C,QAAR,CAAiBL,WAAjB,CAAP;AACA;AACD;AAjFO,CAAT","file":"fjssz_UIRoomCopy.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"fjssz_app\");\r\ncc.Class({\r\n\textends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n\tproperties: {},\r\n\tOnCreateInit: function () {\r\n\t\tthis.RegEvent(\"OnCopyTextNtf\", this.OnEvt_CopyTextNtf);\r\n\t\tthis.RegEvent(\"OnDDShare\", this.OnEvt_DDShare);\r\n\t\tthis.RegEvent(\"OnXLShare\", this.OnEvt_XLShare);\r\n\t\tthis.SDKManager = app[app.subGameName + \"_SDKManager\"]();\r\n\t},\r\n\tOnShow: function (roomID, title, gamedesc, weChatAppShareUrl) {\r\n\t\tthis.roomID = roomID;\r\n\t\tthis.title = title;\r\n\t\tthis.gamedesc = gamedesc;\r\n\t\tthis.weChatAppShareUrl = weChatAppShareUrl;\r\n\t\tthis.ScaleIn(this.node)\r\n\t},\r\n\tOnEvt_CopyTextNtf: function (event) {\r\n\t\tif (0 == event.code)\r\n\t\t\tthis.ShowSysMsg(\"已复制：\" + event.msg);\r\n\t\telse\r\n\t\t\tthis.ShowSysMsg(\"复制房号失败\");\r\n\t},\r\n\tOnEvt_DDShare: function (event) {\r\n\t\t/*if(0 == event.ErrCode){\r\n\t\t\tthis.ShowSysMsg(\"钉钉分享成功\");\r\n\t\t}else if(2 == event.ErrCode){\r\n\t\t\tthis.ShowSysMsg(\"取消钉钉分享\");\r\n\t\t}else{\r\n\t\t\tif(event.ErrStr=='Canceled By User.'){\r\n\t\t\t\tthis.ShowSysMsg(\"取消钉钉分享\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.ShowSysMsg(\"钉钉分享失败：\"+event.ErrStr);\r\n\t\t\t}\r\n\r\n\t\t}*/\r\n\t},\r\n\tOnEvt_XLShare: function (event) {\r\n\t\t//\"ErrCode\": 0, //安卓返回值 0成功 -2取消  -4发送失败  -5没有安装 iOS返回值：0成功 1用户取消 3发送错误  4未知错误\r\n\t\t/*if(0 == event.ErrCode){\r\n\t\t\tthis.ShowSysMsg(\"闲聊分享成功\");\r\n\t\t}else if(-2 == event.ErrCode || 1 == event.ErrCode){\r\n\t\t\tthis.ShowSysMsg(\"取消闲聊分享\");\r\n\t\t}else if(-4 == event.ErrCode || 3 == event.ErrCode){\r\n\t\t\tthis.ShowSysMsg(\"闲聊分享发送错误\");\r\n\t\t}else{\r\n\t\t\tthis.ShowSysMsg(\"闲聊分享失败\");\r\n\t\t}*/\r\n\t},\r\n\tOnClick: function (btnName, btnNode) {\r\n\t\tif (btnName == \"btn_wx\") {\r\n\t\t\tthis.ShareWX();\r\n\t\t\tthis.CloseForm();\r\n\t\t} else if (btnName == \"btn_dd\") {\r\n\t\t\tthis.ShareDD();\r\n\t\t\tthis.CloseForm();\r\n\t\t} else if (btnName == \"btn_mw\") {\r\n\t\t\tthis.ShareMW();\r\n\t\t\tthis.CloseForm();\r\n\t\t} else {\r\n\t\t\tconsole.error(\"OnClick(%s) not find\", btnName);\r\n\t\t}\r\n\t},\r\n\tShareWX: function () {\r\n\t\tthis.SDKManager.Share(this.title, this.gamedesc, this.weChatAppShareUrl, \"0\");\r\n\t},\r\n\tShareDD: function () {\r\n\t\tthis.SDKManager.ShareDD(this.title, this.gamedesc, this.weChatAppShareUrl);\r\n\t},\r\n\tShareMW: function () {\r\n\t\tthis.SDKManager.ShareMW(this.title, this.gamedesc, this.weChatAppShareUrl);\r\n\t},\r\n\tCopyRoomKey: function () {\r\n\t\tlet str = \"房号：\" + this.roomID;\r\n\t\tif (cc.sys.isNative) {\r\n\t\t\tlet argList = [{\"Name\": \"msg\", \"Value\": str.toString()}];\r\n\t\t\tlet promisefunc = function (resolve, reject) {\r\n\t\t\t\tapp.zjpls_NativeManager().CallToNative(\"copyText\", argList);\r\n\t\t\t};\r\n\t\t\treturn new app.bluebird(promisefunc);\r\n\t\t}\r\n\t},\r\n});\r\n"]}