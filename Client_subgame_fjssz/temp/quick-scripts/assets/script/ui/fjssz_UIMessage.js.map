{"version":3,"sources":["fjssz_UIMessage.js"],"names":["app","require","cc","Class","extends","subGameName","properties","OnCreateInit","ZorderLv","LabelMessage","GetWndNode","getComponent","Label","LabelCancel","LabelSure","BtnCancel","Button","BtnSure","ShareDefine","msgInfoList","MaxMsgCount","confirmType","CancelPos","v2","SurePos","SingSurePos","SysNotifyManager","isShowingMsg","OnShow","eventType","msgID","msgArgList","content","length","console","error","push","ShowMsgInfo","node","setPosition","Log","tempList","shift","params","msgContent","string","Confirm","i18n","t","active","ConfirmYN","ConfirmBuyGoTo","ConfirmOK","OnClose","OnClick","btnName","eventData","AfterOnClick","CloseForm","ConfirmManager","OnConFirmResult"],"mappings":"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","file":"fjssz_UIMessage.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\r\n    UIMessage 模态消息界面\r\n*/\r\n\r\nvar app = require(\"fjssz_app\");\r\n\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n\tproperties: {\r\n\t},\r\n\r\n\t//初始化\r\n\tOnCreateInit:function(){\r\n\t\tthis.ZorderLv = 9;\r\n\t\tthis.LabelMessage = this.GetWndNode(\"image01/LabelMessage\").getComponent(cc.Label);\r\n\t\tthis.LabelCancel = this.GetWndNode(\"image01/btnCancel/New Sprite\");\r\n\t\tthis.LabelSure = this.GetWndNode(\"image01/btnSure/New Sprite\");\r\n\t\tthis.BtnCancel = this.GetWndNode(\"image01/btnCancel\").getComponent(cc.Button);\r\n\t\tthis.BtnSure = this.GetWndNode(\"image01/btnSure\").getComponent(cc.Button);\r\n\r\n\t\tthis.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n\r\n\t\tthis.msgInfoList = [];\r\n\t\tthis.MaxMsgCount = 1;\r\n\r\n\t\tthis.confirmType = 0;\r\n\r\n\t\tthis.CancelPos = cc.v2(-131,-118);\r\n\t\tthis.SurePos = cc.v2(131,-118);\r\n\r\n\t\t//单个确定按钮坐标\r\n\t\tthis.SingSurePos = cc.v2(0, -118);\r\n\r\n\t\tthis.SysNotifyManager = app[app.subGameName + \"_SysNotifyManager\"]();\r\n\r\n\t\tthis.isShowingMsg = false;\r\n\r\n\t},\r\n\r\n    //---------显示函数--------------------\r\n\r\n    OnShow:function(eventType, confirmType, msgID, msgArgList, content){\r\n\r\n\r\n        if(this.msgInfoList.length >= this.MaxMsgCount){\r\n            console.error(\"OnShow msgInfoListCount(%s) is max\", this.msgInfoList.length, msgID);\r\n        } else{\r\n            this.msgInfoList.push([confirmType, msgID, msgArgList, content]);\r\n        }\r\n\r\n        //如果正在显示系统提示,则不调用更新接口\r\n        //if(!this.isShowingMsg){\r\n            this.ShowMsgInfo();\r\n        //}\r\n        this.node.setPosition(cc.v2(0,0));\r\n    },\r\n\r\n    ShowMsgInfo:function(){\r\n        if (!this.msgInfoList.length){\r\n            this.Log(\"msgInfoList is empty\");\r\n            return;\r\n        }\r\n\r\n        this.isShowingMsg = true;\r\n\r\n        let tempList = this.msgInfoList.shift();\r\n        this.confirmType = tempList[0];\r\n        let msgID = tempList[1];\r\n        let params = tempList[2];\r\n        let msgContent = tempList[3];\r\n\r\n\r\n        this.LabelMessage.string = msgContent;\r\n\r\n        //以下根据不同类型改变窗体、控件位置\r\n        //有确定、取消按钮\r\n        if(this.confirmType == this.ShareDefine.Confirm){\r\n\r\n\t        if(this.LabelCancel){\r\n\t\t        this.LabelCancel.string = app.i18n.t(\"Cancel\");\r\n\t        }\r\n            this.BtnCancel.node.setPosition(this.CancelPos);\r\n            this.BtnCancel.node.active = true;\r\n\r\n\t        if(this.LabelSure){\r\n\t\t        this.LabelSure.string = app.i18n.t(\"Sure\");\r\n\t        }\r\n            this.BtnSure.node.setPosition(this.SurePos);\r\n            this.BtnSure.node.active = true;\r\n\r\n        }\r\n        //有是、否按钮\r\n        else if(this.confirmType == this.ShareDefine.ConfirmYN){//有确定按钮\r\n\t        if(this.LabelCancel){\r\n\t\t        this.LabelCancel.string = app.i18n.t(\"No\");\r\n\t        }\r\n            this.BtnCancel.node.setPosition(this.CancelPos);\r\n            this.BtnCancel.node.active = true;\r\n\r\n\t        if(this.LabelSure){\r\n\t\t        this.LabelSure.string = app.i18n.t(\"Yes\");\r\n\t        }\r\n            this.BtnSure.node.setPosition(this.SurePos);\r\n            this.BtnSure.node.active = true;\r\n\r\n        }\r\n\r\n        //购买,前往\r\n        else if(this.confirmType == this.ShareDefine.ConfirmBuyGoTo){\r\n\t        if(this.LabelCancel){\r\n\t\t        this.LabelCancel.string = app.i18n.t(\"Buy\");\r\n\t        }\r\n            this.BtnCancel.node.setPosition(this.CancelPos);\r\n            this.BtnCancel.node.active = true;\r\n\r\n\t        if(this.LabelSure){\r\n\t\t        this.LabelSure.string = app.i18n.t(\"GoTo\");\r\n\t        }\r\n            this.BtnSure.node.setPosition(this.SurePos);\r\n            this.BtnSure.node.active = true;\r\n\r\n        }\r\n        //就一个确定, 需要设置控件坐标\r\n        else if(this.confirmType == this.ShareDefine.ConfirmOK){\r\n            this.BtnCancel.node.active = false;\r\n\t        if(this.LabelSure){\r\n\t\t        this.LabelSure.string = app.i18n.t(\"Sure\");\r\n\t        }\r\n            this.BtnSure.node.setPosition(this.SingSurePos);\r\n            this.BtnSure.node.active = true;\r\n\r\n        }\r\n\r\n        else{\r\n            this.isShowingMsg = false;\r\n            console.error(\"OnShow msgType(%s) error\", this.confirmType);\r\n            return;\r\n        }\r\n\r\n    },\r\n\r\n    OnClose:function(){\r\n        this.isShowingMsg = false;\r\n    },\r\n\r\n    //---------点击函数---------------------\r\n\r\n\tOnClick:function(btnName, eventData){\r\n\r\n\t\tif(btnName == \"btnSure\"){\r\n\t\t\tthis.AfterOnClick(\"Sure\");\r\n\t\t}\r\n\t\telse if(btnName == \"btnCancel\"){\r\n\t\t\tthis.AfterOnClick(\"Cancel\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tconsole.error(\"OnClick:%s not find\", btnName);\r\n\t\t}\r\n\t},\r\n\r\n    /**\r\n     * 点击确定\r\n     */\r\n    AfterOnClick:function(eventType){\r\n\r\n        this.CloseForm();\r\n\r\n\t    this.ConfirmManager.OnConFirmResult(eventType);\r\n\r\n        // 如果还有消息则继续显示\r\n        if(this.msgInfoList.length){\r\n            this.ShowMsgInfo();\r\n        }\r\n    },\r\n\r\n});\r\n"]}