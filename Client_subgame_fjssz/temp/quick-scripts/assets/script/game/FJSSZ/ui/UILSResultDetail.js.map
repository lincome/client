{"version":3,"sources":["UILSResultDetail.js"],"names":["app","require","cc","Class","extends","subGameName","properties","pre_result","Prefab","frame","SpriteFrame","OnCreateInit","gameName","ZorderLv","ZorderLv6","room_Id","GetWndComponent","Label","end_Time","lb_jushu","layout","GetWndNode","erweima","sportsPoint1","sportsPoint2","btn_continue","RoomMgr","toUpperCase","Room","FormManager","ComTool","NetManager","HeroManager","SDKManager","RegEvent","Event_NewVersion","isNewVersion","OnShow","roomEnd","CheckUpdate","console","log","roomCfg","GetEnterRoom","GetRoomConfig","playerNameList","jushu","endSec","roomID","recordPosInfosList","AddPosInfoPre","roomKey","GetRoomProperty","shareShortRoomID","shareLongRoomID","string","GetNowDateMonthDayHoursMinutesString","ShowPlayerInfo","ShowErWeiMa","active","createType","clubId","CloseForm","removeAllChildren","playerNum","length","i","playerNode","instantiate","name","addChild","RoomPosMgr","GetRoomPosMgr","room","dianbo","GetRoomConfigByProperty","unionId","ClientPos","GetClientPos","poChanMsg","playuissz","posInfo","isFangZhu","loseCount","point","substring","winCount","pid","getComponent","Sprite","spriteFrame","sportsPoint","path","SetWndProperty","indexOf","GetPid","Math","floor","toFixed","headCom","onLoad","ShowHeroHead","children","getChildByName","push","heroID","GetHeroProperty","shareUrl","imgUrl","that","loader","load","url","type","err","texture","Texture2D","ErrLog","OnClick","btnName","btnNode","ExitGame","ShowForm","Click_btn_Sharelink","ShowSysMsg","SendPack","CloseCurAllFrom","event","Msg","Code","error"],"mappings":"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","file":"UILSResultDetail.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ\\ui","sourcesContent":["var app = require(\"fjssz_app\");\r\ncc.Class({\r\n\textends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n\tproperties: {\r\n\t\tpre_result: cc.Prefab,\r\n\t\tframe : cc.SpriteFrame,\r\n\t},\r\n\r\n\tOnCreateInit: function () {\r\n\t\tthis.gameName = app[\"subGameName\"];\r\n\t\tthis.ZorderLv = this.ZorderLv6;\r\n\r\n\t\tthis.room_Id = this.GetWndComponent(\"roomInfo/fanghao\", cc.Label);\r\n\t\tthis.end_Time = this.GetWndComponent(\"roomInfo/time\", cc.Label);\r\n\t\tthis.lb_jushu = this.GetWndComponent(\"roomInfo/jushu\", cc.Label);\r\n\t\tthis.layout = this.GetWndNode(\"playerAll\");\r\n\t\tthis.erweima = this.GetWndNode(\"bg/erweima\");\r\n\t\tthis.sportsPoint1 = this.GetWndNode(\"bg/SportsPoint1\");\r\n\t\tthis.sportsPoint2 = this.GetWndNode(\"bg/SportsPoint2\");\r\n\t\tthis.btn_continue = this.GetWndNode(\"btnList/btn_continue\");\r\n\r\n\r\n\t\tthis.RoomMgr = app[this.gameName.toUpperCase() + \"RoomMgr\"]();\r\n\t\tthis.Room = app[this.gameName.toUpperCase() + \"Room\"]();\r\n\t\tthis.FormManager = app[this.gameName + \"_FormManager\"]();\r\n\t\tthis.ComTool = app[this.gameName + \"_ComTool\"]();\r\n\t\tthis.NetManager = app[this.gameName + \"_NetManager\"]();\r\n\t\tthis.HeroManager = app[this.gameName + \"_HeroManager\"]();\r\n\t\tthis.SDKManager = app[this.gameName + \"_SDKManager\"]();\r\n\t\tthis.RegEvent(\"NewVersion\", this.Event_NewVersion, this);\r\n\t},\r\n\tEvent_NewVersion: function () {\r\n\t\tthis.isNewVersion = true;\r\n\t},\r\n\r\n\tOnShow: function (roomEnd) {\r\n\t\tthis.isNewVersion = false;\r\n\t\tapp[app.subGameName + \"_HotUpdateMgr\"]().CheckUpdate(); //检测客户端是否有新版本\r\n\t\tconsole.log(\"总结算\", roomEnd);\r\n\t\tthis.roomCfg = this.RoomMgr.GetEnterRoom().GetRoomConfig();\r\n\t\tthis.playerNameList = [];\r\n\t\tlet jushu = roomEnd[\"setCnt\"];\r\n\t\tlet endSec = roomEnd[\"endSec\"];\r\n\t\tlet roomID = roomEnd[\"roomID\"];\r\n\t\tlet recordPosInfosList = roomEnd[\"recordPosInfosList\"];\r\n\t\tthis.AddPosInfoPre(recordPosInfosList);\r\n\t\tlet roomKey = this.Room.GetRoomProperty(\"key\");\r\n\t\tthis.shareShortRoomID = roomKey;\r\n\t\tthis.shareLongRoomID = roomID;\r\n\r\n\t\tthis.room_Id.string = \"房号：\" + roomKey;\r\n\t\tthis.lb_jushu.string = \"局数：\" + jushu;\r\n\t\tthis.end_Time.string = this.ComTool.GetNowDateMonthDayHoursMinutesString(endSec);\r\n\t\tthis.ShowPlayerInfo(recordPosInfosList);\r\n\t\tthis.ShowErWeiMa();\r\n\t\tthis.btn_continue.active = false;\r\n\t\t//如果是代开放，不显示续局\r\n\t\tif (this.roomCfg.createType == 2 || 0 != this.roomCfg.clubId) {\r\n\t\t\t/*this.btn_pingfenkaiju.active=false;\r\n\t\t\tthis.btn_wolaikaiju.active=false;\r\n\t\t\tthis.btn_dayingjiakaiju.active=false;*/\r\n\t\t}\r\n\t\t//如果是亲友圈的房间或者联盟的房间显示继续游戏按钮\r\n\t\tif (0 != this.roomCfg.clubId) {\r\n\t\t\tthis.btn_continue.active = true;\r\n\t\t}\r\n\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessage02\");\r\n\t},\r\n\tAddPosInfoPre: function (recordPosInfosList) {\r\n\t\tthis.layout.removeAllChildren();\r\n\t\tlet playerNum = recordPosInfosList.length;\r\n\t\tfor (let i = 0; i < playerNum; i++) {\r\n\t\t\tlet playerNode = cc.instantiate(this.pre_result);\r\n\t\t\tplayerNode.name = \"resultDetail\" + i;\r\n\t\t\tplayerNode.active = false;\r\n\t\t\tthis.layout.addChild(playerNode);\r\n\t\t}\r\n\t},\r\n\tShowPlayerInfo: function (recordPosInfosList) {\r\n\t\tlet playerNum = recordPosInfosList.length;\r\n\t\tlet RoomPosMgr = this.RoomMgr.GetEnterRoom().GetRoomPosMgr()\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet dianbo = room.GetRoomConfigByProperty(\"dianbo\");\r\n\t\tlet unionId = room.GetRoomConfigByProperty(\"unionId\");\r\n\t\tlet ClientPos = RoomPosMgr.GetClientPos();\r\n\t\tlet poChanMsg = app.playuissz.poChanMsg || \"\"\r\n\t\tfor (let i = 0; i < playerNum; i++) {\r\n\t\t\tlet posInfo = recordPosInfosList[i];\r\n\t\t\tlet isFangZhu = posInfo[\"isFangZhu\"];\r\n\t\t\tlet loseCount = posInfo[\"loseCount\"];\r\n\t\t\tlet point = posInfo[\"point\"];\r\n\t\t\tlet name = posInfo[\"name\"].substring(0, 9);\r\n\t\t\tlet winCount = posInfo[\"winCount\"];\r\n\t\t\tlet pid = posInfo[\"pid\"];\r\n\t\t\tif (posInfo[\"posId\"] != ClientPos) {\r\n\t\t\t\tthis.GetWndNode(\"playerAll/resultDetail\" + i).getComponent(cc.Sprite).spriteFrame = this.frame\r\n\t\t\t}\r\n\t\t\tlet sportsPoint = posInfo[\"sportsPoint\"];\r\n\t\t\tlet path = \"playerAll/resultDetail\" + i;\r\n\t\t\tthis.SetWndProperty(path + \"/name\", \"text\", name);\r\n\t\t\tthis.SetWndProperty(path + \"/win\", \"text\", winCount);\r\n\t\t\tthis.SetWndProperty(path + \"/lose\", \"text\", loseCount);\r\n\t\t\tthis.SetWndProperty(path + \"/big\", \"active\", posInfo[\"bigWinner\"]);\r\n\t\t\tthis.SetWndProperty(path + \"/pc\", \"active\", poChanMsg.indexOf(\"@\"+name) >=0 && point <= 0);\r\n\t\t\tthis.SetWndProperty(path + \"/id\", \"text\", \"ID:\" + this.ComTool.GetPid(pid));\r\n\t\t\tthis.SetWndProperty(path + \"/img_zf\", \"active\", true);\r\n\t\t\tif (dianbo > 0 && unionId > 0 && point + dianbo <= 0) {\r\n\t\t\t\tthis.SetWndProperty(path + \"/pc\", \"active\", true);\r\n\t\t\t}\r\n\t\t\tpoint = Math.floor(point*100)/100\r\n\t\t\tsportsPoint = Math.floor(sportsPoint*100)/100\r\n\t\t\tif (point >= 0) {\r\n\t\t\t\tthis.SetWndProperty(path + \"/score_win\", \"active\", true);\r\n\t\t\t\tthis.SetWndProperty(path + \"/score_lose\", \"active\", false);\r\n\t\t\t\tthis.SetWndProperty(path + \"/score_win\", \"text\", \"+\" + point);\r\n\t\t\t} else {\r\n\t\t\t\tthis.SetWndProperty(path + \"/score_lose\", \"active\", true);\r\n\t\t\t\tthis.SetWndProperty(path + \"/score_win\", \"active\", false);\r\n\t\t\t\tthis.SetWndProperty(path + \"/score_lose\", \"text\", point);\r\n\t\t\t}\r\n\t\t\t//竞技点\r\n\t\t\t//如果是联盟的房间显示继续游戏按钮\r\n\t\t\tif (0 != this.roomCfg.unionId) {\r\n\t\t\t\tthis.SetWndProperty(path + \"/score_win\", \"active\", false);\r\n\t\t\t\tthis.SetWndProperty(path + \"/score_lose\", \"active\", false);\r\n\t\t\t\tthis.SetWndProperty(path + \"/img_zf\", \"active\", false);\r\n\r\n\t\t\t\tthis.sportsPoint1.active = true;\r\n\t\t\t\tthis.sportsPoint2.active = true;\r\n\t\t\t\tthis.SetWndProperty(path + \"/img_bsf\", \"active\", true);\r\n\t\t\t\tif (posInfo[\"sportsPoint\"] >= 0) {\r\n\t\t\t\t\tthis.SetWndProperty(path + \"/img_bsf/lb_sportsPoint_win\", \"active\", true);\r\n\t\t\t\t\tthis.SetWndProperty(path + \"/img_bsf/lb_sportsPoint_lose\", \"active\", false);\r\n\t\t\t\t\tthis.SetWndProperty(path + \"/img_bsf/lb_sportsPoint_win\", \"text\", \"+\" + sportsPoint.toFixed(2));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.SetWndProperty(path + \"/img_bsf/lb_sportsPoint_win\", \"active\", false);\r\n\t\t\t\t\tthis.SetWndProperty(path + \"/img_bsf/lb_sportsPoint_lose\", \"active\", true);\r\n\t\t\t\t\tthis.SetWndProperty(path + \"/img_bsf/lb_sportsPoint_lose\", \"text\", sportsPoint.toFixed(2));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.sportsPoint1.active = false;\r\n\t\t\t\tthis.sportsPoint2.active = false;\r\n\t\t\t\tthis.SetWndProperty(path + \"/img_bsf\", \"active\", false);\r\n\t\t\t}\r\n\r\n\t\t\tlet headCom = this.GetWndComponent(path + \"/head\", this.gameName + \"_WeChatHeadImage\");\r\n\t\t\theadCom.onLoad();\r\n\t\t\theadCom.ShowHeroHead(pid);\r\n\t\t\tthis.layout.children[i].active = true;\r\n\t\t\tthis.layout.children[i].getChildByName(\"img_fz\").active = isFangZhu;\r\n\t\t\tthis.SetWndProperty(\"roomInfo/fangzhu\", \"text\", \"\");\r\n\t\t\tthis.playerNameList.push(name);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tShowErWeiMa: function () {\r\n\t\tlet heroID = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"pid\");\r\n\t\tlet shareUrl = \"http://qh.qp355.com/\" + this.ComTool.GetPid(heroID) + \"/\";\r\n\t\tlet imgUrl = \"http://www.qp355.com/makeQRcode.php?url=\" + shareUrl;\r\n\t\tlet that = this;\r\n\r\n\t\tcc.loader.load({url: imgUrl, type: \"png\"}, function (err, texture) {\r\n\t\t\tif (texture instanceof cc.Texture2D) {\r\n\t\t\t\tvar frame = new cc.SpriteFrame(texture);\r\n\t\t\t\tthat.erweima.getComponent(cc.Sprite).spriteFrame = frame;\r\n\t\t\t} else {\r\n\t\t\t\tthat.ErrLog(\"texture not Texture2D\");\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t//-----------------回调函数------------------\r\n\r\n\t//---------点击函数---------------------\r\n\tOnClick: function (btnName, btnNode) {\r\n\t\tif (btnName == \"btn_close\" || btnName == \"btn_exit\") {\r\n\t\t\tapp[this.gameName + \"Client\"].ExitGame();\r\n\t\t} else if (btnName == \"btn_share\") {\r\n\t\t\tthis.FormManager.ShowForm(app.subGameName + \"_Share\");\r\n\t\t} else if (btnName == \"btn_sharelink\") {\r\n\t\t\tthis.Click_btn_Sharelink();\r\n\t\t} else if (btnName == \"btn_continue\") {\r\n\t\t\tif (this.isNewVersion == true) {\r\n\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"游戏有新版本更新，请返回大厅\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"ContinueEnterRoom\", {}, () => {\r\n\t\t\t\t\r\n\t\t\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(\"game.C1101GetRoomID\", {});\r\n\t\t\t\tthis.CloseCurAllFrom();\r\n\t\t\t}, function (event) {\r\n\t\t\t\tif (event.Msg == \"UNION_BACK_OFF_PLAYING\") {\r\n\t\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"您已申请退赛，当前无法进行比赛，请取消退赛申请或联系赛事举办方\");\r\n\t\t\t\t} else if (event.Msg == \"UNION_APPLY_REMATCH_PLAYING\") {\r\n\t\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"您的比赛分不足，已被淘汰，将被禁止参与赛事游戏，如要重新参与比赛，请联系举办方处理\");\r\n\t\t\t\t} else if (event.Msg == \"UNION_STATE_STOP\") {\r\n\t\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"赛事已停用，无法加入房间，请联系赛事举办方\");\r\n\t\t\t\t} else if (event.Msg == \"ROOM_GAME_SERVER_CHANGE\") {\r\n\t\t\t\t\tconsole.log(\"切换服务器\");\r\n\t\t\t\t} else if (event.Code == 12) {\r\n\t\t\t\t\tconsole.log(\"游戏维护\");\r\n\t\t\t\t} else if (event.Msg == \"WarningSport_RoomJoinner\") {\r\n\t\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"您所在的推广员队伍或上级队伍比赛分低于预警值，无法加入比赛，请联系管理\");\r\n\t\t\t\t} else if (event.Msg == \"CLUB_SPORT_POINT_WARN\") {\r\n\t\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"您所在的亲友圈比赛分低于预警值，无法加入比赛，请联系管理\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"无法继续游戏，请联系赛事举办方\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconsole.error(\"OnClick(%s) not find btnName\", btnName);\r\n\t\t}\r\n\t},\r\n});"]}