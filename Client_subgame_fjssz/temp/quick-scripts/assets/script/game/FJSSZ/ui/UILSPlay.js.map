{"version":3,"sources":["UILSPlay.js"],"names":["app","require","cc","Class","extends","subGameName","properties","cardEffectPrefab","Prefab","dunCardsPrefab","beiShuPrefab","hole_img","SpriteFrame","headPrefab","icon_mapai","sp_playState","giftPrefabs","OnCreateInit","ZorderLv","ZorderLv6","btn_ready","node","getChildByName","btn_goon","btn_cancel","btn_go","cardTypeBtn","curBg","fireAnimation","fourAnimation","startAnimation","vsAnimation","xpAnimation","sp_faPai","sp_state","maPai","bg_BeiShu","bg_tips","bankerList","addDouble","btn_color","btn_size","roomInfo","giftNode","btn_voice","Room","toUpperCase","RoomMgr","RoomSet","RoomPosMgr","LogicGame","LogicRank","HeroManager","SceneManager","UtilsWord","PokerCard","playuissz","isFirstEnter","DealCard_InitState","DealCard_GetCardState","DealCard_MoCardState","DealCard_AlignCardState","dealCardState","targetPos","RegEvent","Event_PosContinueGame","Event_DissolveRoom","Event_StartVoteDissolve","Event_ChangePlayerNum","Event_PosReadyChg","Event_PosLeave","Event_PosUpdate","Event_AllPosUpdate","Event_SetStart","Event_SetEnd","Event_ChangeStatus","Event_RankingResult","Event_Card_Read","Event_RoomEnd","OnPack_AutoStart","Event_ChatMessage","Event_Beishu","Event_YaZhuBeiShu","Event_ZJBeishu","Event_QiangZhuangBeiShu","Event_SportsPointEnough","Event_SportsPointNotEnough","Event_CodeError","Event_GameGift","game","on","EVENT_SHOW","OnEventShow","bind","EVENT_HIDE","OnEventHide","Event_TouchStart","Event_TouchEnd","getComponent","sp","Skeleton","setCompleteListener","onFireFinished","onFourFinished","onStartFinished","onVsFinished","onXiPaiFinished","signString","Type","Left","ChangeBg","AddHeadPrefab","is3DShow","LocalDataManager","GetConfigProperty","active","OnShow","isValid","roomID","GetEnterRoomID","SendPack","event","ExitGame","error","console","log","PlayMusic","unscheduleAllCallbacks","CheckUpdateNotice","playerMinNum","GetRoomConfigByProperty","playerNum","clientPos","parseInt","GetClientPos","unionId","moshi","sign","wangpai","jiesan","AddHead","addCard","HideAll","RefreshRoomShow","SetSign","QZposList","JZposList","room","GetEnterRoom","state","GetRoomSetProperty","roomState","GetRoomProperty","disslove","maPaiValue","backerPos","beishu","kexuanwanfa","child","ShowResultCard","endSec","FormManager","ShowForm","roomPosMgr","GetRoomPosMgr","UpdatePlayerScore","ShowRoomData","CloseForm","ShareDefine","RoomState_Init","RoomState_Playing","isAuto","GetRoomDataInfo","SetAutoPlayIng","posList","setPosList","allPlayer","GetRoomAllPlayerInfo","myPosInfo","GetPlayerInfoByPos","SetState_Hog","ShowConfirmBanker","Sprite","spriteFrame","SetState_AddDouble","ShowConfirmAddDouble","SetState_Playing","idx","playerInfo","pos","uiPos","GetUIPosByDataPos","name","isPlaying","GetWndNode","isCardReady","dunNode","img_special","ShowPosPlayState","HidePlayerAllBtn","path","toString","cards","SelectAni","pid","i","children","length","GetHeroID","self","success","SendGetRoomInfo","SetState_End","OnShowGameEndForm","GetWndProperty","RoomState_End","RoomState_Waiting","RoomState_WaitingEx","updateLookInfo","startClock","InitHead","PlayStartAnimation","needDelayDiss","setAnimation","hideTime","Date","now","GetRoomSet","setStartTime","setCurrentTime","unschedule","timer","guize","f","countDown","totalTime","time","Label","string","schedule","serverTimeMsec","d","SpEnt","animationStart","animationEnd","SoundManager","PlaySound","scheduleOnce","bAuto","key","myInfo","LookCount","showEightCard","j","index","qiangZhuangBeiShu","ShowZJBeiShu","opPos","yaZhuBeiShu","SortConfirmBanker","isSize","SortBySize","SortByColor","SortConfirmAddDouble","isCoinRoom","current","setID","playerAll","playerAllList","Object","keys","joinPlayerCount","destroy","wanfaStr","WanFa","wanfaArr","split","wp","signS","slice","dianbo","push","concat","wanfa","instantiate","addChild","isChangeRen","fangjian","indexOf","wndNode","dunCard","cardEffect","sitPath","sitHead","sitNode","bsNode","y","clearHead","playerCount","roomSetID","headScript","GetUICardComponentByPos","isLeft","Init","v2","isRoomEnd","thanCard","HideZJBeiShu","clientPlayerInfo","rankingResults","pCard1","pCard2","pCard3","cardList","rankeds","playerResults","rewardsDict","posIdx","posInfo","isSpecial","pathWnd","SetWndProperty","dunPos","spacialNum","SetSpecailProperty","GetDunCardsByServerDunPos","angle","scoreNode","GetScoreNode","sportsPointNode","sportsPoint","showLabel","specialShui","baseShui","extraShui","dunCardsNode","k","showCardType","card","zIndex","Event_SetStart2","thanCardResult","str","Animation","play","headCom","OnClose","ShowPlayerReady","HideDunCard","dunCards","HideCard","sp_card","HideAllZhunBeiLabel","player","setReady","ShowOrHideZhunbei","isShow","HideAllScoreNode","HideAllCardTypeNode","HideAllHoles","removeAllChildren","tag","path2","node2","x","anchorX","element","GetCardTypeNode","aniNode","ClearAllReadState","OnSetEnd","QiangZhuang","SendBeiShu","OnClick","btnName","btnNode","Click_btn_go","Click_btn_ready","Click_btn_cancel","ShowOrCloseForm","roomCfg","GetRoomConfig","clubId","Click_btn_jiesan","Click_btn_goon","startsWith","Click_btn_banker","Click_btn_addDouble","ShowSysMsg","me","GetPlayerInfoByPid","lastPos","SendSelectPosRoom","SendReady","SendUnReady","SendStartRoomGame","isReady","startAni","GetDownListCard","first","second","third","dun1","dun2","dun3","DUN1","getDunListByType","downListCard","sort1","SortCardByMax","sort2","sort3","ShowDanJuForm","roomEnd","record","players","recordPosInfosList","ownerID","recordPosInfos","sort","a","b","point","max","serverPack","ShowAutoIcon","JSON","stringify","setInfo","isXiPai","OnEvent","IsAutoPlayIng","count","timeCallback","HideAllPlayState","data","beiShu","ShowOrHidePosZhuangJia","argDict","code","SportsPointNotEnough","SetWaitForConfirm","ConfirmYN","NotAllow","msg","poChanMsg","Event_UIAutoPlay","otherNode","stateNode","isShowIcon","ShowPosPlayStateByQZ","ShowOrHideZhuangJia","ShowPlayStateByQZ","ShowPlayState","senderPid","quickID","content","playerList","playerListKey","initiatorPos","playerSex","InitHeroSex","soundName","i18n","t","join","CheckContentDirty","ShowFaceContent","ShowChatContent","Sex","HeroSex_Boy","HeroSex_Girl","pos2","posId","ConfirmOK","ownnerForce","cacheMessage","IsClientIsOwner","dissolveNoticeType","stopWaitAnim","sRankingResult","spacialCard","specialPockerCard","ShowResultNormal","ShowResultSpacial","sortFun","sortFunByShui","protoShui","shui","sortFunByCardType","isQuick","cardResult1","pCardResult1","cardResult2","pCardResult2","cardResult3","pCardResult3","cardType1","cardType2","cardType3","gunFire","killRankins","simPlayerResult","fourbagger","simResults","posResultList","list1","list2","list3","zjid","zhuangjia","func","list","cardType","playerIdx","isSpacial","playerDunInfo","cardIdx","fanPaiAction","sex","delayAnimation","spacialIdx","showAllCard","filePath","loader","loadRes","clip","simPlayer","ShowResultFrom","headNode","UpDateLabJiFen","UpDateLabSportsPoint","juShu","setCount","nodeLabel","getAngle","_x1","_y1","_x2","_y2","xx","yy","_tan","Math","abs","angle_temp","PI","atan","x1","y1","head","world","convertToWorldSpaceAR","getPosition","local","parent","convertToNodeSpaceAR","to","targetPath","targetNode","x2","y2","ang","repeatCount","minx","maxx","miny","maxy","random","setPosition","scale","holes","tween","delay","call","start","newPoker","SubCardValue","GetPokeCard","ReadyState","SetPlayerReadyInfo","isAllReady","curReadyNum","tempNum","readyPlayer","IsClientIsCreater","msgID","type","msgArg","cbArg","ConfirmManager","SetWaitForConfirmForm","OnConFirm","ShowConfirm","ClientPos","GetIsLook","Confirm","posName","setState","clickType","SendDissolveRoom","createType","practiceId","OnSuccess","OnEnterRoomFailed","SendContinueGame","Click_btn_qiepai","SendQiePai","Click_btn_baipai","SendBaiPai","err","bankerBSNum","substring","SendQiangZhuang","SendConfirmBeiShu","backArgList","SendExitRoom","that","Msg","sendPos","recivePos","productId","sendHead","GetComponentByPos","reciveHead","giftIdx","tempNode","ani","defaultClip","bMove","OnGiftAniEnd","vec1","vec2","action","sequence","moveTo","callFunc","GiftMoveEnd","runAction","sender","useData","nodes","aniState","getAnimationState","removeFromParent","startRecord","setTouchEnd","stopRecord","OnTest","SendChat","parse","assets","heroID","pl","update"],"mappings":"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","file":"UILSPlay.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ\\ui","sourcesContent":["var app = require(\"fjssz_app\");\r\ncc.Class({\r\n\textends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n\tproperties: {\r\n\t\tcardEffectPrefab: cc.Prefab,\r\n\t\tdunCardsPrefab: cc.Prefab,\r\n\t\tbeiShuPrefab: cc.Prefab,\r\n\r\n\t\thole_img: cc.SpriteFrame,\r\n\t\theadPrefab: cc.Prefab,\r\n\t\ticon_mapai: cc.SpriteFrame,\r\n\t\tsp_playState: [cc.SpriteFrame],//0,抢庄 1，押注 2，比牌 3,开始比牌\r\n\r\n\t\tgiftPrefabs: [cc.Prefab]\r\n\t},\r\n\r\n\tOnCreateInit: function () {\r\n\t\tthis.ZorderLv = this.ZorderLv6;\r\n\t\tthis.btn_ready = this.node.getChildByName(\"btn_ready\");\r\n\t\tthis.btn_goon = this.node.getChildByName(\"btn_goon\");\r\n\t\tthis.btn_cancel = this.node.getChildByName(\"btn_cancel\");\r\n\t\tthis.btn_go = this.node.getChildByName(\"btn_go\");\r\n\t\tthis.cardTypeBtn = this.node.getChildByName(\"cardTypeBtn\");\r\n\t\tthis.curBg = this.node.getChildByName(\"bg\");\r\n\t\tthis.fireAnimation = this.node.getChildByName(\"openFire\");\r\n\t\tthis.fourAnimation = this.node.getChildByName(\"fourBag\");\r\n\t\tthis.startAnimation = this.node.getChildByName(\"start_ani\");\r\n\t\tthis.vsAnimation = this.node.getChildByName(\"vs_ani\");\r\n\t\tthis.xpAnimation = this.node.getChildByName(\"xipai\");\r\n\t\tthis.sp_faPai = this.node.getChildByName(\"sp_faPai\");\r\n\t\tthis.sp_state = this.node.getChildByName(\"sp_playState\");\r\n\t\tthis.maPai = this.node.getChildByName(\"maPai\");\r\n\t\tthis.bg_BeiShu = this.node.getChildByName(\"bg_Multiple\");\r\n\t\tthis.bg_tips = this.node.getChildByName(\"bg_tips\");\r\n\t\tthis.bankerList = this.node.getChildByName(\"bankerList\");\r\n\t\tthis.addDouble = this.node.getChildByName(\"addDouble\");\r\n\t\tthis.btn_color = this.node.getChildByName(\"btn_color\");\r\n\t\tthis.btn_size = this.node.getChildByName(\"btn_size\");\r\n\t\tthis.roomInfo = this.node.getChildByName(\"roomInfo\");\r\n\t\tthis.giftNode = this.node.getChildByName(\"giftNode\");\r\n\t\tthis.btn_voice = this.node.getChildByName(\"btn_voice\");\r\n\r\n\t\tapp.subGameName = app[\"subGameName\"];\r\n\t\tthis.Room = app[app.subGameName.toUpperCase() + \"Room\"]();\r\n\t\tthis.RoomMgr = app[app.subGameName.toUpperCase() + \"RoomMgr\"]();\r\n\t\tthis.RoomSet = app[app.subGameName.toUpperCase() + \"RoomSet\"]();\r\n\t\tthis.RoomPosMgr = app[app.subGameName.toUpperCase() + \"RoomPosMgr\"]();\r\n\t\tthis.LogicGame = app[\"FJSSZLogicGame\"]();\r\n\t\tthis.LogicRank = app[\"FJSSZLogicRank\"]();\r\n\t\tthis.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n\t\tthis.SceneManager = app[app.subGameName + \"_SceneManager\"]();\r\n\t\tthis.UtilsWord = app[app.subGameName + \"_UtilsWord\"]();\r\n\t\tthis.PokerCard = app[app.subGameName + \"_PokerCard\"]();\r\n\t\tapp.playuissz = this\r\n\r\n\t\tthis.isFirstEnter = true;\r\n\t\t//初始化状态  10000+5000\r\n\t\tthis.DealCard_InitState = 0;\r\n\t\t//拿牌3次每次2蹲\r\n\t\tthis.DealCard_GetCardState = 1;\r\n\t\t//摸牌一人一张\r\n\t\tthis.DealCard_MoCardState = 2;\r\n\t\t//本家整理牌\r\n\t\tthis.DealCard_AlignCardState = 3;\r\n\t\tthis.dealCardState = this.DealCard_InitState;\r\n\t\tthis.targetPos = 0;\r\n\r\n\t\t//公共消息\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_PosContinueGame\", this.Event_PosContinueGame, this);//继续\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_DissolveRoom\", this.Event_DissolveRoom, this);//解散房间\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_StartVoteDissolve\", this.Event_StartVoteDissolve, this);//发起房间结算投票\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_ChangePlayerNum\", this.Event_ChangePlayerNum, this);//发起房间修改人数\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_PosReadyChg\", this.Event_PosReadyChg, this);//玩家准备\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_PosLeave\", this.Event_PosLeave, this);//玩家离开\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_PosUpdate\", this.Event_PosUpdate, this);//玩家更新\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_AllPosUpdate\", this.Event_AllPosUpdate, this);\r\n\r\n\t\t//游戏消息\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"SetStart\", this.Event_SetStart, this);//游戏开始\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"SetEnd\", this.Event_SetEnd, this);//游戏结束\r\n\t\tthis.RegEvent(\"ChangeStatus\", this.Event_ChangeStatus, this);\r\n\t\tthis.RegEvent(\"RankingResult\", this.Event_RankingResult, this);//游戏结束\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_EVT_Card_Ready\", this.Event_Card_Read);//牌理好\r\n\t\tthis.RegEvent(\"RoomEnd\", this.Event_RoomEnd, this);//房间结束\r\n\t\tthis.RegEvent(\"SPlayer_Trusteeship\", this.OnPack_AutoStart, this);//自己托管\r\n\t\tthis.RegEvent(\"ChatMessage\", this.Event_ChatMessage);//常用聊天语\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_BeiShu\", this.Event_Beishu, this);\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_YaZhuBeiShu\", this.Event_YaZhuBeiShu, this);\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_ZJBeiShu\", this.Event_ZJBeishu, this);\r\n\t\tthis.RegEvent(app.subGameName.toUpperCase() + \"_QiangZhuangBeiShu\", this.Event_QiangZhuangBeiShu, this);\r\n\t\t// this.RegEvent(app.subGameName.toUpperCase() + \"_UIAutoPlay\", this.Event_UIAutoPlay, this);\r\n\t\t//竞技点不足时通知\r\n\t\tthis.RegEvent(\"SportsPointEnough\", this.Event_SportsPointEnough, this);\r\n\t\tthis.RegEvent(\"SportsPointNotEnough\", this.Event_SportsPointNotEnough, this);\r\n\t\tthis.RegEvent(\"CodeError\", this.Event_CodeError, this);\r\n\r\n\t\tthis.RegEvent('GameGift', this.Event_GameGift);\r\n\t\tcc.game.on(cc.game.EVENT_SHOW, this.OnEventShow.bind(this));\r\n\t\tcc.game.on(cc.game.EVENT_HIDE, this.OnEventHide.bind(this));\r\n\t\tthis.btn_voice.on(\"touchstart\", this.Event_TouchStart, this);\r\n\t\tthis.btn_voice.on(\"touchend\", this.Event_TouchEnd, this);\r\n\t\tthis.btn_voice.on(\"touchcancel\", this.Event_TouchEnd, this);\r\n\r\n\t\tthis.fireAnimation.getComponent(sp.Skeleton).setCompleteListener(this.onFireFinished.bind(this));\r\n\t\tthis.fourAnimation.getComponent(sp.Skeleton).setCompleteListener(this.onFourFinished.bind(this));\r\n\t\tthis.startAnimation.getComponent(sp.Skeleton).setCompleteListener(this.onStartFinished.bind(this));\r\n\t\tthis.vsAnimation.getComponent(sp.Skeleton).setCompleteListener(this.onVsFinished.bind(this));\r\n\t\tthis.xpAnimation.getComponent(sp.Skeleton).setCompleteListener(this.onXiPaiFinished.bind(this));\r\n\r\n\t\tthis.signString = [\"硬鬼\", \"软鬼\", \"软鬼\"];\r\n\t\tthis.Type = {//CardType\r\n\t\t\t0: \"乌隆\",\r\n\t\t\t1: \"对子\",\r\n\t\t\t2: \"两对\",\r\n\t\t\t3: \"三条\",\r\n\t\t\t4: \"充扎\",\r\n\t\t\t5: \"爽枉充投\",\r\n\t\t\t6: \"叁贵\",\r\n\t\t\t7: \"顺子\",\r\n\t\t\t8: \"同花\",\r\n\t\t\t9: \"同花\",\r\n\t\t\t10: \"同花\",\r\n\t\t\t11: \"葫芦\",\r\n\t\t\t12: \"铁支\",\r\n\t\t\t13: \"同花顺\",\r\n\t\t\t14: \"五同\",\r\n\t\t\t15: \"六同\",\r\n\t\t\t16: \"五鬼\",\r\n\r\n\t\t\t84: \"三顺子\",\r\n\t\t\t85: \"三顺子\",\r\n\t\t\t86: \"三同花\",\r\n\t\t\t87: \"三同花\",\r\n\t\t\t88: \"六对半\",\r\n\t\t\t89: \"六对半\",\r\n\t\t\t90: \"六对半\",\r\n\t\t\t91: \"五对三条\",\r\n\t\t\t92: \"凑一色\",\r\n\t\t\t93: \"全小\",\r\n\t\t\t94: \"全大\",\r\n\t\t\t95: \"三同花顺\",\r\n\t\t\t96: \"十二皇族\",\r\n\t\t\t97: \"四套三条\",\r\n\t\t\t98: \"三分天下\",\r\n\t\t\t99: \"一条龙\",\r\n\t\t\t100: \"至尊清龙\"\r\n\t\t};\r\n\t\tthis.Left = [false, true, true, false, true, true, true, false];\r\n\t\tthis.ChangeBg()\r\n\t\tthis.AddHeadPrefab();\r\n\t},\r\n\tChangeBg : function(){\r\n\t\tlet is3DShow = this.LocalDataManager.GetConfigProperty(\"SysSetting\", app.subGameName + \"_is3DShow\");\r\n\t\tif (is3DShow) {\r\n\t\t\tthis.node.getChildByName(\"bg\").active = false\r\n\t\t\tthis.node.getChildByName(\"bg1\").active = true\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.node.getChildByName(\"bg1\").active = false\r\n\t\t\tthis.node.getChildByName(\"bg\").active = true\r\n\t\t}\r\n\t},\r\n\tOnShow: function () {\r\n\t\tif (!cc.isValid(this.node)) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.node.getChildByName(\"tip_exit_node\").active = false;\r\n\t\t//确保该玩家还在该房间内，否则强制退出房间\r\n\t\tlet roomID = this.RoomMgr.GetEnterRoomID();\r\n\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"GetRoomID\", {}, function (event) {\r\n\t\t\tif (event.roomID <= 0 || event.roomID != roomID) {\r\n\t\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t\t}\r\n\t\t}, function (error) {\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n\t\tlet is3DShow = this.LocalDataManager.GetConfigProperty(\"SysSetting\", app.subGameName + \"_is3DShow\");\r\n\t\tif (is3DShow == 0) {\r\n\t\t\t// this.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UI\" + app.subGameName.toUpperCase() + \"LSPlay\");\r\n\t\t\t// this.CloseForm();\r\n\t\t\t// return;\r\n\t\t}\r\n\r\n\t\tthis.SceneManager.PlayMusic(\"17RoomWaitStart\");\r\n\t\tthis.unscheduleAllCallbacks();\r\n\t\tthis.CheckUpdateNotice();\r\n\t\tthis.SceneManager.PlayMusic(\"gameBackMusic\");\r\n\t\tthis.playerMinNum = this.Room.GetRoomConfigByProperty(\"playerMinNum\");\r\n\t\tthis.playerNum = this.Room.GetRoomConfigByProperty(\"playerNum\");\r\n\t\tthis.clientPos = parseInt(this.RoomPosMgr.GetClientPos());\r\n\t\tthis.unionId = this.Room.GetRoomConfigByProperty(\"unionId\");\r\n\t\tthis.moshi = this.Room.GetRoomConfigByProperty(\"moshi\");\r\n\t\tthis.sign = this.Room.GetRoomConfigByProperty(\"sign\");\r\n\t\tthis.wangpai = this.Room.GetRoomConfigByProperty(\"wangpai\");\r\n\t\tthis.jiesan = this.Room.GetRoomConfigByProperty(\"jiesan\");\r\n\t\tthis.AddHead();\r\n\t\tthis.addCard();\r\n\t\tthis.HideAll();\r\n\t\tthis.RefreshRoomShow();\r\n\t\tthis.LogicGame.SetSign(this.sign, this.wangpai);\r\n\t\tthis.QZposList = [];\r\n\t\tthis.JZposList = [];\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet state = this.RoomSet.GetRoomSetProperty(\"state\");\r\n\t\tlet roomState = room.GetRoomProperty(\"state\");\r\n\t\tlet disslove = room.GetRoomProperty(\"dissolve\");\r\n\t\tlet maPaiValue = this.RoomSet.GetRoomSetProperty(\"mapai\");\r\n\t\tlet backerPos = this.RoomSet.GetRoomSetProperty(\"backerPos\");\r\n\t\tlet beishu = this.RoomSet.GetRoomSetProperty(\"beishu\");\r\n\t\t//@todo 是否允许跳过比牌\r\n\t\tthis.kexuanwanfa = room.GetRoomConfigByProperty(\"kexuanwanfa\");\r\n\t\tif (maPaiValue) {\r\n\t\t\tthis.maPai.active = true;\r\n\t\t\tlet child = this.maPai.getChildByName(\"card\");\r\n\t\t\tthis.ShowResultCard(maPaiValue, child);\r\n\t\t} else {\r\n\t\t\tthis.maPai.active = false;\r\n\t\t}\r\n\r\n\t\tif (disslove.endSec != 0) {\r\n\t\t\t//如果有人发起解散消息\r\n\t\t\tthis.FormManager.ShowForm(app.subGameName + \"_UIMessage02\");\r\n\t\t}\r\n\t\tlet roomPosMgr = this.RoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n\t\tlet clientPos = parseInt(roomPosMgr.GetClientPos());\r\n\t\tthis.UpdatePlayerScore();\r\n\t\t//显示房间信息\r\n\t\tthis.ShowRoomData();\r\n\t\tthis.FormManager.CloseForm(\"UIWaitForm\");\r\n\t\t//如果有人托管，显示托管图标\r\n\t\tif (this.ShareDefine.RoomState_Init == roomState) {//房间初始状态\r\n\t\t\tconsole.log(\"房间初始状态时 游戏状态\", state);\r\n\t\t} else if (this.ShareDefine.RoomState_Playing == roomState) {\r\n\t\t\tlet isAuto = room.GetRoomDataInfo()[\"posList\"][clientPos][\"trusteeship\"];\r\n\t\t\tif (isAuto) {\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SetAutoPlayIng(true);\r\n\t\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIAutoPlay\");\r\n\t\t\t}\r\n\t\t\tthis.btn_ready.active = false;\r\n\t\t\tthis.addDouble.active = false;\r\n\t\t\tthis.bankerList.active = false;\r\n\t\t\tthis.btn_color.active = false;\r\n\t\t\tthis.btn_size.active = false;\r\n\t\t\tlet posList = this.RoomSet.GetRoomSetProperty(\"posInfo\");\r\n\t\t\tlet setPosList = this.RoomSet.GetRoomSetProperty(\"setPosList\");\r\n\t\t\tconsole.log(\"房间play状态时 游戏状态\", state);\r\n\t\t\tlet allPlayer = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n\t\t\tlet myPosInfo = this.RoomPosMgr.GetPlayerInfoByPos(this.clientPos);\r\n\t\t\tif (this.ShareDefine.SetState_Hog == state) {//抢庄状态\r\n\t\t\t\t//显示抢庄按钮 判断抢过庄就等待别人\r\n\t\t\t\tthis.ShowConfirmBanker(posList, setPosList);\r\n\t\t\t\tif (!myPosInfo[\"isPlaying\"]) {\r\n\t\t\t\t\tthis.addDouble.active = false;\r\n\t\t\t\t\tthis.bankerList.active = false;\r\n\t\t\t\t\tthis.btn_color.active = false;\r\n\t\t\t\t\tthis.btn_size.active = false;\r\n\t\t\t\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = \"\";\r\n\t\t\t\t}\r\n\t\t\t} else if (this.ShareDefine.SetState_AddDouble == state) {//加倍状态\r\n\t\t\t\t//显示加倍按钮 判断加倍过就等待别人\r\n\t\t\t\tthis.ShowConfirmAddDouble(posList, setPosList);\r\n\t\t\t\tif (!myPosInfo[\"isPlaying\"]) {\r\n\t\t\t\t\tthis.addDouble.active = false;\r\n\t\t\t\t\tthis.bankerList.active = false;\r\n\t\t\t\t\tthis.btn_color.active = false;\r\n\t\t\t\t\tthis.btn_size.active = false;\r\n\t\t\t\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = \"\";\r\n\t\t\t\t}\r\n\t\t\t} else if (this.ShareDefine.SetState_Playing == state) {//理牌界面\r\n\t\t\t\t//显示理牌界面， 理过牌就显示等待其他玩家理牌提示\r\n\t\t\t\t//如果已经摆好牌 则显示游戏主界面 没有显示摆牌界面\r\n\r\n\t\t\t\tfor (var idx in allPlayer) {\r\n\t\t\t\t\tlet playerInfo = allPlayer[idx];\r\n\t\t\t\t\tlet pos = playerInfo[\"pos\"];\r\n\t\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\t\tif (playerInfo.name == \"\" || !playerInfo.isPlaying) {\r\n\t\t\t\t\t\tthis.GetWndNode(\"sp_seat0\" + uiPos + \"/seat_dun\").active = false;\r\n\t\t\t\t\t\tthis.GetWndNode(\"sp_seat0\" + uiPos + \"/sp_card\").active = false;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (playerInfo.isCardReady) {\r\n\t\t\t\t\t\tlet dunNode = this.GetWndNode(\"sp_seat0\" + uiPos + \"/seat_dun\");\r\n\t\t\t\t\t\tdunNode.active = true;\r\n\t\t\t\t\t\tlet img_special = dunNode.getChildByName(\"UILSDunCards\").getChildByName(\"img_special\");\r\n\t\t\t\t\t\timg_special.active = false;\r\n\t\t\t\t\t\t//todo: 显示具体牌值\r\n\t\t\t\t\t\t//todo: 显示等待比牌\r\n\t\t\t\t\t\t//todo: 头像显示比牌中\r\n\t\t\t\t\t\tthis.ShowPosPlayState(pos, 1);\r\n\t\t\t\t\t\tif (this.clientPos == pos) {\r\n\t\t\t\t\t\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = this.sp_playState[2];\r\n\t\t\t\t\t\t\t//显示自己的手牌\r\n\t\t\t\t\t\t\tthis.HidePlayerAllBtn();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet path = \"sp_seat0\" + uiPos.toString() + \"/sp_card\";\r\n\t\t\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\t\t\tnode.active = true;\r\n\t\t\t\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\t\t\t\tthis.SelectAni(\"cardEffect\");\r\n\t\t\t\t\t\tlet pid = playerInfo[\"pid\"];\r\n\t\t\t\t\t\tif (pid > 0) {\r\n\t\t\t\t\t\t\tcards.active = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcards.active = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let i = 0; i < cards.children.length - 1; i++) {\r\n\t\t\t\t\t\t\tcards.children[i].getChildByName(\"poker_back\").active = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcards.children[cards.children.length - 1].active = true;\r\n\t\t\t\t\t\tthis.ShowPosPlayState(pos, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!playerInfo.isCardReady && playerInfo.pid == this.HeroManager.GetHeroID()) {\r\n\t\t\t\t\t\tlet self = this;\r\n\t\t\t\t\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".CFJSSZPlayerCardReadyInfo\", {\r\n\t\t\t\t\t\t\t\"roomID\": roomID,\r\n\t\t\t\t\t\t\t\"posIdx\": this.clientPos\r\n\t\t\t\t\t\t}, function (success) {\r\n\t\t\t\t\t\t\tif (success == true) {\r\n\t\t\t\t\t\t\t\t//玩家已经离好牌了,断网重连\r\n\t\t\t\t\t\t\t\tself.RoomMgr.SendGetRoomInfo(roomID);\r\n\t\t\t\t\t\t\t\tself.CloseForm();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//玩家没离开，开启理排\r\n\t\t\t\t\t\t\t\tself.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UIFJSSZRank\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, function (error) {\r\n\t\t\t\t\t\t\t//数据异常了，关闭界面\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (this.ShareDefine.SetState_End == state) {//结束阶段\r\n\t\t\t\tthis.OnShowGameEndForm();\r\n\t\t\t}\r\n\t\t\tfor (let idx in allPlayer) {\r\n\t\t\t\tlet playerInfo = allPlayer[idx];\r\n\t\t\t\tlet pos = playerInfo[\"pos\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\tlet pid = playerInfo[\"pid\"];\r\n\t\t\t\tif (pid > 0) {\r\n\t\t\t\t\tthis.GetWndProperty(\"sp_seat0\" + uiPos + \"/head\", \"active\", true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.GetWndProperty(\"sp_seat0\" + uiPos + \"/head\", \"active\", false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (this.ShareDefine.RoomState_End == roomState) {\r\n\t\t\tconsole.log(\"房间结束状态时 游戏状态\", state);\r\n\t\t} else if (this.ShareDefine.RoomState_Waiting == roomState) {\r\n\t\t\tconsole.log(\"房间等待状态时 游戏状态\", state);\r\n\t\t} else if (this.ShareDefine.RoomState_WaitingEx == roomState) {\r\n\t\t\tconsole.log(\"房间等待EX状态时 游戏状态\", state);\r\n\t\t}\r\n\t\tthis.updateLookInfo()\r\n\t\tthis.startClock()\r\n\t},\r\n\tEvent_ChangeStatus: function (event) {\r\n\t\tlet myPosInfo = this.RoomPosMgr.GetPlayerInfoByPos(this.clientPos);\r\n\t\tif (!myPosInfo[\"isPlaying\"]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.ShowRoomData();\r\n\t\tthis.HideAll();\r\n\t\tthis.InitHead();\r\n\t\tconsole.log(\"状态改变 Event_ChangeStatus\", event);\r\n\t\tlet posList = event[\"posList\"];\r\n\t\tif (event.state == \"FJSSZ_GAME_STATUS_DEAL\") {\r\n\t\t\tconsole.log(\"发牌阶段...\");\r\n\t\t} else if (event.state == \"FJSSZ_GAME_STATUS_CONFIRMBanker\") {\r\n\t\t\tconsole.log(\"抢庄阶段...\");\r\n\t\t\tthis.QZposList = posList;\r\n\t\t\tif (this.moshi == 1) {\r\n\t\t\t\tthis.PlayStartAnimation();\r\n\t\t\t}\r\n\t\t} else if (event.state == \"FJSSZ_GAME_STATUS_ADDDOUBLE\") {\r\n\t\t\tconsole.log(\"加倍阶段...\");\r\n\t\t\tlet posList = event[\"posList\"];\r\n\t\t\tthis.JZposList = posList;\r\n\t\t\tif (this.moshi == 2) {\r\n\t\t\t\tthis.PlayStartAnimation();\r\n\t\t\t} else {\r\n\t\t\t\tthis.ShowConfirmAddDouble(this.JZposList, []);\r\n\t\t\t}\r\n\t\t} else if (event.state == \"FJSSZ_GAME_STATUS_PLAYING\") {\r\n\t\t\tconsole.log(\"打牌阶段...\");\r\n\t\t} else if (event.state == \"FJSSZ_GAME_STATUS_RESULT\") {\r\n\t\t\tconsole.log(\"打牌结束阶段...\");\r\n\t\t}\r\n\t},\r\n\tPlayStartAnimation: function () {\r\n\t\tthis.needDelayDiss = false\r\n\t\tthis.startAnimation.active = true;\r\n\t\tthis.startAnimation.getComponent(sp.Skeleton).setAnimation(0,\"animation\", false);\r\n\t\tthis.startClock()\r\n\t},\r\n\tOnEventShow: function () {\r\n\t\tthis.hideTime = this.hideTime || 0\r\n\t\tif (Date.now() - this.hideTime > 5000) {\r\n\t\t\tthis.OnShow()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.startClock()\r\n\t},\r\n\tOnEventHide: function () {\r\n\t\tthis.hideTime = Date.now()\r\n\t},\r\n\tstartClock(){\r\n\t\tif(!this.RoomMgr) return\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif(!room || !room.GetRoomSet()) return\r\n\t\tthis.setStartTime = room.GetRoomSet().GetRoomSetProperty(\"setStartTime\");\r\n\t\tthis.setCurrentTime = room.GetRoomSet().GetRoomSetProperty(\"setCurrentTime\");\r\n\t\tlet roomState = room.GetRoomProperty(\"state\");\r\n\t\tthis.unschedule(this.timer)\r\n\t\tif (this.ShareDefine.RoomState_Playing != roomState) {\r\n\t\t\tthis.node.getChildByName(\"clock\").active = false\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet guize = room.GetRoomConfigByProperty(\"xianShi\");\r\n\t\tlet self = this\r\n\t\tlet f = ()=>{\r\n\t\t\tthis.node.getChildByName(\"clock\").active = false\r\n\t\t\tthis.unschedule(this.timer)\r\n\t\t\tthis.countDown = 0\r\n\t\t\tif (guize == 1) {\r\n\t\t\t\tthis.countDown = 60;\r\n\t\t\t} else if (guize == 2) {\r\n\t\t\t\tthis.countDown = 90;\r\n\t\t\t} else if (guize == 3) {\r\n\t\t\t\tthis.countDown = 120;\r\n\t\t\t}\r\n\t\t\tlet totalTime = parseInt(parseInt(self.setCurrentTime - self.setStartTime) / 1000);\r\n\t\t\tthis.countDown -= totalTime\r\n\t\t\tcc.log(\"开始定时器\", this.countDown, totalTime)\r\n\t\t\tif (this.countDown > 0) {\r\n\t\t\t\tthis.node.getChildByName(\"clock\").active = true\r\n\t\t\t\tthis.unschedule(this.timer)\r\n\t\t\t\tlet  time = this.node.getChildByName(\"clock\").getChildByName(\"time\")\r\n\t\t\t\ttime.getComponent(cc.Label).string = this.countDown.toString()\r\n\t\t\t\tthis.schedule(this.timer, 1,  this.countDown, 1.0)\r\n\t\t\t}\r\n\t\t}\r\n\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(\"base.CServerTime\", {}, function (event) {\r\n\t\t\tself.setCurrentTime = event.serverTimeMsec;\r\n\t\t\tf()\r\n\t\t},(event)=>{\r\n\t\t\tself.setCurrentTime = self.setStartTime;\r\n\t\t\tf()\r\n\t\t});\r\n\t},\r\n\ttimer(){\r\n\t\tlet time = this.node.getChildByName(\"clock\").getChildByName(\"time\")\r\n\t\tlet d = parseInt(time.getComponent(cc.Label).string)\r\n\t\td--\r\n\t\tif(d < 0){\r\n\t\t\tthis.unschedule(this.timer)\r\n\t\t\td = 0\r\n\t\t\tthis.node.getChildByName(\"clock\").active = false\r\n\t\t}\r\n\t\ttime.getComponent(cc.Label).string = d.toString()\r\n\t},\r\n\tonStartFinished: function (event) {\r\n\t\tlet SpEnt =  this.startAnimation.getComponent(sp.Skeleton).setAnimation(0,\"animation\",false);\r\n\t\tSpEnt.animationStart = SpEnt.animationEnd;\r\n\t\tif (this.moshi == 2) {\r\n\t\t\tthis.startAnimation.active = false;\r\n\t\t\t// this.sp_faPai.active = true;\r\n\t\t\t// this.SelectAni(\"faPai\");\r\n\t\t\tthis.SoundManager.PlaySound(\"sssFapai\");\r\n\t\t\tthis.ShowConfirmAddDouble(this.JZposList, []);\r\n\t\t} else if (this.moshi == 1) {\r\n\t\t\tthis.startAnimation.active = false;\r\n\t\t\t// this.sp_faPai.active = true;\r\n\t\t\t// this.SelectAni(\"faPai\");\r\n\t\t\tthis.SoundManager.PlaySound(\"sssFapai\");\r\n\t\t\tthis.ShowConfirmBanker(this.QZposList, []);\r\n\t\t} else {//通比\r\n\t\t\t// this.startAnimation.getComponent(cc.Animation).stop(\"start\");\r\n\t\t\tthis.startAnimation.active = false;\r\n\t\t\tthis.sp_faPai.active = true;\r\n\t\t\tthis.SelectAni(\"faPai\");\r\n\t\t\tthis.SoundManager.PlaySound(\"sssFapai\");\r\n\t\t\tlet self = this;\r\n\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\tself.sp_faPai.active = false;\r\n\t\t\t\tself.SelectAni(\"cardEffect\");\r\n\t\t\t\tif (!this.bAuto) {\r\n\t\t\t\t\tif (this.RoomSet.GetRoomSetProperty(\"isPlaying\")) {\r\n\t\t\t\t\t\tlet allPlayer = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n\t\t\t\t\t\tfor (let key in allPlayer) {\r\n\t\t\t\t\t\t\tlet playerInfo = allPlayer[key];\r\n\t\t\t\t\t\t\tlet pos = playerInfo[\"pos\"];\r\n\t\t\t\t\t\t\tlet isPlaying = playerInfo[\"isPlaying\"];\r\n\t\t\t\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\t\t\t\tif (!isPlaying) {\r\n\t\t\t\t\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/sp_card\";\r\n\t\t\t\t\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\t\t\t\t\tnode.active = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UIFJSSZRank\");\r\n\t\t\t\t\t\tthis.ShowPosPlayState(this.clientPos, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 0.36);\r\n\t\t}\r\n\t},\r\n\tShowConfirmBanker: function (posList, myInfo) {\r\n\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = this.sp_playState[0];\r\n\t\tif (!myInfo.length) {\r\n\t\t\tthis.bankerList.active = true;\r\n\t\t\tthis.btn_color.active = true;\r\n\t\t\tthis.btn_size.active = true;\r\n\t\t\tfor (let idx = 0; idx < posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\t\tlet pos = posList[idx][\"posID\"];\r\n\t\t\t\t// let pid = posList[idx][\"pid\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos.toString() + \"/sp_card\";\r\n\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\tnode.active = true;\r\n\t\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\t\tcards.active = true;\r\n\t\t\t\tfor (let i = 0; i < cards.children.length - 1; i++) {\r\n\t\t\t\t\tcards.children[i].getChildByName(\"poker_back\").active = true;\r\n\t\t\t\t}\r\n\t\t\t\tcards.children[cards.children.length - 1].active = false;\r\n\t\t\t\tif (this.clientPos == pos) {//渲染自己八张手牌\r\n\t\t\t\t\tlet showEightCard = posList[idx][\"showEightCard\"];\r\n\t\t\t\t\tfor (let j = 0; j < showEightCard.length; j++) {\r\n\t\t\t\t\t\tlet index = j + 5;\r\n\t\t\t\t\t\tthis.ShowResultCard(showEightCard[j], cards.children[index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let idx = 0; idx < posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\t\tlet pos = posList[idx][\"posID\"];\r\n\t\t\t\tlet pid = posList[idx][\"pid\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos.toString() + \"/sp_card\";\r\n\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\tnode.active = true;\r\n\t\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\t\tif (pid > 0) {\r\n\t\t\t\t\tcards.active = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcards.active = false;\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0; i < cards.children.length - 1; i++) {\r\n\t\t\t\t\tcards.children[i].getChildByName(\"poker_back\").active = true;\r\n\t\t\t\t}\r\n\t\t\t\tcards.children[cards.children.length - 1].active = false;\r\n\t\t\t\tlet qiangZhuangBeiShu = posList[idx][\"qiangZhuangBeiShu\"];\r\n\t\t\t\tif (qiangZhuangBeiShu == -1) {\r\n\t\t\t\t\tif (this.clientPos == pos) {\r\n\t\t\t\t\t\tthis.bankerList.active = true;\r\n\t\t\t\t\t\tthis.btn_color.active = true;\r\n\t\t\t\t\t\tthis.btn_size.active = true;\r\n\t\t\t\t\t\tlet showEightCard = myInfo[0][\"showEightCard\"];\r\n\t\t\t\t\t\tfor (let j = 0; j < showEightCard.length; j++) {\r\n\t\t\t\t\t\t\tlet index = j + 5;\r\n\t\t\t\t\t\t\tthis.ShowResultCard(showEightCard[j], cards.children[index]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowZJBeiShu(pos, qiangZhuangBeiShu);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tShowConfirmAddDouble: function (posList, myInfo) {\r\n\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = this.sp_playState[1];\r\n\t\tif (!myInfo.length) {\r\n\t\t\tif (this.moshi == 1) {\r\n\t\t\t\tlet opPos = this.RoomSet.GetRoomSetProperty(\"opPos\");\r\n\t\t\t\tif (this.clientPos != opPos) {\r\n\t\t\t\t\tthis.addDouble.active = true;\r\n\t\t\t\t\tthis.btn_color.active = true;\r\n\t\t\t\t\tthis.btn_size.active = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = \"\";\r\n\t\t\t\tthis.addDouble.active = true;\r\n\t\t\t\tthis.btn_color.active = true;\r\n\t\t\t\tthis.btn_size.active = true;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let idx = 0; idx < posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\t\tlet pos = posList[idx][\"posID\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos.toString() + \"/sp_card\";\r\n\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\tnode.active = true;\r\n\t\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\t\tcards.active = true;\r\n\t\t\t\tfor (let i = 0; i < cards.children.length - 1; i++) {\r\n\t\t\t\t\tcards.children[i].getChildByName(\"poker_back\").active = true;\r\n\t\t\t\t}\r\n\t\t\t\tcards.children[cards.children.length - 1].active = false;\r\n\t\t\t\tif (this.clientPos == pos) {//渲染自己八张手牌\r\n\t\t\t\t\tlet showEightCard = posList[idx][\"showEightCard\"];\r\n\t\t\t\t\tfor (let j = 0; j < showEightCard.length; j++) {\r\n\t\t\t\t\t\tlet index = j + 5;\r\n\t\t\t\t\t\tthis.ShowResultCard(showEightCard[j], cards.children[index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.moshi == 1) {\r\n\t\t\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = this.sp_playState[1];\r\n\t\t\t} else {\r\n\t\t\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = \"\";\r\n\t\t\t}\r\n\t\t\tfor (let idx = 0; idx < posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\t\tlet pos = posList[idx][\"posID\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos.toString() + \"/sp_card\";\r\n\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\tnode.active = true;\r\n\t\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\t\tlet pid = posList[idx][\"pid\"];\r\n\t\t\t\tif (pid > 0) {\r\n\t\t\t\t\tcards.active = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcards.active = false;\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0; i < cards.children.length - 1; i++) {\r\n\t\t\t\t\tcards.children[i].getChildByName(\"poker_back\").active = true;\r\n\t\t\t\t}\r\n\t\t\t\tcards.children[cards.children.length - 1].active = false;\r\n\t\t\t\tif (this.clientPos == pos) {\r\n\t\t\t\t\tlet showEightCard = myInfo[0][\"showEightCard\"];\r\n\t\t\t\t\tfor (let j = 0; j < showEightCard.length; j++) {\r\n\t\t\t\t\t\tlet index = j + 5;\r\n\t\t\t\t\t\tthis.ShowResultCard(showEightCard[j], cards.children[index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet yaZhuBeiShu = posList[idx][\"yaZhuBeiShu\"];\r\n\t\t\t\tlet qiangZhuangBeiShu = posList[idx][\"qiangZhuangBeiShu\"];\r\n\t\t\t\tif (qiangZhuangBeiShu == -1) {\r\n\t\t\t\t\tif (this.clientPos == pos) {\r\n\t\t\t\t\t\tthis.addDouble.active = true;\r\n\t\t\t\t\t\tthis.btn_color.active = true;\r\n\t\t\t\t\t\tthis.btn_size.active = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowZJBeiShu(pos, qiangZhuangBeiShu, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tSortConfirmBanker: function (posList, myInfo, isSize) {\r\n\t\tif (!myInfo.length) {\r\n\t\t\tfor (let idx = 0; idx < posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\t\tlet pos = posList[idx][\"posID\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos.toString() + \"/sp_card\";\r\n\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\tnode.active = true;\r\n\t\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\t\tcards.active = true;\r\n\t\t\t\tif (this.clientPos == pos) {//渲染自己八张手牌\r\n\t\t\t\t\tlet showEightCard = posList[idx][\"showEightCard\"];\r\n\t\t\t\t\tif (isSize) {\r\n\t\t\t\t\t\tthis.LogicGame.SortBySize(showEightCard);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshowEightCard = this.LogicGame.SortByColor(showEightCard);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let j = 0; j < showEightCard.length; j++) {\r\n\t\t\t\t\t\tlet index = j + 5;\r\n\t\t\t\t\t\tthis.ShowResultCard(showEightCard[j], cards.children[index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet path = \"sp_seat00/sp_card\";\r\n\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\tnode.active = true;\r\n\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\tlet showEightCard = myInfo[0][\"showEightCard\"];\r\n\t\t\tif (isSize) {\r\n\t\t\t\tthis.LogicGame.SortBySize(showEightCard);\r\n\t\t\t} else {\r\n\t\t\t\tshowEightCard = this.LogicGame.SortByColor(showEightCard);\r\n\t\t\t}\r\n\t\t\tfor (let j = 0; j < showEightCard.length; j++) {\r\n\t\t\t\tlet index = j + 5;\r\n\t\t\t\tthis.ShowResultCard(showEightCard[j], cards.children[index]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tSortConfirmAddDouble: function (posList, myInfo, isSize) {\r\n\t\tif (!myInfo.length) {\r\n\t\t\tfor (let idx = 0; idx < posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\t\tlet pos = posList[idx][\"posID\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos.toString() + \"/sp_card\";\r\n\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\tnode.active = true;\r\n\t\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\t\tcards.active = true;\r\n\t\t\t\tif (this.clientPos == pos) {//渲染自己八张手牌\r\n\t\t\t\t\tlet showEightCard = posList[idx][\"showEightCard\"];\r\n\t\t\t\t\tif (isSize) {\r\n\t\t\t\t\t\tthis.LogicGame.SortBySize(showEightCard);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshowEightCard = this.LogicGame.SortByColor(showEightCard);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let j = 0; j < showEightCard.length; j++) {\r\n\t\t\t\t\t\tlet index = j + 5;\r\n\t\t\t\t\t\tthis.ShowResultCard(showEightCard[j], cards.children[index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet path = \"sp_seat00/sp_card\";\r\n\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\tnode.active = true;\r\n\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\tlet showEightCard = myInfo[0][\"showEightCard\"];\r\n\t\t\tif (isSize) {\r\n\t\t\t\tthis.LogicGame.SortBySize(showEightCard);\r\n\t\t\t} else {\r\n\t\t\t\tshowEightCard = this.LogicGame.SortByColor(showEightCard);\r\n\t\t\t}\r\n\t\t\tfor (let j = 0; j < showEightCard.length; j++) {\r\n\t\t\t\tlet index = j + 5;\r\n\t\t\t\tthis.ShowResultCard(showEightCard[j], cards.children[index]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tShowRoomData: function () {\r\n\t\t//显示房间信息\r\n\t\tif (app[app.subGameName + \"_ShareDefine\"]().isCoinRoom) {\r\n\t\t\tthis.roomInfo.active = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet current = room.GetRoomConfigByProperty(\"setCount\");\r\n\t\tlet setID = room.GetRoomProperty(\"setID\");\r\n\t\tthis.roomInfo.active = true;\r\n\t\tlet playerAll = room.GetRoomPosMgr().GetRoomAllPlayerInfo();\r\n\t\tlet playerAllList = Object.keys(playerAll);\r\n\t\tlet joinPlayerCount = playerAllList.length;\r\n\t\tif (this.playerMinNum == this.playerNum) {\r\n\t\t\tjoinPlayerCount = this.playerNum;\r\n\t\t} else {\r\n\t\t\tjoinPlayerCount = this.playerMinNum + \"-\" + this.playerNum;\r\n\t\t}\r\n\t\tfor (let i = 0; i < this.roomInfo.children.length; i++) {\r\n\t\t\tif (this.roomInfo.children[i].active) {\r\n\t\t\t\tthis.roomInfo.children[i].destroy()\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet sign = room.GetRoomConfigByProperty(\"sign\");\r\n\t\tlet wanfaStr = this.WanFa();\r\n\t\tlet wanfaArr = wanfaStr.split(\",\");\r\n\t\tlet wp = room.GetRoomConfigByProperty(\"wangpai\");\r\n\t\tlet signS = this.signString.slice()\r\n\t\tfor (let i = 0; i < this.signString.length; i++) {\r\n\t\t\tsignS[i] = wp + \"王\" + this.signString[i];\r\n\t\t}\r\n\t\tlet dianbo = room.GetRoomConfigByProperty(\"dianbo\");\r\n\t\tlet unionId = room.GetRoomConfigByProperty(\"unionId\");\r\n\t\tif (dianbo > 0 && unionId > 0) {\r\n\t\t\twanfaArr.push(\"固定携带：\"+dianbo)\r\n\t\t}\r\n\t\twanfaArr = [signS[sign - 1]].concat(wanfaArr)\r\n\t\twanfaArr = [setID + \"/\" + current + \"局\"].concat(wanfaArr)\r\n\t\twanfaArr = [\"房号:\"+room.GetRoomProperty(\"key\")].concat(wanfaArr)\r\n\t\tfor (let i = 0; i < wanfaArr.length; i++) {\r\n\t\t\tlet wanfa = cc.instantiate(this.roomInfo.getChildByName(\"demo\"));\r\n\t\t\twanfa.getChildByName(\"lb\").getComponent(cc.Label).string = wanfaArr[i];\r\n\t\t\twanfa.active = true\r\n\t\t\tthis.roomInfo.addChild(wanfa);\r\n\t\t}\r\n\t\tif (setID == 0) {\r\n\t\t} else {\r\n\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessage03\");\r\n\t\t}\r\n\t},\r\n\tisChangeRen: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet playerAll = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n\t\tlet playerAllList = Object.keys(playerAll);\r\n\t\tlet joinPlayerCount = playerAllList.length;\r\n\t\tif (joinPlayerCount <= 2) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tlet fangjian = room.GetRoomConfigByProperty(\"fangjian\");\r\n\t\tif (fangjian.length > 0) {\r\n\t\t\tif (fangjian.indexOf(0) > -1) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\taddCard: function () {\r\n\t\tlet posList = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"posList\");\r\n\t\tfor (let index = 0; index < posList.length-this.ShareDefine.LookCount; index++) {\r\n\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(posList[index].pos);\r\n\t\t\tlet wndNode = this.GetWndNode(\"sp_seat0\" + uiPos);\r\n\t\t\t//加入墩牌\r\n\t\t\tif (!wndNode.getChildByName(\"seat_dun\").getChildByName(\"UILSDunCards\")) {\r\n\t\t\t\tlet dunCard = cc.instantiate(this.dunCardsPrefab);\r\n\t\t\t\twndNode.getChildByName(\"seat_dun\").addChild(dunCard);\r\n\t\t\t}\r\n\r\n\t\t\t//加入牌特效\r\n\t\t\tif (!wndNode.getChildByName(\"sp_card\").getChildByName(\"UILSCardEffect\")) {\r\n\t\t\t\tlet cardEffect = cc.instantiate(this.cardEffectPrefab);\r\n\t\t\t\twndNode.getChildByName(\"sp_card\").addChild(cardEffect);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tAddHeadPrefab: function () {\r\n\t\tlet sitPath = \"sp_seat0\";\r\n\t\tfor (let idx = 0; idx < 8; idx++) {\r\n\t\t\tlet sitHead = cc.instantiate(this.headPrefab);\r\n\t\t\tsitHead.name = \"UI\" + app.subGameName.toUpperCase() + \"Head\";\r\n\t\t\tlet sitNode = this.GetWndNode(sitPath + idx + \"/head\");\r\n\t\t\tsitNode.addChild(sitHead);\r\n\t\t\tsitHead.active = false;\r\n\t\t\t//加入倍数节点 UIFJSSZHead中隐藏\r\n\t\t\tlet bsNode = cc.instantiate(this.beiShuPrefab);\r\n\t\t\tbsNode.name = \"bsPrefab\";\r\n\t\t\tsitHead.getChildByName(\"otherNode\").addChild(bsNode);\r\n\t\t\tsitHead.getChildByName(\"otherNode\").getChildByName(\"bsPrefab\").active = false;\r\n\t\t\tsitHead.getChildByName(\"otherNode\").getChildByName(\"bsPrefab\").y = -110;\r\n\t\t}\r\n\t},\r\n\r\n\tAddHead: function () {\r\n\t\tthis.clearHead();\r\n\t\t//初始化加入头像 如果已经有加入了头像 显示出来\r\n\t\tlet posList = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"posList\");\r\n\t\tlet playerCount = posList.length-this.ShareDefine.LookCount;\r\n\t\tlet roomSetID = this.Room.GetRoomProperty(\"setID\");\r\n\t\tfor (let idx = 0; idx < playerCount; idx++) {\r\n\t\t\tlet pos = posList[idx][\"pos\"];\r\n\t\t\tlet pid = posList[idx][\"pid\"];\r\n\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\tlet headScript = this.GetUICardComponentByPos(pos);\r\n\t\t\tlet isLeft = this.Left[uiPos];\r\n\t\t\theadScript.node.active = true;\r\n\t\t\theadScript.Init(uiPos, posList[idx].pos, cc.v2(0, 0), isLeft, null, null, roomSetID > 0, pid);\r\n\t\t}\r\n\t},\r\n\tInitHead: function () {\r\n\t\tthis.clearHead();\r\n\t\t//初始化加入头像 如果已经有加入了头像 显示出来\r\n\t\tlet posList = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"posList\");\r\n\t\tlet playerCount = posList.length-this.ShareDefine.LookCount;\r\n\t\tfor (let idx = 0; idx < playerCount; idx++) {\r\n\t\t\tlet pos = posList[idx][\"pos\"];\r\n\t\t\tlet pid = posList[idx][\"pid\"];\r\n\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\tlet headScript = this.GetUICardComponentByPos(pos);\r\n\t\t\tlet isLeft = this.Left[uiPos];\r\n\t\t\theadScript.node.active = true;\r\n\t\t\theadScript.Init(uiPos, posList[idx].pos, cc.v2(0, 0), isLeft, null, null, true, pid);\r\n\t\t}\r\n\t},\r\n\tOnShowGameEndForm: function (isRoomEnd = false, thanCard = null) {\r\n\t\tthis.HideZJBeiShu();\r\n\t\t//如果玩家已经准备则不显示结算界面\r\n\t\tlet clientPlayerInfo = this.RoomPosMgr.GetPlayerInfoByPos(this.clientPos);\r\n\t\tif (clientPlayerInfo[\"gameReady\"]) {\r\n\t\t\t//显示准备图片\r\n\t\t\tthis.btn_goon.active = false;\r\n\t\t} else {\r\n\t\t\tthis.btn_goon.active = true;\r\n\t\t}\r\n\t\t//显示玩家所有的牌\r\n\t\tlet rankingResults = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"rankingResults\");\r\n\t\tlet pCard1 = this.RoomSet.GetRoomSetProperty(\"pCard1\");\r\n\t\tlet pCard2 = this.RoomSet.GetRoomSetProperty(\"pCard2\");\r\n\t\tlet pCard3 = this.RoomSet.GetRoomSetProperty(\"pCard3\");\r\n\t\tlet cardList = [pCard1, pCard2, pCard3];\r\n\t\tlet rankeds = null;\r\n\t\tlet playerResults = null;\r\n\t\tif (isRoomEnd) {\r\n\t\t\trankeds = thanCard[\"rankeds\"];\r\n\t\t\tplayerResults = thanCard[\"posResultList\"];\r\n\t\t} else {\r\n\t\t\trankeds = rankingResults[\"rankeds\"];\r\n\t\t\tplayerResults = rankingResults[\"posResultList\"];\r\n\t\t}\r\n\t\tlet rewardsDict = this.RoomSet.GetRoomSetProperty(\"rewardsDict\");\r\n\t\tfor (let posIdx in rewardsDict) {\r\n\t\t\tlet posInfo = rewardsDict[posIdx];\r\n\t\t\tlet isSpecial = posInfo[\"isSpecial\"];\r\n\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(posIdx);\r\n\t\t\tlet pathWnd = \"sp_seat0\" + uiPos + \"/seat_dun\";\r\n\t\t\tthis.SetWndProperty(pathWnd, \"active\", true);\r\n\t\t\tlet dunNode = this.GetWndNode(\"sp_seat0\" + uiPos + \"/seat_dun/UILSDunCards\");\r\n\t\t\tdunNode.active = true;\r\n\t\t\tlet img_special = dunNode.getChildByName(\"img_special\");\r\n\t\t\timg_special.active = false;\r\n\t\t\tif (isSpecial) {\r\n\t\t\t\tlet dunPos = posInfo[\"dunPos\"];\r\n\t\t\t\timg_special.active = true;\r\n\t\t\t\tlet spacialNum = posInfo[\"special\"];\r\n\t\t\t\tthis.SetSpecailProperty(img_special.children[0],spacialNum)\r\n\t\t\t\t//音效\r\n\t\t\t\t// console.log(\"播放特殊牌音效\", this.Type[spacialNum]);\r\n\t\t\t\t// let sex = this.InitHeroSex(posIdx);\r\n\t\t\t\t// let soundName = sex + \"17CardType\" + spacialNum;\r\n\t\t\t\t// this.SoundManager.PlaySound(soundName);\r\n\t\t\t\tlet cards = this.GetDunCardsByServerDunPos(dunPos);\r\n\t\t\t\tfor (let j = 0; j < cards.length; j++) {\r\n\t\t\t\t\tdunNode.children[j].angle = 0\r\n\t\t\t\t\tthis.ShowResultCard(cards[j], dunNode.children[j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet scoreNode = this.GetScoreNode(uiPos, 4);\r\n\t\t\tlet sportsPointNode = this.GetScoreNode(uiPos, 6);\r\n\t\t\tif (this.unionId > 0) {\r\n\t\t\t\t//显示竞技点\r\n\t\t\t\tsportsPointNode.active = true;\r\n\t\t\t\tscoreNode.active = false\r\n\t\t\t\tlet sportsPoint = posInfo[\"sportsPoint\"];\r\n\t\t\t\tif (sportsPoint > 0) {\r\n\t\t\t\t\tsportsPointNode.children[0].active = true;\r\n\t\t\t\t\tsportsPointNode.children[1].active = false;\r\n\t\t\t\t\tthis.showLabel(sportsPointNode.children[0], sportsPoint);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsportsPointNode.children[0].active = false;\r\n\t\t\t\t\tsportsPointNode.children[1].active = true;\r\n\t\t\t\t\tthis.showLabel(sportsPointNode.children[1], sportsPoint);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsportsPointNode.active = false;\r\n\t\t\t}\r\n\t\t\t// let specialShui = posInfo[\"specialShui\"];\r\n\t\t\t// let specialShui = posInfo[\"simShui\"];\r\n\t\t\tlet specialShui = posInfo[\"shui\"];\r\n\t\t\tscoreNode.active = true;\r\n\t\t\tif (specialShui > 0) {\r\n\t\t\t\tscoreNode.getChildByName(\"win\").active = true;\r\n\t\t\t\tscoreNode.getChildByName(\"lost\").active = false;\r\n\t\t\t\tscoreNode = scoreNode.getChildByName(\"win\");\r\n\t\t\t} else {\r\n\t\t\t\tscoreNode.getChildByName(\"win\").active = false;\r\n\t\t\t\tscoreNode.getChildByName(\"lost\").active = true;\r\n\t\t\t\tscoreNode = scoreNode.getChildByName(\"lost\");\r\n\t\t\t}\r\n\t\t\tif (this.unionId > 0){\r\n\t\t\t\tthis.GetScoreNode(uiPos, 4).active = false\r\n\t\t\t}\r\n\t\t\tthis.showLabel(scoreNode, specialShui);\r\n\t\t}\r\n\t\tfor (let i = 0; i < cardList.length; i++) {\r\n\t\t\tfor (let j = 0; j < cardList[i].length; j++) {\r\n\t\t\t\tlet dunCard = cardList[i][j];\r\n\t\t\t\tlet posIdx = dunCard[\"posIdx\"];\r\n\t\t\t\tlet cards = dunCard[\"cards\"];\r\n\t\t\t\tlet baseShui = dunCard[\"baseShui\"];\r\n\t\t\t\tlet extraShui = dunCard[\"extraShui\"];\r\n\t\t\t\tbaseShui += extraShui\r\n\t\t\t\tbaseShui = dunCard[\"protoShui\"];\r\n\t\t\t\tlet isSpecial = dunCard[\"isSpecial\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(posIdx);\r\n\t\t\t\tlet dunCardsNode = this.GetWndNode(\"sp_seat0\" + uiPos + \"/seat_dun/UILSDunCards\");\r\n\t\t\t\tif (!isSpecial) {\r\n\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\tfor (let k = 0; k < cards.length; k++) {//0-2\r\n\t\t\t\t\t\t\tthis.ShowResultCard(cards[k], dunCardsNode.getChildByName(\"dun_card\" + (k+1)));\r\n\t\t\t\t\t\t\tdunCardsNode.getChildByName(\"dun_card\" + (k+1)).angle = 0\r\n\t\t\t\t\t\t\tdunCardsNode.getComponent(\"UILSDunCards\").showCardType(0,dunCard.card)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet scoreNode = this.GetScoreNode(uiPos, 1);\r\n\t\t\t\t\t\tscoreNode.active = true;\r\n\t\t\t\t\t\tif (baseShui > 0) {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = true;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = false;\r\n\t\t\t\t\t\t\tthis.showLabel(scoreNode.getChildByName(\"score_win\"), baseShui);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = false;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = true;\r\n\t\t\t\t\t\t\tthis.showLabel(scoreNode.getChildByName(\"score_lose\"), baseShui);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (i == 1) {\r\n\t\t\t\t\t\tfor (let k = 0; k < cards.length; k++) {//3-7\r\n\t\t\t\t\t\t\tthis.ShowResultCard(cards[k], dunCardsNode.getChildByName(\"dun_card\" + (k + 4)));\r\n\t\t\t\t\t\t\tdunCardsNode.getChildByName(\"dun_card\" + (k+4)).angle = 0\r\n\t\t\t\t\t\t\tdunCardsNode.getComponent(\"UILSDunCards\").showCardType(1,dunCard.card)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet scoreNode = this.GetScoreNode(uiPos, 2);\r\n\t\t\t\t\t\tscoreNode.active = true;\r\n\t\t\t\t\t\tif (baseShui > 0) {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = true;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = false;\r\n\t\t\t\t\t\t\tthis.showLabel(scoreNode.getChildByName(\"score_win\"), baseShui);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = false;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = true;\r\n\t\t\t\t\t\t\tthis.showLabel(scoreNode.getChildByName(\"score_lose\"), baseShui);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (i == 2) {\r\n\t\t\t\t\t\tfor (let k = 0; k < cards.length; k++) {//8-12\r\n\t\t\t\t\t\t\tthis.ShowResultCard(cards[k], dunCardsNode.getChildByName(\"dun_card\" + (k + 9)));\r\n\t\t\t\t\t\t\tdunCardsNode.getChildByName(\"dun_card\" + (k+9)).angle = 0\r\n\t\t\t\t\t\t\tdunCardsNode.getComponent(\"UILSDunCards\").showCardType(2,dunCard.card)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet scoreNode = this.GetScoreNode(uiPos, 3);\r\n\t\t\t\t\t\tscoreNode.active = true;\r\n\t\t\t\t\t\tif (baseShui > 0) {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = true;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = false;\r\n\t\t\t\t\t\t\tthis.showLabel(scoreNode.getChildByName(\"score_win\"), baseShui);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = false;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = true;\r\n\t\t\t\t\t\t\tthis.showLabel(scoreNode.getChildByName(\"score_lose\"), baseShui);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let index = 0; index < 8; index++) {\r\n\t\t\tlet dunCardsNode = this.GetWndNode(\"sp_seat0\" + index + \"/seat_dun/UILSDunCards\");\r\n\t\t\tif(!dunCardsNode) continue\r\n\t\t\tfor (let i = 0; i < 13; i++) {\r\n\t\t\t\tlet node = dunCardsNode.getChildByName(\"dun_card\" + i)\r\n\t\t\t\tif(!node) continue\r\n\t\t\t\tnode.zIndex = i\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UILSResultOne\");\r\n\t},\r\n\tonFireFinished: function (event) {\r\n\t\tthis.fireAnimation.active = false;\r\n\t},\r\n\r\n\tonFourFinished: function (event) {\r\n\t\tthis.fourAnimation.active = false;\r\n\t\tlet SpEnt =  this.fourAnimation.getComponent(sp.Skeleton).setAnimation(0,\"qld\",false);\r\n\t\tSpEnt.animationStart = SpEnt.animationEnd;\r\n\t},\r\n\tonXiPaiFinished: function (event) {\r\n\t\tlet SpEnt =  this.xpAnimation.getComponent(sp.Skeleton).setAnimation(0,\"animation\",false);\r\n\t\tSpEnt.animationStart = SpEnt.animationEnd;\r\n\t\tthis.xpAnimation.active = false;\r\n\t\tthis.Event_SetStart2()\r\n\t},\r\n\tonVsFinished: function (event) {\r\n\t\tlet SpEnt =  this.vsAnimation.getComponent(sp.Skeleton).setAnimation(0,\"animation\",false);\r\n\t\tSpEnt.animationStart = SpEnt.animationEnd;\r\n\t\tthis.vsAnimation.active = false;\r\n\t\tlet state = this.RoomSet.GetRoomSetProperty(\"state\");\r\n\t\tif (this.ShareDefine.SetState_End != state) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.node.getChildByName(\"clock\").active = false\r\n\t\tthis.unschedule(this.timer)\r\n\t\tthis.thanCardResult();\r\n\t},\r\n\r\n\tSelectAni: function (str) {\r\n\t\tlet playerAll = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n\t\tlet playerAllList = Object.keys(playerAll);\r\n\t\tvar playerInfo = null;\r\n\t\tfor (var i = 0; i < playerAllList.length; i++) {\r\n\t\t\tplayerInfo = playerAll[playerAllList[i]];\r\n\t\t\tif (playerInfo.name == \"\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(parseInt(playerAllList[i]));\r\n\r\n\t\t\tif (!playerInfo.isCardReady) {\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos.toString() + \"/sp_card\";\r\n\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\tnode.active = true;\r\n\t\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\t\tif (str == \"faPai\") {\r\n\t\t\t\t\tcards.getComponent(cc.Animation).play(\"faPai\");\r\n\t\t\t\t} else if (str == \"cardEffect\") {\r\n\t\t\t\t\tcards.getComponent(cc.Animation).play(\"cardEffect\");\r\n\t\t\t\t\tcards.getChildByName(\"sp_arrange\").active = true;\r\n\t\t\t\t}\r\n\t\t\t\tlet pid = playerInfo[\"pid\"];\r\n\t\t\t\tif (pid > 0) {\r\n\t\t\t\t\tcards.active = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcards.active = false;\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0; i < cards.children.length - 1; i++) {\r\n\t\t\t\t\tcards.children[i].getChildByName(\"poker_back\").active = true;\r\n\t\t\t\t}\r\n\t\t\t\tcards.children[cards.children.length - 1].active = true;\r\n\t\t\t} else {\r\n\t\t\t\tlet dunNode = this.GetWndNode(\"sp_seat0\" + uiPos + \"/seat_dun/UILSDunCards\");\r\n\t\t\t\tdunNode.active = true;\r\n\t\t\t\tif (playerInfo.pos == this.clientPos) {\r\n\t\t\t\t\tthis.sp_faPai.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tclearHead: function () {\r\n\t\tlet headCom = \"UI\" + app.subGameName.toUpperCase() + \"Head\";\r\n\t\tfor (let idx = 0; idx < 8; idx++) {\r\n\t\t\tlet path = \"sp_seat0\" + idx + \"/head/\" + headCom;\r\n\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\tnode.active = false;\r\n\t\t}\r\n\t},\r\n\r\n\tOnClose: function () {\r\n\t\tthis.unscheduleAllCallbacks();\r\n\t\tthis.clearHead();\r\n\t},\r\n\r\n////////////////////////////////show///////////////////////////////////////////\r\n\tRefreshRoomShow: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tthis.ShowPlayerReady(room);\r\n\t},\r\n\r\n\tHideDunCard: function () {\r\n\t\tfor (let idx = 0; idx < 8; idx++) {\r\n\t\t\tlet path = \"sp_seat0\" + idx + \"/seat_dun\";\r\n\t\t\tlet dunCards = this.GetWndNode(path);\r\n\t\t\tdunCards.active = 0;\r\n\t\t}\r\n\t},\r\n\r\n\tHideCard: function () {\r\n\t\tfor (let idx = 0; idx < 8; idx++) {\r\n\t\t\tlet sp_card = this.GetWndNode(\"sp_seat0\" + idx + \"/sp_card\");\r\n\t\t\tsp_card.active = false;\r\n\t\t}\r\n\t},\r\n\r\n\tHideAllZhunBeiLabel: function () {\r\n\t\tlet playerAll = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n\t\tlet playerAllList = Object.keys(playerAll);\r\n\t\tfor (let i = 0; i < playerAllList.length; i++) {\r\n\t\t\tlet player = playerAll[playerAllList[i]];\r\n\t\t\tlet pid = player[\"pid\"];\r\n\t\t\tif (pid > 0) {\r\n\t\t\t\tlet pos = player[\"pos\"];\r\n\t\t\t\tlet headScript = this.GetUICardComponentByPos(pos);\r\n\t\t\t\tif(!headScript) continue\r\n\t\t\t\theadScript.setReady(false);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tShowOrHideZhunbei: function (pos, isShow) {\r\n\t\tlet headScript = this.GetUICardComponentByPos(pos);\r\n\t\tif(!headScript) return\r\n\t\theadScript.setReady(isShow);\r\n\t},\r\n\r\n\tHidePlayerAllBtn: function () {\r\n\t\tthis.btn_ready.active = false;\r\n\t\tthis.btn_goon.active = false;\r\n\t\tthis.btn_cancel.active = false;\r\n\t\tthis.btn_go.active = false;\r\n\t\tthis.node.getChildByName(\"btn_stand\").active = false;\r\n\t},\r\n\tHideAll: function () {\r\n\t\tthis.HideDunCard();\r\n\t\tthis.HideCard();\r\n\t\tthis.HideAllZhunBeiLabel();\r\n\t\tthis.HidePlayerAllBtn();\r\n\t\t//this.HideDunRewadAll();\r\n\t\tthis.HideAllScoreNode();\r\n\t\tthis.HideAllCardTypeNode();\r\n\t\tthis.HideAllHoles();\r\n\t\t//this.HideZJBeiShu();\r\n\t\tthis.sp_faPai.active = false;\r\n\t\tthis.bg_BeiShu.active = false;\r\n\t\tthis.bg_tips.active = false;\r\n\t\tthis.bankerList.active = false;\r\n\t\tthis.addDouble.active = false;\r\n\t\tthis.btn_color.active = false;\r\n\t\tthis.btn_size.active = false;\r\n\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = \"\";\r\n\t},\r\n\r\n\tHideAllHoles: function () {\r\n\t\t//隐藏所有的洞\r\n\t\tfor (let idx = 0; idx < 8; idx++) {\r\n\t\t\tlet node = this.GetWndNode(\"sp_seat0\" + idx + \"/holes\");\r\n\t\t\tif (node.children.length) {\r\n\t\t\t\tnode.removeAllChildren();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tHideAllScoreNode: function () {\r\n\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\tlet path = \"sp_seat0\" + i + \"/score\";\r\n\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\tif (node) {\r\n\t\t\t\tfor (let j = 0; j < node.children.length; j++) {\r\n\t\t\t\t\tlet child = node.children[j];\r\n\t\t\t\t\tchild.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tGetScoreNode: function (uiPos, tag) {\r\n\t\tlet path = \"sp_seat0\" + uiPos + \"/score/\" + tag;\r\n\t\tlet node = this.GetWndNode(path);\r\n\t\tif (tag == 6) {\r\n\t\t\tlet path2 = \"sp_seat0\" + uiPos + \"/score/4\";\r\n\t\t\tlet node2 = this.GetWndNode(path2);\r\n\t\t\tnode.x = node2.x\r\n\t\t\tnode.y = node2.y\r\n\t\t\tnode.anchorX = 1\r\n\t\t\tfor (let index = 0; index < node.children.length; index++) {\r\n\t\t\t\tconst element = node.children[index];\r\n\t\t\t\telement.x = 5\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn node;\r\n\t},\r\n\r\n\tHideAllCardTypeNode: function () {\r\n\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\tlet path = \"sp_seat0\" + i + \"/allNode/cardType\";\r\n\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\tnode.active = false;\r\n\t\t}\r\n\t},\r\n\r\n\tGetCardTypeNode: function (uiPos) {\r\n\t\tlet path = \"sp_seat0\" + uiPos + \"/allNode/cardType\";\r\n\t\tlet aniNode = this.GetWndNode(path);\r\n\t\treturn aniNode;\r\n\t},\r\n\r\n\tClearAllReadState: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) {\r\n\t\t\tconsole.error(\"ClearAllReadState not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet RoomPosMgr = room.GetRoomPosMgr();\r\n\t\tRoomPosMgr.OnSetEnd(null);\r\n\t},\r\n\r\n\tQiangZhuang: function (idx) {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) {\r\n\t\t\tconsole.error(\"ClearAllReadState not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roomID = room.GetRoomProperty(\"roomID\");\r\n\t\tlet pos = this.RoomPosMgr.GetClientPos();\r\n\t\tthis.RoomMgr.SendBeiShu(roomID, pos, idx);\r\n\t\tthis.bg_BeiShu.active = false;\r\n\t\tthis.bg_tips.active = false;\r\n\t},\r\n\r\n\tOnClick: function (btnName, btnNode) {\r\n\t\tif (btnName == \"btn_go\") {\r\n\t\t\tthis.Click_btn_go();\r\n\t\t} else if (btnName == \"btn_ready\") {\r\n\t\t\t//准备时隐藏观战\r\n\t\t\t// this.node.getChildByName(\"btn_stand\").active = false;\r\n\t\t\tthis.Click_btn_ready();\r\n\t\t\tconsole.log(\"准备\");\r\n\t\t\r\n\t\t} else if (btnName == \"btn_cancel\") {\r\n\t\t\tthis.Click_btn_cancel();\r\n\t\t}else if (btnName == \"btn_size\") {//大小排序\r\n\t\t\tlet state = this.RoomSet.GetRoomSetProperty(\"state\");\r\n\t\t\tlet posList = [];\r\n\t\t\tif (this.QZposList.length > 0) {\r\n\t\t\t\tposList = this.QZposList;\r\n\t\t\t} else if (this.JZposList.length > 0) {\r\n\t\t\t\tposList = this.JZposList;\r\n\t\t\t} else {\r\n\t\t\t\tposList = this.RoomSet.GetRoomSetProperty(\"posInfo\");\r\n\t\t\t}\r\n\t\t\tlet setPosList = this.RoomSet.GetRoomSetProperty(\"setPosList\");\r\n\t\t\tconsole.log(\"房间play状态时 游戏状态\", state);\r\n\t\t\tif (this.ShareDefine.SetState_Hog == state) {//抢庄状态\r\n\t\t\t\t//显示抢庄按钮 判断抢过庄就等待别人\r\n\t\t\t\tthis.SortConfirmBanker(posList, setPosList, true);\r\n\t\t\t} else if (this.ShareDefine.SetState_AddDouble == state) {//加倍状态\r\n\t\t\t\t//显示加倍按钮 判断加倍过就等待别人\r\n\t\t\t\tthis.SortConfirmAddDouble(posList, setPosList, true);\r\n\t\t\t}\r\n\t\t} else if (btnName == \"btn_color\") {//花色排序\r\n\t\t\tlet state = this.RoomSet.GetRoomSetProperty(\"state\");\r\n\t\t\tlet posList = [];\r\n\t\t\tif (this.QZposList.length > 0) {\r\n\t\t\t\tposList = this.QZposList;\r\n\t\t\t} else if (this.JZposList.length > 0) {\r\n\t\t\t\tposList = this.JZposList;\r\n\t\t\t} else {\r\n\t\t\t\tposList = this.RoomSet.GetRoomSetProperty(\"posInfo\");\r\n\t\t\t}\r\n\t\t\tlet setPosList = this.RoomSet.GetRoomSetProperty(\"setPosList\");\r\n\t\t\tconsole.log(\"房间play状态时 游戏状态\", state);\r\n\t\t\tif (this.ShareDefine.SetState_Hog == state) {//抢庄状态\r\n\t\t\t\t//显示抢庄按钮 判断抢过庄就等待别人\r\n\t\t\t\tthis.SortConfirmBanker(posList, setPosList, false);\r\n\t\t\t} else if (this.ShareDefine.SetState_AddDouble == state) {//加倍状态\r\n\t\t\t\t//显示加倍按钮 判断加倍过就等待别人\r\n\t\t\t\tthis.SortConfirmAddDouble(posList, setPosList, false);\r\n\t\t\t}\r\n\t\t} else if (btnName == \"cardTypeBtn\") {\r\n\t\t\tthis.FormManager.ShowOrCloseForm(\"game/SSS/UISSS_CardType\");\r\n\t\t} else if (btnName == \"bg\") {\r\n\t\t\tthis.FormManager.CloseForm(\"game/SSS/UISSS_CardType\");\r\n//            this.FormManager.CloseForm(\"UIChat\");\r\n\t\t} else if (btnName == \"btn_buqiang\") {\r\n\t\t\tthis.QiangZhuang(0);\r\n\t\t} else if (btnName == \"btn_qiang2\") {\r\n\t\t\tthis.QiangZhuang(2);\r\n\t\t} else if (btnName == \"btn_qiang3\") {\r\n\t\t\tthis.QiangZhuang(3);\r\n\t\t} else if (btnName == \"btn_qiang4\") {\r\n\t\t\tthis.QiangZhuang(4);\r\n\t\t}\r\n\t\telse if (btnName == \"btn_jsfj\" || btnName == \"btn_exit\") {\r\n\t\t\t//提示退出房间还是查看大厅\r\n\t\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\t\tlet roomCfg = room.GetRoomConfig();\r\n\t\t\tif (roomCfg.clubId != 0) {\r\n\t\t\t\tthis.node.getChildByName(\"tip_exit_node\").zIndex = 100;\r\n\t\t\t\tthis.node.getChildByName(\"tip_exit_node\").active = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.Click_btn_jiesan();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telse if (btnName == \"btn_close_tip\") {\r\n\t\t\tthis.node.getChildByName(\"tip_exit_node\").active = false;\r\n\t\t}\r\n\t\telse if (btnName == \"btn_exit_room\") {\r\n\t\t\tthis.Click_btn_jiesan();\r\n\t\t}\r\n\t\telse if (btnName == \"btn_go_hall\") {\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame(null, '0');\r\n\t\t}\r\n\r\n\r\n\t\telse if (btnName == \"btn_voice\") {\r\n\r\n\t\t} else if (btnName == \"btn_chat\") {\r\n\t\t\tthis.FormManager.ShowForm(app.subGameName + \"_UIChat\");\r\n\t\t} else if (btnName == \"btn_setting\") {\r\n\t\t\tthis.FormManager.ShowForm(app.subGameName + \"_UISetting02\");\r\n\t\t} else if (btnName == \"btn_goon\") {\r\n\t\t\tthis.Click_btn_goon();\r\n\t\t} else if (btnName.startsWith(\"btn_banker\")) {//抢庄按钮\r\n\t\t\tthis.Click_btn_banker(btnName);\r\n\t\t} else if (btnName.startsWith(\"btn_double\")) {//加倍按钮\r\n\t\t\tthis.Click_btn_addDouble(btnName);\r\n\t\t}else if (btnName == \"btn_guize\") {//打开显示规则\r\n\t\t\tthis.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UILSGameHelp\");\r\n\t\t} else if (btnName == \"btn_refresh\") {//跳过比牌\r\n\t\t\tlet state = this.RoomSet.GetRoomSetProperty(\"state\");\r\n\t\t\tif (this.ShareDefine.SetState_End != state){\r\n\t\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg('当前不是比牌状态', 2);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.unscheduleAllCallbacks()\r\n\t\t\tlet thanCard = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"resultInfo\");\r\n\t\t\tif (!thanCard || !thanCard[\"sRankingResult\"]) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.OnShowGameEndForm(true, thanCard[\"sRankingResult\"]);\r\n\t\t} else if (btnName == \"btn_sit\") {//坐下\r\n\t\t\tconsole.log(\"坐下\");\r\n\t\t\t// this.node.getChildByName(\"btn_stand\").active = false;\r\n\t\t\tlet roomID = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"roomID\");\r\n\t\t\tlet me = this.RoomPosMgr.GetPlayerInfoByPid(this.HeroManager.GetHeroID())\r\n\t\t\tthis.lastPos = me ? me.pos : -1\r\n\t\t\tthis.RoomMgr.SendSelectPosRoom(roomID, -1);\r\n\t\t} else if (btnName == \"btn_stand\") {//站起\r\n\t\t\tconsole.log(\"观战\");\r\n\t\t\tlet roomID = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"roomID\");\r\n\t\t\tlet me = this.RoomPosMgr.GetPlayerInfoByPid(this.HeroManager.GetHeroID())\r\n\t\t\tthis.lastPos = me ? me.pos : -1\r\n\t\t\tthis.RoomMgr.SendSelectPosRoom(roomID, -2);\r\n\t\t}else {\r\n\t\t\tconsole.error(\"OnClick(%s) not find\", btnName);\r\n\t\t}\r\n\t},\r\n\r\n\tClick_btn_ready: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) {\r\n\t\t\tconsole.error(\"Click_btn_ready not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roomID = room.GetRoomProperty(\"roomID\");\r\n\t\tlet clientPos = room.GetRoomPosMgr().GetClientPos();\r\n\t\tconsole.log('发送准备给服务端roomID', roomID, clientPos);\r\n\r\n\t\tapp[app.subGameName + \"_GameManager\"]().SendReady(roomID, clientPos);\r\n\t},\r\n\tClick_btn_cancel: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) {\r\n\t\t\tconsole.error(\"Click_btn_cancel not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roomID = room.GetRoomProperty(\"roomID\");\r\n\t\tlet clientPos = room.GetRoomPosMgr().GetClientPos();\r\n\t\tapp[app.subGameName + \"_GameManager\"]().SendUnReady(roomID, clientPos);\r\n\t},\r\n\r\n\tClick_btn_go: function () {\r\n\t\t//let SceneManager = app[app.subGameName + \"_SceneManager\"]();\r\n\t\tlet roomID = this.RoomMgr.GetEnterRoomID();\r\n\t\tthis.RoomMgr.SendStartRoomGame(roomID);\r\n\r\n\t\t//SceneManager.PlayMusic(\"RoomStart\");\r\n\t},\r\n\t//////////////////////////////////////////////////////////////////////////\r\n\tEvent_Card_Read: function (event) {\r\n\t\tlet allPlayer = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n\t\tfor (let key in allPlayer) {\r\n\t\t\tlet playerInfo = allPlayer[key];\r\n\t\t\tlet pos = playerInfo[\"pos\"];\r\n\t\t\tlet isPlaying = playerInfo[\"isPlaying\"];\r\n\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\tif (!isPlaying) {\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/sp_card\";\r\n\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\tnode.active = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet isReady = event[\"isReady\"];\r\n\t\tlet pos = event[\"pos\"];\r\n\t\tlet isSpecial = event[\"isSpecial\"];\r\n\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\tthis.ClearAllReadState();\r\n\t\tif (isReady) {\r\n\t\t\tlet pathWnd = \"sp_seat0\" + uiPos + \"/seat_dun\";\r\n\t\t\tthis.SetWndProperty(pathWnd, \"active\", true);\r\n\t\t\tlet dunNode = this.GetWndNode(pathWnd + \"/UILSDunCards\");\r\n\t\t\tdunNode.active = true;\r\n\t\t\tlet img_special = dunNode.getChildByName(\"img_special\");\r\n\t\t\timg_special.active = false;\r\n\t\t\tif (isSpecial) {\r\n\t\t\t\timg_special.active = true;\r\n\t\t\t\tthis.SetSpecailProperty(img_special.children[0], 999);\r\n\t\t\t}\r\n\t\t\tdunNode.getComponent(\"UILSDunCards\").startAni()\r\n\t\t\tfor (let j = 0; j < dunNode.children.length; j++) {\r\n\t\t\t\tif(dunNode.children[j].getChildByName(\"poker_back\")){\r\n\t\t\t\t\tdunNode.children[j].getChildByName(\"poker_back\").active = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (pos == this.clientPos) {\r\n\t\t\t\tthis.FormManager.CloseForm(\"game/\" + app.subGameName.toUpperCase() + \"/UIFJSSZRank\");\r\n\t\t\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = this.sp_playState[2];\r\n\t\t\t\tthis.HidePlayerAllBtn();\r\n\t\t\t}\r\n\t\t\tthis.ShowPosPlayState(pos, 1);\r\n\t\t\tlet path = \"sp_seat0\" + uiPos + \"/sp_card\";\r\n\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\tnode.active = false;\r\n\t\t\tthis.HideAllZhunBeiLabel();\r\n\t\t}\r\n\t},\r\n\tGetDownListCard: function (first, second, third) {\r\n\t\tlet dun1 = [];\r\n\t\tlet dun2 = [];\r\n\t\tlet dun3 = [];\r\n\t\tif (first.length == 0) {\r\n\t\t\tlet DUN1 = this.LogicRank.getDunListByType(\"DUN1\");\r\n\t\t\tif (DUN1.length == 0) {\r\n\t\t\t\tlet cardList = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n\t\t\t\treturn cardList;\r\n\t\t\t} else {\r\n\t\t\t\tdun1 = DUN1;\r\n\t\t\t\tdun2 = this.LogicRank.getDunListByType(\"DUN2\");\r\n\t\t\t\tdun3 = this.LogicRank.getDunListByType(\"DUN3\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdun1 = first;\r\n\t\t\tdun2 = second;\r\n\t\t\tdun3 = third;\r\n\t\t}\r\n\r\n\t\tlet downListCard = [];\r\n\t\tlet sort1 = dun1;\r\n\t\tthis.LogicGame.SortCardByMax(dun1);\r\n\t\tlet sort2 = dun2;\r\n\t\tthis.LogicGame.SortCardByMax(dun2);\r\n\t\tlet sort3 = dun3;\r\n\t\tthis.LogicGame.SortCardByMax(dun3);\r\n\t\tfor (let i = 0; i < sort1.length; i++) {\r\n\t\t\tdownListCard.push(sort1[i]);\r\n\t\t}\r\n\t\tfor (let j = 0; j < sort2.length; j++) {\r\n\t\t\tdownListCard.push(sort2[j]);\r\n\t\t}\r\n\t\tfor (let k = 0; k < sort3.length; k++) {\r\n\t\t\tdownListCard.push(sort3[k]);\r\n\t\t}\r\n\t\treturn downListCard;\r\n\t},\r\n\tEvent_PosReadyChg: function (event) {\r\n\t\tthis.RefreshRoomShow();\r\n\t},\r\n\r\n\tEvent_RoomEnd: function (event) {\r\n\t\tconsole.log(\"显示总战绩\");\r\n\t\tthis.ShowDanJuForm();\r\n\t\tthis.HideAll();\r\n\t},\r\n\tShowDanJuForm: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet roomEnd = room.GetRoomProperty(\"roomEnd\");\r\n\t\tif (!roomEnd)  return\r\n\t\tlet record = roomEnd[\"record\"];\r\n\t\tlet players = record[\"players\"];\r\n\t\tlet recordPosInfosList = record[\"recordPosInfosList\"];\r\n\t\tlet ownerID = room.GetRoomProperty(\"ownerID\");\r\n\t\tfor (let i = 0; i < recordPosInfosList.length; i++) {\r\n\t\t\tlet recordPosInfos = recordPosInfosList[i];\r\n\t\t\tlet player = players[i];\r\n\t\t\tif (recordPosInfos[\"pid\"] == player[\"pid\"]) {\r\n\t\t\t\trecordPosInfos[\"name\"] = player[\"name\"];\r\n\t\t\t\trecordPosInfos[\"id\"] = player[\"accountID\"];\r\n\t\t\t}\r\n\t\t\tif (ownerID == recordPosInfos[\"pid\"]) {\r\n\t\t\t\trecordPosInfos[\"isFangZhu\"] = true;\r\n\t\t\t} else {\r\n\t\t\t\trecordPosInfos[\"isFangZhu\"] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//找出大赢家\r\n\t\trecordPosInfosList.sort((a, b) => {\r\n\t\t\treturn b.point - a.point;\r\n\t\t});\r\n\t\tlet max = recordPosInfosList[0].point;\r\n\t\tfor (let j = 0; j < recordPosInfosList.length; j++) {\r\n\t\t\tif (max <= recordPosInfosList[j].point) {\r\n\t\t\t\trecordPosInfosList[j][\"isWin\"] = true;\r\n\t\t\t} else {\r\n\t\t\t\trecordPosInfosList[j][\"isWin\"] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UILSResultDetail\", record);\r\n\t},\r\n\tOnPack_AutoStart: function (event) {\r\n\t\tlet serverPack = event;\r\n\t\tlet roomID = serverPack[\"roomID\"];\r\n\t\tlet pos = serverPack[\"pos\"];\r\n\t\tlet isAuto = serverPack[\"trusteeship\"];\r\n\t\tif (pos == this.RoomPosMgr.GetClientPos()) {\r\n\t\t\tif (isAuto) {\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SetAutoPlayIng(true);\r\n\t\t\t\t// app[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIAutoPlay\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet headScript = this.GetUICardComponentByPos(pos);\r\n\t\theadScript.ShowAutoIcon(isAuto);\r\n\t},\r\n\tEvent_SetStart: function (event) {\r\n\t\tconsole.log(\"游戏开始\", JSON.stringify(event))\r\n\t\tlet maPaiValue = this.RoomSet.GetRoomSetProperty(\"mapai\");\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tthis.kexuanwanfa = room.GetRoomConfigByProperty(\"kexuanwanfa\");\r\n\t\tif (maPaiValue) {\r\n\t\t\tthis.maPai.active = true;\r\n\t\t\tlet child = this.maPai.getChildByName(\"card\");\r\n\t\t\tthis.ShowResultCard(maPaiValue, child);\r\n\t\t}\r\n\t\tif (event && event.setInfo && event.setInfo.isXiPai) {\r\n\t\t\tthis.xpAnimation.active = true;\r\n\t\t\tthis.xpAnimation.getComponent(sp.Skeleton).setAnimation(0,\"animation\",false);\r\n\t\t\tthis.SoundManager.PlaySound(\"sssQiePai\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.Event_SetStart2(event)\r\n\t\t}\r\n\t},\r\n\t//一局开始\r\n\tEvent_SetStart2: function (event) {\r\n\t\tthis.ShowRoomData();\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"SetStart\");\r\n\t\tthis.bAuto = app[app.subGameName + \"_GameManager\"]().IsAutoPlayIng();\r\n\t\tthis.HideAll();\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\t//重置发牌动画\r\n\t\tlet posList = room.GetRoomProperty(\"posList\");\r\n\t\tfor (let idx = 0; idx < posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\tlet isPlaying = posList[idx][\"isPlaying\"];\r\n\t\t\tif (!isPlaying) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlet pos = posList[idx][\"pos\"];\r\n\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\tlet path = \"sp_seat0\" + uiPos.toString() + \"/sp_card\";\r\n\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\tnode.active = true;\r\n\t\t\tlet cards = this.GetWndNode(path + \"/UILSCardEffect\");\r\n\t\t\tlet pid = posList[idx][\"pid\"];\r\n\t\t\tif (pid > 0) {\r\n\t\t\t\tcards.active = true;\r\n\t\t\t\tthis.GetWndProperty(\"sp_seat0\" + uiPos + \"/head\", \"active\", true);\r\n\t\t\t} else {\r\n\t\t\t\tcards.active = false;\r\n\t\t\t\tthis.GetWndProperty(\"sp_seat0\" + uiPos + \"/head\", \"active\", false);\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < cards.children.length - 1; i++) {\r\n\t\t\t\tcards.children[i].getChildByName(\"poker_back\").active = true;\r\n\t\t\t}\r\n\t\t\tcards.children[cards.children.length - 1].active = false;\r\n\t\t\tlet img_special = this.GetWndNode(\"sp_seat0\" + uiPos + \"/seat_dun/UILSDunCards/img_special\");\r\n\t\t\timg_special.active = false;\r\n\t\t\tthis.ShowPosPlayState(pos, 0);\r\n\t\t}\r\n\r\n\t\tif (0 == this.moshi) {\r\n\t\t\tthis.PlayStartAnimation();\r\n\t\t} else {\r\n\t\t\tlet self = this;\r\n\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\tself.sp_faPai.active = false;\r\n\t\t\t\tself.SelectAni(\"cardEffect\");\r\n\t\t\t\tif (!this.bAuto) {\r\n\t\t\t\t\tif (this.RoomSet.GetRoomSetProperty(\"isPlaying\")) {\r\n\t\t\t\t\t\tlet allPlayer = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n\t\t\t\t\t\tfor (let key in allPlayer) {\r\n\t\t\t\t\t\t\tlet playerInfo = allPlayer[key];\r\n\t\t\t\t\t\t\tlet pos = playerInfo[\"pos\"];\r\n\t\t\t\t\t\t\tlet isPlaying = playerInfo[\"isPlaying\"];\r\n\t\t\t\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\t\t\t\tif (!isPlaying) {\r\n\t\t\t\t\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/sp_card\";\r\n\t\t\t\t\t\t\t\tlet node = this.GetWndNode(path);\r\n\t\t\t\t\t\t\t\tnode.active = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UIFJSSZRank\");\r\n\t\t\t\t\t\tthis.ShowPosPlayState(this.clientPos, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 0.36);\r\n\t\t}\r\n\t},\r\n\r\n\tEvent_Beishu: function (event) {\r\n\t\tconsole.log(\"Event_Beishu\", event);\r\n\t\tthis.HidePlayerAllBtn();\r\n\t\t//如果托管，默认为不抢\r\n\t\tif (app[app.subGameName + \"_GameManager\"]().IsAutoPlayIng()) {\r\n\t\t\tthis.QiangZhuang(0);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.bg_BeiShu.active = true;\r\n\t\tthis.bg_tips.active = true;\r\n\t\tthis.count = 10;\r\n\t\tthis.bg_tips.getChildByName(\"label\").getComponent(cc.Label).string = this.count;\r\n\t\tthis.schedule(this.timeCallback, 1);\r\n\t},\r\n\r\n\ttimeCallback: function () {\r\n\t\tthis.count--;\r\n\t\tthis.bg_tips.getChildByName(\"label\").getComponent(cc.Label).string = this.count;\r\n\t\tif (this.count <= 0) {\r\n\t\t\tthis.unschedule(this.timeCallback);\r\n\t\t\tthis.bg_BeiShu.active = false;\r\n\t\t\tthis.bg_tips.active = false;\r\n\t\t}\r\n\t},\r\n\r\n\tEvent_ZJBeishu: function (event) {\r\n\t\tconsole.log(\"显示庄家 Event_ZJBeishu\", event);\r\n\t\tthis.HideZJBeiShu();\r\n\t\tthis.HideAllPlayState();\r\n\t\tlet data = event;\r\n\t\tlet pos = data[\"posID\"];\r\n\t\tlet beiShu = data[\"beiShu\"];\r\n\t\tlet player = this.RoomPosMgr.GetPlayerInfoByPos(pos);\r\n\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg('SSS_QIANGZHUANG_BEISHU', [player[\"name\"], beiShu]);\r\n\t\tthis.ShowZJBeiShu(pos, beiShu, true);\r\n\t\tthis.ShowOrHidePosZhuangJia(pos, true);\r\n\t\tif (pos == this.clientPos) {\r\n\t\t\tthis.bg_BeiShu.active = false;\r\n\t\t\tthis.bg_tips.active = false;\r\n\t\t}\r\n\t},\r\n\t//显示加倍倍数\r\n\tEvent_YaZhuBeiShu: function (event) {\r\n\t\tconsole.log(\"显示加倍倍数 Event_YaZhuBeiShu\", event);\r\n\t\tlet data = event;\r\n\t\tlet pos = data[\"posID\"];\r\n\t\tlet beiShu = data[\"beiShu\"];\r\n\t\tthis.ShowZJBeiShu(pos, beiShu, true);\r\n\t},\r\n\tEvent_QiangZhuangBeiShu: function (event) {\r\n\t\tconsole.log(\"Event_QiangZhuangBeiShu\", event);\r\n\t\tlet data = event;\r\n\t\tlet pos = data[\"posID\"];\r\n\t\tlet beiShu = data[\"beiShu\"];\r\n\t\tthis.ShowZJBeiShu(pos, beiShu);\r\n\t\tif (pos == this.clientPos) {\r\n\t\t\tthis.bg_BeiShu.active = false;\r\n\t\t\tthis.bg_tips.active = false;\r\n\t\t}\r\n\t},\r\n\tEvent_CodeError: function (event) {\r\n\t\tlet argDict = event;\r\n\t\tlet code = argDict[\"Code\"];\r\n\t\tif (code == this.ShareDefine.SportsPointNotEnough) {\r\n\t\t\tthis.SetWaitForConfirm(\"SportsPointNotEnough\", this.ShareDefine.ConfirmYN, []);\r\n\t\t} else if (code == this.ShareDefine.NotAllow) {\r\n\r\n\t\t}\r\n\t},\r\n\tEvent_SportsPointEnough: function (event) {\r\n\t\tlet msg = event.msg;\r\n\t\tthis.poChanMsg = msg\r\n\t\t// this.SetWaitForConfirm(\"SportsPointEnough\", this.ShareDefine.ConfirmOK, [msg]);\r\n\t},\r\n\tEvent_SportsPointNotEnough: function (event) {\r\n\t\tlet msg = event.msg;\r\n\t\t// this.SetWaitForConfirm(\"SportsPointNotEnough\", this.ShareDefine.ConfirmYN, []);\r\n\t},\r\n\tEvent_UIAutoPlay: function (event) {\r\n\t\tapp[app.subGameName + \"_GameManager\"]().SetAutoPlayIng(true);\r\n\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIAutoPlay\");\r\n\t},\r\n\r\n\tHideZJBeiShu: function () {\r\n\t\tlet playerAll = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n\t\tlet playerAllList = Object.keys(playerAll);\r\n\t\tvar playerInfo = null;\r\n\t\tfor (var i = 0; i < playerAllList.length; i++) {\r\n\t\t\tplayerInfo = playerAll[playerAllList[i]];\r\n\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(playerInfo[\"pos\"]);\r\n\t\t\tlet otherNode = this.GetWndNode(\"sp_seat0\" + uiPos + \"/head/UI\" + app.subGameName.toUpperCase() + \"Head/otherNode/bsPrefab\");\r\n\t\t\tif (otherNode) {\r\n\t\t\t\totherNode.active = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tHideAllPlayState: function () {\r\n\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\tlet path = \"sp_seat0\" + i + \"/head/UI\" + app.subGameName.toUpperCase() + \"Head/\";\r\n\t\t\tlet stateNode = this.GetWndNode(path + \"touxiang/sp_state\");\r\n\t\t\tstateNode.getComponent(cc.Sprite).spriteFrame = \"\";\r\n\t\t}\r\n\t},\r\n\r\n\tShowZJBeiShu: function (pos, beishu, isShowIcon = false) {//是否显示抢庄图标\r\n\t\tif (pos > -1) {\r\n\t\t\tif (!isShowIcon) {\r\n\t\t\t\tthis.ShowPosPlayStateByQZ(pos, beishu);\r\n\t\t\t}\r\n\t\t\tif (beishu > 0) {\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);\r\n\t\t\t\tlet otherNode = this.GetWndNode(\"sp_seat0\" + uiPos + \"/head/UI\" + app.subGameName.toUpperCase() + \"Head/otherNode/bsPrefab\");\r\n\t\t\t\totherNode.active = true;\r\n\t\t\t\totherNode.getComponent(cc.Label).string = beishu + \"倍\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tShowOrHidePosZhuangJia: function (pos, isShow) {\r\n\t\tlet headScript = this.GetUICardComponentByPos(pos);\r\n\t\tif (!headScript) return\r\n\t\theadScript.ShowOrHideZhuangJia(isShow);\r\n\t},\r\n\tShowPosPlayStateByQZ: function (pos, beishu) {\r\n\t\tlet headScript = this.GetUICardComponentByPos(pos);\r\n\t\tif (!headScript) return\r\n\t\theadScript.ShowPlayStateByQZ(beishu);\r\n\t},\r\n\tShowPosPlayState: function (pos, state) {\r\n\t\tlet headScript = this.GetUICardComponentByPos(pos);\r\n\t\tif (!headScript) return\r\n\t\theadScript.ShowPlayState(state);\r\n\t},\r\n\t//-----------------回调函数------------------------\r\n\tEvent_ChatMessage: function (event) {\r\n\t\tlet argDict = event;\r\n\t\tlet senderPid = argDict[\"senderPid\"];\r\n\t\tlet quickID = parseInt(argDict[\"quickID\"]);\r\n\t\tlet content = argDict[\"content\"];\r\n\r\n\t\tlet playerList = this.RoomMgr.GetEnterRoom().GetRoomPosMgr().GetRoomAllPlayerInfo();\r\n\t\tlet playerListKey = Object.keys(playerList);\r\n\t\tlet initiatorPos = \"\";\r\n\t\tfor (let i = 0; i < playerListKey.length; i++) {\r\n\t\t\tlet player = playerList[playerListKey[i]];\r\n\t\t\tlet pid = player[\"pid\"];\r\n\t\t\tif (senderPid == pid) {\r\n\t\t\t\tinitiatorPos = parseInt(i);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet playerSex = this.InitHeroSex(initiatorPos);\r\n\t\tlet soundName = \"\";\r\n\t\tlet path = \"\";\r\n\t\tif (quickID < 101) {\r\n\t\t\tswitch (quickID) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringBieChao\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_1\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringBieZou\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_2\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringZhaoHu\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_3\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringZanLi\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_4\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringZanShang\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_5\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 6:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringCuiCu\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_6\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 7:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringKuaJiang\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_7\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 8:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringDaShang\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_8\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 9:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringLiKai\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_9\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 10:\r\n\t\t\t\t\tcontent = app.i18n.t(\"UIVoiceStringYanChi\");\r\n\t\t\t\t\tsoundName = [playerSex, \"_FastVoice_10\"].join(\"\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.error(\"Event_chatmessage not find(%s)\", quickID);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tswitch (quickID) {\r\n\t\t\t\tcase 101:\r\n\t\t\t\t\tpath = \"face1Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 102:\r\n\t\t\t\t\tpath = \"face2Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 103:\r\n\t\t\t\t\tpath = \"face3Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 104:\r\n\t\t\t\t\tpath = \"face4Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 105:\r\n\t\t\t\t\tpath = \"face5Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 106:\r\n\t\t\t\t\tpath = \"face6Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 107:\r\n\t\t\t\t\tpath = \"face7Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 108:\r\n\t\t\t\t\tpath = \"face8Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 109:\r\n\t\t\t\t\tpath = \"face9Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 110:\r\n\t\t\t\t\tpath = \"face10Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 111:\r\n\t\t\t\t\tpath = \"face11Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 112:\r\n\t\t\t\t\tpath = \"face12Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 113:\r\n\t\t\t\t\tpath = \"face13Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 114:\r\n\t\t\t\t\tpath = \"face14Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 115:\r\n\t\t\t\t\tpath = \"face15Action\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.error(\"Event_chatmessage not find(%s)\", quickID);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.SoundManager.PlaySound(soundName);\r\n\t\t//敏感词汇替换\r\n\t\tcontent = this.UtilsWord.CheckContentDirty(content);\r\n\t\tlet headScript = this.GetUICardComponentByPos(initiatorPos);\r\n\t\tif (content == \"\") {\r\n\t\t\theadScript.ShowFaceContent(path);\r\n\t\t} else {\r\n\t\t\theadScript.ShowChatContent(content);\r\n\t\t}\r\n\t},\r\n\r\n\tInitHeroSex: function (pos) {\r\n\t\tlet RoomPosMgr = this.RoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n\t\tlet player = RoomPosMgr.GetPlayerInfoByPos(pos);\r\n\t\tlet Sex = player[\"sex\"];\r\n\t\tlet playerSex = \"\";\r\n\t\tif (Sex == this.ShareDefine.HeroSex_Boy) {\r\n\t\t\tplayerSex = \"boy\";\r\n\t\t} else if (Sex == this.ShareDefine.HeroSex_Girl) {\r\n\t\t\tplayerSex = \"girl\";\r\n\t\t}\r\n\t\treturn playerSex;\r\n\t},\r\n\t//继续游戏\r\n\tEvent_PosContinueGame: function (event) {\r\n\t\tlet argDict = event;\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) {\r\n\t\t\tconsole.error(\"Event_PosContinueGame not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.ShowPosPlayState(argDict[\"pos\"], \"\");\r\n\t\tlet RoomPosMgr = room.GetRoomPosMgr();\r\n\t\tlet clientPos = RoomPosMgr.GetClientPos();\r\n\t\tif (argDict[\"pos\"] != clientPos) {\r\n\t\t\tlet clientPlayerInfo = RoomPosMgr.GetPlayerInfoByPos(clientPos);\r\n\t\t\t// //如果玩家已经继续了,需要渲染其他人的状态\r\n\t\t\tif (!clientPlayerInfo[\"gameReady\"]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {//如果是自己准备就清理界面\r\n\t\t\tthis.HidePlayerAllBtn();\r\n\t\t}\r\n\t},\r\n\r\n\t//位置更新\r\n\tEvent_PosUpdate: function (event) {\r\n\t\tlet roomSetID = this.Room.GetRoomProperty(\"setID\");\r\n\t\tlet serverPack = event;\r\n\t\tserverPack[\"isShowNode\"] = roomSetID > 0;\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"Head_PosUpdate\", serverPack);\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet roomState = room.GetRoomProperty(\"state\");\r\n\t\tif (this.ShareDefine.RoomState_Playing == roomState) {\r\n\t\t\tthis.btn_ready.active = false;\r\n\t\t}\r\n\t\tconsole.log(\"位置更新\", roomState, this.ShareDefine[\"Room\"]);\r\n\r\n\t\tthis.updateLookInfo()\r\n\t\tif (event.posInfo.pid == this.HeroManager.GetHeroID() && this.lastPos != event.posInfo.pos) {\r\n\t\t\tthis.OnShow()\r\n\t\t}\r\n\t\tthis.RefreshRoomShow();\r\n\t},\r\n\t//所有位置位置更新\r\n\tEvent_AllPosUpdate: function (event) {\r\n\t\tthis.AddHead();\r\n\t\tthis.clientPos = parseInt(this.RoomPosMgr.GetClientPos());\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet roomState = room.GetRoomProperty(\"state\");\r\n\t\tlet state = this.RoomSet.GetRoomSetProperty(\"state\");\r\n\t\tif (this.ShareDefine.RoomState_Playing == roomState ||\r\n\t\t\tthis.ShareDefine.SetState_Hog == state ||\r\n\t\t\tthis.ShareDefine.SetState_AddDouble == state ||\r\n\t\t\tthis.ShareDefine.SetState_Playing == state) {\r\n\t\t\tthis.btn_ready.active = false;\r\n\t\t}\r\n\t\tlet roomSetID = this.Room.GetRoomProperty(\"setID\");\r\n\t\tlet serverPack = event;\r\n\t\tserverPack[\"isShowNode\"] = roomSetID > 0;\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"Head_PosUpdate\", serverPack);\r\n\t\tthis.updateLookInfo()\r\n\t},\r\n\t//位置离开\r\n\tEvent_PosLeave: function (event) {\r\n\t\t// this.ShowWeiXinYaoQing();\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) {\r\n\t\t\tconsole.error(\"Event_PosLeave not enter room\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet roomSetID = this.Room.GetRoomProperty(\"setID\");\r\n\t\tlet serverPack = event;\r\n\t\tserverPack[\"isShowNode\"] = roomSetID > 0;\r\n\t\tlet pos = serverPack[\"pos\"];\r\n\t\t//如果是客户端自己，返回大厅\r\n\t\tlet roomPosMgr = this.RoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n\t\tlet pos2 = roomPosMgr.posId\r\n\t\tif (!serverPack[\"beKick\"] && (this.clientPos == pos || pos2 == pos)) {\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"Head_PosLeave\", serverPack);\r\n\t\t//如果是客户端玩家并且是被T了\r\n\t\tif (serverPack[\"beKick\"] && (this.clientPos == pos || pos2 == pos)) {\r\n\t\t\tif (serverPack[\"kickOutTYpe\"] == 2) {\r\n\t\t\t\tthis.SetWaitForConfirm(\"MSG_BeKick\", this.ShareDefine.ConfirmOK, [serverPack[\"msg\"]]);\r\n\t\t\t} else {\r\n\t\t\t\tthis.SetWaitForConfirm(\"UIPlay_BeKick\", this.ShareDefine.ConfirmOK);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.RefreshRoomShow();\r\n\t\tlet roomState = room.GetRoomProperty(\"state\");\r\n\t\tif (this.ShareDefine.RoomState_Playing == roomState) {\r\n\t\t\tthis.btn_ready.active = false;\r\n\t\t}\r\n\t\tconsole.log(\"位置离开\", roomState, this.ShareDefine[\"Room\"]);\r\n\t},\r\n\r\n\t//局结束\r\n\tEvent_SetEnd: function (event) {\r\n\t\tconsole.log(\"局结束 Event_SetEnd\", event);\r\n\t},\r\n\r\n\t//房间解散\r\n\tEvent_DissolveRoom: function (event) {\r\n\r\n\t\tlet argDict = event;\r\n\t\tlet ownnerForce = argDict[\"ownnerForce\"];\r\n\t\tif (this.needDelayDiss && this.unionId && this.unionId > 0) {\r\n\t\t\tthis.cacheMessage = event\r\n\t\t\treturn\r\n\t\t}\r\n\t\t//未开启房间游戏时才会触发\r\n\t\tif (ownnerForce) {\r\n\t\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\t\t//如果是房主主动接撒直接退出\r\n\t\t\tif (room && room.IsClientIsOwner()) {\r\n\t\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t\t} else {\r\n\t\t\t\tthis.SetWaitForConfirm(\"OwnnerForceRoom\", this.ShareDefine.ConfirmOK);\r\n\t\t\t}\r\n\t\t} else if (event.dissolveNoticeType == 1) {\r\n\t\t\tthis.SetWaitForConfirm('SportsPointDissolveRoom', this.ShareDefine.ConfirmOK, [event.msg]);\r\n\t\t} else if (event.dissolveNoticeType == 3) {\r\n\t\t\tthis.SetWaitForConfirm('MSG_BeDissolve', this.ShareDefine.ConfirmOK, [event.msg]);\r\n\t\t} else {\r\n\t\t\tlet state = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"state\");\r\n\t\t\t//如果没有打完一局不会下发roomend,直接显示2次弹框\r\n\t\t\tif (state != this.ShareDefine.SetState_End) {\r\n\t\t\t\tthis.SetWaitForConfirm(\"DissolveRoom\", this.ShareDefine.ConfirmOK);\r\n\t\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessage02\");\r\n\t\t\t}\r\n\t\t\t//如果有roomend数据显示 结果界面\r\n\t\t\telse {\r\n\t\t\t\t//抢庄押注时解散房间\r\n\t\t\t\tthis.ShowDanJuForm();\r\n\t\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessage02\");\r\n\t\t\t\tthis.FormManager.CloseForm(\"game/\" + app.subGameName.toUpperCase() + \"/UIFJSSZRank\");\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//收到解散房间\r\n\tEvent_StartVoteDissolve: function (event) {\r\n\t\tthis.FormManager.ShowForm(app.subGameName + \"_UIMessage02\");\r\n\t\t//this.HideAll();\r\n\t},\r\n\t//收到却换人数\r\n\tEvent_ChangePlayerNum: function (event) {\r\n\t\tthis.FormManager.ShowForm(app.subGameName + \"_UIMessage03\");\r\n\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessage\");\r\n\t},\r\n\t//比牌处理\r\n\tEvent_RankingResult: function (event) {\r\n\t\tlet playerSex = this.InitHeroSex(this.clientPos);\r\n\t\tlet soundName = playerSex + \"17StartBiPai\";\r\n\t\tthis.SoundManager.PlaySound(soundName);\r\n\t\tthis.sp_state.getComponent(cc.Sprite).spriteFrame = \"\";\r\n\t\tthis.vsAnimation.active = true;\r\n\t\tthis.vsAnimation.getComponent(sp.Skeleton).setAnimation(0,\"animation\",false);\r\n\t\tthis.needDelayDiss = true\r\n\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\tlet path = \"sp_seat0\" + i + \"/seat_dun/UILSDunCards\";\r\n\t\t\tlet dunCards = this.GetWndNode(path);\r\n\t\t\tif(!dunCards) continue;\r\n\t\t\tdunCards.getComponent(\"UILSDunCards\").stopWaitAnim()\r\n\t\t}\r\n\t\tthis.unschedule(this.timer)\r\n\t\tthis.node.getChildByName(\"clock\").active = false\r\n\t},\r\n\tthanCardResult: function () {\r\n\t\tlet thanCard = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"resultInfo\");\r\n\t\tlet rankeds = thanCard.sRankingResult.rankeds;      //所有人的牌\r\n\r\n\t\tlet spacialCard = thanCard.sRankingResult.specialPockerCard; //特殊牌型\r\n\r\n\t\tif (this.kexuanwanfa.length > 0) {\r\n\t\t\tif (this.kexuanwanfa.indexOf(2) > -1) {\r\n\t\t\t\tthis.OnShowGameEndForm(true, thanCard[\"sRankingResult\"]);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//八个人\r\n\t\t\tif (rankeds.length == 8) {\r\n\t\t\t\tif (spacialCard.length < 7) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//七个人\r\n\t\t\telse if (rankeds.length == 7) {\r\n\t\t\t\tif (spacialCard.length < 6) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//六个人\r\n\t\t\telse if (rankeds.length == 6) {\r\n\t\t\t\tif (spacialCard.length < 5) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//五个人\r\n\t\t\telse if (rankeds.length == 5) {\r\n\t\t\t\tif (spacialCard.length < 4) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//四个人\r\n\t\t\telse if (rankeds.length == 4) {\r\n\t\t\t\tif (spacialCard.length < 3) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//三个人\r\n\t\t\telse if (rankeds.length == 3) {\r\n\t\t\t\tif (spacialCard.length < 2) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//俩个人\r\n\t\t\telse if (rankeds.length == 2) {\r\n\t\t\t\tif (spacialCard.length) {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//八个人\r\n\t\t\tif (rankeds.length == 8) {\r\n\t\t\t\tif (spacialCard.length < 7) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//七个人\r\n\t\t\telse if (rankeds.length == 7) {\r\n\t\t\t\tif (spacialCard.length < 6) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//六个人\r\n\t\t\telse if (rankeds.length == 6) {\r\n\t\t\t\tif (spacialCard.length < 5) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//五个人\r\n\t\t\telse if (rankeds.length == 5) {\r\n\t\t\t\tif (spacialCard.length < 4) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//四个人\r\n\t\t\telse if (rankeds.length == 4) {\r\n\t\t\t\tif (spacialCard.length < 3) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//三个人\r\n\t\t\telse if (rankeds.length == 3) {\r\n\t\t\t\tif (spacialCard.length < 2) {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//俩个人\r\n\t\t\telse if (rankeds.length == 2) {\r\n\t\t\t\tif (spacialCard.length) {\r\n\t\t\t\t\tthis.ShowResultSpacial(thanCard.sRankingResult);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ShowResultNormal(thanCard.sRankingResult, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsortFun: function (a, b) {\r\n\t\treturn a.posIdx - b.posIdx;\r\n\t},\r\n\r\n\tsortFunByShui: function (a, b) {\r\n\t\tif (\"protoShui\" in a && \"protoShui\" in b) {\r\n\t\t\treturn a.protoShui - b.protoShui;\r\n\t\t}\r\n\t\treturn a.shui - b.shui;\r\n\t},\r\n\r\n\tsortFunByCardType: function (a, b) {\r\n\t\treturn a.card - b.card;\r\n\t},\r\n\tShowResultNormal: function (sRankingResult, isQuick) {\r\n\r\n\t\t//显示自己的分数\r\n\t\tif (this.RoomSet.GetRoomSetProperty(\"isPlaying\")) {\r\n\t\t}\r\n\t\tlet cardResult1 = sRankingResult.pCardResult1; //第一墩比较结果\r\n\t\tlet cardResult2 = sRankingResult.pCardResult2; //第二墩比较结果\r\n\t\tlet cardResult3 = sRankingResult.pCardResult3; //第三墩比较结果\r\n\t\tif (cardResult1 && cardResult1.length) {\r\n\t\t\tcardResult1.sort(this.sortFunByShui);\r\n\t\t}\r\n\t\tif (cardResult2 && cardResult2.length) {\r\n\t\t\tcardResult2.sort(this.sortFunByShui);\r\n\t\t}\r\n\t\tif (cardResult3 && cardResult3.length) {\r\n\t\t\tcardResult3.sort(this.sortFunByShui);\r\n\t\t}\r\n\t\tlet cardType1 = sRankingResult.pCard1;      //牌型1\r\n\t\tlet cardType2 = sRankingResult.pCard2;      //牌型2\r\n\t\tlet cardType3 = sRankingResult.pCard3;      //牌型3\r\n\r\n\t\tlet spacialCard = sRankingResult.specialPockerCard; //特殊牌型\r\n\r\n\t\tlet gunFire = sRankingResult.killRankins;    //打枪\r\n\r\n\t\tlet simPlayerResult = sRankingResult.simPlayerResult; //前三墩比牌结果\r\n\r\n\t\tlet fourbagger = sRankingResult.fourbagger; //全垒打\r\n\r\n\t\tlet simResults = sRankingResult.simResults; //前三墩结果加打枪结果和全垒打结果\r\n\r\n\t\tlet rankeds = sRankingResult.rankeds;      //所有人的牌\r\n\r\n\t\tlet playerResults = sRankingResult.posResultList; //所有比牌总结果\r\n\r\n\t\tlet list1 = [];\r\n\t\tlet list2 = [];\r\n\t\tlet list3 = [];\r\n\t\tif (sRankingResult.zjid != 0) {\r\n\t\t\tcardType1.sort(this.sortFunByCardType);\r\n\t\t\tcardType2.sort(this.sortFunByCardType);\r\n\t\t\tcardType3.sort(this.sortFunByCardType);\r\n\t\t\tlet zhuangjia = {};\r\n\t\t\tlet func = function (list, cardType) {\r\n\t\t\t\tfor (let i = 0; i < cardType.length; i++) {\r\n\t\t\t\t\tif (cardType[i].pid == sRankingResult.zjid) {\r\n\t\t\t\t\t\tzhuangjia = cardType[i];\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.push(cardType[i]);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t//将庄家放到最后开牌\r\n\t\t\tfunc(list1, cardType1);\r\n\t\t\tlist1.push(zhuangjia);\r\n\t\t\tfunc(list2, cardType2);\r\n\t\t\tlist2.push(zhuangjia);\r\n\t\t\tfunc(list3, cardType3);\r\n\t\t\tlist3.push(zhuangjia);\r\n\t\t} else {\r\n\t\t\tlist1 = cardResult1;\r\n\t\t\tlist2 = cardResult2;\r\n\t\t\tlist3 = cardResult3;\r\n\t\t}\r\n\r\n\t\tlet timer = 0;\r\n\t\tlet self = this;\r\n\t\tfor (let playerIdx = 0; playerIdx < list1.length; playerIdx++) {\r\n\t\t\t//如果当前玩家是特殊牌 继续显示牌背\r\n\t\t\tlet isSpacial = false;\r\n\t\t\tfor (let idx = 0; idx < spacialCard.length; idx++) {\r\n\t\t\t\tif (spacialCard[idx].posIdx == list1[playerIdx].posIdx) {\r\n\t\t\t\t\tisSpacial = true;\r\n\t\t\t\t\t//如果自己为特殊牌 不显示分数\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (isSpacial) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\ttimer += 0.55;\r\n\t\t\t//开始第一墩的比牌\r\n\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\t//to do\r\n\t\t\t\tlet uiPos = self.RoomPosMgr.GetUIPosByDataPos(list1[playerIdx].posIdx);    //玩家位置\r\n\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/seat_dun/UILSDunCards\";\r\n\t\t\t\tlet dunCards = self.GetWndNode(path);\r\n\r\n\t\t\t\tlet playerDunInfo = {};\r\n\t\t\t\tfor (let idx = 0; idx < rankeds.length; idx++) {\r\n\t\t\t\t\tif (rankeds[idx].posIdx == list1[playerIdx].posIdx) {\r\n\t\t\t\t\t\tplayerDunInfo = rankeds[idx].dunPos;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//第一墩\r\n\t\t\t\tfor (let cardIdx = 1; cardIdx < 4; cardIdx++) {\r\n\t\t\t\t\t//获取牌型\r\n\t\t\t\t\tlet cardType = playerDunInfo.first[cardIdx - 1];\r\n\t\t\t\t\tlet child = dunCards.getChildByName(\"dun_card\" + cardIdx);\r\n\t\t\t\t\tself.ShowResultCard(cardType,child)\r\n\t\t\t\t}\r\n\t\t\t\tdunCards.getComponent(\"UILSDunCards\").fanPaiAction(0)\r\n\t\t\t\t//显示牌型\r\n\t\t\t\tfor (let idx = 0; idx < cardType1.length; idx++) {\r\n\t\t\t\t\tif (cardType1[idx].posIdx == list1[playerIdx].posIdx) {\r\n\t\t\t\t\t\tlet aniNode = this.GetCardTypeNode(uiPos);\r\n\t\t\t\t\t\taniNode.active = 1;\r\n\t\t\t\t\t\taniNode.getChildByName(\"num\").getComponent(cc.Label).string = self.Type[(cardType1[idx].card).toString()];\r\n\t\t\t\t\t\t//音效\r\n\t\t\t\t\t\tlet pos = list1[playerIdx][\"posIdx\"];\r\n\t\t\t\t\t\tlet sex = self.InitHeroSex(pos);\r\n\t\t\t\t\t\tlet soundName = sex + \"17CardType\" + cardType1[idx][\"card\"];\r\n\t\t\t\t\t\tself.SoundManager.PlaySound(soundName);\r\n\t\t\t\t\t\taniNode.getComponent(cc.Animation).play();\r\n\t\t\t\t\t\tconsole.log(\"第一墩牌\", list1[playerIdx], cardType1[idx][\"card\"], self.Type[(cardType1[idx][\"card\"])], cardType1[idx][\"cards\"]);\r\n\t\t\t\t\t\tdunCards.getComponent(\"UILSDunCards\").showCardType(0, cardType1[idx][\"card\"])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let idx = 0; idx < cardResult1.length; idx++) {\r\n\t\t\t\t\tif (cardResult1[idx].posIdx == list1[playerIdx].posIdx) {\r\n\t\t\t\t\t\t//显示分数\r\n\t\t\t\t\t\tlet scoreNode = this.GetScoreNode(uiPos, 1);\r\n\t\t\t\t\t\tscoreNode.active = true;\r\n\t\t\t\t\t\tlet baseShui = cardResult1[idx][\"baseShui\"];\r\n\t\t\t\t\t\tlet extraShui = cardResult1[idx][\"extraShui\"];\r\n\t\t\t\t\t\tbaseShui += extraShui\r\n\t\t\t\t\t\tbaseShui = cardResult1[idx][\"protoShui\"];\r\n\t\t\t\t\t\tif (baseShui > 0) {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = true;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = false;\r\n\t\t\t\t\t\t\tself.showLabel(scoreNode.getChildByName(\"score_win\"), baseShui);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = false;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = true;\r\n\t\t\t\t\t\t\tself.showLabel(scoreNode.getChildByName(\"score_lose\"), baseShui);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, timer);\r\n\t\t}\r\n\r\n\t\tfor (let playerIdx = 0; playerIdx < list2.length; playerIdx++) {\r\n\t\t\t//如果当前玩家是特殊牌 继续显示牌背\r\n\t\t\tlet isSpacial = false;\r\n\t\t\tfor (let idx = 0; idx < spacialCard.length; idx++) {\r\n\t\t\t\tif (spacialCard[idx].posIdx == list2[playerIdx].posIdx) {\r\n\t\t\t\t\tisSpacial = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (isSpacial) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\ttimer += 0.55;\r\n\t\t\t//开始第二墩比牌\r\n\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\t//to do\r\n\t\t\t\tlet uiPos = self.RoomPosMgr.GetUIPosByDataPos(list2[playerIdx].posIdx);    //玩家位置\r\n\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/seat_dun/UILSDunCards\";\r\n\t\t\t\tlet dunCards = self.GetWndNode(path);\r\n\r\n\t\t\t\tlet playerDunInfo = {};\r\n\t\t\t\tfor (let idx = 0; idx < rankeds.length; idx++) {\r\n\t\t\t\t\tif (rankeds[idx].posIdx == list2[playerIdx].posIdx) {\r\n\t\t\t\t\t\tplayerDunInfo = rankeds[idx].dunPos;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//第二墩\r\n\t\t\t\tfor (let cardIdx = 4; cardIdx < 9; cardIdx++) {\r\n\t\t\t\t\t//获取牌型\r\n\t\t\t\t\tlet cardType = playerDunInfo.second[cardIdx - 4];\r\n\t\t\t\t\tlet child = dunCards.getChildByName(\"dun_card\" + cardIdx);\r\n\t\t\t\t\tself.ShowResultCard(cardType,child)\r\n\t\t\t\t}\r\n\t\t\t\tdunCards.getComponent(\"UILSDunCards\").fanPaiAction(1)\r\n\t\t\t\t//显示牌型\r\n\t\t\t\tfor (let idx = 0; idx < cardType2.length; idx++) {\r\n\t\t\t\t\tif (cardType2[idx].posIdx == list2[playerIdx].posIdx) {\r\n\t\t\t\t\t\tlet aniNode = this.GetCardTypeNode(uiPos);\r\n\t\t\t\t\t\taniNode.active = 1;\r\n\t\t\t\t\t\taniNode.getChildByName(\"num\").getComponent(cc.Label).string = self.Type[(cardType2[idx].card).toString()];\r\n\t\t\t\t\t\t//音效\r\n\t\t\t\t\t\tlet pos = list2[playerIdx][\"posIdx\"];\r\n\t\t\t\t\t\tlet sex = self.InitHeroSex(pos);\r\n\t\t\t\t\t\tlet soundName = sex + \"17CardType\" + cardType2[idx][\"card\"];\r\n\t\t\t\t\t\tself.SoundManager.PlaySound(soundName);\r\n\t\t\t\t\t\taniNode.getComponent(cc.Animation).play();\r\n\t\t\t\t\t\tconsole.log(\"第二墩牌\", list2[playerIdx], cardType2[idx][\"card\"], self.Type[(cardType2[idx][\"card\"])], cardType2[idx][\"cards\"]);\r\n\t\t\t\t\t\tdunCards.getComponent(\"UILSDunCards\").showCardType(1, cardType2[idx][\"card\"])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let idx = 0; idx < cardResult2.length; idx++) {\r\n\t\t\t\t\tif (cardResult2[idx].posIdx == list2[playerIdx].posIdx) {\r\n\t\t\t\t\t\t//显示分数\r\n\t\t\t\t\t\tlet scoreNode = this.GetScoreNode(uiPos, 2);\r\n\t\t\t\t\t\tscoreNode.active = true;\r\n\t\t\t\t\t\tlet baseShui = cardResult2[idx][\"baseShui\"];\r\n\t\t\t\t\t\tlet extraShui = cardResult2[idx][\"extraShui\"];\r\n\t\t\t\t\t\tbaseShui += extraShui\r\n\t\t\t\t\t\tbaseShui = cardResult2[idx][\"protoShui\"];\r\n\t\t\t\t\t\tif (baseShui > 0) {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = true;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = false;\r\n\t\t\t\t\t\t\tself.showLabel(scoreNode.getChildByName(\"score_win\"), baseShui);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = false;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = true;\r\n\t\t\t\t\t\t\tself.showLabel(scoreNode.getChildByName(\"score_lose\"), baseShui);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, timer);\r\n\r\n\t\t}\r\n\t\tfor (let playerIdx = 0; playerIdx < list3.length; playerIdx++) {\r\n\t\t\t//如果当前玩家是特殊牌 继续显示牌背\r\n\t\t\tlet isSpacial = false;\r\n\t\t\tfor (let idx = 0; idx < spacialCard.length; idx++) {\r\n\t\t\t\tif (spacialCard[idx].posIdx == list3[playerIdx].posIdx) {\r\n\t\t\t\t\tisSpacial = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (isSpacial) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\ttimer += 0.55;\r\n\t\t\t//开始第三墩比牌\r\n\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\t//to do\r\n\t\t\t\tlet uiPos = self.RoomPosMgr.GetUIPosByDataPos(list3[playerIdx].posIdx);    //玩家位置\r\n\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/seat_dun/UILSDunCards\";\r\n\t\t\t\tlet dunCards = self.GetWndNode(path);\r\n\r\n\t\t\t\tlet playerDunInfo = {};\r\n\t\t\t\tfor (let idx = 0; idx < rankeds.length; idx++) {\r\n\t\t\t\t\tif (rankeds[idx].posIdx == list3[playerIdx].posIdx) {\r\n\t\t\t\t\t\tplayerDunInfo = rankeds[idx].dunPos;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//第三墩\r\n\t\t\t\tfor (let cardIdx = 9; cardIdx < 14; cardIdx++) {\r\n\t\t\t\t\t//获取牌型\r\n\t\t\t\t\tlet cardType = playerDunInfo.third[cardIdx - 9];\r\n\t\t\t\t\tlet child = dunCards.getChildByName(\"dun_card\" + cardIdx);\r\n\t\t\t\t\tself.ShowResultCard(cardType,child)\r\n\t\t\t\t}\r\n\t\t\t\tdunCards.getComponent(\"UILSDunCards\").fanPaiAction(2)\r\n\t\t\t\t//显示牌型\r\n\t\t\t\tfor (let idx = 0; idx < cardType3.length; idx++) {\r\n\t\t\t\t\tif (cardType3[idx].posIdx == list3[playerIdx].posIdx) {\r\n\t\t\t\t\t\tlet aniNode = this.GetCardTypeNode(uiPos);\r\n\t\t\t\t\t\taniNode.active = 1;\r\n\t\t\t\t\t\taniNode.getChildByName(\"num\").getComponent(cc.Label).string = self.Type[(cardType3[idx].card).toString()];\r\n\t\t\t\t\t\taniNode.getComponent(cc.Animation).play();\r\n\t\t\t\t\t\t//音效\r\n\t\t\t\t\t\tlet pos = list3[playerIdx][\"posIdx\"];\r\n\t\t\t\t\t\tlet sex = self.InitHeroSex(pos);\r\n\t\t\t\t\t\tlet soundName = sex + \"17CardType\" + cardType3[idx][\"card\"];\r\n\t\t\t\t\t\tself.SoundManager.PlaySound(soundName);\r\n\t\t\t\t\t\tconsole.log(\"第三墩牌\", list3[playerIdx], cardType3[idx][\"card\"], self.Type[(cardType3[idx][\"card\"])], cardType3[idx][\"cards\"]);\r\n\t\t\t\t\t\tdunCards.getComponent(\"UILSDunCards\").showCardType(2, cardType3[idx][\"card\"])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let idx = 0; idx < cardResult3.length; idx++) {\r\n\t\t\t\t\tif (cardResult3[idx].posIdx == list3[playerIdx].posIdx) {\r\n\t\t\t\t\t\t//显示分数\r\n\t\t\t\t\t\tlet scoreNode = this.GetScoreNode(uiPos, 3);\r\n\t\t\t\t\t\tscoreNode.active = true;\r\n\t\t\t\t\t\tlet baseShui = cardResult3[idx][\"baseShui\"];\r\n\t\t\t\t\t\tlet extraShui = cardResult3[idx][\"extraShui\"];\r\n\t\t\t\t\t\tbaseShui += extraShui\r\n\t\t\t\t\t\tbaseShui = cardResult3[idx][\"protoShui\"];\r\n\t\t\t\t\t\tif (baseShui > 0) {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = true;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = false;\r\n\t\t\t\t\t\t\tself.showLabel(scoreNode.getChildByName(\"score_win\"), baseShui);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_win\").active = false;\r\n\t\t\t\t\t\t\tscoreNode.getChildByName(\"score_lose\").active = true;\r\n\t\t\t\t\t\t\tself.showLabel(scoreNode.getChildByName(\"score_lose\"), baseShui);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, timer);\r\n\t\t}\r\n\r\n\t\t//打枪\r\n\t\tif (gunFire.length) {\r\n\t\t\ttimer += 1;\r\n\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\t// 需要开始打枪音效\r\n\t\t\t\t// let sex = self.InitHeroSex(gunFire[this.clientPos][\"key\"]);\r\n\t\t\t\t// self.SoundManager.PlaySound(sex + \"17Shoot\");\r\n\t\t\t\tself.SoundManager.PlaySound(\"boy17Shoot\");\r\n\t\t\t}, timer);\r\n\t\t\tfor (let idx = 0; idx < gunFire.length; idx++) {\r\n\t\t\t\ttimer += 1;\r\n\t\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\t\tself.delayAnimation(gunFire[idx]);\r\n\t\t\t\t}, timer);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (fourbagger) {\r\n\t\t\ttimer += 1;\r\n\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\tself.SoundManager.PlaySound(\"boy17QuanLeiDa\");\r\n\t\t\t}, timer);\r\n\t\t\ttimer += 1;\r\n\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\tself.fourAnimation.active = true;\r\n\t\t\t\tself.fourAnimation.getComponent(sp.Skeleton).setAnimation(0, \"qld\", false);\r\n\t\t\t\tself.SoundManager.PlaySound(\"sssBaoZha\");\r\n\t\t\t}, timer);\r\n\t\t}\r\n\r\n\t\t//特殊牌\r\n\t\tif (spacialCard.length) {\r\n\t\t\ttimer += 1;\r\n\t\t\tthis.scheduleOnce(function () {\r\n\t\t\t\t//to do\r\n\t\t\t\tfor (let spacialIdx = 0; spacialIdx < spacialCard.length; spacialIdx++) {\r\n\t\t\t\t\tlet uiPos = self.RoomPosMgr.GetUIPosByDataPos(spacialCard[spacialIdx].posIdx);\r\n\r\n\t\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/seat_dun/UILSDunCards\";\r\n\t\t\t\t\tlet dunCards = self.GetWndNode(path);\r\n\r\n\t\t\t\t\tlet playerDunInfo = {};\r\n\t\t\t\t\tfor (let idx = 0; idx < rankeds.length; idx++) {\r\n\t\t\t\t\t\tif (spacialCard[spacialIdx].posIdx == rankeds[idx].posIdx) {\r\n\t\t\t\t\t\t\tplayerDunInfo = rankeds[idx].dunPos;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.showAllCard(playerDunInfo, dunCards);\r\n\t\t\t\t\t//显示特殊牌型label\r\n\t\t\t\t\tdunCards.getChildByName(\"img_special\").active = true;\r\n\t\t\t\t\tself.SetSpecailProperty(self.GetWndNode(path + \"/img_special/special\"), spacialCard[spacialIdx].card);\r\n\t\t\t\t\tconsole.log(\"播放特殊牌型2\",self.Type[(spacialCard[spacialIdx].card).toString()],spacialCard[spacialIdx].card)\r\n\t\t\t\t\tvar filePath = \"game/special/\" + spacialCard[spacialIdx].card\r\n\t\t\t\t\tcc.loader.loadRes(filePath, cc.Prefab, function (error, clip) {\r\n\t\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet node = cc.instantiate(clip)\r\n\t\t\t\t\t\tself.node.addChild(node)\r\n\t\t\t\t\t\tnode.getComponent(sp.Skeleton).setCompleteListener(()=>{\r\n\t\t\t\t\t\t\tif (node && cc.isValid(node)) {\r\n\t\t\t\t\t\t\t\tnode.destroy()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (spacialCard[spacialIdx].pid == self.HeroManager.GetHeroID()) {\r\n\t\t\t\t\t\t//音效\r\n\t\t\t\t\t\tlet pos = spacialCard[spacialIdx][\"posIdx\"];\r\n\t\t\t\t\t\tlet sex = self.InitHeroSex(pos);\r\n\t\t\t\t\t\tlet soundName = sex + \"17CardType\" + spacialCard[spacialIdx][\"card\"];\r\n\t\t\t\t\t\tself.SoundManager.PlaySound(soundName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, timer);\r\n\t\t}\r\n\r\n\t\t//显示总分\r\n\t\ttimer += 0.5;\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tfor (let idx = 0; idx < playerResults.length; idx++) {\r\n\t\t\t\tlet simPlayer = playerResults[idx];\r\n\t\t\t\tlet shui = simPlayer[\"shui\"];\r\n\t\t\t\tlet sportsPoint = simPlayer[\"sportsPoint\"];\r\n\t\t\t\tlet pos = simPlayer[\"posIdx\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);    //玩家位置\r\n\t\t\t\t//显示总分数\r\n\t\t\t\tlet scoreNode = this.GetScoreNode(uiPos, 4);\r\n\t\t\t\tscoreNode.active = true;\r\n\t\t\t\tif (shui > 0) {\r\n\t\t\t\t\tscoreNode.getChildByName(\"win\").active = true;\r\n\t\t\t\t\tscoreNode.getChildByName(\"lost\").active = false;\r\n\t\t\t\t\tscoreNode = scoreNode.getChildByName(\"win\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscoreNode.getChildByName(\"win\").active = false;\r\n\t\t\t\t\tscoreNode.getChildByName(\"lost\").active = true;\r\n\t\t\t\t\tscoreNode = scoreNode.getChildByName(\"lost\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.showLabel(scoreNode, shui);\r\n\t\t\t\tlet sportsPointNode = this.GetScoreNode(uiPos, 6);\r\n\t\t\t\tif (this.unionId > 0) {\r\n\t\t\t\t\t//显示竞技点\r\n\t\t\t\t\tthis.GetScoreNode(uiPos, 4).active = false\r\n\t\t\t\t\tsportsPointNode.active = true;\r\n\t\t\t\t\tif (sportsPoint > 0) {\r\n\t\t\t\t\t\tsportsPointNode.children[0].active = true;\r\n\t\t\t\t\t\tsportsPointNode.children[1].active = false;\r\n\t\t\t\t\t\tthis.showLabel(sportsPointNode.children[0], sportsPoint);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsportsPointNode.children[0].active = false;\r\n\t\t\t\t\t\tsportsPointNode.children[1].active = true;\r\n\t\t\t\t\t\tthis.showLabel(sportsPointNode.children[1], sportsPoint);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsportsPointNode.active = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (playerResults.length - 1 == idx) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, timer);\r\n\r\n\t\t//显示结算界面\r\n\t\ttimer += 2;\r\n\t\tthis.scheduleOnce(function () {\r\n\t\t\tself.UpdatePlayerScore();\r\n\t\t\tself.ShowResultFrom();\r\n\t\t}, timer);\r\n\t},\r\n\tGetDunCardsByServerDunPos: function (dunPos) {\r\n\t\tlet cards = [];\r\n\t\tfor (let key in dunPos) {\r\n\t\t\tlet cardList = dunPos[key];\r\n\t\t\tfor (let i = 0; i < cardList.length; i++) {\r\n\t\t\t\tcards.push(cardList[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cards;\r\n\t},\r\n\tShowResultSpacial: function (sRankingResult) {\r\n\t\tlet cardResult1 = sRankingResult.pCardResult1; //第一墩比较结果\r\n\t\tlet cardResult2 = sRankingResult.pCardResult2; //第二墩比较结果\r\n\t\tlet cardResult3 = sRankingResult.pCardResult3; //第三墩比较结果\r\n\r\n\t\tlet cardType1 = sRankingResult.pCard1;      //牌型1\r\n\t\tlet cardType2 = sRankingResult.pCard2;      //牌型2\r\n\t\tlet cardType3 = sRankingResult.pCard3;      //牌型3\r\n\r\n\t\tlet spacialCard = sRankingResult.specialPockerCard; //特殊牌型\r\n\r\n\t\tlet gunFire = sRankingResult.killRankins;    //打枪\r\n\r\n\t\tlet simPlayerResult = sRankingResult.simPlayerResult; //前三墩比牌结果\r\n\r\n\t\tlet fourbagger = sRankingResult.fourbagger; //全垒打\r\n\r\n\t\tlet simResults = sRankingResult.simResults; //前三墩结果加打枪结果和全垒打结果\r\n\r\n\t\tlet rankeds = sRankingResult.rankeds;      //所有人的牌\r\n\r\n\t\tlet playerResults = sRankingResult.posResultList; //所有比牌总结果\r\n\r\n\t\tlet self = this;\r\n\t\t//如果三位玩家或以上有特殊牌类型，则显示所有玩家的牌\r\n\t\tthis.scheduleOnce(function () {\r\n\t\t\t//to do\r\n\t\t\tfor (let playerIdx = 0; playerIdx < rankeds.length; playerIdx++) {\r\n\t\t\t\tlet uiPos = self.RoomPosMgr.GetUIPosByDataPos(rankeds[playerIdx].posIdx);\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/seat_dun/UILSDunCards\";\r\n\t\t\t\tlet dunCards = self.GetWndNode(path);\r\n\t\t\t\tlet playerDunInfo = rankeds[playerIdx].dunPos;\r\n\t\t\t\tself.showAllCard(playerDunInfo, dunCards);\r\n\t\t\t\t//显示特殊牌型label\r\n\t\t\t\tfor (let idx = 0; idx < spacialCard.length; idx++) {\r\n\t\t\t\t\tif (rankeds[playerIdx].posIdx == spacialCard[idx].posIdx) {\r\n\t\t\t\t\t\tif(spacialCard[idx].isSpacial) continue\r\n\t\t\t\t\t\tdunCards.getChildByName(\"img_special\").active = true;\r\n\t\t\t\t\t\tself.SetSpecailProperty(self.GetWndNode(path + \"/img_special/special\"), spacialCard[idx].card);\r\n\t\t\t\t\t\tspacialCard[idx].isSpacial = true;\r\n\t\t\t\t\t\tvar filePath = \"game/special/\" + spacialCard[idx].card\r\n\t\t\t\t\t\tcc.loader.loadRes(filePath, cc.Prefab, function (error, clip) {\r\n\t\t\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet node = cc.instantiate(clip)\r\n\t\t\t\t\t\t\tself.node.addChild(node)\r\n\t\t\t\t\t\t\tnode.getComponent(sp.Skeleton).setCompleteListener(()=>{\r\n\t\t\t\t\t\t\t\tif (node && cc.isValid(node)) {\r\n\t\t\t\t\t\t\t\t\tnode.destroy()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (spacialCard[playerIdx]) {\r\n\t\t\t\t\t//音效\r\n\t\t\t\t\tlet pos = spacialCard[playerIdx][\"posIdx\"];\r\n\t\t\t\t\tlet sex = self.InitHeroSex(pos);\r\n\t\t\t\t\tlet soundName = sex + \"17CardType\" + spacialCard[playerIdx][\"card\"];\r\n\t\t\t\t\tself.SoundManager.PlaySound(soundName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t\t//显示总分\r\n\t\tthis.scheduleOnce(() => {\r\n\t\t\tfor (let idx = 0; idx < playerResults.length; idx++) {\r\n\t\t\t\tlet simPlayer = playerResults[idx];\r\n\t\t\t\tlet shui = simPlayer[\"shui\"];\r\n\t\t\t\tlet sportsPoint = simPlayer[\"sportsPoint\"];\r\n\t\t\t\tlet pos = simPlayer[\"posIdx\"];\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(pos);    //玩家位置\r\n\t\t\t\t//显示总分数\r\n\t\t\t\tlet scoreNode = this.GetScoreNode(uiPos, 4);\r\n\t\t\t\tscoreNode.active = true;\r\n\t\t\t\tif (shui > 0) {\r\n\t\t\t\t\tscoreNode.getChildByName(\"win\").active = true;\r\n\t\t\t\t\tscoreNode.getChildByName(\"lost\").active = false;\r\n\t\t\t\t\tscoreNode = scoreNode.getChildByName(\"win\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscoreNode.getChildByName(\"win\").active = false;\r\n\t\t\t\t\tscoreNode.getChildByName(\"lost\").active = true;\r\n\t\t\t\t\tscoreNode = scoreNode.getChildByName(\"lost\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.showLabel(scoreNode, shui);\r\n\t\t\t\tif (this.unionId > 0) {\r\n\t\t\t\t\t//显示竞技点\r\n\t\t\t\t\tthis.GetScoreNode(uiPos, 4).active = false;\r\n\t\t\t\t\tlet sportsPointNode = this.GetScoreNode(uiPos, 6);\r\n\t\t\t\t\tsportsPointNode.active = true;\r\n\t\t\t\t\tif (sportsPoint > 0) {\r\n\t\t\t\t\t\tsportsPointNode.children[0].active = true;\r\n\t\t\t\t\t\tsportsPointNode.children[1].active = false;\r\n\t\t\t\t\t\tthis.showLabel(sportsPointNode.children[0], sportsPoint);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsportsPointNode.children[0].active = false;\r\n\t\t\t\t\t\tsportsPointNode.children[1].active = true;\r\n\t\t\t\t\t\tthis.showLabel(sportsPointNode.children[1], sportsPoint);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (playerResults.length - 1 == idx) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, 0.5);\r\n\r\n\t\t//显示结算界面\r\n\t\tthis.scheduleOnce(function () {\r\n\t\t\tself.UpdatePlayerScore();\r\n\t\t\tself.ShowResultFrom();\r\n\t\t}, 3);\r\n\t},\r\n\r\n\tUpdatePlayerScore: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet posList = room.GetRoomProperty(\"posList\");\r\n\t\tlet headCom = \"UI\" + app.subGameName.toUpperCase() + \"Head\";\r\n\t\tfor (let idx = 0; idx < posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\tif (posList[idx][\"pid\"] > 0) {\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(posList[idx].pos);\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/head/\" + headCom;\r\n\t\t\t\tlet headNode = this.GetWndNode(path);\r\n\t\t\t\tlet headScript = headNode.getComponent(headCom);\r\n\t\t\t\theadScript.UpDateLabJiFen();\r\n\t\t\t\tif (this.unionId > 0) {\r\n\t\t\t\t\theadScript.UpDateLabSportsPoint();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tShowResultFrom: function () {\r\n\t\tthis.HideZJBeiShu();\r\n\t\tlet juShu = app[app.subGameName.toUpperCase() + \"Room\"]().GetRoomConfig().setCount;\r\n\t\tlet setID = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"setID\");\r\n\t\tif (setID >= juShu && !this.ShareDefine.isCoinRoom) {\r\n\t\t\tthis.btn_goon.active = false;\r\n\t\t\tthis.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UILSResultOne\");\r\n\t\t} else {\r\n\t\t\tthis.btn_goon.active = true;\r\n\t\t\tthis.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UILSResultOne\");\r\n\t\t}\r\n\r\n\t\t//经纬说自己不准备也要看不到别人准备\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet RoomPosMgr = room.GetRoomPosMgr();\r\n\t\tlet clientPos = RoomPosMgr.GetClientPos();\r\n\t\tlet clientPlayerInfo = RoomPosMgr.GetPlayerInfoByPos(clientPos);\r\n\t\tif (clientPlayerInfo[\"gameReady\"]) {\r\n\t\t\tthis.RefreshRoomShow();\r\n\t\t}\r\n\t},\r\n\r\n\tshowLabel: function (nodeLabel, string) {\r\n\t\tnodeLabel.active = true;\r\n\t\tif (string >= 0) {\r\n\t\t\tnodeLabel.getComponent(cc.Label).string = \"+\" + string;\r\n\t\t} else {\r\n\t\t\tnodeLabel.getComponent(cc.Label).string = string;\r\n\t\t}\r\n\t},\r\n\r\n\tshowAllCard: function (playerDunInfo, dunCards) {\r\n\r\n\t\tfor (let cardIdx = 1; cardIdx < 14; cardIdx++) {\r\n\t\t\tif (cardIdx >= 1 && cardIdx < 4) {\r\n\t\t\t\tlet cardType = playerDunInfo.first[cardIdx - 1];\r\n\t\t\t\tlet child = dunCards.getChildByName(\"dun_card\" + cardIdx);\r\n\t\t\t\tthis.ShowResultCard(cardType, child);\r\n\t\t\t\tchild.angle = 0\r\n\t\t\t} else if (cardIdx >= 4 && cardIdx < 9) {\r\n\t\t\t\tlet cardType = playerDunInfo.second[cardIdx - 4];\r\n\t\t\t\tlet child = dunCards.getChildByName(\"dun_card\" + cardIdx);\r\n\t\t\t\tthis.ShowResultCard(cardType, child);\r\n\t\t\t\tchild.angle = 0\r\n\t\t\t} else {\r\n\t\t\t\tlet cardType = playerDunInfo.third[cardIdx - 9];\r\n\t\t\t\tlet child = dunCards.getChildByName(\"dun_card\" + cardIdx);\r\n\t\t\t\tthis.ShowResultCard(cardType, child);\r\n\t\t\t\tchild.angle = 0\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//获取打枪旋转角度\r\n\tgetAngle: function (_x1, _y1, _x2, _y2) {\r\n\t\tlet xx = _x2 - _x1;\r\n\t\tlet yy = _y2 - _y1;\r\n\r\n\t\tlet _tan = Math.abs(yy / xx);\r\n\t\tlet angle_temp = 180 / Math.PI * Math.atan(_tan);\r\n\t\tconsole.log(\"初始角度 = \", _x1, _y1, _x2, _y2, xx,yy);\r\n\t\tlet PI = 180;\r\n\t\tif (xx == 0) {\r\n\t\t\tangle_temp = PI / 2;\r\n\t\t}\r\n\r\n\t\tif (xx < 0.0 && yy >= 0.0) {\r\n\t\t\tconsole.log(\"111\")\r\n\t\t\tangle_temp = PI - angle_temp;\r\n\t\t} else if (xx >= 0.0 && yy >= 0.0) {\r\n\t\t\tconsole.log(\"222\")\r\n\t\t\tangle_temp = angle_temp;\r\n\t\t}else if (xx < 0.0 && yy < 0.0) {\r\n\t\t\tconsole.log(\"333\")\r\n\t\t\tangle_temp = PI + angle_temp;\r\n\t\t} else if (xx >= 0.0 && yy < 0.0) {\r\n\t\t\tconsole.log(\"444\")\r\n\t\t\tangle_temp = PI * 2.0 - angle_temp;\r\n\t\t}\r\n\t\tangle_temp -= 90\r\n\t\tconsole.log(\"最终角度 = \", angle_temp);\r\n\r\n\t\treturn angle_temp\r\n\t},\r\n\r\n\tdelayAnimation: function (gunFire) {\r\n\t\t//枪手位置\r\n\t\tlet posIdx = this.RoomPosMgr.GetUIPosByDataPos(gunFire.key);\r\n\t\tlet x1 = -1;\r\n\t\tlet y1 = -1;\r\n\t\tif (-1 != posIdx) {\r\n\t\t\tlet path = \"sp_seat0\" + posIdx;\r\n\t\t\tlet node = this.node.getChildByName(path);\r\n\t\t\tlet head = node.getChildByName(\"head\")\r\n\t\t\tlet world = node.convertToWorldSpaceAR(head.getPosition())\r\n\t\t\tlet local = this.fireAnimation.parent.convertToNodeSpaceAR(world)\r\n\t\t\tx1 = local.x;\r\n\t\t\ty1 = local.y;\r\n\t\t\tthis.fireAnimation.x = x1;\r\n\t\t\tthis.fireAnimation.y = y1;\r\n\t\t\tthis.fireAnimation.active = true;\r\n\t\t}\r\n\r\n\t\t//目标位置\r\n\t\tlet pos = this.RoomPosMgr.GetUIPosByDataPos(gunFire.to);\r\n\t\tlet targetPath = \"sp_seat0\" + pos;\r\n\t\tlet targetNode = this.node.getChildByName(targetPath);\r\n\t\tlet head = targetNode.getChildByName(\"head\")\r\n\t\tlet world = targetNode.convertToWorldSpaceAR(head.getPosition())\r\n\t\tlet local = this.fireAnimation.parent.convertToNodeSpaceAR(world)\r\n\t\tlet x2 = local.x;\r\n\t\tlet y2 = local.y;\r\n\t\t//计算手枪旋转角度\r\n\t\tlet ang = this.getAngle(x1, y1, x2, y2);\r\n\t\tthis.fireAnimation.angle = ang;\r\n\r\n\t\tlet state = this.fireAnimation.getComponent(sp.Skeleton).setAnimation(0, \"animation\", true);\r\n\t\tstate.repeatCount = 3;\r\n\t\t//播放打枪动画,一共三枪\r\n\t\tlet self = this;\r\n\t\tlet sex = self.InitHeroSex(gunFire.key);\r\n\t\tlet soundName = sex + \"17BoBoBo\";\r\n\t\tself.SoundManager.PlaySound(soundName);\r\n\t\tthis.scheduleOnce(function () {\r\n\t\t\tif(!self || !cc.isValid(self)) return\r\n\t\t\t//随机位置显示洞\r\n\t\t\tlet node = cc.instantiate(self.node.getChildByName(\"dankong\"));\r\n\t\t\tnode.active =  true\r\n\t\t\tnode.getComponent(sp.Skeleton).setAnimation(0, \"animation\", false);\r\n\t\t\tlet minx = -50;\r\n\t\t\tlet maxx = 50;\r\n\t\t\tlet miny = -40;\r\n\t\t\tlet maxy = 40;\r\n\t\t\tlet x = parseInt(Math.random() * (maxx - minx + 1) + minx, 10);\r\n\t\t\tlet y = parseInt(Math.random() * (maxy - miny + 1) + miny, 10);\r\n\t\t\tnode.setPosition(cc.v2(x, y));\r\n\t\t\tnode.scale = 0.6\r\n\t\t\tlet holes = self.GetWndNode(\"sp_seat0\" + pos + \"/holes\");\r\n\t\t\tif (holes) {\r\n\t\t\t\tholes.addChild(node);\r\n\t\t\t}\r\n\t\t\tholes.zIndex = 10000\r\n\t\t\tcc.tween(node).delay(2.3).call(()=>{\r\n\t\t\t\tif(!node || !cc.isValid(node)) return\r\n\t\t\t\tlet SpEnt =  node.getComponent(sp.Skeleton).setAnimation(0, \"animation\", false);\r\n\t\t\t\tSpEnt.animationStart = SpEnt.animationEnd;\r\n\t\t\t}).start()\r\n\t\t});\r\n\t},\r\n\r\n\tShowResultCard: function (cardType, node) {\r\n\r\n\t\tlet newPoker = this.PokerCard.SubCardValue(cardType);\r\n\t\tthis.PokerCard.GetPokeCard(newPoker, node);\r\n\r\n\t\tnode.getChildByName(\"poker_back\").active = false;\r\n\t\tnode.getChildByName(\"icon_mapai\").active = false;\r\n\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet kexuanwanfa = room.GetRoomConfigByProperty(\"kexuanwanfa\");\r\n\t\tif (kexuanwanfa.length > 0) {\r\n\t\t\tif (kexuanwanfa.indexOf(0) > -1) {\r\n\t\t\t\tlet maPaiValue = this.RoomSet.GetRoomSetProperty(\"mapai\");\r\n\t\t\t\tif (newPoker == maPaiValue) {\r\n\t\t\t\t\tnode.getChildByName(\"icon_mapai\").active = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.getChildByName(\"icon_mapai\").active = false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnode.getChildByName(\"icon_mapai\").active = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tGetUICardComponentByPos: function (pos) {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) {\r\n\t\t\tconsole.error(\"GetUICardComponentByPos not enter room\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet headCom = \"UI\" + app.subGameName.toUpperCase() + \"Head\";\r\n\t\tlet posList = room.GetRoomProperty(\"posList\");\r\n\t\tfor (let idx = 0; idx < posList.length-this.ShareDefine.LookCount; idx++) {\r\n\t\t\tif (pos == posList[idx].pos) {\r\n\t\t\t\tlet uiPos = this.RoomPosMgr.GetUIPosByDataPos(posList[idx].pos);\r\n\t\t\t\tlet path = \"sp_seat0\" + uiPos + \"/head/\" + headCom;\r\n\t\t\t\tlet headNode = this.GetWndNode(path);\r\n\t\t\t\tif(!headNode) continue\r\n\t\t\t\tlet headScript = headNode.getComponent(headCom);\r\n\t\t\t\treturn headScript;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t//显示玩家准备状态\r\n\tShowPlayerReady: function (room) {\r\n\t\tif (!room) {\r\n\t\t\tconsole.error(\"Event_ShowReadyOrNoReady not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roomSetID = room.GetRoomProperty(\"setID\");\r\n\t\tlet ReadyState = \"\";\r\n\t\tif (roomSetID > 0) {\r\n\t\t\tReadyState = \"gameReady\";\r\n\t\t} else {\r\n\t\t\tReadyState = \"roomReady\";\r\n\t\t}\r\n\r\n\t\tthis.SetPlayerReadyInfo(ReadyState);\r\n\t},\r\n\tSetPlayerReadyInfo: function (ReadyState) {\r\n\t\tlet roomPosMgr = this.RoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n\t\tlet clientPos = roomPosMgr.GetClientPos();\r\n\t\tlet playerAll = roomPosMgr.GetRoomAllPlayerInfo();\r\n\t\tlet playerAllList = Object.keys(playerAll);\r\n\t\tlet isAllReady = false;\r\n\t\t//判断下所有玩家是否都准备\r\n\t\tif (ReadyState == \"roomReady\") {\r\n\t\t\tlet curReadyNum = 0;\r\n\t\t\tlet tempNum = 0;\r\n\t\t\tfor (let j = 0; j < playerAllList.length; j++) {\r\n\t\t\t\tlet readyPlayer = playerAll[playerAllList[j]];\r\n\t\t\t\tif (readyPlayer[ReadyState] && readyPlayer[\"pid\"] > 0) {\r\n\t\t\t\t\tcurReadyNum++;\r\n\t\t\t\t}\r\n\t\t\t\tif (readyPlayer[\"name\"] != \"\" && readyPlayer[\"pid\"] > 0) {\r\n\t\t\t\t\ttempNum++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.playerMinNum != this.playerNum && this.playerMinNum <= curReadyNum) {\r\n\t\t\t\tisAllReady = true;\r\n\t\t\t}\r\n\t\t\tif (tempNum != curReadyNum) {\r\n\t\t\t\tisAllReady = false;\r\n\t\t\t}\r\n\t\t\t//tempNum == curReadyNum &&\r\n\t\t}\r\n\t\tthis.btn_go.active = false;\r\n\t\tfor (let key in playerAll) {\r\n\t\t\tlet player = playerAll[key];\r\n\t\t\tif (player[\"pid\"] > 0) {\r\n\t\t\t\tlet pos = player[\"pos\"];\r\n\t\t\t\tlet isReady = player[ReadyState];\r\n\t\t\t\tthis.ShowOrHideZhunbei(pos, isReady);\r\n\t\t\t\tif (clientPos == pos) {//自己\r\n\t\t\t\t\tthis.btn_ready.active = !isReady;\r\n\t\t\t\t\tif (ReadyState == \"roomReady\" && isAllReady) {\r\n\t\t\t\t\t\tif (this.Room.IsClientIsCreater()) {\r\n\t\t\t\t\t\t\tthis.btn_go.active = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * 2次确认点击回调\r\n\t */\r\n\tSetWaitForConfirm: function (msgID, type, msgArg = [], cbArg = []) {\r\n\t\tlet ConfirmManager = app[app.subGameName + \"_ConfirmManager\"]();\r\n\t\tConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, msgArg);\r\n\t\tConfirmManager.ShowConfirm(type, msgID, msgArg);\r\n\t},\r\n\r\n\tClick_btn_jiesan: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (!room) {\r\n\t\t\tconsole.error(\"Click_btn_jiesan not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roomPosMgr = this.RoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n\t\tif (app[app.subGameName + \"_ShareDefine\"]().isCoinRoom) {\r\n\t\t\t//Event_ExitRoomSuccess 都有做退出处理\r\n\t\t\t//Event_CodeError\r\n\t\t\t// let needArg = roomPosMgr.GetClientPos();\r\n\t\t\t// let roomID = this.RoomMgr.GetEnterRoomID();\r\n\t\t\t// app[app.subGameName + \"_GameManager\"]().SendExitRoom(roomID, needArg);\r\n\t\t\t// app[app.subGameName + \"_FormManager\"]().AddDefaultFormName(\"UIPractice\");\r\n\t\t\tconsole.log(\"coinRoom房间\");\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet state = room.GetRoomProperty(\"state\");\r\n\t\tif (state == this.ShareDefine.RoomState_End) {\r\n\t\t\t//直接退出到大厅\r\n\t\t\tconsole.log(\"游戏结束\", state);\r\n\t\t\tthis.ShowDanJuForm();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet ClientPos = roomPosMgr.GetClientPos();\r\n\t\tlet player = roomPosMgr.GetPlayerInfoByPos(ClientPos);\r\n\t\tif (!player) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.RoomPosMgr.GetIsLook()){\r\n\t\t\tlet msgID = \"UIMoreTuiChuFangJian\";\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, []);\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().ShowConfirm(this.ShareDefine.Confirm, msgID, []);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet posName = player.name;\r\n\t\tlet roomID = this.RoomMgr.GetEnterRoomID();\r\n\t\tlet setState = this.RoomSet.GetRoomSetProperty(\"state\");\r\n\t\tif (setState == this.ShareDefine.SetState_Hog && player.isPlaying) {//抢庄中\r\n\t\t\tif (this.jiesan == 2) {\r\n\t\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIMessage\", null, this.ShareDefine.ConfirmOK, 0, 0, \"此房间不可解散\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().SetWaitForConfirmForm((clickType) => {\r\n\t\t\t\tif (clickType == \"Sure\") {\r\n\t\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID);\r\n\t\t\t\t}\r\n\t\t\t}, \"\", []);\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().ShowConfirm(this.ShareDefine.Confirm, \"\", \"是否要解散房间\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (setState == this.ShareDefine.SetState_AddDouble && player.isPlaying) {//加倍中\r\n\t\t\tif (this.jiesan == 2) {\r\n\t\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIMessage\", null, this.ShareDefine.ConfirmOK, 0, 0, \"此房间不可解散\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().SetWaitForConfirmForm((clickType) => {\r\n\t\t\t\tif (clickType == \"Sure\") {\r\n\t\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID);\r\n\t\t\t\t}\r\n\t\t\t}, \"\", []);\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().ShowConfirm(this.ShareDefine.Confirm, \"\", \"是否要解散房间\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (setState == this.ShareDefine.SetState_Playing && player.isPlaying) {//比牌中\r\n\t\t\tif (this.jiesan == 2) {\r\n\t\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIMessage\", null, this.ShareDefine.ConfirmOK, 0, 0, \"此房间不可解散\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().SetWaitForConfirmForm((clickType) => {\r\n\t\t\t\tif (clickType == \"Sure\") {\r\n\t\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID);\r\n\t\t\t\t}\r\n\t\t\t}, \"\", []);\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().ShowConfirm(this.ShareDefine.Confirm, \"\", \"是否要解散房间\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (setState == this.ShareDefine.SetState_End && player.isPlaying) {//比牌中\r\n\t\t\tif (this.jiesan == 2) {\r\n\t\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIMessage\", null, this.ShareDefine.ConfirmOK, 0, 0, \"此房间不可解散\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().SetWaitForConfirmForm((clickType) => {\r\n\t\t\t\tif (clickType == \"Sure\") {\r\n\t\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID);\r\n\t\t\t\t}\r\n\t\t\t}, \"\", []);\r\n\t\t\tapp[app.subGameName + \"_ConfirmManager\"]().ShowConfirm(this.ShareDefine.Confirm, \"\", \"是否要解散房间\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet msgID = \"\";\r\n\r\n\t\tlet roomCfg = room.GetRoomConfig();\r\n\t\tif (roomCfg.createType == 2 || roomCfg.clubId != 0) {\r\n\t\t\tmsgID = \"UIMoreTuiChuFangJian\";\r\n\t\t} else {\r\n\t\t\tif (room.IsClientIsCreater()) {\r\n\t\t\t\tmsgID = \"PlayerLeaveRoom\";\r\n\t\t\t} else {\r\n\t\t\t\tmsgID = \"UIMoreTuiChuFangJian\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tapp[app.subGameName + \"_ConfirmManager\"]().SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, []);\r\n\t\tapp[app.subGameName + \"_ConfirmManager\"]().ShowConfirm(this.ShareDefine.Confirm, msgID, []);\r\n\t},\r\n\tClick_btn_goon: function () {\r\n\t\tif (app[app.subGameName + \"_ShareDefine\"]().isCoinRoom) {\r\n\t\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(\"game.CGoldRoom\", {practiceId: app[app.subGameName + \"_ShareDefine\"]().practiceId}, this.OnSuccess.bind(this), this.OnEnterRoomFailed.bind(this));\r\n\t\t} else {\r\n\t\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\t\tlet state = room.GetRoomProperty(\"state\");\r\n\t\t\tif (state == this.ShareDefine.RoomState_End) {\r\n\t\t\t\tthis.ShowDanJuForm();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.RoomPosMgr.GetIsLook()){\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tlet roomID = room.GetRoomProperty(\"roomID\");\r\n\t\t\tapp[app.subGameName + \"_GameManager\"]().SendContinueGame(roomID);\r\n\t\t}\r\n\t},\r\n\tClick_btn_qiepai: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet state = room.GetRoomProperty(\"state\");\r\n\t\tif (state == this.ShareDefine.RoomState_End) {\r\n\t\t\tthis.ShowDanJuForm();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcc.log(\"发送切牌\")\r\n\t\tlet roomID = room.GetRoomProperty(\"roomID\");\r\n\t\tapp[app.subGameName + \"_GameManager\"]().SendQiePai(roomID);\r\n\t},\r\n\tClick_btn_baipai: function () {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tlet state = room.GetRoomProperty(\"state\");\r\n\t\tif (state == this.ShareDefine.RoomState_End) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcc.log(\"发送摆牌\")\r\n\t\tlet roomID = room.GetRoomProperty(\"roomID\");\r\n\t\tlet self = this;\r\n\t\tapp[app.subGameName + \"_GameManager\"]().SendBaiPai(roomID,(err, data)=>{\r\n\t\t\tconsole.log(\"查询\")\r\n\t\t\tself.LogicRank.Init()\r\n\t\t\tself.FormManager.ShowForm(\"game/\" + app.subGameName.toUpperCase() + \"/UIFJSSZRank\");\r\n\t\t});\r\n\t},\r\n\tClick_btn_banker: function (btnName) {\r\n\t\tlet bankerBSNum = parseInt(btnName.substring(10, btnName.length));\r\n\t\tthis.RoomMgr.SendQiangZhuang(bankerBSNum);\r\n\t\tthis.bankerList.active = false;\r\n\t},\r\n\tClick_btn_addDouble: function (btnName) {\r\n\t\tlet bankerBSNum = parseInt(btnName.substring(10, btnName.length));\r\n\t\tthis.RoomMgr.SendConfirmBeiShu(bankerBSNum);\r\n\t\tthis.addDouble.active = false;\r\n\t},\r\n\t/**\r\n\t * 2次确认点击回调\r\n\t * @param curEventType\r\n\t * @param curArgList\r\n\t */\r\n\tOnConFirm: function (clickType, msgID, backArgList) {\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tcc.log(\"OnConFirm\",msgID)\r\n\t\tif (clickType != \"Sure\") {\r\n\t\t\tif (msgID == \"SportsPointNotEnough\") {\r\n\t\t\t\tlet roomID = this.RoomMgr.GetEnterRoomID();\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (msgID == \"PlayerLeaveRoom\") {\r\n\t\t\tlet roomID = this.RoomMgr.GetEnterRoomID();\r\n\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID);\r\n\t\t} else if (msgID == \"UIPlay_BeKick\") {\r\n\t\t\tconsole.log(\"UIPlay_BeKick\");\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t} else if (msgID == \"OwnnerForceRoom\") {\r\n\t\t\tconsole.log(\"OwnnerForceRoom\");\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t} else if (msgID == \"DissolveRoom\") {\r\n\t\t\tconsole.log(\"DissolveRoom\");\r\n\t\t\tlet roomSetID = this.Room.GetRoomProperty(\"setID\");\r\n\t\t\tif (roomSetID > 0) {\r\n\t\t\t\tthis.ShowDanJuForm();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t} else if (msgID == \"MSG_BeKick\" || msgID == \"MSG_BeDissolve\") {\r\n\t\t\tconsole.log(\"MSG_BeKick MSG_BeDissolve\");\r\n\t\t\tapp[app.subGameName + \"Client\"].ExitGame();\r\n\t\t} else if (msgID == \"UIMoreTuiChuFangJian\") {\r\n\t\t\tif(this.RoomPosMgr.GetIsLook()){\r\n\t\t\t\tlet roomID = this.RoomMgr.GetEnterRoomID();\r\n\t\t\t\tlet roomPosMgr = this.RoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n\t\t\t\tlet pos = roomPosMgr.posId\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendExitRoom(roomID, pos);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tlet roomPosMgr = this.RoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n\t\t\tlet ClientPos = roomPosMgr.GetClientPos();\r\n\t\t\tlet player = roomPosMgr.GetPlayerInfoByPos(ClientPos);\r\n\t\t\tif (!player)\r\n\t\t\t\treturn;\r\n\t\t\tlet posName = player.name;\r\n\t\t\tlet roomID = this.RoomMgr.GetEnterRoomID();\r\n\t\t\tlet state = room.GetRoomProperty(\"state\");\r\n\t\t\tif (state == this.ShareDefine.SetState_Hog && player.isPlaying) {//抢庄中\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID, posName);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (state == this.ShareDefine.SetState_AddDouble && player.isPlaying) {//加倍中\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID, posName);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (state == this.ShareDefine.SetState_Playing && player.isPlaying) {//比牌中\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID, posName);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (state == this.ShareDefine.SetState_End && player.isPlaying) {//比牌中\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID, posName);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//房主不能退出房间，只能解散\r\n\t\t\tif (this.RoomMgr.GetEnterRoom().IsClientIsOwner()) {\r\n\t\t\t\tapp[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID, posName);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tapp[app.subGameName + \"_GameManager\"]().SendExitRoom(roomID, ClientPos);\r\n\t\t} else if (\"MSG_Room_Change\" == msgID) {\r\n\t\t\tlet roomID = this.RoomMgr.GetEnterRoomID();\r\n\t\t\tlet that = this;\r\n\t\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"ChangePlayerNum\", {\"roomID\": roomID}, function (success) {\r\n\t\t\t}, function (error) {\r\n\t\t\t\tlet msg = error.Msg;\r\n\t\t\t\tthat.ShowSysMsg(msg);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tEvent_GameGift: function (event) {\r\n\t\tlet self = this;\r\n\t\tlet argDict = event;\r\n\t\tlet sendPos = argDict['sendPos'];\r\n\t\tlet recivePos = argDict['recivePos'];\r\n\t\tlet productId = argDict['productId'];\r\n\t\tlet sendHead = app[app.subGameName + \"_HeadManager\"]().GetComponentByPos(sendPos);\r\n\t\tlet reciveHead = app[app.subGameName + \"_HeadManager\"]().GetComponentByPos(recivePos);\r\n\t\tlet giftIdx = productId - 1;\r\n\t\tlet tempNode = cc.instantiate(this.giftPrefabs[giftIdx]);\r\n\t\tlet ani = tempNode.getComponent(cc.Animation);\r\n\t\t// tempNode.tag = giftIdx;\r\n\t\ttempNode.name = ani.defaultClip.name;\r\n\t\ttempNode.bMove = true;\r\n\t\tani.on(\"finished\", this.OnGiftAniEnd, this);\r\n\t\tlet vec1 = sendHead.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n\t\tlet vec2 = reciveHead.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n\t\tvec1 = this.giftNode.convertToNodeSpaceAR(vec1);\r\n\t\tvec2 = this.giftNode.convertToNodeSpaceAR(vec2);\r\n\t\ttempNode.x = vec1.x;\r\n\t\ttempNode.y = vec1.y;\r\n\t\tthis.giftNode.addChild(tempNode);\r\n\t\tlet action = cc.sequence(\r\n\t\t\tcc.moveTo(0.3, vec2),\r\n\t\t\tcc.callFunc(self.GiftMoveEnd, self)\r\n\t\t);\r\n\t\ttempNode.runAction(action);\r\n\t},\r\n\tGiftMoveEnd: function (sender, useData) {\r\n\t\tsender.getComponent(cc.Animation).play();\r\n\t\tsender.bMove = false;\r\n\t\t//播放音效\r\n\t\tapp[app.subGameName + \"_SoundManager\"]().PlaySound('mofa_' + sender.name);\r\n\t},\r\n\tOnGiftAniEnd: function (event) {\r\n\t\tlet nodes = this.giftNode.children;\r\n\t\tfor (let i = nodes.length; i > 0; i--) {\r\n\t\t\tif (event) {\r\n\t\t\t\tlet aniState = nodes[i - 1].getComponent(cc.Animation).getAnimationState(nodes[i - 1].name);\r\n\t\t\t\tif (aniState.isPlaying)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tif (!nodes[i - 1].bMove)\r\n\t\t\t\t\tnodes[i - 1].removeFromParent();\r\n\t\t\t} else\r\n\t\t\t\tnodes[i - 1].removeFromParent();\r\n\t\t}\r\n\t},\r\n\r\n\tEvent_TouchStart: function (event) {\r\n\t\tapp[app.subGameName + \"_AudioManager\"]().startRecord();\r\n\r\n\t},\r\n\tEvent_TouchEnd: function (event) {\r\n\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIAudio\");\r\n\t\tapp[app.subGameName + \"_AudioManager\"]().setTouchEnd(true);\r\n\t\tapp[app.subGameName + \"_AudioManager\"]().stopRecord();\r\n\t},\r\n\tOnTest:function(){\r\n        let RoomMgr = app[app.subGameName.toUpperCase()+\"RoomMgr\"]();\r\n        if(!RoomMgr) return;\r\n\t\tlet roomID = RoomMgr.GetEnterRoom().GetRoomProperty(\"roomID\");\r\n        if(!roomID) return\r\n        this.SendChat(5, 999, roomID, \"test\",(msg)=>{\r\n            console.log(msg)\r\n            if(msg.code == \"Success\")\r\n            {   \r\n                let cards = JSON.parse(msg.msg)\r\n                let FormManager = app[app.subGameName + \"_FormManager\"]();\r\n                FormManager.ShowForm(app.subGameName + '_UIRoomTest', cards);\r\n            }\r\n        });\r\n    },\r\n    SendChat:function (type, quickID, roomID, content,success) {\r\n\t\tapp[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"Chat\", \r\n        {\"type\":type, \"quickID\":quickID, \"targetID\":roomID, \"content\":content}, success);\r\n\t},\r\n\t\r\n\tSetSpecailProperty:function (node, cardType) {\r\n\t\tif(!node) return\r\n\t\tcc.log(\"SetSpecailProperty\", node, cardType)\r\n\t\tcc.loader.loadRes(\"texture/game/ls/play/type\"+cardType, cc.SpriteFrame, function (err, assets) {\r\n\t\t\tif (err) {\r\n\t\t\t\tcc.error(err);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tnode.parent.zIndex = 10000\r\n\t\t\tnode.scale = 0.6\r\n\t\t\tnode.getComponent(cc.Sprite).spriteFrame = assets\r\n\t\t});\r\n\t},\r\n\tupdateLookInfo(){\r\n\r\n\t\tthis.node.getChildByName(\"btn_sit\").active = this.RoomPosMgr.GetIsLook()\r\n\t\t this.node.getChildByName(\"btn_stand\").active = !this.RoomPosMgr.GetIsLook()\r\n\t\tif (this.Room.IsClientIsCreater()) {\r\n\t\t\tthis.node.getChildByName(\"btn_stand\").active = false\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tlet room = this.RoomMgr.GetEnterRoom();\r\n\t\tif (this.node.getChildByName(\"btn_stand\").active) {\r\n\t\t\tlet heroID = app[app.subGameName + \"_HeroManager\"]().GetHeroID();\r\n\t\t\tlet pl = this.RoomPosMgr.GetPlayerInfoByPid(heroID)\r\n\t\t\tif (pl && pl.isPlaying) {\r\n\t\t\t\tthis.node.getChildByName(\"btn_stand\").active = false\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this.RoomPosMgr.GetIsLook()){\r\n\t\t\tthis.btn_goon.active = false\r\n\t\t\tthis.btn_ready.active = false\r\n\t\t\r\n\r\n\t\t}\r\n\r\n\t\tthis.node.getChildByName(\"btn_stand\").active = this.btn_ready.active\r\n\t\tthis.node.getChildByName(\"btn_sit\").zIndex = 1\r\n\t},\r\n\tupdate(){\r\n\t\tthis.updateLookInfo()\r\n\t\tfor (let uiPos = 0; uiPos < 8; uiPos++) {\r\n\t\t\tif(this.GetWndNode(\"sp_seat0\" + uiPos + \"/seat_dun\").active == true){\r\n\t\t\t\tthis.GetWndNode(\"sp_seat0\" + uiPos + \"/sp_card\").active = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});"]}