{"version":3,"sources":["FJSSZRoomSet.js"],"names":["app","require","FJSSZRoomSet","BaseClass","extend","Init","JS_Name","ComTool","subGameName","ShareDefine","FJSSZSetPos","toUpperCase","OnReload","Log","dataInfo","InitSetInfo","setInfo","setPosList","i","length","OnInitSetPos","setEnd","GetSortOutSetEnd","OnInitRoomSetData","state","SetStateStringDict","hasOwnProperty","console","error","OnPosLeave","pos","OnPosContinueGame","GetClientPos","SetState_Init","OnSetZhuangJia","opPos","beiShu","OnSetStart","SetState_Playing","OnChangeStatus","OnSetEnd","SetState_End","serverPack","sRankingResult","pCard1","pCard2","pCard3","pCardResult1","pCardResult2","pCardResult3","playerResults","rankeds","simPlayerResult","specialResult","card","SetRoomProperty","j","k","rewardsDict","l","playerResult","posIdx","shui","sportsPoint","special","isSpecial","simShui","specialShui","m","ranker","dunPos","OnResult","GetRoomSetProperty","property","key","data","GetRoomSetInfo","g_FJSSZRoomSet","exports","GetModel"],"mappings":"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","file":"FJSSZRoomSet.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\FJSSZ\\RoomLogic","sourcesContent":["/*\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @copyright: Copyright (c) 2004, 2010 Xiamen DDM Network Technology Co.,Ltd., All rights reserved.\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @package FJSSZRoomSet.js\r\n *  @todo: 自由扑克房间\r\n *\r\n *  @author hongdian\r\n *  @date 2014-10-30 16:04\r\n *  @version 1.0\r\n *\r\n *  修改时间 修改人 修改内容\r\n *  -------------------------------------------------------------------------------\r\n *\r\n */\r\nvar app = require(\"fjssz_app\");\r\n\r\n/**\r\n * 类构造\r\n */\r\nvar FJSSZRoomSet = app.BaseClass.extend({\r\n\r\n\t/**\r\n\t * 初始化\r\n\t */\r\n\tInit: function () {\r\n\r\n\t\tthis.JS_Name = \"FJSSZRoomSet\";\r\n\r\n\t\tthis.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n\t\tthis.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n\t\tthis.FJSSZSetPos = app[app.subGameName.toUpperCase() + \"SetPos\"]();\r\n\r\n\t\tthis.OnReload();\r\n\t\tthis.Log(\"Init\");\r\n\r\n\t},\r\n\r\n\tOnReload: function () {\r\n\t\tthis.dataInfo = {};\r\n\t},\r\n\r\n\tInitSetInfo: function (setInfo) {\r\n\t\tlet setPosList = setInfo[\"setPosList\"];\r\n\t\tfor (let i = 0; i < setPosList.length; i++) {\r\n\t\t\tthis.FJSSZSetPos.OnInitSetPos(setPosList[i]);\r\n\t\t}\r\n\t\tlet setEnd = setInfo[\"setEnd\"];\r\n\t\tthis.dataInfo = setInfo;\r\n\t\tif (this.dataInfo[\"state\"] == \"FJSSZ_GAME_STATUS_RESULT\") {\r\n\t\t\tthis.GetSortOutSetEnd(this.dataInfo[\"rankingResults\"]);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t//-----------------------回调函数-----------------------------\r\n\tOnInitRoomSetData: function (setInfo) {\r\n\t\tthis.InitSetInfo(setInfo);\r\n\t\tlet state = this.dataInfo[\"state\"];\r\n\r\n\t\tif (this.ShareDefine.SetStateStringDict.hasOwnProperty(state)) {\r\n\t\t\tthis.dataInfo[\"state\"] = this.ShareDefine.SetStateStringDict[state];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.error(\"OnInitRoomSetData state:%s not find\", state);\r\n\t\t}\r\n\t\tthis.Log(\"OnInitRoomSetData:\", this.dataInfo);\r\n\t},\r\n\r\n\tOnPosLeave: function (pos) {\r\n\r\n\t},\r\n\tOnPosContinueGame: function (pos) {\r\n\t\tif (app[app.subGameName.toUpperCase() + \"RoomPosMgr\"]().GetClientPos() == pos) {\r\n\t\t\tthis.dataInfo[\"state\"] = this.ShareDefine.SetState_Init;\r\n\t\t}\r\n\t},\r\n\tOnSetZhuangJia: function (opPos, beiShu) {\r\n\t\tthis.dataInfo[\"opPos\"] = opPos;\r\n\t\tthis.dataInfo[\"beiShu\"] = beiShu;\r\n\t},\r\n\tOnSetStart: function (setInfo) {\r\n\t\tthis.InitSetInfo(setInfo);\r\n\t\tthis.dataInfo[\"state\"] = this.ShareDefine.SetState_Playing;\r\n\t},\r\n\tOnChangeStatus: function (setInfo) {\r\n\t\tthis.dataInfo[\"state\"] = this.ShareDefine.SetStateStringDict[setInfo[\"state\"]];\r\n\t},\r\n\r\n\tOnSetEnd: function (setEnd) {\r\n\t\tthis.dataInfo[\"setEnd\"] = setEnd;\r\n\t\tthis.dataInfo[\"state\"] = this.ShareDefine.SetState_End;\r\n\t\tthis.Log(\"OnSetEnd:\", this.dataInfo);\r\n\t},\r\n\tGetSortOutSetEnd: function (serverPack) {\r\n\t\tlet sRankingResult = serverPack;\r\n\t\t//每蹲牌型\r\n\t\tlet pCard1 = sRankingResult[\"pCard1\"];\r\n\t\tlet pCard2 = sRankingResult[\"pCard2\"];\r\n\t\tlet pCard3 = sRankingResult[\"pCard3\"];\r\n\r\n\t\t//每蹲得分\r\n\t\tlet pCardResult1 = sRankingResult[\"pCardResult1\"];\r\n\t\tlet pCardResult2 = sRankingResult[\"pCardResult2\"];\r\n\t\tlet pCardResult3 = sRankingResult[\"pCardResult3\"];\r\n\r\n\t\t//总分\r\n\t\t// let playerResults = sRankingResult[\"playerResults\"];\r\n\t\tlet playerResults = sRankingResult[\"posResultList\"];\r\n\r\n\t\t//墩牌\r\n\t\tlet rankeds = sRankingResult[\"rankeds\"];\r\n\r\n\t\t//牌分\r\n\t\tlet simPlayerResult = sRankingResult[\"simPlayerResult\"];\r\n\r\n\t\t// let specialResult = sRankingResult[\"specialResult\"];\r\n\t\tlet specialResult = sRankingResult[\"specialResults\"];\r\n\r\n\r\n\t\tfor (let i = 0; i < pCard1.length; i++) {\r\n\t\t\tlet card = pCard1[i];\r\n\t\t\tcard[\"shui\"] = pCardResult1[i][\"shui\"];\r\n\t\t\tcard[\"baseShui\"] = pCardResult1[i][\"baseShui\"];\r\n\t\t\tcard[\"extraShui\"] = pCardResult1[i][\"extraShui\"];\r\n\t\t\tcard[\"protoShui\"] = pCardResult1[i][\"protoShui\"];\r\n\t\t\tcard[\"cards\"] = rankeds[i][\"dunPos\"][\"first\"];\r\n\t\t\tcard[\"isSpecial\"] = rankeds[i][\"isSpecial\"];\r\n\r\n\t\t}\r\n\t\tthis.SetRoomProperty(\"pCard1\", pCard1);\r\n\t\tfor (let j = 0; j < pCard2.length; j++) {\r\n\t\t\tlet card = pCard2[j];\r\n\t\t\tcard[\"shui\"] = pCardResult2[j][\"shui\"];\r\n\t\t\tcard[\"baseShui\"] = pCardResult2[j][\"baseShui\"];\r\n\t\t\tcard[\"extraShui\"] = pCardResult2[j][\"extraShui\"];\r\n\t\t\tcard[\"protoShui\"] = pCardResult2[j][\"protoShui\"];\r\n\t\t\tcard[\"cards\"] = rankeds[j][\"dunPos\"][\"second\"];\r\n\t\t\tcard[\"isSpecial\"] = rankeds[j][\"isSpecial\"];\r\n\t\t}\r\n\t\tthis.SetRoomProperty(\"pCard2\", pCard2);\r\n\t\tfor (let k = 0; k < pCard3.length; k++) {\r\n\t\t\tlet card = pCard3[k];\r\n\t\t\tcard[\"shui\"] = pCardResult3[k][\"shui\"];\r\n\t\t\tcard[\"baseShui\"] = pCardResult3[k][\"baseShui\"];\r\n\t\t\tcard[\"extraShui\"] = pCardResult3[k][\"extraShui\"];\r\n\t\t\tcard[\"protoShui\"] = pCardResult3[k][\"protoShui\"];\r\n\t\t\tcard[\"cards\"] = rankeds[k][\"dunPos\"][\"third\"];\r\n\t\t\tcard[\"isSpecial\"] = rankeds[k][\"isSpecial\"];\r\n\t\t}\r\n\t\tthis.SetRoomProperty(\"pCard3\", pCard3);\r\n\r\n\t\tlet rewardsDict = {};\r\n\t\tfor (let l = 0; l < playerResults.length; l++) {\r\n\t\t\tlet playerResult = playerResults[l];\r\n\t\t\tlet posIdx = playerResult[\"posIdx\"];\r\n\t\t\t/*let rewards = playerResult[\"rewards\"];\r\n\t\t\tlet score = playerResult[\"score\"];\r\n\t\t\tlet allScore = playerResult[\"allScore\"];\r\n\t\t\tlet roomScore = playerResult[\"roomScore\"];*/\r\n\t\t\tlet shui = playerResult[\"shui\"];\r\n\t\t\tlet sportsPoint = playerResult[\"sportsPoint\"];\r\n\t\t\tlet special = rankeds[l][\"special\"];\r\n\t\t\tlet isSpecial = rankeds[l][\"isSpecial\"];\r\n\t\t\tlet simShui = simPlayerResult[l][\"shui\"];\r\n\t\t\tlet specialShui = specialResult[l][\"shui\"];\r\n\t\t\tif (!rewardsDict[posIdx]) {\r\n\t\t\t\trewardsDict[posIdx] = [];\r\n\t\t\t}\r\n\t\t\t/*rewardsDict[posIdx][\"rewards\"] = rewards;\r\n\t\t\trewardsDict[posIdx][\"score\"] = score;\r\n\t\t\trewardsDict[posIdx][\"allScore\"] = allScore;\r\n\t\t\trewardsDict[posIdx][\"roomScore\"] = roomScore;*/\r\n\t\t\trewardsDict[posIdx][\"shui\"] = shui;\r\n\t\t\trewardsDict[posIdx][\"simShui\"] = simShui;\r\n\t\t\trewardsDict[posIdx][\"specialShui\"] = specialShui;\r\n\t\t\trewardsDict[posIdx][\"special\"] = special;\r\n\t\t\trewardsDict[posIdx][\"isSpecial\"] = isSpecial;\r\n\t\t\trewardsDict[posIdx][\"sportsPoint\"] = sportsPoint;\r\n\t\t}\r\n\t\tfor (let m = 0; m < rankeds.length; m++) {\r\n\t\t\tlet ranker = rankeds[m];\r\n\t\t\tlet dunPos = ranker[\"dunPos\"];\r\n\t\t\tlet posIdx = ranker[\"posIdx\"];\r\n\t\t\trewardsDict[posIdx][\"dunPos\"] = dunPos;\r\n\t\t}\r\n\t\tthis.SetRoomProperty(\"rewardsDict\", rewardsDict);\r\n\t},\r\n\tOnResult: function (serverPack) {\r\n\t\tthis.dataInfo[\"resultInfo\"] = serverPack;\r\n\t\tlet sRankingResult = serverPack[\"sRankingResult\"];\r\n\t\tthis.GetSortOutSetEnd(sRankingResult);\r\n\t},\r\n\r\n\t//----------------获取接口--------------------\r\n\r\n\t//获取set属性值\r\n\tGetRoomSetProperty: function (property) {\r\n\t\tif (!this.dataInfo.hasOwnProperty(property)) {\r\n\t\t\tconsole.error(\"GetSetProperty(%s) not find\", property);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this.dataInfo[property];\r\n\t},\r\n\tSetRoomProperty:function(key, data){\r\n\t\tthis.dataInfo[key] = data;\r\n\t},\r\n\tGetRoomSetInfo: function () {\r\n\t\treturn this.dataInfo\r\n\t},\r\n\r\n});\r\n\r\nvar g_FJSSZRoomSet = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function () {\r\n\tif (!g_FJSSZRoomSet)\r\n\t\tg_FJSSZRoomSet = new FJSSZRoomSet();\r\n\treturn g_FJSSZRoomSet;\r\n};\r\n"]}