{"version":3,"sources":["LocalDataManager.js"],"names":["app","require","LocalDataManager","BaseClass","extend","Init","JS_Name","linkServer","InitDataDict","PlayerInitData","InitConfig","OnReload","configName","optionData","option","HaveConfigProperty","SetConfigProperty","PlayerLogin","heroID","toString","playerDataDict","GetConfigProperty","console","error","property","hasOwnProperty","value","canUse","cc","sys","localStorage","CanUse","configInfo","getItem","JSON","parse","setItem","stringify","SetPlayerConfigProperty","serverDataDict","GetPlayerConfigProperty","HavePlayerConfigProperty","Remove","removeItem","g_LocalDataManager","exports","GetModel"],"mappings":"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","file":"LocalDataManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\common","sourcesContent":["/*\r\n    本地数据库管理器\r\n*/\r\nvar app = require(\"fjssz_app\");\r\n\r\nvar LocalDataManager = app.BaseClass.extend({\r\n\r\n    Init:function(){\r\n        this.JS_Name = \"LocalDataManager\";\r\n\r\n        //暂时只有一个区\r\n        this.linkServer = \"Server01\";\r\n\r\n\t    //通用属性初始化字典\r\n\t    this.InitDataDict = {\r\n\t\t\t\t\t\t\t    \"SysSetting\":{\r\n\t\t\t\t\t\t\t    \t\t\t\t\"MainBackMusic\":'MainScene',\r\n\t\t\t\t\t\t\t    \t\t\t\t\"GameBackMusic\":'gameBackGround',\r\n\t\t\t\t\t\t\t\t\t\t\t    \"BackMusic\":1,\r\n\t\t\t\t\t\t\t\t\t\t\t    \"SpSound\":1,\r\n\t\t\t\t\t\t\t\t\t\t\t    \"BackVolume\":1,\r\n\t\t\t\t\t\t\t\t\t\t\t    \"SpVolume\":1,\r\n\t\t\t\t\t\t\t\t\t\t\t    \"IsShowChat\":1,\r\n\t\t\t\t\t\t\t\t\t\t\t    \"IsPlayVideo\":1,\r\n\t\t\t\t\t\t\t\t\t\t\t    \"TuiGuangUrl\":'',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"Language\":1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"IsAudio\":1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"QianDao\":0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"fjssz_is3DShow\":1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"Date\":-1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"LastGameType\":'',\r\n\t\t\t\t\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t\t    \"Account\":{\r\n\t\t\t\t\t\t\t\t\t\t    \"AccountDict\":{},\r\n\t\t\t\t\t\t\t\t\t\t    \"AccountList\":[],\r\n\t\t\t\t\t\t\t\t\t\t    \"AccountActive\":0,\r\n\t\t\t\t\t\t\t\t\t\t    \"AccessPoint\":0,\r\n\t\t\t\t\t\t\t\t\t\t    \"AccessTokenInfo\":{},\r\n\t\t\t\t\t\t\t\t\t\t    \"AccountID\":0,\r\n\t\t\t\t\t\t\t\t\t\t    \"uuid\":0,\r\n\t\t\t\t\t\t\t\t\t    },\r\n\t\t                        \"DebugInfo\":{\r\n\t\t\t                        \"GateServerInfo\":{},\r\n\t\t\t                        \"AccountServerInfo\":{},\r\n\t\t\t                        \"OrderServerInfo\":{},\r\n\t\t\t                        \"GameServerInfo\":{},\r\n\t\t\t                        \"ResServerInfo\":{},\r\n\t\t                        },\r\n\t\t\t\t\t\t    };\r\n\r\n\t    //玩家个人属性初始化字典\r\n\t    this.PlayerInitData = {\r\n\t\t\t\t\t\t\t    \"EventIDList\":[],\r\n\t\t\t\t\t\t\t    \"OrderDict\":{},\r\n\t\t\t\t\t\t    };\r\n\t\t//创建房间字典\t\t\t\t    \r\n\r\n        this.InitConfig();\r\n\r\n        // this.Log(\"Init\");\r\n    },\r\n\r\n    //切换账号\r\n    OnReload:function(){\r\n    },\r\n\r\n    /**\r\n     * 初始化配置\r\n     */\r\n    InitConfig:function(){\r\n\r\n\t    for(var configName in this.InitDataDict){\r\n\t\t    var optionData = this.InitDataDict[configName];\r\n\t\t    for(var option in optionData){\r\n\t\t\t    if (this.HaveConfigProperty(configName, option)){\r\n\t\t\t\t    continue\r\n\t\t\t    }\r\n\t\t\t    this.SetConfigProperty(configName, option, optionData[option]);\r\n\t\t    }\r\n\t    }\r\n    },\r\n\r\n    /**\r\n     * 初始化配置\r\n     */\r\n    PlayerLogin:function(heroID){\r\n\r\n    \theroID = heroID.toString();\r\n\r\n    \t//初始化\r\n        if (!this.HaveConfigProperty(heroID, this.linkServer)){\r\n            this.SetConfigProperty(heroID, this.linkServer, {});\r\n        }\r\n\r\n        let playerDataDict = this.GetConfigProperty(heroID, this.linkServer);\r\n        //初始化失败\r\n        if(!playerDataDict){\r\n        \tconsole.error(\"PlayerLogin(%s) fail\", heroID);\r\n            return\r\n        }\r\n\r\n\t    for(var property in this.PlayerInitData){\r\n\t\t    if(!playerDataDict.hasOwnProperty(property)){\r\n\t\t\t    playerDataDict[property] = this.PlayerInitData[property];\r\n\t\t    }\r\n\t    }\r\n        this.SetConfigProperty(heroID, this.linkServer, playerDataDict);\r\n\r\n    },\r\n\r\n\r\n    //--------------------------获取接口----------------------------------\r\n    /**\r\n     * 获取配置值\r\n     * @param configName\r\n     * @param option\r\n     * @param value\r\n     */\r\n    SetConfigProperty:function(configName, option, value){\r\n\r\n\t    let canUse = cc.sys.localStorage.CanUse;\r\n\r\n\t    let configInfo = {};\r\n\t    if(canUse){\r\n\t\t    configInfo = cc.sys.localStorage.getItem(configName)\r\n\t\t    if (configInfo){\r\n\t\t\t    configInfo = JSON.parse(configInfo);\r\n\t\t    }\r\n\t\t    //如果没有初始化\r\n\t\t    else{\r\n\t\t\t    configInfo = {};\r\n\t\t    }\r\n\r\n\t\t    configInfo[option] = value;\r\n\r\n\t\t    //如果多开客户端，会出现数据不能被保存，因为底层只接受一个数据连接请求\r\n\t\t    cc.sys.localStorage.setItem(configName, JSON.stringify(configInfo));\r\n\t    }\r\n\t    else{\r\n\t\t    configInfo = this.InitDataDict[configName];\r\n\t\t    if(!configInfo){\r\n\t\t\t    console.error(\"SetConfigProperty not find(%s)\", configName);\r\n\t\t\t    return false\r\n\t\t    }\r\n\t\t    configInfo[option] = value;\r\n\t    }\r\n\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * 获取玩家登录服务器本地数据\r\n     * @param configName\r\n     * @param option\r\n     */\r\n    SetPlayerConfigProperty:function(heroID, option, value){\r\n\t    heroID = heroID.toString();\r\n\r\n\t    let canUse = cc.sys.localStorage.CanUse;\r\n\t    if(canUse){\r\n\r\n\t\t    let configInfo = cc.sys.localStorage.getItem(heroID)\r\n\t\t    if (configInfo){\r\n\t\t\t    configInfo = JSON.parse(configInfo);\r\n\t\t    }\r\n\t\t    else{\r\n\t\t\t    configInfo = {};\r\n\t\t    }\r\n\r\n\t\t    //如果没有服务器数据,则初始化\r\n\t\t    if(!configInfo.hasOwnProperty(this.linkServer)){\r\n\t\t\t    configInfo[this.linkServer] = {};\r\n\t\t    }\r\n\r\n\t\t    let serverDataDict = configInfo[this.linkServer];\r\n\t\t    serverDataDict[option] = value;\r\n\r\n\t\t    //如果多开客户端，会出现数据不能被保存，因为底层只接受一个数据连接请求\r\n\t\t    cc.sys.localStorage.setItem(heroID, JSON.stringify(configInfo));\r\n\t    }\r\n\t    else{\r\n\t\t    this.PlayerInitData[option] = value;\r\n\t    }\r\n\r\n        return true;\r\n\r\n    },\r\n\r\n    //--------------------------设置接口----------------------------------\r\n    /**\r\n     * 设置配置值\r\n     * @param configName\r\n     * @param option\r\n     */\r\n    GetConfigProperty:function(configName, option){\r\n\t    configName = configName.toString();\r\n\r\n\t    let canUse = cc.sys.localStorage.CanUse;\r\n\r\n        let configInfo = {};\r\n\t\tif(canUse){\r\n\t\t\tconfigInfo = cc.sys.localStorage.getItem(configName);\r\n\t\t\tif (configInfo){\r\n\t\t\t\tconfigInfo = JSON.parse(configInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//可能运行环境没有支持localStorage,则取默认字典数据\r\n\t    else{\r\n\t\t\tconfigInfo = this.InitDataDict[configName];\r\n\t\t\tconsole.error(\"GetConfigProperty fail, configName:%s option:%s is not find\", configName, option);\r\n\t\t}\r\n\r\n\t    if(!configInfo){\r\n\t\t    console.error(\"GetConfigProperty(%s,%s)\", configName, option);\r\n\t\t    return\r\n\t    }\r\n\r\n        if (!configInfo.hasOwnProperty(option)){\r\n            console.error(\"GetConfigProperty fail, not find the option:%s\", option);\r\n            return;\r\n        }\r\n\r\n        return configInfo[option]\r\n    },\r\n\r\n    /**\r\n     * 获取玩家登录服务器本地数据\r\n     * @param configName\r\n     * @param option\r\n     */\r\n    GetPlayerConfigProperty:function(heroID, option){\r\n\r\n        heroID = heroID.toString();\r\n\t    let canUse = cc.sys.localStorage.CanUse;\r\n\t    let serverDataDict = {};\r\n\r\n\t    if(canUse){\r\n\t\t    let configInfo = cc.sys.localStorage.getItem(heroID)\r\n\t\t    if (configInfo){\r\n\t\t\t    configInfo = JSON.parse(configInfo);\r\n\t\t\t    if (!configInfo.hasOwnProperty(this.linkServer)){\r\n\t\t\t\t    console.error(\"GetPlayerConfigProperty(%s) fail, not find the linkServer:%s\", heroID, this.linkServer);\r\n\t\t\t\t    return;\r\n\t\t\t    }\r\n\t\t\t    serverDataDict = configInfo[this.linkServer]\r\n\t\t    }\r\n\t    }\r\n\t    else{\r\n\t\t    serverDataDict = this.PlayerInitData;\r\n\t\t    console.error(\"GetPlayerConfigProperty fail, heroID:%s option:%s is not find\", heroID, option);\r\n\t    }\r\n\r\n        if(!serverDataDict.hasOwnProperty(option)){\r\n            console.error(\"GetPlayerConfigProperty(%s,%s) not find %s\", heroID, this.linkServer, option);\r\n            return\r\n        }\r\n\r\n        return serverDataDict[option];\r\n    },\r\n\r\n    //--------------------------判断接口----------------------------------\r\n    /**\r\n     * 判断是否存在配置值\r\n     * @param configName\r\n     * @param option\r\n     */\r\n    HaveConfigProperty:function(configName, option){\r\n\r\n        let configInfo = cc.sys.localStorage.getItem(configName)\r\n        if (!configInfo){\r\n            return false;\r\n        }\r\n        configInfo = JSON.parse(configInfo);\r\n        if (!configInfo.hasOwnProperty(option)){\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    HavePlayerConfigProperty:function(heroID, option){\r\n\r\n        heroID = heroID.toString();\r\n        let configInfo = cc.sys.localStorage.getItem(heroID)\r\n        if (!configInfo){\r\n            return false;\r\n        }\r\n        configInfo = JSON.parse(configInfo);\r\n        if (!configInfo.hasOwnProperty(this.linkServer)){\r\n            return false;\r\n        }\r\n        let serverDataDict = configInfo[this.linkServer];\r\n\r\n        return serverDataDict.hasOwnProperty(option);\r\n    },\r\n\r\n    //--------------------------操作接口----------------------------------\r\n    /**\r\n     * 删除配置值\r\n     * @param configName\r\n     * @param option\r\n     */\r\n    Remove:function(configName){\r\n        cc.sys.localStorage.removeItem(configName);\r\n    },\r\n\r\n});\r\n\r\n\r\nvar g_LocalDataManager = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n    if(!g_LocalDataManager){\r\n        g_LocalDataManager = new LocalDataManager();\r\n    }\r\n    return g_LocalDataManager;\r\n}"]}