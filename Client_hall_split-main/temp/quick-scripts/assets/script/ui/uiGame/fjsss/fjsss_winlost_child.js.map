{"version":3,"sources":["fjsss_winlost_child.js"],"names":["app","require","cc","Class","extends","properties","cardPrefab","Prefab","OnLoad","LOGIC_MASK_COLOR","LOGIC_MASK_VALUE","PokerCard","Type","console","log","ShowSpecData","setEnd","playerAll","index","player","posResultList","node","getChildByName","active","difen","getComponent","Label","string","baseMark","cardNode","rankeds","beishu","dunPos","special","specialNode","mapai","children","zjid","pid","allCards","first","concat","second","third","j","length","child","name","card","instantiate","addChild","ShowCard","cardType","isMapai","newPoker","SubCardValue","GetPokeCard","poker","isShowIcon1","isShowLandowner","hideBg","isRazz","isPartnerCard","type","type1","type2","num","cardColor","GetCardColor","cardValue","GetCardValue","numNode","numSp","Sprite","iconSp","icon1_Sp","spriteFrame","pokerDict","color"],"mappings":"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","file":"fjsss_winlost_child.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\ui\\uiGame\\fjsss","sourcesContent":["/*\n UICard01-04 牌局吃到的牌显示\n */\n\nlet app = require(\"app\");\n\ncc.Class({\n\textends: require(\"BasePoker_winlost_child\"),\n\n\tproperties: {\n\t\tcardPrefab: cc.Prefab,\n\t},\n\n\t// use this for initialization\n\tOnLoad: function () {\n\t\tthis.LOGIC_MASK_COLOR = 0xF0;\n\t\tthis.LOGIC_MASK_VALUE = 0x0F;\n\t\tthis.PokerCard = app.PokerCard();\n\t\tthis.Type = {//CardType\n\t\t\t0: \"乌隆\",\n\t\t\t1: \"对子\",\n\t\t\t2: \"两对\",\n\t\t\t3: \"三条\",\n\t\t\t4: \"充扎\",\n\t\t\t5: \"爽枉充投\",\n\t\t\t6: \"叁贵\",\n\t\t\t7: \"顺子\",\n\t\t\t8: \"同花\",\n\t\t\t9: \"一对同花\",\n\t\t\t10: \"两对同花\",\n\t\t\t11: \"葫芦\",\n\t\t\t12: \"铁支\",\n\t\t\t13: \"同花顺\",\n\t\t\t14: \"五同\",\n\t\t\t15: \"六同\",\n\t\t\t16: \"五鬼\",\n\n\t\t\t84: \"三顺子\",\n\t\t\t85: \"三同花\",\n\t\t\t86: \"六对半\",\n\t\t\t87: \"三顺子\",\n\t\t\t88: \"三同花\",\n\t\t\t89: \"六对半\",\n\t\t\t90: \"六对半\",\n\t\t\t91: \"四套三条\",\n\t\t\t92: \"三分天下\",\n\t\t\t93: \"三同花顺\",\n\t\t\t94: \"一条龙\",\n\t\t\t100: \"至尊清龙\"\n\t\t};\n\t\tconsole.log(\"pokercard\", this.PokerCard)\n\t},\n\tShowSpecData: function (setEnd, playerAll, index) {\n\t\t//console.log(\"单局结算数据\", setEnd, playerAll, index);\n\t\tlet player = setEnd.posResultList[index];\n\t\t//倍数\n\t\t//this.node.getChildByName(\"lb_beiShu\").active = true;\n\t\t//let beishu = this.node.getChildByName(\"lb_beiShu\").getComponent(cc.Label);\n\n\t\t//beishu.string = player.doubleNum;\n\n\t\t//底分\n\t\tthis.node.getChildByName(\"lb_difen\").active = true;\n\t\tlet difen = this.node.getChildByName(\"lb_difen\").getComponent(cc.Label);\n\t\tdifen.string = player.baseMark;\n\n\n\t\t//显示底牌\n\t\tlet cardNode = this.node.getChildByName(\"card\");\n\t\tlet rankeds = setEnd.rankeds[index];\n\t\tconsole.log(\"服务端传过来的数据\", setEnd.rankeds);\n\n\t\t//倍数\n\t\tlet beishu = rankeds[\"beiShu\"];\n\t\tthis.node.getChildByName(\"lb_beiShu\").active = true;\n\t\tthis.node.getChildByName(\"lb_beiShu\").getComponent(cc.Label).string = beishu;\n\n\t\tlet dunPos = rankeds.dunPos;\n\t\tlet special = rankeds.special;\n\t\tlet specialNode = cardNode.getChildByName(\"special_card\");\n\t\tlet mapai = setEnd.mapai[\"key\"];\n\t\tconsole.log(\"马牌：\", setEnd.mapai[\"key\"]);\n\t\tspecialNode.active = false;\n\t\tspecialNode.children[0].getComponent(cc.Label).string = \"\";\n\t\tif (special != -1) {\n\t\t\t//显示特殊牌型\n\t\t\tspecialNode.active = true;\n\t\t\tspecialNode.children[0].getComponent(cc.Label).string = this.Type[special];\n\t\t}\n\n\t\tcardNode.getChildByName(\"zhuangjia\").active = setEnd.zjid == player.pid;\n\n\t\tlet allCards = dunPos.first.concat(dunPos.second, dunPos.third);\n\t\tfor (let j = 0; j < cardNode.children.length; j++) {\n\t\t\tlet child = cardNode.children[j];\n\t\t\tif (child.name == \"zhuangjia\" ||\n\t\t\t\tchild.name == \"beishu\" ||\n\t\t\t\tchild.name == \"special_card\") {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!child.getChildByName(\"cardPrefab\")) {\n\t\t\t\tlet card = cc.instantiate(this.cardPrefab);\n\t\t\t\tchild.addChild(card);\n\t\t\t\tthis.ShowCard(allCards[j], card,mapai);\n\t\t\t} else {\n\t\t\t\tlet card = child.getChildByName(\"cardPrefab\");\n\t\t\t\tthis.ShowCard(allCards[j], card,mapai);\n\t\t\t}\n\t\t}\n\t},\n\tShowCard: function (cardType, node,mapai) {\n\t\tlet isMapai = cardType == mapai ? true : false;\n\t\t\n\t\tlet newPoker = this.PokerCard.SubCardValue(cardType);\n\t\n\t\t\t// console.log(\"是马牌\");\n\t\t\tconsole.log(cardType);\n\t\t\tconsole.log(newPoker);\n\t\t\n\t\tthis.GetPokeCard(newPoker, node,isMapai);\n\t\tnode.getChildByName(\"poker_back\").active = false;\n\t},\n\tGetPokeCard: function (poker, cardNode,isMapai, isShowIcon1 = true, isShowLandowner = false, hideBg = false, isRazz = false, isPartnerCard = false) {\n\t\tif (0 == poker) {\n\t\t\treturn;\n\t\t}\n\t\tlet type = \"\";\n\t\tlet type1 = \"\";\n\t\tlet type2 = \"\";\n\t\tlet num = \"\";\n\t\tlet cardColor = this.GetCardColor(poker);\n\t\tlet cardValue = this.GetCardValue(poker);\n\t\tlet numNode = cardNode.getChildByName(\"num\");\n\t\tnumNode.active = true;\n\t\tif (cardColor == 0) {\n\t\t\ttype = \"bg_diamond1_\";\n\t\t\ttype1 = type + 1;\n\t\t\ttype2 = type + 2;\n\t\t\t// if (cardValue > 10) {\n\t\t\tif (cardValue > 10 && cardValue < 14) {\n\t\t\t\ttype2 = \"bg_red_\" + cardValue;\n\t\t\t\t// type1 = \"\";\n\t\t\t\t// type2 = \"bg_diamond_\" + cardValue;\n\t\t\t}\n\t\t\tnum = \"red_\" + cardValue;\n\t\t} else if (cardColor == 16) {\n\t\t\ttype = \"bg_club1_\";\n\t\t\ttype1 = type + 1;\n\t\t\ttype2 = type + 2;\n\t\t\t// if (cardValue > 10) {\n\t\t\tif (cardValue > 10 && cardValue < 14) {\n\t\t\t\ttype2 = \"bg_blue_\" + cardValue;\n\t\t\t\t// type1 = \"\";\n\t\t\t\t// type2 = \"bg_club_\" + cardValue;\n\t\t\t}\n\t\t\tnum = \"black_\" + cardValue;\n\t\t} else if (cardColor == 32) {\n\t\t\ttype = \"bg_heart1_\";\n\t\t\ttype1 = type + 1;\n\t\t\ttype2 = type + 2;\n\t\t\t// if (cardValue > 10) {\n\t\t\tif (cardValue > 10 && cardValue < 14) {\n\t\t\t\ttype2 = \"bg_red_\" + cardValue;\n\t\t\t\t// type1 = \"\";\n\t\t\t\t// type2 = \"bg_heart_\" + cardValue;\n\t\t\t}\n\t\t\tnum = \"red_\" + cardValue;\n\t\t} else if (cardColor == 48) {\n\t\t\ttype = \"bg_spade1_\";\n\t\t\ttype1 = type + 1;\n\t\t\ttype2 = type + 2;\n\t\t\t// if (cardValue > 10) {\n\t\t\tif (cardValue > 10 && cardValue < 14) {\n\t\t\t\ttype2 = \"bg_blue_\" + cardValue;\n\t\t\t\t// type1 = \"\";\n\t\t\t\t// type2 = \"bg_spade_\" + cardValue;\n\t\t\t}\n\t\t\tnum = \"black_\" + cardValue;\n\t\t} else if (cardColor == 64) {//双数小鬼   0x42-0x4e\n\t\t\tnumNode.active = false;//2,3,4,5,6,7,8,9,a\n\t\t\tif (cardValue % 2 == 0) {//双数小鬼\n\t\t\t\ttype1 = \"icon_small_king_01\";\n\t\t\t\ttype2 = \"icon_small_king\";\n\t\t\t} else if (cardValue % 2 == 1) {//单数大鬼\n\t\t\t\ttype1 = \"icon_big_king_01\";\n\t\t\t\ttype2 = \"icon_big_king\";\n\t\t\t}\n\t\t}\n\t\tlet numSp = cardNode.getChildByName(\"num\").getComponent(cc.Sprite);\n\t\tlet iconSp = cardNode.getChildByName(\"icon\").getComponent(cc.Sprite);\n\t\tlet icon1_Sp = cardNode.getChildByName(\"icon_1\").getComponent(cc.Sprite);\n\t\t/*numSp.spriteFrame = this.pokerAtlas.getSpriteFrame(num);\n\t\ticonSp.spriteFrame = this.pokerAtlas.getSpriteFrame(type1);\n\t\ticon1_Sp.spriteFrame = this.pokerAtlas.getSpriteFrame(type2);*/\n\t\tnumSp.spriteFrame = this.PokerCard.pokerDict[num];\n\t\ticonSp.spriteFrame = this.PokerCard.pokerDict[type1];\n\t\ticon1_Sp.spriteFrame = this.PokerCard.pokerDict[type2];\n\t\tif (hideBg) {\n\t\t\tcardNode.getChildByName(\"poker_back\").active = false;\n\t\t}\n\t},\n\t//获取牌值\n\tGetCardValue: function (poker) {\n\t\treturn poker & this.PokerCard.LOGIC_MASK_VALUE;\n\t},\n\n\t//获取花色\n\tGetCardColor: function (poker) {\n\t\twhile (poker >= 256) {\n\t\t\tpoker -= 256;\n\t\t}\n\t\tlet color = poker & this.PokerCard.LOGIC_MASK_COLOR;\n\t\treturn color;\n\t},\n});\n"]}