{"version":3,"sources":["UIClubInRoom.js"],"names":["app","require","cc","Class","extends","properties","data","Node","table","table_bg","SpriteFrame","OnCreateInit","NetManager","WeChatManager","RegEvent","Event_RoomStatusChange","Event_RoomPlayerChange","Event_RoomSetChange","serverPack","roomData","roomInfoItem","isClose","roomKey","CloseForm","roomInfo","posList","pos","InitHead","InitUserName","log","ShowPlayHead","ShowUserName","playerNum","setId","ShowRoomData","OnShow","realWidth","winSize","width","baseX","Math","floor","x","ShowTableBg","gameId","getChildByName","getComponent","Label","string","roomName","ShareDefine","GametTypeID2Name","tagId","jushuStr","setCount","total","left","GameType_JXFZGP","GameType_GD","GameType_WHMJ","GameType_MASMJ","GametTypeID2PinYin","userNameNode","i","node","active","length","heroID","name","headImageUrl","usernode","substr","touxiang","InitHeroHeadImage","WeChatHeadImage","ShowHeroHead","LuoZuo","userlistNode","LuoZuoString","Sprite","spriteFrame","ShowMore","y","action","sequence","moveTo","v2","callFunc","runAction","OnClose","OnClick","btnName","btnNode","SysNotifyManager","ShowSysMsg","clientPos","HeroManager","GetHeroID","gamePY","self","SendPack","roomId","success","Client","OnEvent","error","curGameTypeStr","SetGameType","FormManager","ShowForm","ErrLog"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,UAAR,CADJ;;AAGLI,gBAAY;AACRC,cAAMJ,GAAGK,IADD;AAERC,eAAON,GAAGK,IAFF;AAGRE,kBAAU,CAACP,GAAGQ,WAAJ;AAHF,KAHP;;AASL;AACAC,kBAAc,wBAAW;AACrB,aAAKC,UAAL,GAAkBZ,IAAIY,UAAJ,EAAlB;AACA,aAAKC,aAAL,GAAqBb,IAAIa,aAAJ,EAArB;AACA,aAAKC,QAAL,CAAc,mBAAd,EAAmC,KAAKC,sBAAxC,EAAgE,IAAhE;AACA,aAAKD,QAAL,CAAc,oBAAd,EAAoC,KAAKE,sBAAzC,EAAiE,IAAjE;AACA,aAAKF,QAAL,CAAc,iBAAd,EAAiC,KAAKG,mBAAtC,EAA2D,IAA3D;AAEH,KAjBI;AAkBLF,4BAAwB,gCAASG,UAAT,EAAqB;AACzC,YAAIC,WAAWD,WAAWE,YAA1B;AACA,YAAIC,UAAUF,SAASE,OAAvB;AACA,YAAIF,SAASG,OAAT,IAAoB,KAAKA,OAA7B,EAAsC;AAClC,gBAAID,WAAW,IAAf,EAAqB;AACjB,qBAAKE,SAAL,GADiB,CACC;AACrB;AACJ;AACJ,KA1BI;AA2BLP,4BAAwB,gCAASE,UAAT,EAAqB;AACzC,YAAIA,WAAWI,OAAX,IAAsB,KAAKA,OAA/B,EAAwC;AACpC,iBAAKE,QAAL,CAAcC,OAAd,CAAsBP,WAAW,KAAX,EAAkBQ,GAAxC,IAA+CR,WAAW,KAAX,CAA/C;AACA,iBAAKS,QAAL;AACA,iBAAKC,YAAL;AACA,gBAAIH,UAAU,KAAKD,QAAL,CAAcC,OAA5B;AACAvB,eAAG2B,GAAH,CAAO,WAAP,EAAmBX,UAAnB;AACA,iBAAKY,YAAL,CAAkBL,OAAlB;AACA,iBAAKM,YAAL,CAAkBN,OAAlB,EAA2B,KAAKD,QAAL,CAAcQ,SAAzC;AACH;AACJ,KArCI;AAsCLf,yBAAqB,6BAASC,UAAT,EAAqB;AACtC,YAAIA,WAAWI,OAAX,IAAsB,KAAKA,OAA/B,EAAwC;AACpC,iBAAKE,QAAL,CAAcS,KAAd,GAAsBf,WAAWe,KAAjC;AACA,iBAAKC,YAAL,CAAkB,KAAKV,QAAvB;AACH;AACJ,KA3CI;AA4CL;;AAEAW,YAAQ,gBAASX,QAAT,EAAmB;AACvB,aAAKA,QAAL,GAAgBA,QAAhB;AACA,aAAKF,OAAL,GAAeE,SAASF,OAAxB;AACA,aAAKY,YAAL,CAAkBV,QAAlB;AACA,YAAIY,YAAYlC,GAAGmC,OAAH,CAAWC,KAA3B;AACA,YAAIF,YAAY,IAAhB,EAAsB;AAClB,iBAAKG,KAAL,GAAa,OAAOC,KAAKC,KAAL,CAAW,CAACL,YAAY,IAAb,IAAqB,CAAhC,CAApB;AACH,SAFD,MAEO;AACH,iBAAKG,KAAL,GAAa,IAAb;AACH;AACD,aAAKjC,IAAL,CAAUoC,CAAV,GAAc,KAAKH,KAAnB;AACA,aAAKI,WAAL,CAAiBnB,SAASQ,SAA1B;AACA,YAAIP,UAAUD,SAASC,OAAvB;AACA,aAAKE,QAAL;AACA,aAAKC,YAAL;AACA,aAAKE,YAAL,CAAkBL,OAAlB;AACA,aAAKM,YAAL,CAAkBN,OAAlB,EAA2BD,SAASQ,SAApC;AACH,KA/DI;AAgELE,kBAAc,sBAASf,QAAT,EAAmB;AAC7B,aAAKyB,MAAL,GAAczB,SAASyB,MAAvB;AACA,aAAKpC,KAAL,CAAWqC,cAAX,CAA0B,aAA1B,EAAyCC,YAAzC,CAAsD5C,GAAG6C,KAAzD,EAAgEC,MAAhE,GAAyE7B,SAAS8B,QAAlF;AACA,aAAKzC,KAAL,CAAWqC,cAAX,CAA0B,WAA1B,EAAuCC,YAAvC,CAAoD5C,GAAG6C,KAAvD,EAA8DC,MAA9D,GAAuE,KAAKE,WAAL,CAAiBC,gBAAjB,CAAkChC,SAASyB,MAA3C,CAAvE;AACA,aAAKpC,KAAL,CAAWqC,cAAX,CAA0B,QAA1B,EAAoCA,cAApC,CAAmD,KAAnD,EAA0DC,YAA1D,CAAuE5C,GAAG6C,KAA1E,EAAiFC,MAAjF,GAA0F7B,SAASiC,KAAnG;AACA,YAAIC,WAAW,EAAf;AACA,YAAIlC,SAASmC,QAAT,GAAoB,GAApB,IAA2BnC,SAASmC,QAAT,GAAoB,GAAnD,EAAwD;AACpD,gBAAIC,QAAQpC,SAASa,SAAT,IAAsBb,SAASmC,QAAT,GAAoB,GAA1C,CAAZ;AACA,gBAAIE,OAAOD,QAAQpC,SAASc,KAA5B;AACAoB,uBAAW,OAAOG,IAAP,GAAc,GAAzB;AACH,SAJD,MAIO,IAAIrC,SAASmC,QAAT,IAAqB,GAAzB,EAA8B;AACjCD,uBAAW,IAAX;AACH,SAFM,MAEA,IAAIlC,SAASmC,QAAT,IAAqB,GAAzB,EAA8B;AACjCD,uBAAW,QAAX;AACH,SAFM,MAEA,IAAIlC,SAASmC,QAAT,IAAqB,GAAzB,EAA8B;AACjCD,uBAAW,SAAX;AACH,SAFM,MAEA,IAAIlC,SAASmC,QAAT,IAAqB,GAAzB,EAA8B;AACjCD,uBAAW,IAAX;AACH,SAFM,MAEA,IAAIlC,SAASmC,QAAT,IAAqB,GAArB,IAA4BnC,SAASyB,MAAT,IAAmB,KAAKM,WAAL,CAAiBO,eAApE,EAAqF;AACxFJ,uBAAW,IAAX;AACH,SAFM,MAEA,IAAIlC,SAASmC,QAAT,IAAqB,GAArB,IAA4BnC,SAASyB,MAAT,IAAmB,KAAKM,WAAL,CAAiBQ,WAApE,EAAiF;AACpF,gBAAIJ,WAAWnC,SAASmC,QAAT,GAAoB,GAAnC;AACA,gBAAIA,YAAY,EAAhB,EAAoB;AAChBD,2BAAW,IAAX;AACH,aAFD,MAEO;AACHA,2BAAW,MAAMC,QAAjB;AACH;AACJ,SAPM,MAOA,IAAInC,SAASmC,QAAT,IAAqB,GAArB,IAA4BnC,SAASyB,MAAT,IAAmB,KAAKM,WAAL,CAAiBS,aAApE,EAAmF;AACtFN,uBAAWlC,SAASmC,QAAT,GAAoB,GAApB,GAA0B,GAArC;AACH,SAFM,MAEA,IAAInC,SAASmC,QAAT,IAAqB,GAArB,IAA4BnC,SAASyB,MAAT,IAAmB,KAAKM,WAAL,CAAiBU,cAApE,EAAoF;AACvFP,uBAAW,MAAMlC,SAASc,KAAf,GAAuB,GAAvB,GAA6Bd,SAASmC,QAAT,GAAoB,GAAjD,GAAuD,GAAlE;AACH,SAFM,MAEA;AACHD,uBAAW,MAAMlC,SAASc,KAAf,GAAuB,GAAvB,GAA6Bd,SAASmC,QAAtC,GAAiD,GAA5D;AACH;AACD,YAAI,KAAKJ,WAAL,CAAiBW,kBAAjB,CAAoC1C,SAASyB,MAA7C,KAAwD,MAA5D,EAAoE;AAChES,uBAAWlC,SAASmC,QAAT,IAAqB,EAArB,GAA0BnC,SAASmC,QAAT,GAAoB,GAA9C,GAAoD,MAAMnC,SAASc,KAAf,GAAuB,GAAvB,GAA6Bd,SAASmC,QAAtC,GAAiD,GAAhH;AACH;AACD,YAAI,KAAKJ,WAAL,CAAiBW,kBAAjB,CAAoC1C,SAASyB,MAA7C,KAAwD,OAA5D,EAAqE;AACjES,uBAAWlC,SAASmC,QAAT,IAAqB,GAArB,GAA2B,MAAMnC,SAASc,KAAf,GAAuB,GAAvB,GAA6B,KAAxD,GAAgE,MAAMd,SAASc,KAAf,GAAuB,GAAvB,GAA6Bd,SAASmC,QAAtC,GAAiD,GAA5H;AACH;AACD,YAAI,KAAKJ,WAAL,CAAiBW,kBAAjB,CAAoC1C,SAASyB,MAA7C,KAAwD,OAA5D,EAAqE;AAClES,uBAAW,MAAMlC,SAASc,KAAf,GAAuB,GAAlC;AACF;AACDoB,oBAAY,OAAOlC,SAASa,SAAhB,GAA4B,GAAxC;AACA,aAAKxB,KAAL,CAAWqC,cAAX,CAA0B,OAA1B,EAAmCC,YAAnC,CAAgD5C,GAAG6C,KAAnD,EAA0DC,MAA1D,GAAmEK,QAAnE;AACH,KA7GI;AA8GLzB,kBAAc,wBAAW;AACrB,YAAIkC,eAAe,KAAKxD,IAAL,CAAUuC,cAAV,CAAyB,MAAzB,EAAiCA,cAAjC,CAAgD,UAAhD,CAAnB;AACA,aAAK,IAAIkB,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,gBAAIC,OAAOF,aAAajB,cAAb,CAA4B,UAAUkB,IAAI,CAAd,CAA5B,CAAX;AACAC,iBAAKC,MAAL,GAAc,KAAd;AACH;AACJ,KApHI;AAqHLtC,cAAU,oBAAW;AACjB;AACA;AACA;AACA;AACH,KA1HI;AA2HLG,kBAAc,sBAASL,OAAT,EAAkB;AAC5B,aAAK,IAAIsC,IAAI,CAAb,EAAgBA,IAAItC,QAAQyC,MAA5B,EAAoCH,GAApC,EAAyC;AACrC,gBAAIA,IAAI,CAAR,EAAW;AACP;AACH;AACD,gBAAII,SAAS1C,QAAQsC,CAAR,EAAW,KAAX,CAAb;AACA,gBAAII,SAAS,CAAb,EAAgB;AACZ,oBAAIC,OAAO3C,QAAQsC,CAAR,EAAW,MAAX,CAAX;AACA,oBAAIM,eAAe5C,QAAQsC,CAAR,EAAW,cAAX,CAAnB;AACA,oBAAIO,WAAW,KAAK9D,KAAL,CAAWqC,cAAX,CAA0B,aAA1B,EAAyCA,cAAzC,CAAwD,UAAUkB,IAAI,CAAd,CAAxD,CAAf;AACAO,yBAASL,MAAT,GAAkB,IAAlB;AACAK,yBAASzB,cAAT,CAAwB,MAAxB,EAAgCA,cAAhC,CAA+C,IAA/C,EAAqDC,YAArD,CAAkE5C,GAAG6C,KAArE,EAA4EC,MAA5E,GAAqFoB,KAAKG,MAAL,CAAY,CAAZ,EAAe,CAAf,CAArF;AACA,oBAAIJ,SAAS,CAAb,EAAgB;AACZ,wBAAIK,WAAWF,SAASzB,cAAT,CAAwB,MAAxB,EAAgCA,cAAhC,CAA+C,MAA/C,CAAf;AACA,yBAAKhC,aAAL,CAAmB4D,iBAAnB,CAAqCN,MAArC,EAA6CE,YAA7C;AACA,wBAAIK,kBAAkBF,SAAS1B,YAAT,CAAsB,iBAAtB,CAAtB;AACA4B,oCAAgBC,YAAhB,CAA6BR,MAA7B,EAAoCE,YAApC;AACH;AACJ;AACJ;AACJ,KA/II;AAgJLtC,kBAAc,sBAASN,OAAT,EAAkBO,SAAlB,EAA6B;AACvC,YAAI4C,SAAS,CAAb;AACA,YAAIC,eAAe,KAAKvE,IAAL,CAAUuC,cAAV,CAAyB,MAAzB,EAAiCA,cAAjC,CAAgD,UAAhD,CAAnB;AACA,aAAK,IAAIkB,IAAI,CAAb,EAAgBA,IAAItC,QAAQyC,MAA5B,EAAoCH,GAApC,EAAyC;AACrC,gBAAII,SAAS1C,QAAQsC,CAAR,EAAW,KAAX,CAAb;AACA,gBAAII,SAAS,CAAb,EAAgB;AACZS;AACA,oBAAIN,WAAWO,aAAahC,cAAb,CAA4B,UAAUkB,IAAI,CAAd,CAA5B,CAAf;AACAO,yBAASL,MAAT,GAAkB,IAAlB;AACA,oBAAIG,OAAO3C,QAAQsC,CAAR,EAAW,MAAX,CAAX;AACAO,yBAASzB,cAAT,CAAwB,SAAxB,EAAmCC,YAAnC,CAAgD5C,GAAG6C,KAAnD,EAA0DC,MAA1D,GAAmEoB,IAAnE;AACH;AACJ;AACD,YAAIU,eAAe,EAAnB;AACA,YAAIF,UAAU,CAAd,EAAiB;AACbE,2BAAe,MAAf;AACH,SAFD,MAEO,IAAIF,UAAU,CAAd,EAAiB;AACpBE,2BAAe,MAAf;AACH,SAFM,MAEA,IAAIF,UAAU,CAAd,EAAiB;AACpBE,2BAAe,MAAf;AACH,SAFM,MAEA,IAAIF,UAAU,CAAd,EAAiB;AACpBE,2BAAe,MAAf;AACH,SAFM,MAEA,IAAIF,UAAU,CAAd,EAAiB;AACpBE,2BAAe,MAAf;AACH,SAFM,MAEA,IAAIF,UAAU,CAAd,EAAiB;AACpBE,2BAAe,MAAf;AACH,SAFM,MAEA,IAAIF,UAAU,CAAd,EAAiB;AACpBE,2BAAe,MAAf;AACH,SAFM,MAEA,IAAIF,UAAU,CAAd,EAAiB;AACpBE,2BAAe,MAAf;AACH;AACD,YAAIF,UAAU5C,SAAd,EAAyB;AACrB,iBAAK1B,IAAL,CAAUuC,cAAV,CAAyB,cAAzB,EAAyCA,cAAzC,CAAwD,QAAxD,EAAkEC,YAAlE,CAA+E5C,GAAG6C,KAAlF,EAAyFC,MAAzF,GAAkG,IAAlG;AACH,SAFD,MAEO;AACH,iBAAK1C,IAAL,CAAUuC,cAAV,CAAyB,cAAzB,EAAyCA,cAAzC,CAAwD,QAAxD,EAAkEC,YAAlE,CAA+E5C,GAAG6C,KAAlF,EAAyFC,MAAzF,GAAkG8B,YAAlG;AACH;AAEJ,KArLI;AAsLLnC,iBAAa,qBAASX,SAAT,EAAoB;AAC7B,YAAIA,YAAY,CAAZ,IAAiB,OAAOA,SAAP,IAAqB,WAA1C,EAAuD;AACnDA,wBAAY,CAAZ;AACH;AACD,YAAIA,YAAY,CAAhB,EAAmB;AACfA,wBAAY,CAAZ;AACH;;AAED,aAAKxB,KAAL,CAAWsC,YAAX,CAAwB5C,GAAG6E,MAA3B,EAAmCC,WAAnC,GAAiD,KAAKvE,QAAL,CAAcuB,YAAY,CAA1B,CAAjD;AACH,KA/LI;AAgMLiD,cAAU,oBAAW;AACjB,aAAK3E,IAAL,CAAUuC,cAAV,CAAyB,cAAzB,EAAyCA,cAAzC,CAAwD,QAAxD,EAAkEC,YAAlE,CAA+E5C,GAAG6C,KAAlF,EAAyFC,MAAzF,GAAkG,MAAlG;AACA,YAAIN,IAAI,KAAKH,KAAL,GAAa,GAArB;AACA,YAAI2C,IAAI,KAAK5E,IAAL,CAAU4E,CAAlB;AACA,YAAIC,SAASjF,GAAGkF,QAAH,CAAYlF,GAAGmF,MAAH,CAAU,GAAV,EAAenF,GAAGoF,EAAH,CAAM5C,CAAN,EAASwC,CAAT,CAAf,CAAZ,EAAyChF,GAAGqF,QAAH,CAAY,YAAW,CAAE,CAAzB,EAA2B,IAA3B,CAAzC,CAAb;AACA,aAAKjF,IAAL,CAAUkF,SAAV,CAAoBL,MAApB;AACH,KAtMI;AAuMLM,aAAS,mBAAW,CAEnB,CAzMI;AA0ML;AACAC,aAAS,iBAASC,OAAT,EAAkBC,OAAlB,EAA2B;AAChC,YAAI,kBAAkBD,OAAtB,EAA+B;AAC3B,gBAAI,KAAKnE,QAAL,CAAcS,KAAd,GAAsB,CAA1B,EAA6B;AACzBjC,oBAAI6F,gBAAJ,GAAuBC,UAAvB,CAAkC,kBAAlC;AACA;AACH;AACD;AACA,gBAAIrE,UAAU,KAAKD,QAAL,CAAcC,OAA5B;AACA,gBAAIsE,YAAY,CAAC,CAAjB;AACA,iBAAK,IAAIhC,IAAI,CAAb,EAAgBA,IAAItC,QAAQyC,MAA5B,EAAoCH,GAApC,EAAyC;AACrC,oBAAI/D,IAAIgG,WAAJ,GAAkBC,SAAlB,MAAiCxE,QAAQsC,CAAR,EAAW,KAAX,CAArC,EAAwD;AACpDgC,gCAAYtE,QAAQsC,CAAR,EAAW,KAAX,CAAZ;AACA;AACH;AACJ;AACD,gBAAImC,SAASlG,IAAIkD,WAAJ,GAAkBW,kBAAlB,CAAqC,KAAKjB,MAA1C,CAAb;AACA,gBAAImD,YAAY,CAAC,CAAjB,EAAoB;AAChB,oBAAII,OAAO,IAAX;AACA,qBAAKvF,UAAL,CAAgBwF,QAAhB,CAAyB,oBAAzB,EAA+C;AAC3C,8BAAU,KAAK5E,QAAL,CAAc6E,MADmB;AAE3C,gCAAYN;AAF+B,iBAA/C,EAGG,UAASO,OAAT,EAAkB;AACjB;AACAtG,wBAAIuG,MAAJ,CAAWC,OAAX,CAAmB,SAAnB,EAA8B,EAA9B;AACAL,yBAAK5E,SAAL;AACH,iBAPD,EAOG,UAASkF,KAAT,EAAgB;AACfzG,wBAAI6F,gBAAJ,GAAuBC,UAAvB,CAAkC,wBAAlC;AACH,iBATD;AAUH,aAZD,MAYO;AACH9F,oBAAI6F,gBAAJ,GAAuBC,UAAvB,CAAkC,wBAAlC;AACA;AACH;AACJ,SA/BD,MA+BO,IAAI,gBAAgBH,OAApB,EAA6B;AAChC,gBAAIe,iBAAiB1G,IAAIkD,WAAJ,GAAkBW,kBAAlB,CAAqC,KAAKjB,MAA1C,CAArB;AACA5C,gBAAIuG,MAAJ,CAAWI,WAAX,CAAuBD,cAAvB;AACA,iBAAKE,WAAL,CAAiBC,QAAjB,CAA0B,gBAA1B,EAA4CH,cAA5C,EAA4D,CAA5D,EAA+D,IAA/D,EAAqE,CAArE,EAAwE,CAAxE,EAA2E,IAA3E;AACH,SAJM,MAIA,IAAI,kBAAkBf,OAAtB,EAA+B;AAClC,gBAAI,KAAKrF,IAAL,CAAUoC,CAAV,IAAe,KAAKH,KAAxB,EAA+B;AAC3B,qBAAK0C,QAAL;AACH,aAFD,MAEO;AACH,qBAAKlD,YAAL,CAAkB,KAAKP,QAAL,CAAcC,OAAhC;AACA,qBAAKnB,IAAL,CAAUoC,CAAV,GAAc,KAAKH,KAAnB;AACH;AACJ,SAPM,MAOA;AACH,iBAAKuE,MAAL,CAAY,qBAAZ,EAAmCnB,OAAnC;AACH;AACJ;AAzPI,CAAT","file":"UIClubInRoom.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\ui\\club","sourcesContent":["/*\n    UIMessage 模态消息界面\n*/\n\nvar app = require(\"app\");\n\ncc.Class({\n    extends: require(\"BaseForm\"),\n\n    properties: {\n        data: cc.Node,\n        table: cc.Node,\n        table_bg: [cc.SpriteFrame],\n    },\n\n    //初始化\n    OnCreateInit: function() {\n        this.NetManager = app.NetManager();\n        this.WeChatManager = app.WeChatManager();\n        this.RegEvent(\"OnRoomStateChange\", this.Event_RoomStatusChange, this);\n        this.RegEvent(\"OnRoomPlayerChange\", this.Event_RoomPlayerChange, this);\n        this.RegEvent(\"OnRoomSetChange\", this.Event_RoomSetChange, this);\n\n    },\n    Event_RoomStatusChange: function(serverPack) {\n        let roomData = serverPack.roomInfoItem;\n        let isClose = roomData.isClose;\n        if (roomData.roomKey == this.roomKey) {\n            if (isClose == true) {\n                this.CloseForm(); //房间已经结束\n            }\n        }\n    },\n    Event_RoomPlayerChange: function(serverPack) {\n        if (serverPack.roomKey == this.roomKey) {\n            this.roomInfo.posList[serverPack['pos'].pos] = serverPack['pos'];\n            this.InitHead();\n            this.InitUserName();\n            let posList = this.roomInfo.posList;\n            cc.log(\"服务端传来的消息：\",serverPack);\n            this.ShowPlayHead(posList);\n            this.ShowUserName(posList, this.roomInfo.playerNum);\n        }\n    },\n    Event_RoomSetChange: function(serverPack) {\n        if (serverPack.roomKey == this.roomKey) {\n            this.roomInfo.setId = serverPack.setId;\n            this.ShowRoomData(this.roomInfo);\n        }\n    },\n    //---------显示函数--------------------\n\n    OnShow: function(roomInfo) {\n        this.roomInfo = roomInfo;\n        this.roomKey = roomInfo.roomKey;\n        this.ShowRoomData(roomInfo);\n        let realWidth = cc.winSize.width;\n        if (realWidth > 1360) {\n            this.baseX = 1100 + Math.floor((realWidth - 1360) / 2);\n        } else {\n            this.baseX = 1100;\n        }\n        this.data.x = this.baseX;\n        this.ShowTableBg(roomInfo.playerNum);\n        let posList = roomInfo.posList;\n        this.InitHead();\n        this.InitUserName();\n        this.ShowPlayHead(posList);\n        this.ShowUserName(posList, roomInfo.playerNum);\n    },\n    ShowRoomData: function(roomData) {\n        this.gameId = roomData.gameId;\n        this.table.getChildByName(\"lb_roomName\").getComponent(cc.Label).string = roomData.roomName;\n        this.table.getChildByName('game_name').getComponent(cc.Label).string = this.ShareDefine.GametTypeID2Name[roomData.gameId];\n        this.table.getChildByName('bg_key').getChildByName('key').getComponent(cc.Label).string = roomData.tagId;\n        let jushuStr = \"\";\n        if (roomData.setCount > 100 && roomData.setCount < 200) {\n            let total = roomData.playerNum * (roomData.setCount % 100);\n            let left = total - roomData.setId;\n            jushuStr = \"剩:\" + left + \"庄\";\n        } else if (roomData.setCount == 201) {\n            jushuStr = \"1拷\";\n        } else if (roomData.setCount == 310) {\n            jushuStr = \"1课:10分\";\n        } else if (roomData.setCount == 311) {\n            jushuStr = \"1课:100分\";\n        } else if (roomData.setCount == 312) {\n            jushuStr = \"局麻\";\n        } else if (roomData.setCount == 401 && roomData.gameId == this.ShareDefine.GameType_JXFZGP) {\n            jushuStr = \"1次\";\n        } else if (roomData.setCount >= 400 && roomData.gameId == this.ShareDefine.GameType_GD) {\n            let setCount = roomData.setCount % 400;\n            if (setCount == 14) {\n                jushuStr = \"过A\";\n            } else {\n                jushuStr = \"过\" + setCount;\n            }\n        } else if (roomData.setCount >= 400 && roomData.gameId == this.ShareDefine.GameType_WHMJ) {\n            jushuStr = roomData.setCount % 400 + \"底\";\n        } else if (roomData.setCount >= 600 && roomData.gameId == this.ShareDefine.GameType_MASMJ) {\n            jushuStr = \"第\" + roomData.setId + \"/\" + roomData.setCount % 600 + \"倒\";\n        } else {\n            jushuStr = \"第\" + roomData.setId + \"/\" + roomData.setCount + \"局\";\n        }\n        if (this.ShareDefine.GametTypeID2PinYin[roomData.gameId] == \"chmj\") {\n            jushuStr = roomData.setCount >= 30 ? roomData.setCount + \"锅\" : \"第\" + roomData.setId + \"/\" + roomData.setCount + \"局\";\n        }\n        if (this.ShareDefine.GametTypeID2PinYin[roomData.gameId] == \"zznsb\") {\n            jushuStr = roomData.setCount == 501 ? \"第\" + roomData.setId + \"/\" + \"千分局\" : \"第\" + roomData.setId + \"/\" + roomData.setCount + \"局\";\n        }\n        if (this.ShareDefine.GametTypeID2PinYin[roomData.gameId] == \"glwsk\") {\n           jushuStr = \"第\" + roomData.setId + \"局\";\n        }\n        jushuStr += \"  \" + roomData.playerNum + \"人\";\n        this.table.getChildByName('jushu').getComponent(cc.Label).string = jushuStr;\n    },\n    InitUserName: function() {\n        let userNameNode = this.data.getChildByName(\"mask\").getChildByName(\"userlist\");\n        for (let i = 0; i < 8; i++) {\n            let node = userNameNode.getChildByName(\"user\" + (i + 1));\n            node.active = false;\n        }\n    },\n    InitHead: function() {\n        // for (let i = 0; i < 4; i++) {\n        //     let usernode = this.table.getChildByName('head_layout').getChildByName('user' + (i + 1));\n        //     usernode.active = false;\n        // }\n    },\n    ShowPlayHead: function(posList) {\n        for (let i = 0; i < posList.length; i++) {\n            if (i > 3) {\n                break;\n            }\n            let heroID = posList[i][\"pid\"];\n            if (heroID > 0) {\n                let name = posList[i][\"name\"];\n                let headImageUrl = posList[i][\"headImageUrl\"];\n                let usernode = this.table.getChildByName('head_layout').getChildByName('user' + (i + 1));\n                usernode.active = true;\n                usernode.getChildByName('name').getChildByName('lb').getComponent(cc.Label).string = name.substr(0, 4);\n                if (heroID > 0) {\n                    let touxiang = usernode.getChildByName('mask').getChildByName('head');\n                    this.WeChatManager.InitHeroHeadImage(heroID, headImageUrl);\n                    let WeChatHeadImage = touxiang.getComponent(\"WeChatHeadImage\");\n                    WeChatHeadImage.ShowHeroHead(heroID,headImageUrl);\n                }\n            }\n        }\n    },\n    ShowUserName: function(posList, playerNum) {\n        let LuoZuo = 0;\n        let userlistNode = this.data.getChildByName(\"mask\").getChildByName(\"userlist\");\n        for (let i = 0; i < posList.length; i++) {\n            let heroID = posList[i][\"pid\"];\n            if (heroID > 0) {\n                LuoZuo++;\n                let usernode = userlistNode.getChildByName('user' + (i + 1));\n                usernode.active = true;\n                let name = posList[i][\"name\"];\n                usernode.getChildByName(\"lb_name\").getComponent(cc.Label).string = name;\n            }\n        }\n        let LuoZuoString = \"\";\n        if (LuoZuo == 1) {\n            LuoZuoString = \"一人落座\";\n        } else if (LuoZuo == 2) {\n            LuoZuoString = \"两人落座\";\n        } else if (LuoZuo == 3) {\n            LuoZuoString = \"三人落座\";\n        } else if (LuoZuo == 4) {\n            LuoZuoString = \"四人落座\";\n        } else if (LuoZuo == 5) {\n            LuoZuoString = \"五人落座\";\n        } else if (LuoZuo == 6) {\n            LuoZuoString = \"六人落座\";\n        } else if (LuoZuo == 7) {\n            LuoZuoString = \"七人落座\";\n        } else if (LuoZuo == 8) {\n            LuoZuoString = \"八人落座\";\n        }\n        if (LuoZuo == playerNum) {\n            this.data.getChildByName(\"btn_showmore\").getChildByName(\"lb_num\").getComponent(cc.Label).string = \"满座\";\n        } else {\n            this.data.getChildByName(\"btn_showmore\").getChildByName(\"lb_num\").getComponent(cc.Label).string = LuoZuoString;\n        }\n\n    },\n    ShowTableBg: function(playerNum) {\n        if (playerNum < 2 || typeof(playerNum) == \"undefined\") {\n            playerNum = 2;\n        }\n        if (playerNum > 4) {\n            playerNum = 4;\n        }\n\n        this.table.getComponent(cc.Sprite).spriteFrame = this.table_bg[playerNum - 2];\n    },\n    ShowMore: function() {\n        this.data.getChildByName(\"btn_showmore\").getChildByName(\"lb_num\").getComponent(cc.Label).string = \"点击隐藏\";\n        let x = this.baseX - 425;\n        let y = this.data.y;\n        let action = cc.sequence(cc.moveTo(0.2, cc.v2(x, y)), cc.callFunc(function() {}, this));\n        this.data.runAction(action);\n    },\n    OnClose: function() {\n\n    },\n    //---------点击函数---------------------\n    OnClick: function(btnName, btnNode) {\n        if ('btn_exitroom' == btnName) {\n            if (this.roomInfo.setId > 0) {\n                app.SysNotifyManager().ShowSysMsg('房间已经开始，请加入游戏发起解散');\n                return;\n            }\n            //退出房间\n            let posList = this.roomInfo.posList;\n            let clientPos = -1;\n            for (let i = 0; i < posList.length; i++) {\n                if (app.HeroManager().GetHeroID() == posList[i][\"pid\"]) {\n                    clientPos = posList[i][\"pos\"];\n                    break;\n                }\n            }\n            let gamePY = app.ShareDefine().GametTypeID2PinYin[this.gameId];\n            if (clientPos > -1) {\n                let self = this;\n                this.NetManager.SendPack(\"room.CBaseExitRoom\", {\n                    \"roomID\": this.roomInfo.roomId,\n                    \"posIndex\": clientPos\n                }, function(success) {\n                    //正常退出房间，通知大厅跟亲友圈首页\n                    app.Client.OnEvent(\"OutRoom\", {});\n                    self.CloseForm();\n                }, function(error) {\n                    app.SysNotifyManager().ShowSysMsg('退出房间失败,请进入房间操作：error02');\n                });\n            } else {\n                app.SysNotifyManager().ShowSysMsg('退出房间失败,请进入房间操作：error01');\n                return;\n            }\n        } else if ('btn_goroom' == btnName) {\n            let curGameTypeStr = app.ShareDefine().GametTypeID2PinYin[this.gameId];\n            app.Client.SetGameType(curGameTypeStr);\n            this.FormManager.ShowForm(\"UIDownLoadGame\", curGameTypeStr, 0, null, 0, 0, true);\n        } else if ('btn_showmore' == btnName) {\n            if (this.data.x == this.baseX) {\n                this.ShowMore();\n            } else {\n                this.ShowUserName(this.roomInfo.posList);\n                this.data.x = this.baseX;\n            }\n        } else {\n            this.ErrLog(\"OnClick:%s not find\", btnName);\n        }\n    },\n});"]}