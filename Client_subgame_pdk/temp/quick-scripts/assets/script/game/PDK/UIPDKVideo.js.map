{"version":3,"sources":["UIPDKVideo.js"],"names":["app","require","cc","Class","extends","subGameName","properties","allCards","Node","handCards","control_list","boom_Ani","plane_Ani","dragon_Ani","cardPrefab","Prefab","wanfa","Label","OnCreateInit","SysDataManager","IntegrateImage","GetTableDict","NetManager","WeChatManager","Define","toUpperCase","ShareDefine","PokerCard","LogicPDKGame","RegNetPack","OnPack_PlayBackData","getComponent","Animation","on","OnAniBoomFinished","OnAniPlaneFinished","OnAniDragonFinished","InitCard","curTabId","curRoomID","OnShow","switchGameData","sys","localStorage","getItem","playBackCode","JSON","parse","backCode","console","log","setItem","GetPlayBackDataByCode","string","HideAll","jin1","jin2","playerList","playerCount","playkey","playBack","NextPlayTime","pause","fadeOutTime","dPos","minplay","clientPos","PlayBackList","Array","SendPack","OnPack_VideoData","bind","OnVideoFailed","serverPack","SetWndProperty","playBackNum","key","id","msg","length","PlayBackJson","i","eval","playbackList","Math","round","Date","getTime","schedule","Play","Str2Json","roomKey","setID","setAll","setCount","roomID","tabId","SetRoomInfo","isSelf","GetHeroID","pid","pos","ShowPlayerInfo","active","MaxTableCard","card","instantiate","addChild","name","toString","MaxHandCard","outCardList","node","getChildByName","j","openCardList","playercount","SetPlayInfo","playnow","max","GetUIPosByDataPos","dataPos","uiPos","GetPlayerPos","SetSeat01OutCardPos","len","posX","x","heroID","head","GetWndNode","InitHeroHeadImage","iconUrl","ShowHeroHead","sp_info","point","ShowNode","HideAllOutCard","HideAllOpenCard","HideAllHandCard","children","child","outCard","HidePokerBack","poker_back","SetWanFa","cfg","roomType","WanFa","wanFaCfg","ShowShowJieSan","posID","seat","scheduleOnce","IsRoomXianShi","fangjianxianshi","GetRoomXianShiTime","roomXianShiObj","ShowPosUseTime","secTotal","touxiang","useTime","PlayData","data","type","res","waitSecond","indexOf","createPos","PlaySetStart","setPosCard","PlayOpCard","PlayEnd","now","PlayAddDouble","PlayRobClose","setEnd","ExitGame","ShowPass","cardList","ShowOutCard","dataSecTotal","opCardType","player","trusteeshipNode","trusteeshipList","ShowSelfCard","ShowOpenCardList","play","SetAniPos","setPosition","v2","y","Layout","spacingX","setInfo","posInfo","SortCardByMax","cardNode","cardValue","ShowCard","pass","outCardNodeList","value","pokers","sort","a","b","value_a","value_b","event","OnClose","OnClick","btnName","btnNode","OnClickPause","OnClickPlay","ShowSysMsg","self","sendPack","roomId","playDataGame","GametTypeID2PinYin","gameId","error","HideControl","action","fadeOut","runAction","ShowControl","fadeIn","OnUpdate","cardType","GetPokeCard","jsondata","json"],"mappings":"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","file":"UIPDKVideo.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\game\\PDK","sourcesContent":["var app = require(\"pdk_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n        allCards:cc.Node,\r\n        handCards:cc.Node,\r\n        control_list:cc.Node,\r\n        boom_Ani:cc.Node,\r\n        plane_Ani:cc.Node,\r\n        dragon_Ani:cc.Node,\r\n        cardPrefab:cc.Prefab,\r\n        wanfa:cc.Label,\r\n    },\r\n\r\n    OnCreateInit: function () {\r\n        this.SysDataManager = app[app.subGameName + \"_SysDataManager\"]();\r\n        this.IntegrateImage = this.SysDataManager.GetTableDict(\"IntegrateImage\");\r\n        this.NetManager = app[app.subGameName + \"_NetManager\"]();\r\n        this.WeChatManager = app[app.subGameName + \"_WeChatManager\"]();\r\n        this.Define = app[app.subGameName.toUpperCase()+\"Define\"]();\r\n        this.ShareDefine = app[app.subGameName+\"_ShareDefine\"]();\r\n        this.PokerCard = app[app.subGameName+\"_PokerCard\"]();\r\n        this.LogicPDKGame = app[\"Logic\"+app.subGameName.toUpperCase()+\"Game\"]();\r\n        this.NetManager.RegNetPack(\"SPlayer_PlayBackData\", this.OnPack_PlayBackData, this);\r\n        this.boom_Ani.getComponent(cc.Animation).on('finished', this.OnAniBoomFinished, this);\r\n        this.plane_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlaneFinished, this);\r\n        this.dragon_Ani.getComponent(cc.Animation).on('finished', this.OnAniDragonFinished, this);\r\n    \tthis.InitCard();\r\n        this.curTabId = 0;\r\n        this.curRoomID = 0;\r\n    },\r\n\r\n    OnShow:function(){\r\n        let switchGameData = cc.sys.localStorage.getItem(\"switchGameData\");\r\n        let playBackCode = JSON.parse(switchGameData).backCode;\r\n        console.log(\"playBackCode === \" + playBackCode);\r\n        cc.sys.localStorage.setItem(\"switchGameData\", \"\");\r\n        this.GetPlayBackDataByCode(playBackCode);\r\n    },\r\n    GetPlayBackDataByCode:function(playBackCode){\r\n        this.wanfa.string=\"\";\r\n        this.HideAll();\r\n        this.jin1=-1;\r\n        this.jin2=-1;\r\n        this.playerList=false;  //玩家列表\r\n        this.playerCount=0;    //玩家个数\r\n        this.playkey=0;       //回放帧\r\n        this.playBack=false;  //回放日志\r\n        this.NextPlayTime=0;   //下帧播放时间\r\n        this.pause=false;      //暂停\r\n        this.fadeOutTime=5;    //淡出时间\r\n        this.dPos=-1;   //庄家\r\n        this.minplay=0;  //快退最多能退到的帧数\r\n        this.clientPos = 0;\r\n        this.PlayBackList=new Array();\r\n        console.log(\"UIPokerVideo playBackCode：\",playBackCode);\r\n        this.NetManager.SendPack(\"game.CPlayerPlayBack\", {\"playBackCode\":playBackCode,\"chekcPlayBackCode\":false},this.OnPack_VideoData.bind(this), this.OnVideoFailed.bind(this));\r\n    },\r\n    OnVideoFailed:function(serverPack){\r\n        this.SetWndProperty(\"UIMessageNoExist\", \"active\",true);\r\n    },\r\n\r\n    OnPack_PlayBackData:function(serverPack){\r\n        let playBackNum=serverPack.playBackNum;\r\n        let key=serverPack.id;\r\n        this.PlayBackList[key]=serverPack.msg;\r\n        if(this.PlayBackList.length==playBackNum){\r\n            let PlayBackJson='';\r\n            for(let i=0;i<playBackNum;i++){\r\n                PlayBackJson+=this.PlayBackList[i];\r\n            }\r\n            let playBack=eval('(' + PlayBackJson + ')');\r\n            this.playBack=playBack.playbackList;\r\n            console.log(\"OnPack_PlayBackData mt this.playBack:\",this.playBack);\r\n            this.NextPlayTime=Math.round(new Date().getTime()/1000)-1;\r\n            this.schedule(this.Play,0.5);\r\n        }\r\n    },\r\n\r\n    OnPack_VideoData:function(serverPack){\r\n    \tthis.playerList=this.Str2Json(serverPack.playerList);\r\n    \tthis.dPos=serverPack.dPos;\r\n    \tthis.playerCount=this.playerList.length;\r\n    \tlet roomKey=serverPack.roomKey;\r\n    \tlet setID=serverPack.setID;\r\n    \tlet setAll=serverPack.setCount;\r\n        this.curRoomID = serverPack.roomID;\r\n        this.curTabId = serverPack.tabId;\r\n        this.SetRoomInfo(this.playerCount,roomKey,setID,setAll);\r\n        //获取对局人数\r\n        this.playerCount = this.playerList.length;\r\n        this.isSelf = false;\r\n        //先找出玩家自己的位置\r\n        for(let i = 0; i < this.playerList.length; i++){\r\n            if(app[app.subGameName+\"_HeroManager\"]().GetHeroID() == this.playerList[i].pid){\r\n                this.clientPos = this.playerList[i].pos;\r\n                this.isSelf = true;\r\n                break;\r\n            }\r\n        }\r\n    \tthis.ShowPlayerInfo(this.playerList);\r\n\t},\r\n\t\r\n\tInitCard:function(){\r\n        //发牌的牌墩\r\n        this.allCards.active = false;\r\n        for(let i = 0; i < this.Define.MaxTableCard; i++){\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            this.allCards.addChild(card);\r\n            card.active = false;\r\n            card.name = \"card_\" + (i+1).toString();\r\n        }\r\n\r\n\t\t//玩家手牌\r\n        this.handCards.active = false;\r\n        for(let i = 0; i < this.Define.MaxHandCard; i++){\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            card.active = false;\r\n            card.name = \"card_\" + (i+1).toString();\r\n            this.handCards.addChild(card);\r\n        }\r\n\r\n        //玩家打出去的牌\r\n        for(let i = 0; i < 3; i++){\r\n            let outCardList = this.node.getChildByName(\"outCardList\"+i);\r\n            outCardList.active = false;\r\n            for(let j = 0; j < this.Define.MaxHandCard; j++){\r\n                let card = cc.instantiate(this.cardPrefab);\r\n                card.active = false;\r\n                card.name = \"card_\" + (i+1).toString();\r\n                outCardList.addChild(card);\r\n            }\r\n        }\r\n\r\n        //玩家明牌的牌\r\n        for(let i = 1; i < 3; i++){\r\n            let openCardList = this.node.getChildByName(\"openCardList\"+i);\r\n            openCardList.active = false;\r\n            for(let j = 0; j < this.Define.MaxHandCard; j++){\r\n                let card = cc.instantiate(this.cardPrefab);\r\n                card.active = false;\r\n                card.name = \"card_\" + (i+1).toString();\r\n                openCardList.addChild(card);\r\n            }\r\n        }\r\n    },\r\n    \r\n\tSetRoomInfo:function(playercount,roomKey,setID,setAll){\r\n\t\tthis.SetWndProperty(\"room_data/label_player_num\", \"text\",playercount+\"人场\");\r\n\t\tthis.SetWndProperty(\"room_data/label_player_ju\", \"text\",\"局数：\"+setID+\"/\"+setAll);\r\n\t\tthis.SetWndProperty(\"room_data/label_player_roomkey\", \"text\",\"房间号：\"+roomKey);\r\n    },\r\n    \r\n    SetPlayInfo:function(){\r\n        let playnow=this.playkey+1;\r\n        let max=this.playBack.length;\r\n        if(playnow>max){\r\n            playnow=max;\r\n        }\r\n        if(playnow<0){\r\n            playnow=0;\r\n        }\r\n        // this.SetWndProperty(\"playinfo\", \"text\",playnow+\"/\"+max);\r\n    },\r\n\r\n    //服务端位置转客户端位置\r\n\tGetUIPosByDataPos:function(dataPos){\r\n\t\tlet playerCount = this.playerList.length;\r\n\t\tlet uiPos = (dataPos + (this.playerCount - this.clientPos)) % playerCount;\r\n\t\treturn uiPos;\r\n    },\r\n\r\n    GetPlayerPos:function(dataPos){\r\n        let uiPos = -1;\r\n        if(this.isSelf){\r\n            uiPos = this.GetUIPosByDataPos(dataPos);\r\n        }\r\n        else{\r\n            uiPos =  dataPos;\r\n        }\r\n\r\n        return uiPos;\r\n    },\r\n    \r\n    SetSeat01OutCardPos:function(dataPos, len){\r\n        let uiPos = this.GetPlayerPos(dataPos);\r\n        \r\n        \r\n        if(uiPos != 1) return;\r\n\r\n        let node = this.node.getChildByName(\"outCardList1\");\r\n        let posX = 525 - 25 * len;\r\n        node.x = posX;\r\n    },\r\n\r\n\tShowPlayerInfo(playerList){\r\n\t\tfor(let i = 0; i < playerList.length; i++){\r\n            let uiPos = this.GetPlayerPos(playerList[i].pos);\r\n            let heroID = playerList[i].pid;\r\n            let head = this.GetWndNode(\"sp_seat0\"+uiPos+\"/head\");\r\n            head.active = true;\r\n            //显示用户头像\r\n            this.WeChatManager.InitHeroHeadImage(heroID,playerList[i].iconUrl);\r\n            head.getChildByName(\"touxiang\").getChildByName(\"btn_head\").getComponent(app.subGameName + \"_WeChatHeadImage\").ShowHeroHead(heroID)\r\n            //显示用户名字\r\n\t\t\tlet sp_info = head.getChildByName('touxiang').getChildByName('sp_info');\r\n\t\t\tsp_info.getChildByName('lb_name').getComponent(\"cc.Label\").string = playerList[i].name;\r\n            //显示用户分数\r\n            sp_info.getChildByName('lb_jifen').getComponent(\"cc.Label\").string = playerList[i].point;\r\n\t\t}\r\n\t},\r\n\t\r\n    HideAll:function(){\r\n        this.SetWndProperty(\"UIMessageNoExist\", \"active\",false);\r\n        // this.SetWndProperty(\"playinfo\", \"text\",'');\r\n        for(let i = 0 ; i < 3; i++){\r\n            let ShowNode = this.GetWndNode(\"sp_seat0\"+i);\r\n            if(i != 0){\r\n                ShowNode.getChildByName('card').active=false;\r\n                ShowNode.getChildByName('cardNum').active = false;\r\n            }\r\n            this.GetWndNode(\"sp_seat0\"+i+\"/jiesan\").active = false;\r\n            let head = this.GetWndNode(\"sp_seat0\"+i+\"/head\");\r\n            ShowNode.getChildByName('pass').active=false;\r\n            ShowNode.getChildByName('head').active=false;\r\n            head.getChildByName(\"touxiang\").getChildByName(\"trusteeship\").active = false;\r\n            head.getChildByName(\"touxiang\").getChildByName(\"useTimeNode\").active = false;\r\n        }\r\n        this.HideAllOutCard();\r\n        this.HideAllOpenCard();\r\n        this.HideAllHandCard();\r\n    },\r\n\r\n    HideAllHandCard:function(){\r\n        this.handCards.active = false;\r\n        for(let i = 0; i < this.handCards.children.length; i++){\r\n            let child = this.handCards.children[i];\r\n            child.active = false;\r\n        }\r\n    },\r\n\r\n    HideAllOutCard:function(){\r\n        for(let i = 0; i < 3; i++){\r\n            let outCard = this.node.getChildByName(\"outCardList\" + i);\r\n            outCard.active = false;\r\n        }\r\n    },\r\n\r\n    HideAllOpenCard:function(){\r\n        for(let i = 1; i < 3; i++){\r\n            let openCardList = this.node.getChildByName(\"openCardList\" + i);\r\n            openCardList.active = false;\r\n        }\r\n    },\r\n\r\n    HidePokerBack:function(){\r\n        for(let i = 1; i < 3; i++){\r\n            let poker_back = this.GetWndNode(\"sp_seat0\"+i+\"/card/poker_back\");\r\n            if(!poker_back.active){\r\n                poker_back.active = true;\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    SetWanFa:function(cfg,roomType){\r\n        let wanfa=this.WanFa(cfg);\r\n        if(roomType==1){\r\n            this.wanfa.string=\"亲友圈,\"+wanfa;\r\n        }else if(roomType==4){\r\n            this.wanfa.string=\"赛事,\"+wanfa;\r\n        }else{\r\n            this.wanfa.string=wanfa;\r\n        }\r\n        this.wanFaCfg = cfg;\r\n    },\r\n\r\n    ShowShowJieSan:function(posID){\r\n        let uiPos = this.GetPlayerPos(posID);\r\n        let seat = this.GetWndNode(\"sp_seat0\"+uiPos+\"/jiesan\");\r\n        seat.active=true;\r\n        this.scheduleOnce(function(){\r\n              seat.active=false;\r\n        },2);\r\n    },\r\n\r\n    IsRoomXianShi: function(){\r\n        if(this.wanFaCfg.fangjianxianshi == 0){\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    GetRoomXianShiTime: function(){\r\n        let roomXianShiObj = {1: 8, 2: 10, 3: 12, 4: 15, 5: 20}\r\n        return roomXianShiObj[this.wanFaCfg.fangjianxianshi] * 60;//分钟转换秒数\r\n    },\r\n    ShowPosUseTime: function(pos, secTotal){\r\n        let uiPos = this.GetPlayerPos(pos);\r\n        let touxiang = this.GetWndNode(\"sp_seat0\"+uiPos+\"/head/touxiang\");\r\n        touxiang.getChildByName('useTimeNode').active = this.IsRoomXianShi();\r\n        if(this.IsRoomXianShi()){\r\n            if(secTotal > this.GetRoomXianShiTime()){\r\n                secTotal = this.GetRoomXianShiTime();\r\n            }\r\n            this.useTime = secTotal;\r\n            touxiang.getChildByName('useTimeNode').getChildByName(\"lb_useTime\").getComponent(cc.Label).string = this.useTime + \"s\";\r\n        }\r\n    },\r\n\r\n\tPlayData(){\r\n        if(this.playkey == -1){\r\n            this.playkey = 0;\r\n        }\r\n\t\tlet data=this.playBack[this.playkey];\r\n\t\tif(!data){\r\n\t\t\treturn false;\r\n\t\t}\r\n        this.SetPlayInfo();\r\n\t\tconsole.log(\"PlayForce data:\",data);\r\n\t\tlet type=data.name;\r\n\t\tlet res=data.res;\r\n\t\tlet waitSecond=0;//本帧播放时间\r\n\t\tif(type.indexOf(\"S\"+app.subGameName.toUpperCase()+\"_Config\")>=0){\r\n            waitSecond=0;\r\n            this.SetWanFa(res.cfg,res.roomType);\r\n\r\n        }else if(type.indexOf(\"StartVoteDissolve\")>=0){\r\n            waitSecond=2;\r\n            let createPos=res.createPos;\r\n            this.ShowShowJieSan(createPos);\r\n        }else if(type.indexOf(\"S\"+app.subGameName.toUpperCase()+\"_SetStart\")>=0){\r\n            waitSecond=2;\r\n            this.HideAllOutCard();\r\n            this.PlaySetStart(res, data.setPosCard);\r\n        }\r\n        else if(type.indexOf(\"S\"+app.subGameName.toUpperCase()+\"_ChangeStatus\")>=0){\r\n            waitSecond=2;\r\n            this.HideAllOutCard();\r\n        }\r\n        else if(type.indexOf(\"S\"+app.subGameName.toUpperCase()+\"_OpCard\")>=0){\r\n            waitSecond=2;\r\n            this.PlayOpCard(res, data.setPosCard);\r\n        }\r\n        else if(type.indexOf(\"S\"+app.subGameName.toUpperCase()+\"_SetEnd\")>=0){\r\n\t\t\twaitSecond=4000000;\r\n\t\t\tthis.PlayEnd(res);\r\n        }\r\n        else if(type.indexOf(\"S\"+app.subGameName.toUpperCase()+\"_NotifySC\")>=0){\r\n            //报单，没有必要记录\r\n            waitSecond=1;\r\n        }\r\n        else{\r\n\t\t\tconsole.log(\"Play type no play:\",type);\r\n\t\t\tconsole.log(\"Play type no play data:\",data);\r\n\t\t\tthis.pause==true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.playkey+=1;\r\n\t\tthis.NextPlayTime=Math.round(new Date().getTime()/1000)+waitSecond;\r\n    },\r\n    \r\n\tPlay:function(){\r\n\t\tthis.fadeOutTime=this.fadeOutTime-0.5;\r\n\t\tif(this.fadeOutTime<=0 && this.fadeOutTime>-2){\r\n\t\t\t// this.HideControl();\r\n\t\t}\r\n\t\tlet now=Math.round(new Date().getTime()/1000);\r\n\t\tif(this.NextPlayTime==0 || now<this.NextPlayTime){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif(this.pause==true){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.PlayData();\r\n    },\r\n    \r\n    PlayAddDouble:function(res){\r\n\r\n    },\r\n\r\n    PlayRobClose:function(res){\r\n\r\n    },\r\n\t\r\n\tPlayEnd:function(res){\r\n        let data=res.setEnd;\r\n        app[app.subGameName + \"Client\"].ExitGame();\r\n    },\r\n\r\n    ShowPass:function(dataPos){\r\n        let uiPos = this.GetPlayerPos(dataPos);\r\n        let node = this.GetWndNode(\"sp_seat0\"+uiPos+\"/pass\");\r\n        node.active = true;\r\n    },\r\n    \r\n\tPlayOpCard(res, setPosCard){\r\n        let data = res;\r\n        this.SetSeat01OutCardPos(data.pos, data.cardList.length);\r\n        this.ShowOutCard(data.pos, data.cardList);\r\n        this.ShowPosUseTime(data.pos, data.dataSecTotal);\r\n        this.HidePokerBack();\r\n        //显示托管图标\r\n        // let uiPos = this.GetPlayerPos(data.pos);\r\n        // let trusteeshipNode = this.GetWndNode(\"sp_seat0\"+uiPos+\"/head/touxiang/trusteeship\");\r\n        // trusteeshipNode.active = data.isFlash;\r\n        if(!data.cardList.length && data.opCardType == 1){\r\n            this.ShowPass(data.pos);\r\n        }\r\n        if(setPosCard){\r\n            for(let i = 0; i < this.playerList.length; i++){\r\n                let player = this.playerList[i];\r\n                let uiPos = this.GetPlayerPos(player.pos);\r\n                let trusteeshipNode = this.GetWndNode(\"sp_seat0\"+uiPos+\"/head/touxiang/trusteeship\");\r\n                trusteeshipNode.active = data.trusteeshipList[player.pos];\r\n                if(this.isSelf){\r\n                    if(player.pos == this.clientPos){\r\n                        this.ShowSelfCard(setPosCard[player.pos]);\r\n                    }\r\n                    else{\r\n                        this.ShowOpenCardList(player.pos, setPosCard[player.pos]);\r\n                    }\r\n                }\r\n                else{\r\n                    if(player.pos == 0){\r\n                        this.ShowSelfCard(setPosCard[player.pos]);\r\n                    }\r\n                    else{\r\n                        this.ShowOpenCardList(player.pos, setPosCard[player.pos]);\r\n                    }\r\n                }\r\n                \r\n            }\r\n\r\n            //显示动画特效\r\n             if(data.opCardType == 4){\r\n                //一条龙\r\n                this.dragon_Ani.active = true;\r\n                this.dragon_Ani.getComponent(cc.Animation).play(\"dragon\");\r\n            }\r\n            if(data.opCardType == 11){\r\n                //炸弹\r\n                this.boom_Ani.active = true;\r\n                this.SetAniPos(data.pos);\r\n                this.boom_Ani.getComponent(cc.Animation).play(\"zhadan\");\r\n            }\r\n            else if(data.opCardType == 12 || data.opCardType == 13){\r\n                this.plane_Ani.active = true;\r\n                this.plane_Ani.getComponent(cc.Animation).play(\"feiji\");\r\n            }\r\n        }\r\n    },\r\n    \r\n    SetAniPos:function(dataPos){\r\n        let uiPos = this.GetUIPosByDataPos(dataPos);\r\n        if(uiPos == 1){\r\n            this.boom_Ani.setPosition(cc.v2(232, 64));\r\n        }\r\n        else{\r\n           let outCardList = this.node.getChildByName(\"outCardList\"+uiPos);\r\n           this.boom_Ani.setPosition(cc.v2(outCardList.x, outCardList.y));\r\n        }\r\n    },\r\n\r\n\tPlaySetStart:function(res, setPosCard){\r\n        for(let i = 0; i < this.playerList.length; i++){\r\n            let player = this.playerList[i];\r\n            let uiPos = this.GetPlayerPos(player.pos);\r\n            let cardList = setPosCard[player.pos];\r\n            if(uiPos == 0){\r\n                if(cardList.length == 24){\r\n                    this.handCards.getComponent(cc.Layout).spacingX = -95;\r\n                }\r\n                else{\r\n                    this.handCards.getComponent(cc.Layout).spacingX = -90;\r\n                }\r\n                this.ShowSelfCard(cardList);\r\n            }\r\n            else{\r\n                this.ShowOpenCardList(player.pos, cardList);\r\n                this.GetWndNode(\"sp_seat0\"+uiPos+\"/card\").active = true;\r\n                this.GetWndNode(\"sp_seat0\"+uiPos+\"/cardNum\").active = true;\r\n                this.GetWndNode(\"sp_seat0\"+uiPos+\"/cardNum\").getComponent(cc.Label).string = cardList.length + '张';\r\n            }\r\n            this.ShowPosUseTime(player.pos, res.setInfo.posInfo[i].secTotal);\r\n        }\r\n    },\r\n\r\n    ShowSelfCard:function(cardList){\r\n        this.SortCardByMax(cardList);\r\n        this.handCards.active = true;\r\n        for(let i = 0; i < this.handCards.children.length; i++){\r\n            let cardNode = this.handCards.children[i];\r\n            let cardValue = cardList[i];\r\n            if(cardValue){\r\n                this.ShowCard(cardValue, cardNode);\r\n            }\r\n            else{\r\n                cardNode.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    ShowOutCard:function(dataPos, cardList){\r\n        let uiPos = this.GetPlayerPos(dataPos);\r\n        let pass = this.GetWndNode(\"sp_seat0\"+uiPos+\"/pass\");\r\n        pass.active = false;\r\n        let outCardNodeList = this.node.getChildByName(\"outCardList\"+uiPos);\r\n        outCardNodeList.active = true;\r\n        for(let i = 0; i < outCardNodeList.children.length; i++){\r\n            let cardNode = outCardNodeList.children[i];\r\n            let value = cardList[i];\r\n            if(value){\r\n                this.ShowCard(value, cardNode);\r\n            }\r\n            else{\r\n                cardNode.active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    ShowOpenCardList:function(dataPos, cardList){\r\n        let uiPos = this.GetPlayerPos(dataPos);\r\n        if(uiPos == 0) return;\r\n        this.SortCardByMax(cardList);\r\n        let openCardList = this.node.getChildByName(\"openCardList\" + uiPos);\r\n        openCardList.active = true;\r\n        for(let i = 0; i < openCardList.children.length; i++){\r\n            let cardNode = openCardList.children[i];\r\n            let value = cardList[i];\r\n            if(value){\r\n                this.ShowCard(value, cardNode);\r\n            }\r\n            else{\r\n                cardNode.active = false;\r\n            }\r\n        }\r\n        this.GetWndNode(\"sp_seat0\"+uiPos+\"/cardNum\").getComponent(cc.Label).string = cardList.length + '张';\r\n    },\r\n\r\n    SortCardByMax:function(pokers){\r\n        pokers.sort(function(a, b){\r\n            //大小王值最大\r\n            let value_a = a&0x0F;\r\n            let value_b = b&0x0F;\r\n            if (value_a == 1) \r\n                value_a = 16;\r\n            if (value_a == 2) \r\n                value_a = 17;\r\n            if (value_b == 1) \r\n                value_b = 16;\r\n            if (value_b == 2) \r\n                value_b = 17;\r\n            return value_b - value_a;\r\n        });\r\n    },\r\n\t\r\n    OnAniBoomFinished:function(event){\r\n        this.boom_Ani.active = false;\r\n    },\r\n    OnAniPlaneFinished:function(event){\r\n        this.plane_Ani.active = false;\r\n    },\r\n    OnAniDragonFinished:function(event){\r\n        this.dragon_Ani.active = false;\r\n    },\r\n    \r\n    OnClose:function(){\r\n        \r\n    },\r\n\r\n    OnClick:function(btnName, btnNode){\r\n    \tthis.fadeOutTime=5;\r\n        if(btnName == \"btn_return\"){\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }else if (btnName == \"btnSure\") {\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }\r\n        else if(btnName==\"btn_back\"){\r\n        \tthis.OnClickPause();\r\n            if(this.minplay>=this.playkey){\r\n                return;\r\n            }\r\n            this.playkey=this.playkey-2;  //扣一针,播放完一帧帧数会加一，所有要回到上一帧，帧数要-2\r\n            this.PlayData();\r\n        }else if(btnName==\"btn_play\"){\r\n        \tthis.OnClickPlay();\r\n        }else if(btnName==\"btn_pause\"){\r\n        \tthis.OnClickPause();\r\n        }else if(btnName==\"btn_forward\"){\r\n        \tthis.OnClickPause();\r\n        \tthis.PlayData();\r\n        }else if(btnName==\"btn_last\"){\r\n            if (this.curTabId <= 1) {\r\n                app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('当前已经是第一局');\r\n                return;\r\n            }\r\n            this.curTabId--;\r\n            let self = this;\r\n            let sendPack = {};\r\n            sendPack.roomId = this.curRoomID;\r\n            sendPack.tabId = this.curTabId;\r\n            app[app.subGameName+\"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"GetPlayBackCode\", sendPack,function(serverPack){\r\n                let playDataGame=app[app.subGameName+\"_ShareDefine\"]().GametTypeID2PinYin[serverPack.gameId];\r\n                if (playDataGame != app.subGameName) {\r\n                    app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('获取回放数据不是该游戏的');\r\n                    return;\r\n                }\r\n                self.GetPlayBackDataByCode(serverPack.playBackCode);\r\n            },\r\n            function(error){\r\n                self.curTabId++;\r\n                app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('获取回放数据失败,检查是否已经是否第一局');\r\n            });\r\n        }else if(btnName==\"btn_next\"){\r\n            this.curTabId++;\r\n            let self = this;\r\n            let sendPack = {};\r\n            sendPack.roomId = this.curRoomID;\r\n            sendPack.tabId = this.curTabId;\r\n            app[app.subGameName+\"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"GetPlayBackCode\", sendPack,function(serverPack){\r\n                let playDataGame=app[app.subGameName+\"_ShareDefine\"]().GametTypeID2PinYin[serverPack.gameId];\r\n                if (playDataGame != app.subGameName) {\r\n                    app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('获取回放数据不是该游戏的');\r\n                    return;\r\n                }\r\n                self.GetPlayBackDataByCode(serverPack.playBackCode);\r\n            },\r\n            function(error){\r\n                self.curTabId--;\r\n                app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('获取回放数据失败,检查是否已经是否最后一局');\r\n            });\r\n        }\r\n        else{\r\n            // this.ShowControl();\r\n        }\r\n    },\r\n\r\n    OnClickPause:function(){\r\n    \tthis.pause=true;\r\n        this.control_list.getChildByName('btn_play').active=true;\r\n        this.control_list.getChildByName('btn_pause').active=false;\r\n    },\r\n\r\n    OnClickPlay:function(){\r\n    \tthis.pause=false;\r\n        this.control_list.getChildByName('btn_play').active=false;\r\n        this.control_list.getChildByName('btn_pause').active=true;\r\n    },\r\n\r\n    HideControl:function(){\r\n    \tvar action = cc.fadeOut(2.0);\r\n    \tthis.control_list.runAction(action);\r\n    },\r\n\r\n    ShowControl:function(){\r\n    \tvar action = cc.fadeIn(0.5);\r\n    \tthis.control_list.runAction(action);\r\n    },\r\n\r\n\t//---------计时器，开局发牌逻辑--------------\r\n\tOnUpdate:function(){\r\n\t\t\r\n    },\r\n    \r\n    //显示poker牌\r\n    ShowCard:function(cardType, cardNode){\r\n        this.PokerCard.GetPokeCard(cardType, cardNode);\r\n        cardNode.active = true;\r\n        cardNode.getChildByName(\"poker_back\").active = false;\r\n    },\r\n\r\n\tStr2Json:function(jsondata){\r\n        if(jsondata===\"\"){\r\n            return false;\r\n        }\r\n        var json = JSON.parse(jsondata);\r\n        return json;\r\n    },\r\n\r\n    \r\n});"]}