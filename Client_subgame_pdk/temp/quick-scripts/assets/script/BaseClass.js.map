{"version":3,"sources":["BaseClass.js"],"names":["ShareDefine","require","GetModel","BaseClass","cc","Class","ctor","argList","Array","prototype","slice","call","arguments","JS_Name","Init","apply","IsDevelopment","GetLogFormatList","len","length","logText","sys","browserType","colorType","color","ChromeLogColorDict","pop","splice","Log","log","NetLog","SysLog","WarnLog","warn","ErrLog","error","DBBaseClass","extend","OnReload","isLoadDB","isSendLoadDB","InitReload","LoadInitDB","headName","sendPack","app","pdk_NetManager","SendPack","OnSuccessInitDBData","bind","OnFailInitDBData","serverPack","OnInitData","failInfo","OnFailInitData","module","exports"],"mappings":"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","file":"BaseClass.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["/*\r\n    客户端自定义基类\r\n*/\r\nlet ShareDefine = require(\"pdk_ShareDefine\").GetModel();\r\n\r\nvar BaseClass = cc.Class({\r\n\r\n\tctor:function(){\r\n\t\tvar argList = Array.prototype.slice.call(arguments);\r\n\r\n\t\tthis.JS_Name = \"BaseClass\";\r\n\t\tthis.Init.apply(this, argList);\r\n\t},\r\n\r\n\tInit:function(){\r\n\t},\r\n\r\n    //是否开发者模式\r\n    IsDevelopment:function(){\r\n        return ShareDefine.IsDevelopment\r\n    },\r\n\r\n\t//获取包装后的log文本\r\n\tGetLogFormatList:function(argList){\r\n\t\tvar len = argList.length;\r\n\t\tvar logText = argList[0];\r\n\t\t//第一个不是文本格式\r\n\t\tif(typeof(logText) != \"string\"){\r\n\t\t\treturn argList\r\n\t\t}\r\n\r\n\t\t//如果是谷歌浏览器,包装颜色\r\n\t\tif(cc.sys.browserType == \"chrome\"){\r\n\t\t\t//如果末尾有携带颜色配置\r\n\t\t\tvar colorType = argList[len - 1];\r\n\t\t\tvar color = ShareDefine.ChromeLogColorDict[colorType];\r\n\t\t\t//如果存在颜色,替换最后一个参数为颜色值\r\n\t\t\tif(color){\r\n\t\t\t\t//删除末尾的颜色标示\r\n\t\t\t\targList.pop();\r\n\r\n\t\t\t\t//文本开头添加颜色标示%c\r\n\t\t\t\tlogText = \"%c\" + logText;\r\n\r\n\t\t\t\t//在文本后面插入一个颜色值\r\n\t\t\t\targList.splice(1, 0, color);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvar colorType = argList[len - 1];\r\n\t\t\tvar color = ShareDefine.ChromeLogColorDict[colorType];\r\n\t\t\tif(color){\r\n\t\t\t\t//删除末尾的颜色标示\r\n\t\t\t\targList.pop();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//第一个默认是字符串加上文件标示\r\n\t\targList[0] = this.JS_Name + \"\\t\" + logText;\r\n\t\treturn argList\r\n\t},\r\n\r\n\t//接收不定参\r\n\tLog:function(){\r\n\t\tif(this.IsDevelopment()){\r\n\t\t\tvar argList = Array.prototype.slice.call(arguments);\r\n\t\t\targList = this.GetLogFormatList(argList);\r\n\t\t\tcc.log.apply(null, argList)\r\n\t\t}\r\n\t},\r\n\r\n\t//网络通信log\r\n\tNetLog:function(){\r\n\t\tif(this.IsDevelopment()){\r\n\t\t\tvar argList = Array.prototype.slice.call(arguments);\r\n\t\t\targList = this.GetLogFormatList(argList);\r\n\t\t\tcc.log.apply(null, argList)\r\n\t\t}\r\n\t},\r\n\r\n\t//接收不定参\r\n\tSysLog:function(){\r\n\t\tvar argList = Array.prototype.slice.call(arguments);\r\n\t\targList = this.GetLogFormatList(argList);\r\n\t\tcc.log.apply(null, argList)\r\n\t},\r\n\r\n\t//接收不定参\r\n\tWarnLog:function(){\r\n\t\tif(this.IsDevelopment()){\r\n\t\t\tvar argList = Array.prototype.slice.call(arguments);\r\n\t\t\targList = this.GetLogFormatList(argList);\r\n\t\t\tcc.warn.apply(null, argList)\r\n\t\t}\r\n\t},\r\n\t\r\n\t//接收不定参\r\n\tErrLog:function(){\r\n\t\tvar argList = Array.prototype.slice.call(arguments);\r\n\t\targList = this.GetLogFormatList(argList);\r\n\t\tcc.error.apply(null, argList)\r\n\t},\r\n});\r\n\r\nvar DBBaseClass = BaseClass.extend({\r\n\tctor:function(){\r\n\t\tvar argList = Array.prototype.slice.call(arguments);\r\n\r\n\t\tthis.JS_Name = \"DBBaseClass\";\r\n\t\tthis.Init.apply(this, argList);\r\n\r\n\t\tthis.OnReload();\r\n\t},\r\n\r\n\t//下线初始化\r\n\tOnReload:function(){\r\n\t\tthis.isLoadDB = false;\r\n\t\tthis.isSendLoadDB = false;\r\n\r\n\t\tthis.InitReload();\r\n\t},\r\n\r\n\t//加载数据\r\n\tLoadInitDB:function(headName, sendPack){\r\n\t\tif(this.isLoadDB){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif(this.isSendLoadDB){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.isSendLoadDB = true;\r\n\r\n\t\t//发送请求初始化管理器数据\r\n\t\tapp.pdk_NetManager().SendPack(headName, sendPack, this.OnSuccessInitDBData.bind(this), this.OnFailInitDBData.bind(this));\r\n\t},\r\n\r\n\t//初始化请求回调\r\n\tOnSuccessInitDBData:function(serverPack){\r\n\t\tthis.isLoadDB = true;\r\n\t\tthis.OnInitData(serverPack);\r\n\t},\r\n\r\n\t//初始化请求失败回调\r\n\tOnFailInitDBData:function(failInfo){\r\n\t\tthis.isLoadDB = false;\r\n\t\tthis.isSendLoadDB = false;\r\n\r\n\t\tthis.OnFailInitData(failInfo);\r\n\t},\r\n\r\n\t//-------------子类需要实现的函数-------------\r\n\tInitReload:function(){\r\n\t\tthis.ErrLog(\"InitReload 必须实现\");\r\n\t},\r\n\r\n\tOnInitData:function(serverPack){\r\n\t\tthis.ErrLog(\"OnInitData 必须实现\");\r\n\t},\r\n\r\n\tOnFailInitData:function(failInfo){\r\n\t\tthis.ErrLog(\"OnFailInitData 必须实现\");\r\n\t},\r\n\r\n\r\n\r\n})\r\n\r\n\r\nmodule.exports = {\"BaseClass\":BaseClass, \"DBBaseClass\":DBBaseClass};\r\n\r\n"]}