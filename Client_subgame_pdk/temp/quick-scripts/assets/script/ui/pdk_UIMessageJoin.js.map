{"version":3,"sources":["pdk_UIMessageJoin.js"],"names":["app","require","cc","Class","extends","subGameName","properties","lb_message","Label","OnCreateInit","ShareDefine","SysNotifyManager","OnShow","serverPack","RoomKey","roomKey","name","type","continueType","typeName","string","GameServerIP","gameTypeUrl","gameServerIP","GameServerPort","gameServerPort","OnClick","btnName","eventData","self","SendPack","toUpperCase","success","CloseForm","clientConfig","isReconnecting","SendGetRoomInfo","roomID","UpdateAccessPoint","ReConnect","error","ShowSysMsg","ErrLog"],"mappings":"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","file":"pdk_UIMessageJoin.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["/*\r\n    UIMessage 模态消息界面\r\n*/\r\n\r\nvar app = require(\"pdk_app\");\r\n\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n        lb_message:cc.Label,\r\n    },\r\n\r\n    //初始化\r\n    OnCreateInit:function(){\r\n        this.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n        this.SysNotifyManager = app[app.subGameName + \"_SysNotifyManager\"]();\r\n\r\n    },\r\n\r\n    //---------显示函数--------------------\r\n\r\n    OnShow:function(serverPack){\r\n        this.RoomKey=serverPack.roomKey;\r\n        let name=serverPack.name;\r\n        let type=serverPack.continueType;\r\n        let typeName=\"\";\r\n        if(type==0){\r\n            typeName=\"房主付\";\r\n        }else if(type==1){\r\n            typeName=\"平分\";\r\n        }else if(type==2){\r\n            typeName=\"大赢家\";\r\n        }\r\n        this.lb_message.string=name+\" 选择 \"+typeName+\" 续局，是否加入该房间？\";\r\n        this.GameServerIP=serverPack.gameTypeUrl.gameServerIP;\r\n        this.GameServerPort=serverPack.gameTypeUrl.gameServerPort;\r\n    },\r\n    //---------点击函数---------------------\r\n\r\n    OnClick:function(btnName, eventData){\r\n        if(btnName == \"btnSure\"){\r\n            let self=this;\r\n            app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"EnterRoom\", {\"roomKey\":this.RoomKey,\"posID\":-1},function(success){\r\n                self.CloseForm(\"game/\"+app.subGameName.toUpperCase()+\"ui/UI\"+app.subGameName.toUpperCase()+\"_Play\");\r\n                self.CloseForm(\"game/\"+app.subGameName.toUpperCase()+\"ui/UI\"+app.subGameName.toUpperCase()+\"_LPPlay\");\r\n                self.CloseForm(\"game/\"+app.subGameName.toUpperCase()+\"ui/UI\"+app.subGameName.toUpperCase()+\"_SYPlay\");\r\n                self.CloseForm(app.subGameName+\"_UIPublic_Record\");\r\n                self.CloseForm(app.subGameName+\"_UILPPublic_Record\");\r\n                //关闭没用的UI\r\n                app[app.subGameName + \"Client\"].clientConfig.GameServerIP=self.gameServerIP;\r\n                app[app.subGameName + \"Client\"].clientConfig.GameServerPort=self.gameServerPort;\r\n                app[app.subGameName+\"_NetWork\"]().isReconnecting=true;  //标记为正在重新连接，让发送消息堆积多发送队列\r\n                app[app.subGameName.toUpperCase()+\"RoomMgr\"]().SendGetRoomInfo(self.roomID); //加入获取消息到队列\r\n                //关闭没用的UI\r\n                app[app.subGameName+\"_NetWork\"]().UpdateAccessPoint();   //更新连接节点\r\n                app[app.subGameName+\"_NetWork\"]().ReConnect();          //发起重新连接服务器\r\n                self.CloseForm();\r\n            },function(error){\r\n                app[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg('DissolveRoom');\r\n                self.CloseForm();\r\n            });\r\n            \r\n        }\r\n        else if(btnName == \"btnCancel\"){\r\n            this.CloseForm();\r\n        }\r\n        else{\r\n            this.ErrLog(\"OnClick:%s not find\", btnName);\r\n        }\r\n    },\r\n});\r\n"]}