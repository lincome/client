{"version":3,"sources":["pdk_SDKManager.js"],"names":["app","require","pdk_SDKManager","BaseClass","extend","Init","JS_Name","subGameName","ShareDefine","SysDataManager","HeroManager","ServerTimeManager","NetManager","HeroAccountManager","LocalDataManager","WeChatManager","WeChatAppManager","ComTool","RegHttpNetPack","OnHttpPack_PrepayOrderInfo","Log","OnReload","accountSDKManager","GetAccountSDK","ErrLog","serverPack","isSuccess","IsSuccess","ShowSysMsg","prepayOrderInfo","PrepayOrderInfo","orderID","OrderID","appID","ProductID","itemType","ItemType","orderType","OrderType","DiamondStore","GetTableDict","diamondStore","appPrice","OrderType_Wechat","ReceivePrepayOrder","OrderType_QRCode","ReceivePrepayQRCodeOrder","OrderType_WechatApp","InitSDKParameter","dataInfo","accountType","GetClientConfigProperty","SDKType_WeChat","InitWeChatSDKParameter","SDKType_Company","SDKType_WeChatApp","IsH5AccountSDK","IsWeChatBrowser","H5AccountSDKTypeList","InArray","IsAppAccountSDK","AppAccountSDKTypeList","GetOrderSDK","Pay","CheckIsAppCheck","SendCreatePrePayOrder","orderSdkManager","GetSDK","LoginBySDK","Login","CheckLoginBySDK","ShareText","title","flag","ShowForm","Share","description","url","argDict","ShareDD","urlStr","argList","CallToNative","ShareXL","ShareLineLink","ShareLineText","ShareScreen","ShareScreenDD","filePath","Capture","ShareImageDD","imagePath","ShareScreenXL","ShareImageXL","heroID","GetHeroID","openid","GetAccountProperty","accountID","GetHeroProperty","sendPack","GetHttpSendPack","hasOwnProperty","gameID","mpID","serverID","Math","floor","SendHttpPack","clientConfig","GetClientConfig","checkVersion","localVersion","appPackType","IsIOS","g_pdk_SDKManager","exports","GetModel"],"mappings":"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","file":"pdk_SDKManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\sdk","sourcesContent":["/*\r\n    sdk管理器\r\n*/\r\nvar app = require(\"pdk_app\");\r\n\r\nvar pdk_SDKManager = app.BaseClass.extend({\r\n\r\n    Init:function(){\r\n    \tthis.JS_Name = app.subGameName + \"_SDKManager\";\r\n\r\n    \tthis.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n        this.SysDataManager = app[app.subGameName + \"_SysDataManager\"]();\r\n        this.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n        this.ServerTimeManager = app[app.subGameName + \"_ServerTimeManager\"]();\r\n        this.NetManager = app[app.subGameName + \"_NetManager\"]();\r\n        this.HeroAccountManager = app[app.subGameName + \"_HeroAccountManager\"]();\r\n        this.LocalDataManager = app.LocalDataManager();\r\n        this.WeChatManager = app[app.subGameName + \"_WeChatManager\"]();\r\n\t\tthis.WeChatAppManager = app[app.subGameName + \"_WeChatAppManager\"]();\r\n        this.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n\r\n\t    this.NetManager.RegHttpNetPack(0x0008, this.OnHttpPack_PrepayOrderInfo, this);\r\n\r\n\t\t//this.OnReload();\r\n\r\n    \tthis.Log(\"Init\");\r\n    },\r\n\r\n\tOnReload:function(){\r\n\t\tlet accountSDKManager = this.GetAccountSDK();\r\n\t\tif(!accountSDKManager){\r\n\t\t\tthis.ErrLog(\"OnReload not find sdk\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn accountSDKManager.OnReload();\r\n\t},\r\n\r\n\t//收到预订单服务器信息\r\n\tOnHttpPack_PrepayOrderInfo:function(serverPack){\r\n\t\tlet isSuccess = serverPack.IsSuccess;\r\n\t\tif(!isSuccess){\r\n\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(\"Order_PrepayOrderFail\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet prepayOrderInfo = serverPack.PrepayOrderInfo;\r\n\t\tlet orderID = serverPack.OrderID;\r\n\t\tlet appID = prepayOrderInfo.ProductID;\r\n\t\tlet itemType = prepayOrderInfo.ItemType;\r\n\t\tlet orderType = prepayOrderInfo.OrderType;\r\n\r\n\t\tlet DiamondStore = this.SysDataManager.GetTableDict(\"DiamondStore\");\r\n\t\tlet diamondStore = DiamondStore[appID];\r\n\t\tif(!diamondStore){\r\n\t\t\tthis.ErrLog(\"Pay DiamondStore.txt not find:%s\", appID);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet appPrice = diamondStore[\"AppPrice\"];\r\n\r\n\t\t// app.TalkingDataManager().RecordStartPay(orderID, itemType, appID, appPrice);\r\n\r\n\t\tif(orderType == this.ShareDefine.OrderType_Wechat){\r\n\t\t\tthis.WeChatManager.ReceivePrepayOrder(serverPack);\r\n\t\t}\r\n\t\telse if(orderType == this.ShareDefine.OrderType_QRCode){\r\n\t\t\tthis.WeChatManager.ReceivePrepayQRCodeOrder(serverPack);\r\n\t\t}\r\n\t\telse if(orderType == this.ShareDefine.OrderType_WechatApp){\r\n\t\t\tthis.WeChatAppManager.ReceivePrepayOrder(serverPack);\r\n\t\t}else if(orderType == 6){\r\n\t\t\tthis.WeChatAppManager.ReceivePrepayOrder(serverPack);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"OnHttpPack_PrepayOrderInfo orderType:%s error\", orderType);\r\n\t\t}\r\n\t},\r\n\r\n\t//初始化sdk参数H5启动携带参数\r\n    InitSDKParameter:function(dataInfo){\r\n\r\n\t    let accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\r\n    \t\r\n\t    //微信登录\r\n\t    if(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\tthis.WeChatManager.InitWeChatSDKParameter(dataInfo);\r\n\t    }\r\n\t    //官网登录\r\n\t    else if(accountType == this.ShareDefine.SDKType_Company){\r\n\r\n\t    }\r\n\t    //微信app授权\r\n\t    else if(accountType == this.ShareDefine.SDKType_WeChatApp){\r\n\t    }\r\n\t    else{\r\n\t\t\t// this.SysLog(\"InitSDKParameter(%s):\", accountType, dataInfo);\r\n\t    }\r\n    },\r\n\r\n\t//H5sdk\r\n\tIsH5AccountSDK:function(){\r\n\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\r\n\t\t//如果是微信公众授权,需要判断是否是微信浏览器\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChat) {\r\n\t\t\tif (this.ComTool.IsWeChatBrowser()) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.ShareDefine.H5AccountSDKTypeList.InArray(accountType)){\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t},\r\n\r\n\t//appsdk\r\n\tIsAppAccountSDK:function(){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(this.ShareDefine.AppAccountSDKTypeList.InArray(accountType)){\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t},\r\n\r\n\tGetAccountSDK:function(){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\treturn this.WeChatManager\r\n\t\t}\r\n\t\telse if(accountType == this.ShareDefine.SDKType_WeChatApp) {\r\n\t\t\treturn this.WeChatAppManager;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"accountSDKType:%s\", accountType);\r\n\t\t\treturn\r\n\t\t}\r\n\t},\r\n\r\n\tGetOrderSDK:function(){\r\n\t\tlet orderType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"OrderType\");\r\n\r\n\t\tif(orderType == this.ShareDefine.OrderType_Wechat){\r\n\t\t\treturn this.WeChatManager;\r\n\t\t}\r\n\t\telse if(orderType == this.ShareDefine.OrderType_QRCode){\r\n\t\t\treturn this.WeChatManager;\r\n\t\t}\r\n\t\telse if(orderType == this.ShareDefine.OrderType_WechatApp){\r\n\t\t\treturn this.WeChatAppManager\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.ErrLog(\"GetOrderSDK:%s\", orderType);\r\n\t\t\treturn null\r\n\t\t}\r\n\t},\r\n\r\n\t//支付入口\r\n    Pay:function(appID){\r\n\t\tif (this.CheckIsAppCheck()) {\r\n\t\t\tthis.SendCreatePrePayOrder(\"Diamond\", appID);\r\n\t\t\treturn;\r\n    \t}\r\n\t\tlet orderSdkManager = this.GetOrderSDK();\r\n        if(!orderSdkManager){\r\n            this.ErrLog(\"pay not orderSdkManager\");\r\n            return\r\n        }\r\n\r\n\t\tif(!orderSdkManager.GetSDK()){\r\n\t\t\tthis.ErrLog(\"pay not sdk\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.SendCreatePrePayOrder(\"Diamond\", appID);\r\n\r\n    },\r\n\r\n\t//登录授权\r\n\tLoginBySDK:function(){\r\n\t\tlet accountSDKManager = this.GetAccountSDK();\r\n\t\tif(!accountSDKManager){\r\n\t\t\tthis.ErrLog(\"LoginBySDK not find sdk\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\taccountSDKManager.Login();\r\n\t},\r\n\r\n\t//检查登录是否是短线重登\r\n\tCheckLoginBySDK:function(){\r\n\t\tlet accountSDKManager = this.GetAccountSDK();\r\n\t\tif(!accountSDKManager){\r\n\t\t\tthis.ErrLog(\"CheckLoginBySDK not find sdk\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn accountSDKManager.CheckLoginBySDK();\r\n\t},\r\n\tShareText:function(title,flag){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChatApp){\r\n\t\t\tthis.WeChatAppManager.ShareText(title,flag);\r\n\t\t}else if(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(\"UIMessageWeiXinShare\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"Share not find SDKType_WeChatApp\");\r\n\t\t}\r\n\t},\r\n\t//吊起微信APP分享\r\n\t//title:分享的标题\r\n\t//description:分享的描述\r\n\t//argDict:分享携带的参数字典(\"ShareRoomKey\":11111)\r\n\t//url:分享携带的点击跳转地址\r\n\t//flag:native分享是需要指定\"0\":朋友,\"1\":朋友圈\r\n\t//\r\n\tShare:function(title, description, url, flag, argDict){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChatApp){\r\n\t\t\tthis.WeChatAppManager.Share(title, description, url, flag, argDict);\r\n\t\t}else if(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(\"UIMessageWeiXinShare\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"Share not find SDKType_WeChatApp\");\r\n\t\t}\r\n\r\n\t},\r\n\tShareDD:function(title,description,urlStr){\r\n\t\tlet argList = [{\"Name\":\"title\",\"Value\":title},{\"Name\":\"description\",\"Value\":description},{\"Name\":\"urlStr\",\"Value\":urlStr}];\r\n\t\tapp[app.subGameName + \"_NativeManager\"]().CallToNative(\"OnDDWeChatShare\", argList);\r\n\t},\r\n\tShareXL:function(title,description,urlStr){\r\n\t\tlet argList = [{\"Name\":\"Title\",\"Value\":title},{\"Name\":\"description\",\"Value\":description},{\"Name\":\"urlStr\",\"Value\":urlStr},{\"Name\":\"roomID\",\"Value\":'roomID'},{\"Name\":\"roomToken\",\"Value\":\"roomToken\"}];\r\n\t\tapp[app.subGameName + \"_NativeManager\"]().CallToNative(\"OnXLShare\", argList);\r\n\t},\r\n\tShareLineLink:function(title,description,urlStr){\r\n\t\tlet argList = [{\"Name\":\"Title\",\"Value\":title},{\"Name\":\"description\",\"Value\":description},{\"Name\":\"urlStr\",\"Value\":urlStr}];\r\n\t\tapp[app.subGameName + \"_NativeManager\"]().CallToNative(\"OnLineShareLink\", argList);\r\n\t},\r\n\tShareLineText:function(title,description){\r\n\t\tlet argList = [{\"Name\":\"Title\",\"Value\":title},{\"Name\":\"description\",\"Value\":description}];\r\n\t\tapp[app.subGameName + \"_NativeManager\"]().CallToNative(\"OnLineShareText\", argList);\r\n\t},\r\n\t//微信全屏分享\r\n\tShareScreen:function(flag){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChatApp){\r\n\t\t\tthis.WeChatAppManager.ShareScreen(flag);\r\n\t\t}else if(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\tapp[app.subGameName + \"_FormManager\"]().ShowForm(\"UIMessageWeiXinShare\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"Share not find SDKType_WeChatApp\");\r\n\t\t}\r\n\t},\r\n\tShareScreenDD:function(){\r\n\t\tlet filePath = this.WeChatAppManager.Capture();\r\n        if (filePath != \"\") {\r\n        \tthis.ShareImageDD(filePath);\r\n        }\r\n\t},\r\n\tShareImageDD:function(imagePath){\r\n\t\tlet argList = [{\"Name\":\"imagePath\",\"Value\":imagePath}];\r\n\t\tapp[app.subGameName + \"_NativeManager\"]().CallToNative(\"OnDDWeChatShareImage\", argList);\r\n\t},\r\n\tShareScreenXL:function(){\r\n\t\tlet filePath = this.WeChatAppManager.Capture();\r\n        if (filePath != \"\") {\r\n        \tthis.ShareImageXL(filePath);\r\n        }\r\n\t},\r\n\tShareImageXL:function(imagePath){\r\n\t\tlet argList = [{\"Name\":\"ImagePath\",\"Value\":imagePath}];\r\n\t\tapp[app.subGameName + \"_NativeManager\"]().CallToNative(\"OnXLShareImage\", argList);\r\n\t},\r\n\r\n\r\n\r\n\t//----------------发包接口------------------------\r\n\t//发送创建预付订单申请\r\n\tSendCreatePrePayOrder:function(itemType, appID){\r\n\t\tlet heroID = this.HeroManager.GetHeroID();\r\n\t\tif(!heroID){\r\n\t\t\tthis.ErrLog(\"SendCreatePrePayOrder not heroID\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet openid = this.HeroAccountManager.GetAccountProperty(\"Openid\");\r\n\t\tlet accountID = this.HeroManager.GetHeroProperty(\"accountID\");\r\n\t\tlet sendPack = this.NetManager.GetHttpSendPack(0xFF0A);\r\n\r\n\t\tlet DiamondStore = this.SysDataManager.GetTableDict(\"DiamondStore\");\r\n\t\tif(!DiamondStore.hasOwnProperty(appID)){\r\n\t\t\tthis.ErrLog(\"SendCreatePrePayOrder DiamondStore.txt not find %s\", appID);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet appPrice = DiamondStore[appID][\"AppPrice\"] * 100;\r\n\r\n\t\tlet gameID = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"GameID\");\r\n\t\tlet mpID = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"MPID\");\r\n\t\tlet orderType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"OrderType\");\r\n\t\tlet serverID = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"ServerID\");\r\n\r\n\t\tif(!mpID){\r\n\t\t\tthis.ErrLog(\"SendCreatePrePayOrder not find MPID\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t\r\n\t\tif (this.CheckIsAppCheck()) {\r\n\t\t\torderType = 6;\r\n    \t}\r\n\r\n\t\tsendPack[\"ServerName\"] = gameID;\r\n\t\tsendPack[\"ServerID\"] = serverID;\r\n\t\tsendPack[\"HeroID\"] = heroID;\r\n\t\tsendPack[\"AccountID\"] = accountID;\r\n\t\tsendPack[\"ItemType\"] = itemType;\r\n\t\tsendPack[\"ProductID\"] = Math.floor(appID);\r\n\t\tsendPack[\"AppPrice\"] = appPrice;\r\n\t\tsendPack[\"OrderType\"] = orderType;\r\n\t\tsendPack[\"MPID\"] = mpID;\r\n\t\tsendPack[\"Openid\"] = openid;\r\n\r\n\t\t//console.log('SendCreatePrePayOrder pack', JSON.stringify(sendPack));\r\n\r\n\t\tthis.NetManager.SendHttpPack(sendPack)\r\n\t},\r\n\r\n\r\n\t//是否是苹果送检版本\r\n\tCheckIsAppCheck:function(){\r\n\t\tlet flag = false;\r\n\t\tlet clientConfig = app[app.subGameName + \"Client\"].GetClientConfig();\r\n\t\t//let checkVersion = app[app.subGameName + \"_ComTool\"]().IsIOS() ? app[app.subGameName + \"_NativeManager\"]().CallToNative(\"checkVersion\", []) : false;\r\n\t\tlet checkVersion = false;\r\n\t\t//let localVersion = app[app.subGameName + \"_ComTool\"]().IsIOS() ? app[app.subGameName + \"_NativeManager\"]().CallToNative(\"getVersion\", [], \"String\") : \"\";\r\n\t\tlet localVersion = '';\r\n\t\tlet appPackType = false;\t\t// this.SysLog(\"app.PackDefine.APPLE_CHECK:%s,clientConfig[appPackType]:%s\", app.PackDefine().APPLE_CHECK , clientConfig[\"appPackType\"]);\r\n\t\t// this.SysLog(\"checkVersion:%s, appPackType:%s， clientConfig[appPackType]:%s,\", checkVersion, appPackType, clientConfig[\"appPackType\"]);\r\n\t\t// this.SysLog(\"appCheckVersion:%s\",JSON.stringify( app[app.subGameName + \"Client\"].GetClientConfig()));\r\n\t\t// this.SysLog(\"appCheckVersion:%s, localVersion:%s\", app[app.subGameName + \"Client\"].GetClientConfigProperty(\"appCheckVersion\"), localVersion);\r\n\t\t\r\n\t\tif (app[app.subGameName + \"_ComTool\"]().IsIOS() && appPackType &&   app[app.subGameName + \"Client\"].GetClientConfigProperty(\"appCheckVersion\") == localVersion)  {\r\n\t\t\tflag = true;\r\n\t\t}\r\n\t\treturn flag;\r\n\t},\r\n});\r\n\r\nvar g_pdk_SDKManager = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n    if(!g_pdk_SDKManager){\r\n        g_pdk_SDKManager = new pdk_SDKManager();\r\n    }\r\n    return g_pdk_SDKManager;\r\n}"]}