{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\game\\PDK/assets\\script\\game\\PDK\\UIPDK_Result.js"],"names":["app","require","cc","Class","extends","subGameName","properties","btn_share","Node","btn_exit","btn_continue","sp_winLose","win","SpriteFrame","lose","playerList","room_Id","Label","huifang","lb_jushu","end_Time","room_Double","room_MaxDouble","btn_sharemore","sharemore","OnCreateInit","RoomMgr","toUpperCase","Room","RoomPosMgr","SoundManager","HeroManager","RoomSet","ComTool","SDKManager","Define","bigWinner","ShowGameResult","room","GetEnterRoom","ErrLog","isCoinRoom","active","setEnd","GetRoomSetProperty","allPlayer","GetRoomAllPlayerInfo","key","GetRoomProperty","setId","time","isReconnect","pointList","posInfo","GetRoomSetInfo","roomDoubleList","firstOpPos","setID","startTime","i","length","push","point","sort","a","b","ShowResultNormal","string","playBackCode","current","GetRoomConfigByProperty","i18n","t","sec","Math","round","GetDateYearMonthDayHourMinuteString","temp","GetMaxAddDouble","maxAddDouble","HideBigWinner","node","GetWndNode","HideOwner","GetCardNum","cardNum","MidHandCard","MidHandCardEx","MaxHandCard","idx","pos","lastCard","playerNum","player","path","toString","playerNode","pid","getChildByName","sportsPoint","sportsPointList","GetClientPos","PlaySound","getComponent","Sprite","spriteFrame","winNode","loseNode","lb_sportsPoint","roomCfg","GetRoomConfig","unionId","beishu","number","addDouble","j","doubleList","num","icon_qgm_win","icon_qgm_lose","icon_bfgm","icon_bgm","surplusCardList","beShutDow","beShutDowList","head","ShowHeroHead","playerName","name","SubNameLen","substring","id","GetPid","OnShow","FormManager","CloseForm","roomEnd","SendTimeOutContinue","juShu","setCount","isEnd","children","child","OnClick","btnName","btnNode","SendPack","practiceId","OnSuccess","bind","OnEnterRoomFailed","roomID","SendContinueGame","ShowForm","Click_btn_Share","Click_btn_DDShare","Click_btn_XLShare","Click_btn_ShareMore","AddDefaultFormName","ExitGame","SSSRoomMgr","self","ShareScreen","ShareScreenDD","ShareScreenXL","serverPack"],"mappings":"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","file":"UIPDK_Result.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\game\\PDK","sourcesContent":["var app = require(\"pdk_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n        btn_share:cc.Node,\r\n        btn_exit:cc.Node,\r\n        btn_continue:cc.Node,\r\n        sp_winLose:cc.Node,\r\n        win:cc.SpriteFrame,\r\n        lose:cc.SpriteFrame,\r\n        playerList:cc.Node,\r\n\r\n        room_Id:cc.Label,\r\n        huifang:cc.Label,\r\n        lb_jushu:cc.Label,\r\n        end_Time:cc.Label,\r\n        room_Double:cc.Label,\r\n        room_MaxDouble:cc.Label,\r\n\r\n        btn_sharemore:cc.Node,\r\n        sharemore:cc.Node,\r\n    },\r\n\r\n    OnCreateInit: function () {\r\n        this.RoomMgr = app[app.subGameName.toUpperCase()+\"RoomMgr\"]();\r\n        this.Room = app[app.subGameName.toUpperCase()+\"Room\"]();\r\n        this.RoomPosMgr = app[app.subGameName.toUpperCase()+\"RoomPosMgr\"]();\r\n        this.SoundManager = app[app.subGameName+\"_SoundManager\"]();\r\n        this.HeroManager = app[app.subGameName+\"_HeroManager\"]();\r\n        this.RoomSet = app[app.subGameName.toUpperCase()+\"RoomSet\"]();\r\n        this.ComTool = app[app.subGameName+\"_ComTool\"]();\r\n        this.SDKManager = app[app.subGameName+\"_SDKManager\"]();\r\n        this.Define = app[app.subGameName.toUpperCase()+\"Define\"]();\r\n\r\n        this.bigWinner = 0;\r\n    },\r\n\r\n    ShowGameResult:function(){\r\n        let room = this.RoomMgr.GetEnterRoom();\r\n        if(!room){\r\n            this.ErrLog(\"Event_PosContinueGame not enter room\");\r\n            return\r\n        }\r\n        if(!app[app.subGameName+\"_ShareDefine\"]().isCoinRoom){\r\n            this.btn_exit.active = false;\r\n        }\r\n        else{\r\n            this.btn_exit.active = true;\r\n        }\r\n\r\n        let setEnd = this.RoomSet.GetRoomSetProperty(\"setEnd\");\r\n        let allPlayer = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n        let key = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"key\");\r\n        let setId = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"setID\");\r\n        let time = 0;\r\n        let isReconnect = false;\r\n        let pointList = [];\r\n        if(!setEnd){\r\n            setEnd = {};\r\n            setEnd.posInfo = this.RoomSet.GetRoomSetInfo().posInfo;\r\n            // setEnd.robCloseVic = this.RoomSet.GetRoomSetInfo().robCloseVic;\r\n            // setEnd.reverseRobCloseVic = this.RoomSet.GetRoomSetInfo().reverseRobCloseVic;\r\n            setEnd.roomDoubleList = this.RoomSet.GetRoomSetInfo().roomDoubleList;\r\n            setEnd.firstOpPos = this.RoomSet.GetRoomSetInfo().firstOpPos;\r\n            setId = this.RoomSet.GetRoomSetInfo().setID;\r\n            time = this.RoomSet.GetRoomSetInfo().startTime;\r\n            isReconnect = true;\r\n            for(let i = 0; i < setEnd.posInfo.length; i++){\r\n                pointList.push(setEnd.posInfo[i].point);\r\n            }\r\n        }\r\n        else{\r\n            time = setEnd.startTime;\r\n            for(let i = 0; i < setEnd.pointList.length; i++){\r\n                pointList.push(setEnd.pointList[i]);\r\n            }\r\n        }\r\n\r\n        pointList.sort(function(a, b){\r\n            return b - a;\r\n        });\r\n\r\n        this.bigWinner = pointList[0];\r\n\r\n        this.ShowResultNormal(allPlayer, setEnd, isReconnect);\r\n\r\n        this.room_Id.string = \"房间号:\" + key;\r\n        this.huifang.string = \"回放码:\" + setEnd.playBackCode;\r\n        let current = room.GetRoomConfigByProperty(\"setCount\");\r\n        this.lb_jushu.string = app.i18n.t(\"UIWanFa_setCount\", {\"current\": current, \"setCount\": setId});\r\n        let sec = Math.round(time/1000);\r\n        this.end_Time.string = this.ComTool.GetDateYearMonthDayHourMinuteString(sec);\r\n        //房间倍数\r\n        let temp = '';\r\n        temp = \"房间炸弹数:\" + setEnd.roomDoubleList;\r\n        this.room_Double.string = temp;\r\n        //房间最大倍数\r\n        this.room_MaxDouble.string = \"最大炸弹数:\"+this.GetMaxAddDouble();\r\n    },\r\n\r\n    GetMaxAddDouble:function(){\r\n        let maxAddDouble = this.Room.GetRoomConfigByProperty('maxAddDouble');\r\n        if(maxAddDouble == 0){\r\n            return '无限制';\r\n        }\r\n        else if(maxAddDouble == 1){\r\n            return '5';\r\n        }\r\n        else if(maxAddDouble == 2){\r\n            return '10';\r\n        }\r\n        else if(maxAddDouble == 3){\r\n            return '20';\r\n        }\r\n    },\r\n\r\n    HideBigWinner:function(){\r\n        for(let i = 1; i < 5; i++){\r\n            let node = this.GetWndNode(\"playerList/player\" + i + \"/icon_win\");\r\n            node.active = false;\r\n        }\r\n    },\r\n\r\n    HideOwner:function(){\r\n        for(let i = 1; i < 5; i++){\r\n            let node = this.GetWndNode(\"playerList/player\" + i + \"/user_info/fangzhu\");\r\n            node.active = false;\r\n        }\r\n    },\r\n\r\n    GetCardNum:function(){\r\n        let cardNum = this.Room.GetRoomConfigByProperty(\"shoupai\");\r\n        if(cardNum == 0){\r\n            //15张牌\r\n            cardNum = this.Define.MidHandCard;\r\n        }\r\n        else if(cardNum == 1){\r\n            //16张牌\r\n            cardNum = this.Define.MidHandCardEx;\r\n        }\r\n        else{\r\n            //24张牌\r\n            cardNum = this.Define.MaxHandCard;\r\n        }\r\n\r\n        return cardNum;\r\n    },\r\n\r\n\r\n\r\n    ShowResultNormal:function(allPlayer, setEnd, isReconnect){\r\n        let playerList = [];\r\n        for(let idx in allPlayer){\r\n            playerList.push(allPlayer[idx]);\r\n        }\r\n        //先排序一下\r\n        playerList.sort(function(a, b){\r\n            return a.pos - b.pos;\r\n        });\r\n\r\n        let lastCard = this.GetCardNum();\r\n\r\n        let playerNum = playerList.length;\r\n\r\n        for (let i = 0; i < playerList.length; i++) {\r\n            let player = playerList[i];\r\n\r\n            let path = \"playerList/player\" + (i+1).toString();\r\n            let playerNode = this.GetWndNode(path);\r\n            playerNode.active = true;\r\n            \r\n            if(player.pid == this.RoomMgr.GetEnterRoom().GetRoomProperty(\"ownerID\")){\r\n                playerNode.getChildByName(\"user_info\").getChildByName(\"fangzhu\").active = true;\r\n            }\r\n            let point = 0;\r\n            if(isReconnect){\r\n                point = setEnd.posInfo[i].point;\r\n            }\r\n            else{\r\n                point = setEnd.pointList[i];\r\n            }\r\n            let sportsPoint = 0;\r\n            if(isReconnect){\r\n                if (typeof(setEnd.posInfo[i].sportsPoint)!=\"undefined\") {\r\n                    if (setEnd.posInfo[i].sportsPoint > 0) {\r\n                        sportsPoint=\"+\"+setEnd.posInfo[i].sportsPoint;\r\n                    }else{\r\n                        sportsPoint=setEnd.posInfo[i].sportsPoint;\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                if (typeof(setEnd.sportsPointList)!=\"undefined\" && typeof(setEnd.sportsPointList[i])!=\"undefined\") {\r\n                    if (setEnd.sportsPointList[i] > 0) {\r\n                        sportsPoint=\"+\"+setEnd.sportsPointList[i];\r\n                    }else{\r\n                        sportsPoint=setEnd.sportsPointList[i];\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n\r\n\r\n            //显示胜利或失败图片和音效 \r\n            if(player.pos == this.RoomPosMgr.GetClientPos()){\r\n                if(point > 0){\r\n                    this.SoundManager.PlaySound(\"win\");\r\n                    this.sp_winLose.getComponent(cc.Sprite).spriteFrame = this.win;\r\n                    this.SoundManager.PlaySound(app.subGameName+\"Result_Win\");\r\n                }\r\n                else{\r\n                    this.SoundManager.PlaySound(\"fail\");\r\n                    this.sp_winLose.getComponent(cc.Sprite).spriteFrame = this.lose;\r\n                    this.SoundManager.PlaySound(app.subGameName+\"Result_Lose\");\r\n                }\r\n            }\r\n\r\n            //玩家分数\r\n            let winNode = playerNode.getChildByName(\"lb_win_num\");\r\n            let loseNode = playerNode.getChildByName(\"lb_lose_num\");\r\n            winNode.active = false;\r\n            loseNode.active = false;\r\n\r\n            //大赢家\r\n            if(point == this.bigWinner){\r\n                playerNode.getChildByName(\"icon_win\").active = true;\r\n            }\r\n    \r\n            if(point > 0){\r\n                winNode.active = true;\r\n                winNode.getComponent(cc.Label).string = \"+\" + point;\r\n            }\r\n            else{\r\n                loseNode.active = true;\r\n                loseNode.getComponent(cc.Label).string = point;\r\n            }\r\n\r\n            //比赛分消耗\r\n            let lb_sportsPoint = playerNode.getChildByName(\"lb_sportsPoint\");\r\n            let roomCfg = this.Room.GetRoomConfig();\r\n            if (roomCfg.unionId > 0 && sportsPoint) {\r\n                if (sportsPoint > 0) {\r\n                    lb_sportsPoint.getComponent(cc.Label).string =sportsPoint;\r\n                }else{\r\n                    lb_sportsPoint.getComponent(cc.Label).string = sportsPoint;\r\n                }\r\n                lb_sportsPoint.active = true;\r\n            }else{\r\n                lb_sportsPoint.active = false;\r\n            }\r\n            \r\n            //倍数\r\n            playerNode.getChildByName(\"lb_beiShu\").active = true;\r\n            let beishu = playerNode.getChildByName(\"lb_beiShu\").getComponent(cc.Label);\r\n\r\n            let number = 0;\r\n\r\n            if(isReconnect){\r\n                number = setEnd.posInfo[i].addDouble;\r\n            }\r\n            else{\r\n                 for(let j = 0; j < setEnd.doubleList.length; j++){\r\n                     if(player.pos == setEnd.doubleList[j].pos){\r\n                         number = setEnd.doubleList[j].num;\r\n                         break;\r\n                     }\r\n                 }\r\n            }\r\n            \r\n            number <= 0 ? beishu.string = 0 : beishu.string = number;\r\n\r\n            //显示抢关门或者反关门成功失败\r\n            let icon_qgm_win = playerNode.getChildByName(\"icon_qgm_win\");\r\n            let icon_qgm_lose = playerNode.getChildByName(\"icon_qgm_lose\");\r\n            let icon_bfgm = playerNode.getChildByName(\"icon_bfgm\");\r\n            let icon_bgm = playerNode.getChildByName(\"icon_bgm\");\r\n            icon_qgm_win.active = false;\r\n            icon_qgm_lose.active = false;\r\n            icon_bfgm.active = false;\r\n            icon_bgm.active = false;\r\n            \r\n            // let robCloseVic = setEnd.robCloseVic;\r\n            // let reverseRobCloseVic = setEnd.reverseRobCloseVic;\r\n            \r\n            // if(robCloseVic.pos == player.pos && robCloseVic.pos != -1){\r\n            //     if(setEnd.robCloseVic.num == 1){\r\n            //         icon_qgm_win.active = true;\r\n            //     }\r\n            //     else{\r\n            //         icon_qgm_lose.active = true;\r\n            //     }\r\n            // }\r\n\r\n            //剩余手牌\r\n            playerNode.getChildByName(\"lb_cardNum1\").getComponent(cc.Label).string = \"0\";\r\n            playerNode.getChildByName(\"lb_cardNum2\").getComponent(cc.Label).string = \"0\";\r\n            playerNode.getChildByName(\"lb_cardNum3\").getComponent(cc.Label).string = \"0\";\r\n            //血战到底\r\n            // if(this.Room.GetRoomWanfa(this.Define.SEVER_FIGHTEND)){\r\n            //     playerNode.getChildByName(\"lb_last2\").active = false;\r\n            //     playerNode.getChildByName(\"lb_last3\").active = false;\r\n            //     playerNode.getChildByName(\"lb_cardNum2\").active = false;\r\n            //     playerNode.getChildByName(\"lb_cardNum3\").active = false;\r\n\r\n            //     if(playerNum >= 3){\r\n            //         playerNode.getChildByName(\"lb_last2\").active = true;\r\n            //         playerNode.getChildByName(\"lb_cardNum2\").active = true;\r\n            //         if(playerNum >= 4){\r\n            //             playerNode.getChildByName(\"lb_last3\").active = true;\r\n            //             playerNode.getChildByName(\"lb_cardNum3\").active = true;\r\n            //         }\r\n            //     }\r\n            // }\r\n\r\n            if(isReconnect){\r\n                for(let j = 0; j < setEnd.posInfo[i].surplusCardList.length; j++){\r\n                    playerNode.getChildByName(\"lb_cardNum\" + (j+1)).active = true;\r\n                    let cardNum = playerNode.getChildByName(\"lb_cardNum\" + (j+1)).getComponent(cc.Label);\r\n                    cardNum.string = setEnd.posInfo[i].surplusCardList[j];\r\n                }\r\n                if(setEnd.posInfo[i].beShutDow && i == setEnd.firstOpPos){\r\n                    //lb_guanmen.getComponent(cc.Label).string = \"被反关门\";\r\n                    //icon_bfgm.active = true;\r\n                    // if(robCloseVic.pos == setEnd.firstOpPos && robCloseVic.num != 1){\r\n                    //     //lb_guanmen.getComponent(cc.Label).string = \"抢关门失败且被反关门\";\r\n                    // }\r\n                }\r\n                else if(setEnd.posInfo[i].beShutDow){\r\n                    //lb_guanmen.getComponent(cc.Label).string = \"被关门\";\r\n                    icon_bgm.active = true;\r\n                }\r\n            \r\n            }\r\n            else{\r\n                for(let j = 0; j < setEnd.surplusCardList.length; j++){\r\n                    playerNode.getChildByName(\"lb_cardNum\" + (j+1)).active = true;\r\n                    let cardNum = playerNode.getChildByName(\"lb_cardNum\" + (j+1)).getComponent(cc.Label);\r\n                    cardNum.string = setEnd.surplusCardList[j][i];\r\n                }\r\n                if(setEnd.beShutDowList[i] && i == setEnd.firstOpPos){\r\n                    //lb_guanmen.getComponent(cc.Label).string = \"被反关门\";\r\n                    //icon_bfgm.active = true;\r\n                    // if(robCloseVic.pos == setEnd.firstOpPos && robCloseVic.num != 1){\r\n                    //     //lb_guanmen.getComponent(cc.Label).string = \"抢关门失败且被反关门\";\r\n                    // }\r\n                }\r\n                else if(setEnd.beShutDowList[i]){\r\n                    //lb_guanmen.getComponent(cc.Label).string = \"被关门\";\r\n                    icon_bgm.active = true;\r\n                }\r\n            }\r\n            \r\n            let head = playerNode.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(app.subGameName+\"_WeChatHeadImage\");\r\n            head.ShowHeroHead(player.pid);\r\n            //玩家名字\r\n            let playerName = \"\";\r\n            playerName = player.name;\r\n            if(playerName.length > app[app.subGameName+\"_ShareDefine\"]().SubNameLen){\r\n                playerName = playerName.substring(0, app[app.subGameName+\"_ShareDefine\"]().SubNameLen) + '...';\r\n            }\r\n            let name = playerNode.getChildByName(\"user_info\").getChildByName(\"lable_name\").getComponent(cc.Label);\r\n            name.string = playerName;\r\n\r\n            let id = playerNode.getChildByName(\"user_info\").getChildByName(\"label_id\").getComponent(cc.Label);\r\n            id.string = this.ComTool.GetPid(player[\"pid\"]);\r\n        }\r\n    },\r\n\r\n    OnShow:function(){\r\n        this.FormManager.CloseForm(app.subGameName+\"_UIChat\");\r\n        this.RoomMgr = app[app.subGameName.toUpperCase()+\"RoomMgr\"]();\r\n        let roomEnd = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"roomEnd\");\r\n        if(!roomEnd){\r\n            //延迟自动继续\r\n            this.RoomMgr.SendTimeOutContinue();\r\n        }\r\n        let juShu = this.Room.GetRoomConfig().setCount;\r\n        let setID = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"setID\");\r\n        if(setID >= juShu && !app[app.subGameName+\"_ShareDefine\"]().isCoinRoom){\r\n            this.isEnd = true;\r\n            this.btn_continue.getChildByName(\"icon\").getComponent(cc.Label).string = \"总结算\";\r\n        }\r\n        else{\r\n            this.isEnd = false;\r\n            this.btn_continue.getChildByName(\"icon\").getComponent(cc.Label).string = \"继续\";\r\n        }\r\n        this.HideBigWinner();\r\n        this.HideOwner();\r\n        for(let i = 0; i < this.playerList.children.length; i++){\r\n            let child = this.playerList.children[i];\r\n            child.active = false;\r\n        }\r\n        this.ShowGameResult();\r\n        //初始化分享\r\n        this.sharemore.active=false;\r\n    },\r\n\r\n    OnClick:function(btnName, btnNode){\r\n        if(btnName == \"btn_jixu\"){\r\n            if(!this.isEnd){\r\n                if(app[app.subGameName+\"_ShareDefine\"]().isCoinRoom){\r\n                    app[app.subGameName+\"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"GoldRoom\", {practiceId:app[app.subGameName+\"_ShareDefine\"]().practiceId}, this.OnSuccess.bind(this),this.OnEnterRoomFailed.bind(this));\r\n                }\r\n                else{\r\n                    let room = this.RoomMgr.GetEnterRoom();\r\n                    if(!room){\r\n                        this.ErrLog(\"Click_btn_ready not enter room\");\r\n                        return\r\n                    }\r\n                    let roomID = room.GetRoomProperty(\"roomID\");\r\n                    app[app.subGameName+\"_GameManager\"]().SendContinueGame(roomID);\r\n                }\r\n            }\r\n            else{\r\n                this.FormManager.ShowForm(app.subGameName+\"_UIPublic_Record\");\r\n                this.CloseForm();\r\n            }\r\n            \r\n        }\r\n        else if(btnName==\"btn_share\"){\r\n            this.Click_btn_Share();\r\n            this.sharemore.active=false;\r\n        }else if(btnName==\"btn_ddshare\"){\r\n            this.Click_btn_DDShare();\r\n            this.sharemore.active=false;\r\n        }else if(btnName==\"btn_xlshare\"){\r\n            this.Click_btn_XLShare();\r\n            this.sharemore.active=false;\r\n        }else if(btnName==\"btn_sharemore\"){\r\n            this.Click_btn_ShareMore();\r\n        }else if(btnName==\"btn_closeshare\"){\r\n            this.sharemore.active=false;\r\n        }\r\n        else if(btnName == \"btn_out\"){\r\n            app[app.subGameName+\"_FormManager\"]().AddDefaultFormName(app.subGameName+\"_UIPractice\");\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }\r\n        else if(btnName == \"btn_xipai\"){\r\n            let room = this.SSSRoomMgr.GetEnterRoom();\r\n            if(!room)  return;\r\n            let roomID = room.GetRoomProperty(\"roomID\");\r\n            let self = this;\r\n            app[app.subGameName+\"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"RommXiPai\", {\"roomID\":roomID});\r\n        }\r\n    },\r\n    Click_btn_Share:function(){\r\n        this.sharemore.active=false;\r\n        this.SDKManager.ShareScreen();\r\n    },\r\n    Click_btn_DDShare:function(){\r\n        this.sharemore.active=false;\r\n        this.SDKManager.ShareScreenDD();\r\n    },\r\n    Click_btn_XLShare:function(){\r\n        this.sharemore.active=false;\r\n        this.SDKManager.ShareScreenXL();\r\n    },\r\n    Click_btn_ShareMore:function(){\r\n        let active=this.sharemore.active;\r\n        if(active==true){\r\n            this.sharemore.active=false;\r\n        }else{\r\n            this.sharemore.active=true;\r\n        }\r\n    },\r\n    OnSuccess:function(serverPack){\r\n        let roomID = serverPack.roomID;\r\n        app[app.subGameName+\"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"GetRoomInfo\", {\"roomID\":roomID});\r\n        this.CloseForm();\r\n    },\r\n\r\n    OnEnterRoomFailed:function(serverPack){\r\n        app[app.subGameName + \"Client\"].ExitGame();\r\n    },\r\n});\r\n"]}