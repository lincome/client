{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\PDK\\GameLogic/assets\\script\\game\\PDK\\GameLogic\\LogicPDKGame.js"],"names":["app","require","LogicPDKGame","BaseClass","extend","Init","JS_Name","subGameName","toUpperCase","ComTool","WeChatManager","PokerCard","RoomSet","Room","Define","handCardList","selectCardList","lastCardType","latCardList","Log","pokerType","LOGIC_MASK_COLOR","LOGIC_MASK_VALUE","InitHandCard","lastCardList","handCard","GetHandCard","i","length","card","push","SortCardByMax","TransformValueToC","pokers","poker","count","j","TransformValueToS","self","sort","a","b","GetCardValue","SortCardByMinEx","SortCardByMin","aValue","bValue","OutPokerCard","console","log","OnEvent","GetSelectCard","ChangeSelectCard","cardList","SetCardSelected","cardIdx","cardType","DeleteCardSelected","pos","indexOf","splice","SetCardData","opCardType","ClearCardData","GetLastCardType","CheckOnlyBoom","list","item","sameCard","GetSameValue","CheckOneCard","isSelectCard","lastCardValue","myCardValue","CheckDuizi","bDui","duizi","CheckShunzi","lastValue","nowValue","CheckLastThree","tag","lastCard","isCheck","samePoker","CheckSanDaiSiDai","GetRoomWanfa","SEVER_BUDAI3","SEVER_DAI31","SEVER_DAI32","SEVER_BMUSTBOMB","GetRoomSiDai","SEVER_DAI43","handPokers","tempArrA","tempArrB","RegularCard","daiCardList","GetDaiPaiList","CheckTagIsDuizi","SEVER_AAA","IsZhadan","temp","zhadan","SEVER_2A_22","CheckZhaDan","IsLianShun","haveSameArray","toString","GetDaiNum","daiNum","CheckFeiJi","santiao","bInList","CheckPokerInListEx","realPlaneA","GetRealPlane","realPlane","value","daiPaiList","CheckLianDui","CheckPokerInList","CheckDragon","IsHaveBoom","IsDismantleBoom","GetCardType","bCheck","GetTipCardSlCard","array","GetOneCard","GetDuizi","GetShunzi","GetSanDai","GetSiDai","GetZhaDan","GetFeiJi","GetLianDui","apply","GetDuiziTip","GetShunziTip","GetSanDaiTip","GetFeiJiTip","GetSiDaiTip","GetLianDuiTip","SortByLength","GetTipCard","concat","GetZhaDanTip","CheckSelected","cardValue","zhadans","SEVER_MAXAAA","GetZhaDanEx","arrLen","PushTipCard","len","reverse","chai","sameValue","duizis","bInListEx","shunzi","santiaos","GetOtherCard","GetOtherCardDui","lists","tempT","tp","temps","needDuizi","needPokersCount","cards","tempList","k","curPokersCount","tagCard","tagValue","CheckChaiInList","tagList","duiziNum","pos1","pos2","sameList","index","sameValueList","tagCardValue","pokerValue","GetSameColor","sameColorList","pokerColor","GetCardColor","tagCardColor","realPoker","CheckSameValue","aCards","bCards","bRet","g_LogicPDKGame","exports","GetModel"],"mappings":"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","file":"LogicPDKGame.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\PDK\\GameLogic","sourcesContent":["var app = require(\"pdk_app\");\r\n\r\n\r\nvar LogicPDKGame = app.BaseClass.extend({\r\n    Init:function(){\r\n        this.JS_Name = \"Logic\"+app.subGameName.toUpperCase()+\"Game\";\r\n\r\n        this.ComTool = app[app.subGameName+\"_ComTool\"]();\r\n        this.WeChatManager = app[app.subGameName+\"_WeChatManager\"]();\r\n        this.PokerCard = app[app.subGameName+\"_PokerCard\"]();\r\n        this.RoomSet = app[app.subGameName.toUpperCase()+\"RoomSet\"]();\r\n        this.Room = app[app.subGameName.toUpperCase()+\"Room\"]();\r\n        this.Define = app[app.subGameName.toUpperCase()+\"Define\"]();\r\n        \r\n        //手牌\r\n        this.handCardList = [];\r\n        //选中的牌\r\n        this.selectCardList = [];\r\n        //上一个玩家出牌的牌型\r\n        this.lastCardType = 0;\r\n        //上一个玩家出牌的牌值\r\n        this.latCardList = [];\r\n\r\n        this.Log(\"Init\");\r\n\r\n        this.pokerType = [\r\n            0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,   //方块 2-A\r\n            0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1A,0x1B,0x1C,0x1D,0x1E,   //梅花 2-A\r\n            0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2A,0x2B,0x2C,0x2D,0x2E,   //红桃 2-A\r\n            0x32,0x33,0x34,0x35,0x36,0x37,0x38,0x39,0x3A,0x3B,0x3C,0x3D,0x3E,   ];//黑桃 2-A\r\n\r\n        this.LOGIC_MASK_COLOR = 0xF0;\r\n        this.LOGIC_MASK_VALUE = 0x0F;\r\n    },\r\n\r\n    InitHandCard:function(){\r\n        this.handCardList = [];\r\n        this.selectCardList = [];\r\n        this.lastCardType = 0;\r\n        this.lastCardList = [];\r\n\r\n        let handCard = this.RoomSet.GetHandCard();\r\n        for(let i = 0; i < handCard.length; i++){\r\n            let card = handCard[i];\r\n            this.handCardList.push(card);\r\n        }\r\n\r\n        this.SortCardByMax(this.handCardList);\r\n        this.TransformValueToC(this.handCardList);\r\n    },\r\n\r\n    //如果服务端发过来的牌值有重复，转换成唯一\r\n    TransformValueToC:function(pokers){\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let count = 0;\r\n            for(let j = i; j < pokers.length; j++){\r\n                if(poker == pokers[j]){\r\n                    count++;\r\n                }\r\n                if(count >= 2){\r\n                    pokers[j] = pokers[j]+500;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    //还原客户端转过的牌值\r\n    TransformValueToS:function(pokers){\r\n        for(let i = 0; i < pokers.length; i++){\r\n            if(pokers[i] > 500){\r\n                pokers[i] = pokers[i] - 500;\r\n            }\r\n        }\r\n    },\r\n\r\n    SortCardByMax:function(pokers){\r\n        let self = this;\r\n        pokers.sort(function(a, b){\r\n            //return (b&0x0F) - (a&0x0F);\r\n            return self.GetCardValue(b) - self.GetCardValue(a);\r\n        });\r\n    },\r\n\r\n    SortCardByMinEx:function(pokers){\r\n        let self = this;\r\n        pokers.sort(function(a, b){\r\n            //return (a&0x0F) - (b&0x0F);\r\n            return self.GetCardValue(a) - self.GetCardValue(b);\r\n        });\r\n    },\r\n\r\n    SortCardByMin:function(pokers){\r\n        let self = this;\r\n        pokers.sort(function(a, b){\r\n            let aValue = a[0];\r\n            let bValue = b[0];\r\n            //return (aValue&0x0F) - (bValue&0x0F);\r\n            return self.GetCardValue(aValue) - self.GetCardValue(bValue);\r\n        });\r\n    },\r\n\r\n    OutPokerCard:function(handCardList){\r\n        this.handCardList = handCardList;\r\n        this.SortCardByMax(this.handCardList);\r\n        this.selectCardList = [];\r\n        //删除handcardlist和selectCardList中的元素\r\n        // for(let i = 0; i < cardList.length; i++){\r\n        //     let value = cardList[i];\r\n        //     let pos = this.handCardList.indexOf(value+500);\r\n        //     if(pos != -1){\r\n        //         this.handCardList.splice(pos,1);\r\n        //     }\r\n        //     else{\r\n        //         let pos1 = this.handCardList.indexOf(value);\r\n        //         if(pos1 != -1){\r\n        //             this.handCardList.splice(pos1,1);\r\n        //         }\r\n        //     }\r\n\r\n        //     let cardPos = this.selectCardList.indexOf(value);\r\n        //     if(cardPos != -1){\r\n        //         this.selectCardList.splice(cardPos,1);\r\n        //     }\r\n        // }\r\n        console.log(\"selectCardList == \"+this.selectCardList);\r\n        app[app.subGameName + \"Client\"].OnEvent(\"HandCard\");\r\n    },\r\n\r\n    GetHandCard:function(){\r\n        return this.handCardList;\r\n    },\r\n\r\n    GetSelectCard:function(){\r\n        return this.selectCardList;\r\n    },\r\n\r\n    ChangeSelectCard:function(cardList){\r\n        this.selectCardList = [];\r\n        this.selectCardList = cardList;\r\n    },\r\n\r\n    SetCardSelected:function(cardIdx){\r\n        let cardType = this.handCardList[cardIdx -1];\r\n        this.selectCardList.push(cardType);\r\n        console.log(\"selectCardList == \"+this.selectCardList);\r\n    },\r\n\r\n    DeleteCardSelected:function(cardIdx){\r\n        let cardType = this.handCardList[cardIdx -1];\r\n        let pos = this.selectCardList.indexOf(cardType)\r\n        if (pos != -1){\r\n            this.selectCardList.splice(pos, 1);\r\n        }\r\n        console.log(\"selectCardList111 == \"+this.selectCardList);\r\n    },\r\n\r\n    SetCardData(opCardType, cardList){\r\n        if(opCardType == 1 || !cardList.length){\r\n            return;\r\n        }\r\n\r\n        if(this.lastCardType == 0 || opCardType == 11){\r\n            this.lastCardType = opCardType;\r\n        }\r\n        \r\n        console.log(\"this.lastCardTyp ==\"+this.lastCardType);\r\n        this.lastCardList = cardList;\r\n    },\r\n\r\n    ClearCardData:function(){\r\n        this.lastCardType = 0;\r\n        this.lastCardList = [];\r\n    },\r\n\r\n    GetLastCardType:function(){\r\n        return this.lastCardType;\r\n    },\r\n\r\n    //检查组合是否只有炸弹\r\n    CheckOnlyBoom:function(list){\r\n        for(let i = 0; i < list.length; i++){\r\n            let item = list[i];\r\n            let sameCard = this.GetSameValue(item, item[0]);\r\n            if(sameCard.length != item.length)\r\n                return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    CheckOneCard:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        if(pokers.length != 1) return false;\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        myCardValue = this.GetCardValue(pokers[0]);\r\n\r\n        if(lastCardValue && lastCardValue != 0){\r\n            if(this.lastCardList.length != pokers.length) return false;\r\n            if(myCardValue > lastCardValue){\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    CheckDuizi:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        if(pokers.length != 2) return false;\r\n\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n        let bDui = false;\r\n\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        \r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            if(duizi.length == 2){\r\n                myCardValue = this.GetCardValue(poker);\r\n                bDui = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(lastCardValue && lastCardValue != 0){\r\n            if(this.lastCardList.length != pokers.length) return false;\r\n            \r\n            if(myCardValue > lastCardValue){\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if(bDui)\r\n            return true;\r\n        return false;\r\n    },\r\n\r\n    CheckShunzi:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        if(pokers.length < 5) return false;\r\n\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n\r\n        this.SortCardByMax(this.lastCardList);\r\n        this.SortCardByMax(pokers);\r\n\r\n        let lastValue = 0;\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let nowValue = this.GetCardValue(poker);\r\n\r\n            if(nowValue == 15){\r\n                return false;\r\n            }\r\n\r\n            if(lastValue != 0){\r\n                if(lastValue - nowValue != 1)\r\n                    return false;\r\n            }\r\n            \r\n            lastValue = nowValue;\r\n        }\r\n\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        myCardValue = this.GetCardValue(pokers[0]);\r\n\r\n        if(lastCardValue && lastCardValue != 0){\r\n            if(this.lastCardList.length != pokers.length) return false;\r\n            \r\n            if(myCardValue > lastCardValue){\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    //如果最后首发只有三带 可以不带牌出, isSelectCard如果为false那么就是判断所有手牌是否满足最后一手牌直接出\r\n    CheckLastThree:function(tag, lastCard, isSelectCard = true){\r\n        let pokers = [];\r\n        if (isSelectCard) {\r\n            pokers = this.selectCardList;\r\n        }else{\r\n            pokers = this.handCardList;\r\n        }\r\n        if(this.lastCardType == 0){\r\n            if(pokers.length != lastCard ||\r\n                this.handCardList.length != lastCard){\r\n                return false;\r\n            }\r\n            \r\n            let isCheck = false;\r\n            for(let i = 0; i < pokers.length; i++){\r\n                let poker = pokers[i];\r\n                let samePoker = this.GetSameValue(pokers, poker);\r\n                if(samePoker.length >= tag){\r\n                    isCheck = true;\r\n                    break;\r\n                }\r\n            }\r\n            if(isCheck){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    CheckSanDaiSiDai:function(tag, isSelectCard = true){ \r\n        if(tag == 5){\r\n            if(!this.CheckLastThree(3, 3, isSelectCard) && this.lastCardType == 0){\r\n                //没有三不带的玩法 不检测\r\n                if(!this.Room.GetRoomWanfa(this.Define.SEVER_BUDAI3)) return false;\r\n            }\r\n        }\r\n        else if(tag == 6){\r\n            if(!this.CheckLastThree(3, 4, isSelectCard) && this.lastCardType == 0){\r\n                 //没有三带一的玩法 不检测\r\n                if(!this.Room.GetRoomWanfa(this.Define.SEVER_DAI31)) return false;\r\n            }\r\n        }\r\n        else if(tag == 7){\r\n            // //没有三带二的玩法 不检测\r\n            if(!this.Room.GetRoomWanfa(this.Define.SEVER_DAI32)) return false;\r\n        }\r\n        else if(tag == 8){\r\n            //没有四带一的玩法 不检测\r\n            if(!this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)) return false;\r\n            if(!this.CheckLastThree(4, 5, isSelectCard) && this.lastCardType == 0){\r\n                if(!this.Room.GetRoomSiDai(0)) return false;\r\n            }\r\n        }\r\n        else if(tag == 9){\r\n            //没有四带二的玩法 不检测\r\n            if(!this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)) return false;\r\n            if(!this.CheckLastThree(4, 6, isSelectCard) && this.lastCardType == 0){\r\n                if(!this.Room.GetRoomSiDai(1)) return false;\r\n            }\r\n        }\r\n        else if(tag == 10){\r\n            //没有四带三的玩法 不检测\r\n            if(!this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)) return false;\r\n            if(!this.Room.GetRoomWanfa(this.Define.SEVER_DAI43)){\r\n                if(!this.Room.GetRoomSiDai(2)) return false;\r\n            }\r\n            \r\n        }\r\n        \r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        let handPokers = this.handCardList;\r\n        if(pokers.length < 3) return false;\r\n        \r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        for(let i=0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let samePoker = this.GetSameValue(this.lastCardList, poker);\r\n            if(tag >= 5 && tag <= 7){\r\n                if(samePoker.length >= 3){\r\n                    this.RegularCard(tempArrA, samePoker, 3);\r\n                    //tempArrA = samePoker;\r\n                    break;\r\n                }\r\n            }\r\n            else if(tag >= 8 && tag <= 10){\r\n                if(samePoker.length >= 4){\r\n                    this.RegularCard(tempArrA, samePoker, 4);\r\n                    //tempArrA = samePoker;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let samePoker = this.GetSameValue(pokers, poker);\r\n            if(tag >= 5 && tag <= 7){\r\n                if(samePoker.length >= 3){\r\n                    this.RegularCard(tempArrB, samePoker, 3);\r\n                    //tempArrB = samePoker;\r\n                    break;\r\n                }\r\n            }\r\n            else if(tag >= 8 && tag <= 10){\r\n                if(samePoker.length >= 4){\r\n                    this.RegularCard(tempArrB, samePoker, 4);\r\n                    //tempArrB = samePoker;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if(tempArrA.length){\r\n            lastCardValue = this.GetCardValue(tempArrA[0][0]);\r\n        }\r\n        \r\n        if(tempArrB.length){\r\n            myCardValue = this.GetCardValue(tempArrB[0][0]);\r\n        }\r\n        let daiCardList = this.GetDaiPaiList(pokers, tempArrB);\r\n        if(lastCardValue && lastCardValue != 0){\r\n            if(isSelectCard && this.lastCardList.length != pokers.length && handPokers.length > pokers.length && !this.CheckTagIsDuizi(daiCardList))\r\n                return false;\r\n            else{\r\n                //如果牌值为A并且存在3A炸\r\n                if(myCardValue == 14 && this.Room.GetRoomWanfa(this.Define.SEVER_AAA)){\r\n                    //如果存在炸弹可拆玩法  可出\r\n                    if(!this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)){\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n            //如果是用手牌来判断最后一手牌能不能出，则不能超过上把牌的长度\r\n            if (!isSelectCard && pokers.length > this.lastCardList.length) {\r\n                return false;\r\n            }\r\n            if(myCardValue > lastCardValue){\r\n                if(tag == 6){//三带一玩法不判断带牌\r\n                    return true;\r\n                }else if(tag == 7){\r\n                    return true;\r\n                }else if(tag == 8 && this.lastCardList.length == pokers.length){//四带一并且长度相等可以压\r\n                    return true;\r\n                }else if(tag == 9 && this.lastCardList.length == pokers.length){//四带二并且长度相等可以压\r\n                    return true;\r\n                }else if(tag == 10 && this.lastCardList.length == pokers.length){//四带三并且长度相等可以压\r\n                    return true;\r\n                }else if(tag == 10 && pokers.length>=5 && this.handCardList.length == pokers.length){  //最后一首直接出\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        if(tempArrB.length){\r\n            if(tag == 5){\r\n                if(pokers.length == 3){\r\n                    return true;\r\n                }\r\n            }\r\n            else if(tag == 6){\r\n                if(pokers.length == 4){\r\n                    return true;\r\n                }\r\n            }\r\n            else if(tag == 7){\r\n                //还需判断是否最后一手牌能出完\r\n                if(pokers.length==5){\r\n                    return true;\r\n                }else if(pokers.length<=5){\r\n                    //是不是最后一首，如果是。也可以出\r\n                    if(this.handCardList.length<=5 && this.handCardList.length == pokers.length){\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            else if(tag == 8){\r\n                if(pokers.length == 5){\r\n                    return true;\r\n                }\r\n            }\r\n            else if(tag == 9){\r\n                if(pokers.length == 6){\r\n                    return true;\r\n                }else if(pokers.length<6){\r\n                    //是不是最后一首，如果是。也可以出\r\n                    if(this.handCardList.length<6 && this.handCardList.length == pokers.length){\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            else if(tag == 10){\r\n                //还需判断是否最后一手牌能出完\r\n                if( pokers.length == 7){\r\n                    return true;\r\n                }else if(pokers.length<7){\r\n                    //是不是最后一首，如果是。也可以出\r\n                    if(this.handCardList.length<7 && this.handCardList.length == pokers.length){\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    IsZhadan:function(pokers){\r\n        let temp = [];\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            if(zhadan.length >= 4){\r\n                temp = zhadan;\r\n                break;\r\n            }\r\n            //是否有3A炸玩法\r\n            // if(this.Room.GetRoomWanfa(this.Define.PDK_WANFA_3AZHA)){\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_AAA)){\r\n                if(zhadan.length == 3 && this.GetCardValue(zhadan[0]) == 14){\r\n                    temp = zhadan;\r\n                    break;\r\n                }\r\n            }\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_2A_22)){\r\n                if(zhadan.length == 2 && this.GetCardValue(zhadan[0]) == 14){\r\n                    temp = zhadan;\r\n                    break;\r\n                }\r\n                if(zhadan.length == 2 && this.GetCardValue(zhadan[0]) == 15){\r\n                    temp = zhadan;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if(pokers.length){\r\n            if(pokers.length - temp.length == 0){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    \r\n    CheckZhaDan:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n\r\n        if(this.IsZhadan(pokers)){\r\n            return true;\r\n        }\r\n        if(this.IsZhadan(this.lastCardList)){\r\n            lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        }\r\n\r\n        if(this.IsZhadan(pokers)){\r\n            if(lastCardValue == 0) return true;\r\n            myCardValue = this.GetCardValue(pokers[0]);\r\n        }\r\n        else{\r\n            return false;\r\n        }\r\n        \r\n        //先比较牌值再比较张数\r\n        if(myCardValue > lastCardValue){\r\n            if(pokers.length >= this.lastCardList.length){\r\n                return true;\r\n            }\r\n        }\r\n        else if(myCardValue <= lastCardValue){\r\n            if(pokers.length > this.lastCardList.length){\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    IsLianShun:function(pokers){\r\n        if(pokers.length < 2) return false;\r\n        \r\n        this.SortCardByMin(pokers);\r\n\r\n        let lastValue = 0;\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let item = pokers[i];\r\n            let nowValue = this.GetCardValue(item[0]);\r\n\r\n            if(nowValue == 15){\r\n                return false;\r\n            }\r\n\r\n            if(lastValue != 0){\r\n                if((lastValue+1) != nowValue)\r\n                    return false;\r\n            }\r\n            \r\n            lastValue = nowValue;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    //如果有超过tag只取tag数量的牌\r\n    RegularCard:function(pokers, list, tag){\r\n        let temp = [];\r\n        for(let i = 0; i < list.length; i++){\r\n            if(temp.length == tag) break;\r\n            temp.push(list[i]);\r\n        }\r\n        //过滤掉可能相同的元素\r\n        let haveSameArray=false;\r\n        for(let i=0;i<pokers.length;i++){\r\n            if(pokers[i].toString()==temp.toString()){\r\n                haveSameArray=true;\r\n                break;\r\n            }\r\n        }\r\n        if(haveSameArray==false){\r\n            pokers[pokers.length] = temp;\r\n        }\r\n    },\r\n\r\n    GetDaiNum:function(){\r\n        return this.daiNum;\r\n    },\r\n    \r\n    CheckFeiJi:function(tag, isSelectCard = true){\r\n        let handPokers = this.handCardList;\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        if(pokers.length < 6) return false;\r\n\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let santiao = this.GetSameValue(this.lastCardList, poker);\r\n            let bInList = this.CheckPokerInListEx(tempArrA, poker);\r\n            if(santiao.length >= tag && !bInList){\r\n                this.RegularCard(tempArrA, santiao, tag);\r\n            }\r\n        }\r\n\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(tempArrB, poker);\r\n            if(santiao.length >= tag && !bInList){\r\n                this.RegularCard(tempArrB, santiao, tag);\r\n            }\r\n        }\r\n\r\n        if(tempArrA.length){\r\n            let realPlaneA = this.GetRealPlane(tempArrA)\r\n            lastCardValue = this.GetCardValue(realPlaneA[0][0]);\r\n        }\r\n        \r\n        if(tempArrB.length < 2) return false;\r\n        \r\n        this.SortCardByMin(tempArrB);\r\n\r\n        let realPlane = this.GetRealPlane(tempArrB);\r\n\r\n        if(!realPlane.length) return false;\r\n\r\n        myCardValue = this.GetCardValue(realPlane[0][0]);\r\n        //判断牌值是否大于上家\r\n        if(lastCardValue && lastCardValue != 0 && myCardValue <= lastCardValue){\r\n                return false;\r\n        }\r\n        let value = (pokers.length - realPlane.length * tag);\r\n        this.daiNum = value;\r\n        let daiPaiList = this.GetDaiPaiList(pokers, realPlane);\r\n        if(tag == 3){\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_BUDAI3)){\r\n                if(value == 0){\r\n                    return true;\r\n                }\r\n            }\r\n            // else if(this.Room.GetRoomWanfa(this.Define.SEVER_DAI31)){\r\n            //     if(value == realPlane.length){\r\n            //         return true;\r\n            //     }\r\n            //     else if (handPokers.length <= (realPlane.length * tag + realPlane.length)\r\n            //         && handPokers.length == pokers.length) {\r\n            //         //如果手牌少于需要带的牌数并且轮到本家出牌则返回true\r\n            //         return true;\r\n            //     }\r\n            // }\r\n            else if(true){//飞机三带二固定的\r\n                if(realPlane.length==3 && value==1){\r\n                    //三飞机带单根,可以组成  444,555 带 333,6\r\n                    return true;\r\n                }\r\n                else if(value == realPlane.length * 2){\r\n                    return true;\r\n                }\r\n                //lastCardValue == 0 && \r\n                else if (handPokers.length <= (realPlane.length * tag + realPlane.length * 2)\r\n                    && handPokers.length == pokers.length) {\r\n                    //如果手牌少于需要带的牌数并且轮到本家出牌则返回true\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        else if(tag == 4){\r\n            if(this.Room.GetRoomSiDai(0)){\r\n                if(value == realPlane.length){\r\n                    return true;\r\n                }\r\n                else if (handPokers.length <= (realPlane.length * tag + realPlane.length)\r\n                    && handPokers.length == pokers.length) {\r\n                    //如果手牌少于需要带的牌数并且轮到本家出牌则返回true\r\n                    return true;\r\n                }\r\n            }\r\n            else if(this.Room.GetRoomSiDai(1)){\r\n                if(value == realPlane.length * 2){\r\n                    return true;\r\n                }\r\n                else if (handPokers.length <= (realPlane.length * tag + realPlane.length * 2)\r\n                    && handPokers.length == pokers.length) {\r\n                    //如果手牌少于需要带的牌数并且轮到本家出牌则返回true\r\n                    return true;\r\n                }\r\n            }\r\n            // else if(this.Room.GetRoomWanfa(this.Define.PDK_WANFA_4DAI3)){\r\n            else if(this.Room.GetRoomSiDai(2)){\r\n                if(value == realPlane.length * 3){\r\n                    return true;\r\n                }\r\n                else if (handPokers.length <= (realPlane.length * tag + realPlane.length * 3)\r\n                    && handPokers.length == pokers.length) {\r\n                    //如果手牌少于需要带的牌数并且轮到本家出牌则返回true\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        \r\n        return false;\r\n    },\r\n\r\n    CheckLianDui:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        if(pokers.length < 4) return false;\r\n        if(pokers.length%2 == 1) return false;\r\n\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let duizi = this.GetSameValue(this.lastCardList, poker);\r\n            let bInList = this.CheckPokerInList(tempArrA, poker);\r\n            if(duizi.length == 2 && !bInList){\r\n                tempArrA[tempArrA.length] = duizi;\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInList(tempArrB, poker);\r\n            if(duizi.length == 2 && !bInList){\r\n                tempArrB[tempArrB.length] = duizi;\r\n            }\r\n        }\r\n\r\n        if(tempArrB.length * 2 != pokers.length) return false;\r\n\r\n        if(this.IsLianShun(tempArrA)){\r\n            lastCardValue = this.GetCardValue(tempArrA[0][0]);\r\n        }\r\n\r\n        if(this.IsLianShun(tempArrB)){\r\n            myCardValue = this.GetCardValue(tempArrB[0][0]);\r\n        }\r\n        else{\r\n            return false;\r\n        }\r\n        \r\n        if(lastCardValue && lastCardValue != 0){\r\n            if((pokers.length - this.lastCardList.length) == 0){\r\n                if(myCardValue > lastCardValue){\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    //检查顺子是不是一条龙\r\n    CheckDragon:function(){\r\n        let pokers = this.lastCardList;\r\n        if(pokers.length != 12) return false;\r\n\r\n        this.SortCardByMinEx(pokers);\r\n\r\n        let lastValue = 0;\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let nowValue = this.GetCardValue(poker);\r\n            if(nowValue == lastValue) return false;\r\n\r\n            if(nowValue == 15) return false;\r\n\r\n            if(lastValue != 0){\r\n                if(nowValue - lastValue != 1)\r\n                    return false;\r\n            }\r\n\r\n            lastValue = nowValue;\r\n        }\r\n\r\n        return true; \r\n    },\r\n    IsHaveBoom:function(isSelectCard = false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            if(zhadan.length >= 4){\r\n                return true;\r\n            }\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_AAA)){\r\n                if(zhadan.length == 3 && this.GetCardValue(zhadan[0]) == 14){\r\n                    return true;\r\n                }\r\n            }\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_2A_22)){\r\n                if(zhadan.length == 2 && this.GetCardValue(zhadan[0]) == 14){\r\n                    return true;\r\n                }\r\n                if(zhadan.length == 2 && this.GetCardValue(zhadan[0]) == 15){\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    IsDismantleBoom:function(){\r\n        let pokers = this.handCardList;\r\n        if(this.CheckZhaDan()){\r\n            return false;\r\n        }\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            if(this.selectCardList.indexOf(poker) != -1){\r\n                let zhadan = this.GetSameValue(pokers, poker);\r\n                if(zhadan.length >= 4){\r\n                    return true;\r\n                }\r\n                // if(this.Room.GetRoomWanfa(this.Define.PDK_WANFA_3AZHA)){\r\n                if(this.Room.GetRoomWanfa(this.Define.SEVER_AAA)){\r\n                    if(zhadan.length == 3 && this.GetCardValue(zhadan[0]) == 14){\r\n                        return true;\r\n                    }\r\n                }\r\n                if(this.Room.GetRoomWanfa(this.Define.SEVER_2A_22)){\r\n                    if(zhadan.length == 2 && this.GetCardValue(zhadan[0]) == 14){\r\n                        return true;\r\n                    }\r\n                    if(zhadan.length == 2 && this.GetCardValue(zhadan[0]) == 15){\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        return false;\r\n    },\r\n\r\n    GetCardType:function(isSelectCard = true){\r\n        //0:可以随便出牌 1:不出 2:单牌 3:对子 4:顺子 5:3不带 6:3带1 7:3带2 8:4带1 9:4带2 10:4带3 \r\n        //11:炸弹 12:三带飞机 13:四带飞机 14:连对\r\n        this.daiNum = 0;\r\n\r\n        if(isSelectCard && !this.selectCardList.length){\r\n            return 0;\r\n        }\r\n        \r\n        let bCheck = false;\r\n\r\n        if(this.CheckZhaDan(isSelectCard)){\r\n            return 11;\r\n        }\r\n        \r\n        if(this.lastCardType == 0){\r\n            if(this.CheckOneCard(isSelectCard)){\r\n                return 2;\r\n            }\r\n            else if(this.CheckDuizi(isSelectCard)){\r\n                return 3;\r\n            }\r\n            else if(this.CheckShunzi(isSelectCard)){\r\n                return 4;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(10, isSelectCard) && this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)){\r\n                return 10;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(9, isSelectCard) && this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)){\r\n                return 9;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(8, isSelectCard) && this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)){\r\n                return 8;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(7, isSelectCard)){\r\n                return 7;\r\n            }\r\n            /*else if(this.CheckSanDaiSiDai(6, isSelectCard)){\r\n                return 6;\r\n            }*/\r\n            /*else if(this.CheckSanDaiSiDai(5, isSelectCard)){\r\n                return 5;\r\n            }*/\r\n            else if(this.CheckFeiJi(3, isSelectCard)){\r\n                return 12;\r\n            }\r\n            else if(this.CheckFeiJi(4, isSelectCard)){\r\n                return 13;\r\n            }\r\n            else if(this.CheckLianDui(isSelectCard)){\r\n                return 14;\r\n            }\r\n            else{\r\n                return 0;\r\n            }\r\n        }\r\n        else if(this.lastCardType == 2){\r\n            if(this.CheckOneCard(isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if(this.lastCardType == 3){\r\n            if(this.CheckDuizi(isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if(this.lastCardType == 4){\r\n            if(this.CheckShunzi(isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if((this.lastCardType == 5) || (this.lastCardType == 6) || (this.lastCardType == 7) ||\r\n                (this.lastCardType == 8) || (this.lastCardType == 9) || (this.lastCardType == 10)){\r\n                if(this.CheckSanDaiSiDai(this.lastCardType, isSelectCard)){\r\n                    bCheck = true;\r\n                }\r\n        }\r\n        else if((this.lastCardType == 12)){\r\n            if(this.CheckFeiJi(3, isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if(this.lastCardType == 13){\r\n            if(this.CheckFeiJi(4, isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if(this.lastCardType == 14){\r\n            if(this.CheckLianDui(isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n\r\n        if(bCheck){\r\n            return this.lastCardType;\r\n        }\r\n\r\n        return 0;\r\n    },\r\n    //0:可以随便出牌 1:不出 2:单牌 3:对子 4:顺子 5:3不带 6:3带1 7:3带2 8:4带1 9:4带2 10:4带3 \r\n        //11:炸弹 12:三带飞机 13:四带飞机 14:连对\r\n    GetTipCardSlCard:function(){\r\n        let array = [];\r\n        // if(this.lastCardType == 2){\r\n        //     array = this.GetOneCard(true);\r\n        // }\r\n        // else if(this.lastCardType == 3){\r\n        //     array = this.GetDuizi(true);\r\n        // }\r\n        // else \r\n        if(this.lastCardType == 2){\r\n            array = this.GetOneCard(true);\r\n        }\r\n        else if(this.lastCardType == 3){\r\n            array = this.GetDuizi(true);\r\n        }\r\n        else if(this.lastCardType == 4){\r\n            array = this.GetShunzi(true);\r\n        }\r\n        else if(this.lastCardType == 5 || this.lastCardType == 6 ||this.lastCardType == 7){\r\n            array = this.GetSanDai(true);                \r\n        }\r\n        else if((this.lastCardType == 8 || this.lastCardType == 9 ||this.lastCardType == 10) && this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)){\r\n            array = this.GetSiDai(true);\r\n        }\r\n        else if(this.lastCardType == 11){\r\n            array = this.GetZhaDan(true);\r\n        }\r\n        else if(this.lastCardType == 12){\r\n            array = this.GetFeiJi(3,true);\r\n        }\r\n        else if(this.lastCardType == 13){\r\n            array = this.GetFeiJi(4,true);\r\n        }\r\n        else if(this.lastCardType == 14){\r\n            array = this.GetLianDui(true);\r\n        }\r\n        else if(this.lastCardType==0){\r\n            //随意出牌\r\n            array.push.apply(array, this.GetDuiziTip(true));\r\n            array.push.apply(array, this.GetShunziTip(true));\r\n            array.push.apply(array, this.GetSanDaiTip(7,true));\r\n            array.push.apply(array, this.GetFeiJiTip(3,true));\r\n            array.push.apply(array, this.GetFeiJiTip(4,true));\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)){\r\n                array.push.apply(array, this.GetSiDaiTip(10,true));\r\n            }\r\n            array.push.apply(array, this.GetLianDuiTip(true));\r\n        }\r\n        if(array.length>0){\r\n             array.sort(this.SortByLength);\r\n        }\r\n        return array;\r\n    },\r\n    SortByLength:function(a,b){\r\n        if(a.length>b.length){\r\n            return -1;\r\n        }\r\n        return 1;\r\n    },\r\n    GetTipCard:function(){\r\n        let array = [];\r\n        console.log(\"GetTipCard\", this.lastCardType)\r\n        if(this.lastCardType < 2){\r\n            array = array.concat(this.GetZhaDanTip());\r\n            array = array.concat(this.GetLianDui());\r\n            array = array.concat(this.GetFeiJi(4));\r\n            array = array.concat(this.GetFeiJi(3));\r\n            array = array.concat(this.GetDuizi());\r\n            array = array.concat(this.GetShunzi());\r\n            array = array.concat(this.GetSanDaiTip(7));\r\n            array = array.concat(this.GetSiDai());\r\n            array = array.concat(this.GetOneCard());\r\n            return array;\r\n        }\r\n        if(this.lastCardType == 2){\r\n            array = this.GetOneCard();\r\n        }\r\n        else if(this.lastCardType == 3){\r\n            array = this.GetDuizi();\r\n        }\r\n        else if(this.lastCardType == 4){\r\n            array = this.GetShunzi();\r\n        }\r\n        else if(this.lastCardType == 5 || this.lastCardType == 6 ||this.lastCardType == 7){\r\n            array = this.GetSanDai();                \r\n        }\r\n        else if(this.lastCardType == 8 || this.lastCardType == 9 ||this.lastCardType == 10){\r\n            array = this.GetSiDai();\r\n        }\r\n        else if(this.lastCardType == 11){\r\n            array = this.GetZhaDan();\r\n        }\r\n        else if(this.lastCardType == 12){\r\n            array = this.GetFeiJi(3);\r\n        }\r\n        else if(this.lastCardType == 13){\r\n            array = this.GetFeiJi(4);\r\n        }\r\n        else if(this.lastCardType == 14){\r\n            array = this.GetLianDui();\r\n        }\r\n        return array;\r\n    },\r\n\r\n    CheckSelected:function(cardValue){\r\n        if (-1 == this.selectCardList.indexOf(cardValue)){\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    //0:可以随便出牌 1:不出 2:单牌 3:对子 4:顺子 5:3不带 6:3带1 7:3带2 8:4带1 9:4带2 10:4带3 \r\n    //11:炸弹 12:三带飞机 13:四带飞机 14:连对\r\n    GetZhaDanTip:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n             pokers = this.handCardList;\r\n        }else{\r\n             pokers = this.selectCardList;\r\n        }\r\n        let zhadans = [];\r\n        \r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            if(zhadan.length == 4 && !bInList){\r\n                zhadans[zhadans.length] = zhadan;\r\n            }\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_AAA)){\r\n                if(zhadan.length == 3 && !bInList && this.GetCardValue(zhadan[0]) == 14){\r\n                    zhadans[zhadans.length] = zhadan;\r\n                }\r\n            }\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_2A_22)){\r\n                if(zhadan.length == 2 && !bInList && this.GetCardValue(zhadan[0]) == 14){\r\n                    zhadans[zhadans.length] = zhadan;\r\n                }\r\n                if(zhadan.length == 2 && !bInList && this.GetCardValue(zhadan[0]) == 15){\r\n                    zhadans[zhadans.length] = zhadan;\r\n                }\r\n            }\r\n        }\r\n        return zhadans;\r\n    },\r\n    GetZhaDan:function(){\r\n        let pokers = this.handCardList;\r\n        let zhadans = [];\r\n\r\n        let lastCardValue = 0;\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        //存在3A炸玩法并且3A炸最大  直接提示\r\n        if(this.Room.GetRoomWanfa(this.Define.SEVER_AAA) && this.Room.GetRoomWanfa(this.Define.SEVER_MAXAAA)){\r\n            if(lastCardValue == 14){\r\n                return zhadans;\r\n            }\r\n        }\r\n        \r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            if(zhadan.length > this.lastCardList.length && !bInList && zhadan.length >= 4){\r\n                zhadans[zhadans.length] = zhadan;\r\n            }\r\n            else if(zhadan.length == this.lastCardList.length && !bInList && this.GetCardValue(zhadan[0]) > lastCardValue){\r\n                zhadans[zhadans.length] = zhadan;\r\n            }\r\n            // if(this.Room.GetRoomWanfa(this.Define.PDK_WANFA_3AZHA)){\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_AAA)){\r\n                //3A炸最大\r\n                if(this.Room.GetRoomWanfa(this.Define.SEVER_MAXAAA)){\r\n                    if(zhadan.length == 3 && !bInList && this.GetCardValue(zhadan[0]) == 14){\r\n                        zhadans[zhadans.length] = zhadan;\r\n                    }\r\n                }\r\n                //3A炸最小\r\n                else{\r\n                    if(lastCardValue == 0){\r\n                        if(zhadan.length == 3 && !bInList && this.GetCardValue(zhadan[0]) == 14){\r\n                            zhadans[zhadans.length] = zhadan;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_2A_22)){\r\n                if(lastCardValue == 0){\r\n                    if(zhadan.length == 2 && !bInList && this.GetCardValue(zhadan[0]) == 14){\r\n                        zhadans[zhadans.length] = zhadan;\r\n                    }\r\n                    if(zhadan.length == 2 && !bInList && this.GetCardValue(zhadan[0]) == 15){\r\n                        zhadans[zhadans.length] = zhadan;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    if(zhadan.length == 2 && !bInList && this.GetCardValue(zhadan[0]) == 15 && 14 == lastCardValue){\r\n                        zhadans[zhadans.length] = zhadan;\r\n                        console.log\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return zhadans;\r\n    },\r\n\r\n    GetZhaDanEx:function(array,isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let zhadans = [];\r\n        let arrLen = array.length;//先记录下原来数组的长度，方便后续插入三A炸弹\r\n        console.log(\"GetZhaDanEx\", pokers)\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            if(zhadan.length >= 4 && !bInList){\r\n                zhadans[zhadans.length] = zhadan;\r\n            }\r\n            //是否有3A炸玩法\r\n            // if(this.Room.GetRoomWanfa(this.Define.PDK_WANFA_3AZHA)){\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_AAA)){    \r\n                if(zhadan.length == 3 && this.GetCardValue(zhadan[0]) == 14 && !bInList){\r\n                    zhadans[zhadans.length] = zhadan;\r\n                }\r\n            }\r\n            if(this.Room.GetRoomWanfa(this.Define.SEVER_2A_22)){    \r\n                if(zhadan.length == 2 && this.GetCardValue(zhadan[0]) == 14 && !bInList){\r\n                    zhadans[zhadans.length] = zhadan;\r\n                }\r\n                else if(zhadan.length == 2 && this.GetCardValue(zhadan[0]) == 15 && !bInList){\r\n                    zhadans[zhadans.length] = zhadan;\r\n                }\r\n            }\r\n        }\r\n        for(let i = zhadans.length - 1; i >= 0; i--){\r\n            let item = zhadans[i];\r\n            //对炸弹进行排序，从最小炸弹开始，3A是最小的炸弹\r\n            if (item.length == 3) {\r\n                array.splice(arrLen,0,item);\r\n            } else {\r\n                array.push(item);\r\n            }\r\n            \r\n        }\r\n    },\r\n\r\n    PushTipCard:function(pokers, samePoker, len){\r\n        let temp = [];\r\n        samePoker.reverse();\r\n        for(let i = 0; i < len; i++){\r\n            temp.push(samePoker[i]);\r\n        }\r\n\r\n        pokers.push(temp);\r\n    },\r\n\r\n    GetOneCard:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let array = [];\r\n        let chai = [];\r\n\r\n        let lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            if(cardValue <= lastCardValue) continue;\r\n            let sameValue = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(chai, poker);\r\n            if(sameValue.length == 1){\r\n                this.PushTipCard(array, sameValue, 1);\r\n            }\r\n            else if(sameValue.length > 1 && !bInList){\r\n                this.PushTipCard(chai, sameValue, 1);\r\n            }\r\n        }\r\n        array.push.apply(array, chai);\r\n        this.GetZhaDanEx(array,isSelectCard);\r\n        return array;\r\n    },\r\n\r\n    GetDuiziTip:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let duizis = [];\r\n        let chai = [];\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(duizis, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(duizi.length == 2 && !bInList){\r\n                this.PushTipCard(duizis, duizi, 2);\r\n            }\r\n            else if(duizi.length > 2 && !bInListEx){\r\n                this.PushTipCard(chai, duizi, 2);\r\n            }\r\n        }\r\n        duizis.push.apply(duizis, chai);\r\n        return duizis;\r\n    },\r\n   \r\n    GetDuizi:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let duizis = [];\r\n        let chai = [];\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            if(cardValue <= lastCardValue) continue;\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(duizis, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(duizi.length == 2 && !bInList){\r\n                this.PushTipCard(duizis, duizi, 2);\r\n            }\r\n            else if(duizi.length > 2 && !bInListEx){\r\n                this.PushTipCard(chai, duizi, 2);\r\n            }\r\n        }\r\n        duizis.push.apply(duizis, chai);\r\n        this.GetZhaDanEx(duizis,isSelectCard);\r\n        return duizis;\r\n    },\r\n\r\n    GetShunziTip:function(isSelectCard = false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        let array = [];\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let lastValue = 0;\r\n            let shunzi = [];\r\n            shunzi.push(pokers[i]);\r\n            for(let j = i; j >= 0; j--){\r\n                let poker = pokers[j];\r\n                let nowValue = this.GetCardValue(poker);\r\n                if(nowValue == lastValue) continue;\r\n                if(nowValue == 15){\r\n                    break;\r\n                }\r\n                if(lastValue != 0){\r\n                    if(nowValue - lastValue != 1){\r\n                        break;\r\n                    }\r\n                    shunzi.push(poker);   \r\n                }\r\n                lastValue = nowValue;\r\n                if(shunzi.length>=5){\r\n                    array[array.length] = shunzi;\r\n                }\r\n            }\r\n        }\r\n        return array;\r\n    },\r\n    GetShunzi:function(isSelectCard = false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        let array = [];\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        this.SortCardByMinEx(this.lastCardList);\r\n        let lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let lastValue = 0;\r\n            let shunzi = [];\r\n            shunzi.push(pokers[i]);\r\n            for(let j = i; j >= 0; j--){\r\n                let poker = pokers[j];\r\n                let nowValue = this.GetCardValue(poker);\r\n\r\n                if(nowValue == lastValue) continue;\r\n\r\n                if(nowValue <= lastCardValue){\r\n                    break;\r\n                }\r\n                if(nowValue == 15){\r\n                    break;\r\n                }\r\n                if(lastValue != 0){\r\n                    if(nowValue - lastValue != 1)\r\n                        break;\r\n                    shunzi.push(poker);   \r\n                }\r\n                \r\n                if(shunzi.length >= this.lastCardList.length){\r\n                    array[array.length] = shunzi;\r\n                    break;\r\n                }\r\n                lastValue = nowValue;\r\n            }\r\n        }\r\n        this.GetZhaDanEx(array,isSelectCard);\r\n        return array;\r\n    },\r\n\r\n    GetSanDaiTip:function(lastCardType,isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let santiaos = [];\r\n        let chai = [];\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(santiaos, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(santiao.length == 3 && !bInList){\r\n                this.PushTipCard(santiaos, santiao, 3);\r\n            }\r\n        }\r\n        this.SortCardByMin(santiaos);\r\n        this.SortCardByMin(chai);\r\n\r\n        santiaos.push.apply(santiaos, chai);\r\n\r\n\r\n        if(lastCardType == 6){\r\n            this.GetOtherCard(santiaos, 1,isSelectCard,false);\r\n        }else if(lastCardType == 7){\r\n            this.GetOtherCard(santiaos, 2,isSelectCard,false); //不用对子\r\n        }else if(lastCardType == 15){\r\n            //获取其他牌一对\r\n            this.GetOtherCardDui(santiaos, 2,isSelectCard);\r\n        }\r\n        return santiaos;\r\n    },\r\n\r\n    GetSanDai:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let santiaos = [];\r\n        let chai = [];\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = 0;\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let santiao = this.GetSameValue(this.lastCardList, poker);\r\n            if(santiao.length >= 3){\r\n                lastCardValue = this.GetCardValue(santiao[0]);\r\n                break;\r\n            }\r\n        }\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            if(cardValue <= lastCardValue){\r\n                continue;\r\n            }\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(santiaos, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(santiao.length == 3 && !bInList){\r\n                if(this.GetCardValue(santiao[0]) == 14 && this.Room.GetRoomWanfa(this.Define.SEVER_AAA) && !this.Room.GetRoomWanfa(this.Define.SEVER_BMUSTBOMB)){\r\n                    //3跟牌是A，选择了3A为炸，没选择炸弹可拆，则3A不加入提示牌\r\n                    continue;\r\n                }\r\n                this.PushTipCard(santiaos, santiao, 3);\r\n            }\r\n\r\n            else if(santiao.length > 3 && !bInListEx){\r\n                this.PushTipCard(chai, santiao, 3);\r\n            }\r\n        }\r\n\r\n        this.SortCardByMin(santiaos);\r\n        this.SortCardByMin(chai);\r\n\r\n        santiaos.push.apply(santiaos, chai);\r\n\r\n        if(this.lastCardType == 6){\r\n            this.GetOtherCard(santiaos, 1,isSelectCard,false);\r\n        }\r\n        else if(this.lastCardType == 7){\r\n            this.GetOtherCard(santiaos, 2,isSelectCard,false);\r\n        }else if(this.lastCardType == 15){\r\n            //获取其他牌一对\r\n            this.GetOtherCardDui(santiaos, 2,isSelectCard);\r\n        }\r\n\r\n        this.GetZhaDanEx(santiaos,isSelectCard);\r\n        return santiaos;\r\n    },\r\n\r\n    GetSiDaiTip:function(lastCardType,isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let zhadans = [];\r\n        let chai = [];\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = 0;\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let zhadan = this.GetSameValue(this.lastCardList, poker);\r\n            if(zhadan.length >= 4){\r\n                lastCardValue = this.GetCardValue(zhadan[0]);\r\n                break;\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            if(cardValue <= lastCardValue) continue;\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(zhadan.length == 4 && !bInList){\r\n                this.PushTipCard(zhadans, zhadan, 4);\r\n            }\r\n            else if(zhadan.length > 4 && !bInListEx){\r\n                this.PushTipCard(chai, zhadan, 4);\r\n            }\r\n        }\r\n\r\n        zhadans.push.apply(zhadans, chai);\r\n\r\n        if(lastCardType == 8){\r\n            this.GetOtherCard(zhadans, 1,isSelectCard);\r\n        }\r\n        else if(lastCardType == 9){\r\n            this.GetOtherCard(zhadans, 2,isSelectCard);\r\n        }\r\n        else if(lastCardType == 10){\r\n            this.GetOtherCard(zhadans, 3,isSelectCard);\r\n        }\r\n        return zhadans;\r\n    },\r\n\r\n    GetSiDai:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let zhadans = [];\r\n        let chai = [];\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = 0;\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let zhadan = this.GetSameValue(this.lastCardList, poker);\r\n            if(zhadan.length >= 4){\r\n                lastCardValue = this.GetCardValue(zhadan[0]);\r\n                break;\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            if(cardValue <= lastCardValue) continue;\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(zhadan.length == 4 && !bInList){\r\n                this.PushTipCard(zhadans, zhadan, 4);\r\n            }\r\n            else if(zhadan.length > 4 && !bInListEx){\r\n                this.PushTipCard(chai, zhadan, 4);\r\n            }\r\n        }\r\n\r\n        zhadans.push.apply(zhadans, chai);\r\n\r\n        if(this.lastCardType == 8){\r\n            this.GetOtherCard(zhadans, 1,isSelectCard);\r\n        }\r\n        else if(this.lastCardType == 9){\r\n            this.GetOtherCard(zhadans, 2,isSelectCard);\r\n        }\r\n        else if(this.lastCardType == 10){\r\n            this.GetOtherCard(zhadans, 3,isSelectCard);\r\n        }\r\n\r\n        this.GetZhaDanEx(zhadans,isSelectCard);\r\n        return zhadans;\r\n    },\r\n\r\n    //得到真正的飞机\r\n    GetRealPlane:function(lists){\r\n        let lastValue = 0;\r\n        let realPlane = [];\r\n        for(let i = 0; i < lists.length; i++){\r\n            let item = lists[i];\r\n            let nowValue = this.GetCardValue(item[0]);\r\n            \r\n            if(lastValue != 0){\r\n                if((lastValue+1) != nowValue){\r\n                    if(realPlane.length >= 2){\r\n                        break;\r\n                    }\r\n                    realPlane.splice(0, realPlane.length);\r\n                    realPlane[realPlane.length] = item;\r\n                }\r\n                else{\r\n                    realPlane[realPlane.length] = item;\r\n                }\r\n            }\r\n            else{\r\n                realPlane[realPlane.length] = item;\r\n            }\r\n\r\n            lastValue = nowValue;\r\n        }\r\n\r\n        return realPlane;\r\n    },\r\n    GetFeiJiTip:function(tag,isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let tempArrB = [];\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInList(tempArrB, poker);\r\n            if(santiao.length >= tag && !bInList){\r\n                //tempArrB[tempArrB.length] = santiao;\r\n                this.RegularCard(tempArrB, santiao, tag);\r\n            }\r\n        }\r\n        if(tempArrB.length < 2){\r\n            return [];\r\n        }\r\n        this.SortCardByMin(tempArrB);\r\n        let temp = [];\r\n        let tempT=[];\r\n        let lastValue = 0;\r\n        for(let i = 0; i < tempArrB.length; i++){\r\n            let item = tempArrB[i];\r\n            let nowValue = this.GetCardValue(item[0]);\r\n            if(lastValue != 0){\r\n                if((lastValue+1) != nowValue){\r\n                    if(temp.length>0){\r\n                        tempT.push(temp);\r\n                    }\r\n                    temp.splice(0, temp.length);\r\n                    temp[temp.length] = item;\r\n                }\r\n                else{\r\n                    temp[temp.length] = item;\r\n                }\r\n            }\r\n            else{\r\n                temp[temp.length] = item;\r\n            }\r\n            \r\n            lastValue = nowValue;\r\n        }\r\n        if(temp.length>0){\r\n            tempT.push(temp);\r\n        }\r\n        if(tempT.length>0){\r\n            tempT.sort(this.SortByLength);\r\n            temp=tempT[0];\r\n        }\r\n        //将真正的飞机合并成一个数组\r\n        let realPlane = [];\r\n        if(temp.length){\r\n            let tp = [];\r\n            for(let i = 0; i < temp.length; i++){\r\n                let item = temp[i];\r\n                for(let j = 0; j < item.length; j++){\r\n                    tp.push(item[j]);\r\n                }\r\n            }\r\n            realPlane[realPlane.length] = tp;\r\n        }\r\n        if(realPlane.length){\r\n            // if(this.Room.GetRoomWanfa(this.Define.SEVER_DAI31)){\r\n            //     this.GetOtherCard(realPlane, this.lastCardList.length - realPlane[0].length);\r\n            // }\r\n            // else if(this.Room.GetRoomWanfa(this.Define.SEVER_DAI32)){\r\n            //     this.GetOtherCard(realPlane, this.lastCardList.length - realPlane[0].length);\r\n            // }\r\n            this.GetOtherCard(realPlane,(realPlane[0].length/3)*2,isSelectCard);\r\n        }\r\n        return realPlane;\r\n    },\r\n    GetFeiJi:function(tag,isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let santiao = this.GetSameValue(this.lastCardList, poker);\r\n            let bInList = this.CheckPokerInList(tempArrA, poker);\r\n            if(santiao.length >= tag && !bInList){\r\n                //tempArrA[tempArrA.length] = santiao;\r\n                this.RegularCard(tempArrA, santiao, tag);\r\n            }\r\n        }\r\n\r\n        this.SortCardByMin(tempArrA);\r\n        let realPlaneA = [];\r\n        if(tempArrA.length){\r\n            realPlaneA = this.GetRealPlane(tempArrA)\r\n            lastCardValue = this.GetCardValue(realPlaneA[0][0]);\r\n        }\r\n\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInList(tempArrB, poker);\r\n            if(santiao.length >= tag && !bInList){\r\n                //tempArrB[tempArrB.length] = santiao;\r\n                this.RegularCard(tempArrB, santiao, tag);\r\n            }\r\n        }\r\n\r\n        //如果第一次检测三条小于2对 肯定凑不成飞机\r\n        if(tempArrB.length < 2){\r\n            let zhadan = [];\r\n            this.GetZhaDanEx(zhadan,isSelectCard);\r\n            return zhadan;\r\n        }\r\n        \r\n        this.SortCardByMin(tempArrB);\r\n\r\n        //tempArrB里的三带或四带飞机找出来 去除不用的三条或四条\r\n        let temp = [];\r\n        let lastValue = 0;\r\n        for(let i = 0; i < tempArrB.length; i++){\r\n            if(this.GetCardValue(tempArrB[i][0]) <= lastCardValue) continue;\r\n            if(temp.length == realPlaneA.length) break;\r\n\r\n            let item = tempArrB[i];\r\n            let nowValue = this.GetCardValue(item[0]);\r\n            \r\n            if(lastValue != 0){\r\n                if((lastValue+1) != nowValue){\r\n                    temp.splice(0, temp.length);\r\n                    temp[temp.length] = item;\r\n                }\r\n                else{\r\n                    temp[temp.length] = item;\r\n                }\r\n            }\r\n            else{\r\n                temp[temp.length] = item;\r\n            }\r\n            \r\n            lastValue = nowValue;\r\n        }\r\n        //如果飞机数量不足 返回空\r\n        if(temp.length < realPlaneA.length){\r\n            let zhadan = [];\r\n            this.GetZhaDanEx(zhadan,isSelectCard);\r\n            return zhadan;\r\n        }\r\n        //将真正的飞机合并成一个数组\r\n        let realPlane = [];\r\n        if(temp.length){\r\n            let tp = [];\r\n            for(let i = 0; i < temp.length; i++){\r\n                let item = temp[i];\r\n                for(let j = 0; j < item.length; j++){\r\n                    tp.push(item[j]);\r\n                }\r\n            }\r\n\r\n            realPlane[realPlane.length] = tp;\r\n        }\r\n        \r\n        if(realPlane.length){\r\n            // if(this.Room.GetRoomWanfa(this.Define.SEVER_DAI31)){\r\n            //     this.GetOtherCard(realPlane, this.lastCardList.length - realPlane[0].length);\r\n            // }\r\n            // else if(this.Room.GetRoomWanfa(this.Define.SEVER_DAI32)){\r\n            //     this.GetOtherCard(realPlane, this.lastCardList.length - realPlane[0].length);\r\n            // }\r\n            this.GetOtherCard(realPlane, this.lastCardList.length - realPlane[0].length,isSelectCard);\r\n        }\r\n        \r\n        this.GetZhaDanEx(realPlane,isSelectCard);\r\n        return realPlane;\r\n    },\r\n    GetLianDuiTip:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let tempArrB = [];\r\n\r\n        \r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(tempArrB, poker);\r\n            if(duizi.length >= 2 && !bInList){\r\n                this.PushTipCard(tempArrB, duizi, 2);\r\n            }\r\n        }\r\n        \r\n        this.SortCardByMin(tempArrB);\r\n\r\n        let temps = [];\r\n        for(let i = 0; i < tempArrB.length; i++){\r\n            let tp = [];\r\n            tp.push.apply(tp, tempArrB[i]);\r\n            let lastValue = 0;\r\n            lastValue = this.GetCardValue(tempArrB[i][0]);\r\n            for(let j = i+1; j < tempArrB.length; j++){\r\n                let item = tempArrB[j];\r\n                let nowValue = this.GetCardValue(item[0]);\r\n            \r\n                if(nowValue == 15){\r\n                    break;\r\n                }\r\n    \r\n                if((lastValue+1) != nowValue){\r\n                    break;\r\n                }\r\n                tp.push.apply(tp, item);\r\n                lastValue = nowValue;\r\n                if(tp.length >= 4){\r\n                    temps[temps.length] = tp;\r\n                }\r\n            }\r\n        }\r\n        return temps;\r\n    },\r\n    GetLianDui:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        this.SortCardByMinEx(this.lastCardList);\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        tempArrA = this.lastCardList;\r\n        \r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(tempArrB, poker);\r\n            if(duizi.length >= 2 && !bInList){\r\n                this.PushTipCard(tempArrB, duizi, 2);\r\n            }\r\n        }\r\n        \r\n        this.SortCardByMin(tempArrB);\r\n\r\n        let temps = [];\r\n        for(let i = 0; i < tempArrB.length; i++){\r\n            let tp = [];\r\n            if(this.GetCardValue(tempArrB[i][0]) <= lastCardValue) continue;\r\n            tp.push.apply(tp, tempArrB[i]);\r\n            let lastValue = 0;\r\n            lastValue = this.GetCardValue(tempArrB[i][0]);\r\n            for(let j = i+1; j < tempArrB.length; j++){\r\n                let item = tempArrB[j];\r\n                let nowValue = this.GetCardValue(item[0]);\r\n            \r\n                if(nowValue == 15){\r\n                    break;\r\n                }\r\n    \r\n                if((lastValue+1) != nowValue){\r\n                    break;\r\n                }\r\n\r\n                tp.push.apply(tp, item);\r\n                lastValue = nowValue;\r\n\r\n                if(tp.length == tempArrA.length){\r\n                    temps[temps.length] = tp;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.GetZhaDanEx(temps,isSelectCard);\r\n        return temps;\r\n    },\r\n\r\n    GetOtherCard:function(list, tag,isSelectCard=false, needDuizi = false){\r\n        if(!list.length) return;\r\n        let pokers =[];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let needPokersCount = 0;\r\n        for (let i = 0; i < list.length; i++) {\r\n            needPokersCount = list[i].length + tag;\r\n        }\r\n        let temp = [];\r\n        let chai = [];\r\n        for(let i = pokers.length -1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let cards = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(temp, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(cards.length == 1 && !bInList){\r\n                this.PushTipCard(temp, cards, 1);\r\n            }\r\n            else if(cards.length >= 2 && !bInListEx){\r\n                this.PushTipCard(chai, cards, 2);\r\n            }\r\n        }\r\n\r\n        temp.push.apply(temp, chai);\r\n        //先将list拷贝出来\r\n        let tempList = [];\r\n        tempList = list;\r\n        //将获得的牌加入三条,四条或者飞机之中\r\n        for(let i = 0; i < tempList.length; i++){\r\n            let item = tempList[i];\r\n            let len = item.length;\r\n            if (!needDuizi) {\r\n                for(let j = 0; j < temp.length; j++){\r\n                    if(list[i].length - len == tag){\r\n                        break;\r\n                    }\r\n                    let tp = temp[j];\r\n                    for(let k = 0; k < tp.length; k++){\r\n                        if(list[i].length - len == tag){\r\n                            break;\r\n                        }\r\n                        if(item.indexOf(tp[k]) == -1){\r\n                            //将获得的带牌加入list\r\n                            list[i].push(tp[k]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if(needDuizi){\r\n                 //必须是对子\r\n                for(let j = 0; j < chai.length; j++){\r\n                    if(list[i].length - len == tag){\r\n                        break;\r\n                    }\r\n                    let tp = chai[j];\r\n                    for(let k = 0; k < tp.length; k++){\r\n                        if(list[i].length - len == tag){\r\n                            break;\r\n                        }\r\n                        if(item.indexOf(tp[k]) == -1){\r\n                            //将获得的带牌加入list\r\n                            list[i].push(tp[k]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n         //如果需要带对的，如果没有对。不能出\r\n        if (needDuizi && chai.length == 0){\r\n            list.splice(0,list.length);\r\n            return;\r\n        }\r\n        //判断下如果加入的牌还不够上家的牌型并且手上还有牌需要补充\r\n        let curPokersCount = 0;\r\n        for (let i = 0; i < list.length; i++) {\r\n            curPokersCount = list[i].length;\r\n            if(this.lastCardType == 7 && curPokersCount < 5 && this.handCardList.length>=5){\r\n                list.splice(i,1);\r\n            }\r\n        }\r\n        // if (curPokersCount < needPokersCount) {\r\n        //     for (let i = 0; i < list.length; i++) {\r\n        //         for (let j = 0; j < pokers.length; j++) {\r\n        //             if (list[i].indexOf(pokers[j]) == -1) {\r\n        //                 //将获得的带牌加入list\r\n        //                 list[i].push(pokers[j]);\r\n        //                 if (list[i].length == needPokersCount) {\r\n        //                     break;\r\n        //                 }\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n    },\r\n\r\n///////////////////////////common///////////////////////////////////////\r\n    CheckPokerInList:function(list, tagCard) { \r\n        if (list.length == 0) return false;\r\n\r\n        let bInList = false;\r\n        for (let i = 0; i < list.length; i++) {\r\n            let item = list[i];\r\n            let pos = item.indexOf(tagCard);\r\n        \r\n            if (pos >= 0){\r\n                bInList = true;\r\n            }\r\n        }\r\n        return bInList\r\n    },\r\n\r\n    CheckPokerInListEx:function(list, tagCard){\r\n        if (list.length == 0) return false;\r\n        \r\n        let bInList = false;\r\n        for (let i = 0; i < list.length; i++) {\r\n            let item = list[i];\r\n            let cardValue = this.GetCardValue(item[0]);\r\n            let tagValue = this.GetCardValue(tagCard);\r\n\r\n            if(cardValue == tagValue){\r\n                bInList = true;\r\n            }\r\n        }\r\n        return bInList;\r\n    },\r\n     CheckChaiInList:function(cards,list){\r\n        if (cards.length == 0) return false;\r\n        let bInList = false;\r\n        for (let i = 0; i < cards.length; i++) {\r\n            let item = cards[i];\r\n            let pos = list.indexOf(item);\r\n        \r\n            if (pos >= 0){\r\n                bInList = true;\r\n            }\r\n        }\r\n        return bInList\r\n    },\r\n    //检测列表是否全是对子\r\n    CheckTagIsDuizi:function(tagList){\r\n        if (tagList.length < 2) return false;\r\n        if (tagList.length%2 == 1) return false;\r\n\r\n        let duiziNum = tagList.length/2;\r\n        for (let j = 0; j < duiziNum; j++) {\r\n            for(let i = 0; i < tagList.length; i++){\r\n                let poker = tagList[i];\r\n                let duizi = this.GetSameValue(tagList, poker);\r\n                if(duizi.length == 2 || duizi.length == 4){\r\n                    let pos1 = tagList.indexOf(duizi[0]);\r\n                    tagList.splice(pos1, 1);\r\n                    let pos2 = tagList.indexOf(duizi[1]);\r\n                    tagList.splice(pos2, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (tagList.length == 0)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n     //获取带牌\r\n    GetDaiPaiList:function(pokers, sameList) {\r\n        let tempList = [];\r\n        for (let i = 0; i < sameList.length; i++) {\r\n            tempList.push.apply(tempList, sameList[i]);\r\n        }\r\n        let daiPaiList = [];\r\n        for (let i = 0; i < pokers.length; i++) {\r\n            let poker = pokers[i];\r\n            let index = tempList.indexOf(poker);\r\n            if(index == -1){\r\n                daiPaiList.push(poker);\r\n            }\r\n        }\r\n        return daiPaiList;\r\n    },\r\n    //获取同一牌值\r\n    GetSameValue:function(pokers, tagCard) { \r\n        let sameValueList = [];\r\n        let tagCardValue = this.GetCardValue(tagCard);\r\n        for (let i = 0; i < pokers.length; i++) {\r\n            let poker = pokers[i];\r\n            let pokerValue = this.GetCardValue(poker);\r\n\r\n            if (tagCardValue == pokerValue){\r\n                sameValueList[sameValueList.length] = poker;\r\n            }\r\n        }\r\n        return sameValueList\r\n    },\r\n    //获取同一花色\r\n    GetSameColor:function(pokers, tagCard) { \r\n        let sameColorList = [];\r\n        for (let i = 0; i < pokers.length; i++) {\r\n            let poker = pokers[i];\r\n            let pokerColor = this.GetCardColor(poker);\r\n            let tagCardColor = this.GetCardColor(tagCard);\r\n\r\n            if (pokerColor == tagCardColor){\r\n                sameColorList[sameColorList.length] = poker;\r\n            }\r\n        }\r\n        return sameColorList;\r\n    },\r\n\r\n    //获取牌值\r\n    GetCardValue:function(poker) {\r\n        let realPoker = 0;\r\n        if(poker > 500){\r\n            realPoker = poker - 500;\r\n        }\r\n        else{\r\n            realPoker = poker;\r\n        }\r\n        return realPoker&this.LOGIC_MASK_VALUE;\r\n    },\r\n\r\n    //获取花色\r\n    GetCardColor:function(poker) { \r\n        let realPoker = 0;\r\n        if(poker > 500){\r\n            realPoker = poker - 500;\r\n        }\r\n        else{\r\n            realPoker = poker;\r\n        }\r\n        return realPoker&this.LOGIC_MASK_COLOR;\r\n    },\r\n\r\n    CheckSameValue:function(aCards,bCards){\r\n        let bRet = false;\r\n        for(let i = 0; i < aCards.length; i++){\r\n            let poker = aCards[i];\r\n            if(bCards.indexOf(poker) != -1){\r\n                bRet = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return bRet;\r\n    }\r\n});\r\n\r\nvar g_LogicPDKGame = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n    if(!g_LogicPDKGame){\r\n        g_LogicPDKGame = new LogicPDKGame();\r\n    }\r\n    return g_LogicPDKGame;\r\n\r\n}"]}