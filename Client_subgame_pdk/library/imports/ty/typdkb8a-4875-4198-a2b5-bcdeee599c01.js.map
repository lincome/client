{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\ui/assets\\script\\ui\\pdk_UITop.js"],"names":["app","require","cc","Class","extends","subGameName","properties","lb_heroName","Label","lb_heroID","node_head","Node","rightTop","OnCreateInit","closeformPath","RegEvent","Event_HeroProperty","WeChatHeadImage1","getComponent","OnShow","formPath","isShowFangka","isShowQuanka","isShowLedou","getChildByName","active","ShowFastCount","ShowRoomCard","ShowClubCard","ShowHero_NameOrID","event","argDict","gold","GetHeroProperty","string","heroRoomCard","heroClubCard","heroName","width","node","length","substring","heroID","i18n","t","ComTool","GetPid","ShowHeroHead","OnClick","btnName","btnNode","sys","isNative","RemoveClientManager","SendPack","LocalDataManager","SetConfigProperty","StopSceneMusic","gamePath","jsb","fileUtils","getWritablePath","window","error","console","log","CloseForm","ShowForm"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQD,IAAIK,WAAJ,GAAkB,WAA1B,CADJ;;AAGLC,gBAAY;AACRC,qBAAYL,GAAGM,KADP;AAERC,mBAAUP,GAAGM,KAFL;AAGRE,mBAAUR,GAAGS,IAHL;AAIRC,kBAASV,GAAGS;AAJJ,KAHP;AASLE,kBAAc,wBAAY;AACtB,aAAKC,aAAL,GAAqB,EAArB;AACA,aAAKC,QAAL,CAAc,cAAd,EAA8B,KAAKC,kBAAnC;AACA,aAAKC,gBAAL,GAAwB,KAAKP,SAAL,CAAeQ,YAAf,CAA4BlB,IAAIK,WAAJ,GAAkB,kBAA9C,CAAxB;AACH,KAbI;AAcLc,YAAQ,gBAAUC,QAAV,EAAqF;AAAA,YAAjEC,YAAiE,uEAAlD,KAAkD;AAAA,YAA3CC,YAA2C,uEAA5B,KAA4B;AAAA,YAArBC,WAAqB,uEAAP,KAAO;;AACzF,aAAKT,aAAL,GAAqBM,QAArB;AACA,YAAIC,YAAJ,EAAkB;AACd,iBAAKT,QAAL,CAAcY,cAAd,CAA6B,QAA7B,EAAuCC,MAAvC,GAAgD,IAAhD;AACH,SAFD,MAEK;AACD,iBAAKb,QAAL,CAAcY,cAAd,CAA6B,QAA7B,EAAuCC,MAAvC,GAAgD,KAAhD;AACH;AACD,YAAIH,YAAJ,EAAkB;AACd,iBAAKV,QAAL,CAAcY,cAAd,CAA6B,QAA7B,EAAuCC,MAAvC,GAAgD,IAAhD;AACH,SAFD,MAEK;AACD,iBAAKb,QAAL,CAAcY,cAAd,CAA6B,QAA7B,EAAuCC,MAAvC,GAAgD,KAAhD;AACH;AACD,YAAIF,WAAJ,EAAiB;AACb,iBAAKX,QAAL,CAAcY,cAAd,CAA6B,OAA7B,EAAsCC,MAAtC,GAA+C,IAA/C;AACH,SAFD,MAEK;AACD,iBAAKb,QAAL,CAAcY,cAAd,CAA6B,OAA7B,EAAsCC,MAAtC,GAA+C,KAA/C;AACH;AACD,aAAKC,aAAL;AACA,aAAKC,YAAL;AACA,aAAKC,YAAL;AACA,aAAKC,iBAAL;AACH,KAnCI;;AAqCLb,wBAAmB,4BAAUc,KAAV,EAAiB;AAChC,YAAIC,UAAUD,KAAd;AACA,YAAGC,QAAQ,UAAR,KAAuB,MAA1B,EAAiC;AAC7B,iBAAKL,aAAL;AACH,SAFD,MAGK,IAAGK,QAAQ,UAAR,KAAuB,UAA1B,EAAqC;AACtC,iBAAKJ,YAAL;AACH,SAFI,MAEC,IAAGI,QAAQ,UAAR,KAAuB,UAA1B,EAAqC;AACvC,iBAAKH,YAAL;AACH;AACJ,KA/CI;AAgDLF,mBAAc,yBAAY;AACtB,YAAIM,OAAOhC,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC4B,eAAxC,CAAwD,MAAxD,CAAX;AACA,aAAKrB,QAAL,CAAcY,cAAd,CAA6B,OAA7B,EAAsCA,cAAtC,CAAqD,OAArD,EAA8DN,YAA9D,CAA2EhB,GAAGM,KAA9E,EAAqF0B,MAArF,GAA4FF,IAA5F;AACH,KAnDI;AAoDLL,kBAAa,wBAAY;AACrB,YAAIQ,eAAenC,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC4B,eAAxC,CAAwD,UAAxD,CAAnB;AACA,aAAKrB,QAAL,CAAcY,cAAd,CAA6B,QAA7B,EAAuCA,cAAvC,CAAsD,OAAtD,EAA+DN,YAA/D,CAA4EhB,GAAGM,KAA/E,EAAsF0B,MAAtF,GAA6FC,YAA7F;AACH,KAvDI;AAwDLP,kBAAa,wBAAY;AACrB,YAAIQ,eAAepC,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC4B,eAAxC,CAAwD,UAAxD,CAAnB;AACA,aAAKrB,QAAL,CAAcY,cAAd,CAA6B,QAA7B,EAAuCA,cAAvC,CAAsD,OAAtD,EAA+DN,YAA/D,CAA4EhB,GAAGM,KAA/E,EAAsF0B,MAAtF,GAA6FE,YAA7F;AACH,KA3DI;;AA6DLP,uBAAkB,6BAAY;AAC1B,YAAIQ,WAAWrC,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC4B,eAAxC,CAAwD,MAAxD,CAAf;AACA,aAAK1B,WAAL,CAAiB2B,MAAjB,GAA0BG,QAA1B;AACA,YAAIC,QAAQ,KAAK/B,WAAL,CAAiBgC,IAAjB,CAAsBD,KAAlC;AACA,YAAGD,SAASG,MAAT,GAAkB,CAAlB,IAAuBF,QAAQ,GAAlC,EACI,KAAK/B,WAAL,CAAiB2B,MAAjB,GAA0B,KAAK3B,WAAL,CAAiB2B,MAAjB,CAAwBO,SAAxB,CAAkC,CAAlC,EAAoC,CAApC,CAA1B;AACJ,YAAIC,SAAS1C,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC4B,eAAxC,CAAwD,KAAxD,CAAb;AACA,aAAKxB,SAAL,CAAeyB,MAAf,GAAwBlC,IAAI2C,IAAJ,CAASC,CAAT,CAAW,gBAAX,EAA4B,EAAC,OAAM,KAAKC,OAAL,CAAaC,MAAb,CAAoBJ,MAApB,CAAP,EAA5B,CAAxB;AACA,aAAKzB,gBAAL,CAAsB8B,YAAtB,CAAmCL,MAAnC;AAEH,KAvEI;AAwELM,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAG,eAAeD,OAAlB,EAA0B;AACtB,gBAAG,KAAKnC,aAAL,IAAsB,EAAzB,EAA4B;AACxB,oBAAI,KAAKA,aAAL,IAAsBd,IAAIK,WAAJ,GAAkB,SAA5C,EAAuD;AACnD,wBAAI,CAACH,GAAGiD,GAAH,CAAOC,QAAZ,EAAsB;AACtB;AACApD,wBAAIA,IAAIK,WAAJ,GAAkB,QAAtB,EAAgCgD,mBAAhC;AACArD,wBAAIA,IAAIK,WAAJ,GAAkB,aAAtB,IAAuCiD,QAAvC,CAAgD,gBAAhD,EAAkE,EAAC,YAAW,MAAZ,EAAlE,EAAuF,UAASxB,KAAT,EAAe;AAClG9B,4BAAIuD,gBAAJ,GAAuBC,iBAAvB,CAAyC,SAAzC,EAAoD,MAApD,EAA4D1B,KAA5D;AACA;AACA9B,4BAAIA,IAAIK,WAAJ,GAAkB,eAAtB,IAAyCoD,cAAzC;AACA,4BAAIC,WAAW,CAACC,IAAIC,SAAJ,GAAgBD,IAAIC,SAAJ,CAAcC,eAAd,EAAhB,GAAkD,GAAnD,IAA0D,UAA1D,GAAqE7D,IAAIK,WAAxF;AACAyD,+BAAO7D,OAAP,CAAeyD,WAAW,gBAA1B;AACH,qBAND,EAMG,UAASK,KAAT,EAAe;AACdC,gCAAQC,GAAR,CAAY,UAAZ;AACH,qBARD;AASH,iBAbD,MAaO;AACHjE,wBAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC6D,SAAxC,CAAkD,KAAKpD,aAAvD;AACA,yBAAKoD,SAAL;AACAlE,wBAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC8D,QAAxC,CAAiDnE,IAAIK,WAAJ,GAAkB,SAAnE;AACH;AACJ;AACJ,SArBD,MAqBM,IAAG,cAAc4C,OAAjB,EAAyB;AAC3B;AACH,SAFK,MAEA,IAAG,iBAAiBA,OAApB,EAA4B;AAC9B;AACH,SAFK,MAEA,IAAG,qBAAqBA,OAAxB,EAAgC;AAClC;AACH,SAFK,MAEA,IAAG,qBAAqBA,OAAxB,EAAgC;AAClC;AACH;AAEJ;AAxGI,CAAT","file":"pdk_UITop.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\ui","sourcesContent":["var app = require(\"pdk_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n        lb_heroName:cc.Label,\r\n        lb_heroID:cc.Label,\r\n        node_head:cc.Node,\r\n        rightTop:cc.Node,\r\n    },\r\n    OnCreateInit: function () {\r\n        this.closeformPath = \"\";\r\n        this.RegEvent(\"HeroProperty\", this.Event_HeroProperty);\r\n        this.WeChatHeadImage1 = this.node_head.getComponent(app.subGameName + \"_WeChatHeadImage\");\r\n    },\r\n    OnShow: function (formPath, isShowFangka = false, isShowQuanka = false, isShowLedou = false) {\r\n        this.closeformPath = formPath;\r\n        if (isShowFangka) {\r\n            this.rightTop.getChildByName('fangka').active = true;\r\n        }else{\r\n            this.rightTop.getChildByName('fangka').active = false;\r\n        }\r\n        if (isShowQuanka) {\r\n            this.rightTop.getChildByName('quanka').active = true;\r\n        }else{\r\n            this.rightTop.getChildByName('quanka').active = false;\r\n        }\r\n        if (isShowLedou) {\r\n            this.rightTop.getChildByName('ledou').active = true;\r\n        }else{\r\n            this.rightTop.getChildByName('ledou').active = false;\r\n        }\r\n        this.ShowFastCount();\r\n        this.ShowRoomCard();\r\n        this.ShowClubCard();\r\n        this.ShowHero_NameOrID();\r\n    },\r\n\r\n    Event_HeroProperty:function (event) {\r\n        let argDict = event;\r\n        if(argDict[\"Property\"] == \"gold\"){\r\n            this.ShowFastCount();\r\n        }\r\n        else if(argDict[\"Property\"] == \"roomCard\"){\r\n            this.ShowRoomCard();\r\n        }else if(argDict[\"Property\"] == \"clubCard\"){\r\n            this.ShowClubCard();\r\n        }\r\n    },\r\n    ShowFastCount:function () {\r\n        let gold = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty('gold');\r\n        this.rightTop.getChildByName('ledou').getChildByName('label').getComponent(cc.Label).string=gold;\r\n    },\r\n    ShowRoomCard:function () {\r\n        let heroRoomCard = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"roomCard\");\r\n        this.rightTop.getChildByName('fangka').getChildByName('label').getComponent(cc.Label).string=heroRoomCard;\r\n    },\r\n    ShowClubCard:function () {\r\n        let heroClubCard = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"clubCard\");\r\n        this.rightTop.getChildByName('quanka').getChildByName('label').getComponent(cc.Label).string=heroClubCard;\r\n    },\r\n\r\n    ShowHero_NameOrID:function () {\r\n        let heroName = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"name\");\r\n        this.lb_heroName.string = heroName;\r\n        let width = this.lb_heroName.node.width;\r\n        if(heroName.length > 9 && width > 200)\r\n            this.lb_heroName.string = this.lb_heroName.string.substring(0,9);\r\n        let heroID = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty(\"pid\");\r\n        this.lb_heroID.string = app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\r\n        this.WeChatHeadImage1.ShowHeroHead(heroID);\r\n\r\n    },\r\n    OnClick:function(btnName, btnNode){\r\n        if('btn_close' == btnName){\r\n            if(this.closeformPath != \"\"){\r\n                if (this.closeformPath == app.subGameName + \"_UIMain\") {\r\n                    if (!cc.sys.isNative) return;\r\n                    //如果是游戏切换需要释放内存，重新加载\r\n                    app[app.subGameName + \"Client\"].RemoveClientManager();\r\n                    app[app.subGameName + \"_NetManager\"]().SendPack(\"base.C1110UUID\", {\"gameName\":\"hall\"}, function(event){\r\n                        app.LocalDataManager().SetConfigProperty(\"Account\", \"uuid\", event);\r\n                        //停止场景音乐\r\n                        app[app.subGameName + \"_SceneManager\"]().StopSceneMusic();\r\n                        let gamePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + \"ALLGame/\"+app.subGameName;\r\n                        window.require(gamePath + \"/src/dating.js\");\r\n                    }, function(error){\r\n                        console.log(\"获取uuid失败\");\r\n                    });\r\n                } else {\r\n                    app[app.subGameName + \"_FormManager\"]().CloseForm(this.closeformPath);\r\n                    this.CloseForm();\r\n                    app[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + \"_UIMain\");\r\n                }\r\n            }\r\n        }else if('btn_head' == btnName){\r\n            // this.FormManager.ShowForm(\"UIUserInfo\");\r\n        }else if('btn_addGold' == btnName){\r\n            // this.FormManager.ShowForm(\"UIStore\",'btn_table0');\r\n        }else if('btn_addRoomCard' == btnName){\r\n            // this.FormManager.ShowForm(\"UIStore\",'btn_table1');\r\n        }else if('btn_addQuanCard' == btnName){\r\n            // this.FormManager.ShowForm('ui/club/UIClubStore');\r\n        }\r\n        \r\n    }\r\n});\r\n"]}