{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\game\\PDK/assets\\script\\game\\PDK\\UIPDK_LPResult.js"],"names":["app","require","cc","Class","extends","subGameName","properties","btn_share","Node","btn_exit","btn_continue","sp_winLose","win","SpriteFrame","lose","playerList","room_Id","Label","huifang","lb_jushu","end_Time","room_info","room_Double","room_MaxDouble","btn_sharemore","sharemore","OnCreateInit","RoomMgr","toUpperCase","Room","RoomPosMgr","SoundManager","HeroManager","RoomSet","ComTool","SDKManager","Define","bigWinner","ShowGameResult","room","GetEnterRoom","ErrLog","isCoinRoom","active","setEnd","GetRoomSetProperty","allPlayer","GetRoomAllPlayerInfo","key","GetRoomProperty","setId","time","isReconnect","pointList","posInfo","GetRoomSetInfo","roomDoubleList","firstOpPos","setID","startTime","i","length","push","point","sort","a","b","ShowResultNormal","string","playBackCode","current","GetRoomConfigByProperty","i18n","t","sec","Math","round","GetDateYearMonthDayHourMinuteString","WanFa","temp","GetMaxAddDouble","maxAddDouble","HideBigWinner","node","GetWndNode","HideOwner","GetCardNum","cardNum","MidHandCard","MidHandCardEx","MaxHandCard","idx","pos","lastCard","playerNum","player","path","toString","playerNode","pid","getChildByName","sportsPoint","sportsPointList","GetClientPos","PlaySound","getComponent","Sprite","spriteFrame","winNode","loseNode","winLoseCurPoint","find","playerPoint","lb_sportsPoint","roomCfg","GetRoomConfig","unionId","beishu","boomNumber","number","addDouble","j","doubleList","num","icon_qgm_win","icon_qgm_lose","icon_bfgm","icon_bgm","surplusCardList","beShutDow","beShutDowList","head","ShowHeroHead","playerName","name","SubNameLen","substring","id","GetPid","OnShow","FormManager","CloseForm","juShu","setCount","isEnd","children","child","OnClick","btnName","btnNode","SendPack","practiceId","OnSuccess","bind","OnEnterRoomFailed","roomID","SendContinueGame","ShowForm","Click_btn_Share","Click_btn_DDShare","Click_btn_XLShare","Click_btn_ShareMore","AddDefaultFormName","ExitGame","SSSRoomMgr","self","ShareScreen","ShareScreenDD","ShareScreenXL","serverPack"],"mappings":"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","file":"UIPDK_LPResult.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\game\\PDK","sourcesContent":["var app = require(\"pdk_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n        btn_share: cc.Node,\r\n        btn_exit: cc.Node,\r\n        btn_continue: cc.Node,\r\n        sp_winLose: cc.Node,\r\n        win: cc.SpriteFrame,\r\n        lose: cc.SpriteFrame,\r\n        playerList: cc.Node,\r\n\r\n        room_Id: cc.Label,\r\n        huifang: cc.Label,\r\n        lb_jushu: cc.Label,\r\n        end_Time: cc.Label,\r\n        room_info: cc.Label,\r\n        room_Double: cc.Label,\r\n        room_MaxDouble: cc.Label,\r\n\r\n        btn_sharemore: cc.Node,\r\n        sharemore: cc.Node,\r\n    },\r\n\r\n    OnCreateInit: function () {\r\n        this.RoomMgr = app[app.subGameName.toUpperCase() + \"RoomMgr\"]();\r\n        this.Room = app[app.subGameName.toUpperCase() + \"Room\"]();\r\n        this.RoomPosMgr = app[app.subGameName.toUpperCase() + \"RoomPosMgr\"]();\r\n        this.SoundManager = app[app.subGameName + \"_SoundManager\"]();\r\n        this.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n        this.RoomSet = app[app.subGameName.toUpperCase() + \"RoomSet\"]();\r\n        this.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n        this.SDKManager = app[app.subGameName + \"_SDKManager\"]();\r\n        this.Define = app[app.subGameName.toUpperCase() + \"Define\"]();\r\n\r\n        this.bigWinner = 0;\r\n    },\r\n\r\n    ShowGameResult: function () {\r\n        let room = this.RoomMgr.GetEnterRoom();\r\n        if (!room) {\r\n            this.ErrLog(\"Event_PosContinueGame not enter room\");\r\n            return\r\n        }\r\n        if (!app[app.subGameName + \"_ShareDefine\"]().isCoinRoom) {\r\n            this.btn_exit.active = false;\r\n        } else {\r\n            this.btn_exit.active = true;\r\n        }\r\n\r\n        let setEnd = this.RoomSet.GetRoomSetProperty(\"setEnd\");\r\n        let allPlayer = this.RoomPosMgr.GetRoomAllPlayerInfo();\r\n        let key = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"key\");\r\n        let setId = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"setID\");\r\n        let time = 0;\r\n        let isReconnect = false;\r\n        let pointList = [];\r\n        if (!setEnd) {\r\n            setEnd = {};\r\n            setEnd.posInfo = this.RoomSet.GetRoomSetInfo().posInfo;\r\n            // setEnd.robCloseVic = this.RoomSet.GetRoomSetInfo().robCloseVic;\r\n            // setEnd.reverseRobCloseVic = this.RoomSet.GetRoomSetInfo().reverseRobCloseVic;\r\n            setEnd.roomDoubleList = this.RoomSet.GetRoomSetInfo().roomDoubleList;\r\n            setEnd.firstOpPos = this.RoomSet.GetRoomSetInfo().firstOpPos;\r\n            setId = this.RoomSet.GetRoomSetInfo().setID;\r\n            time = this.RoomSet.GetRoomSetInfo().startTime;\r\n            isReconnect = true;\r\n            for (let i = 0; i < setEnd.posInfo.length; i++) {\r\n                pointList.push(setEnd.posInfo[i].point);\r\n            }\r\n        } else {\r\n            time = setEnd.startTime;\r\n            for (let i = 0; i < setEnd.pointList.length; i++) {\r\n                pointList.push(setEnd.pointList[i]);\r\n            }\r\n        }\r\n\r\n        pointList.sort(function (a, b) {\r\n            return b - a;\r\n        });\r\n\r\n        this.bigWinner = pointList[0];\r\n\r\n        this.ShowResultNormal(allPlayer, setEnd, isReconnect);\r\n\r\n        this.room_Id.string = \"房间号:\" + key;\r\n        this.huifang.string = \"回放码:\" + setEnd.playBackCode;\r\n        let current = room.GetRoomConfigByProperty(\"setCount\");\r\n        this.lb_jushu.string = app.i18n.t(\"UIWanFa_setCount\", {\"current\": current, \"setCount\": setId});\r\n        let sec = Math.round(time / 1000);\r\n        this.end_Time.string = this.ComTool.GetDateYearMonthDayHourMinuteString(sec);\r\n        //房间玩法\r\n        this.room_info.string = this.WanFa();\r\n        //房间倍数\r\n        let temp = '';\r\n        temp = \"房间炸弹数:\" + setEnd.roomDoubleList;\r\n        this.room_Double.string = temp;\r\n        //房间最大倍数\r\n        this.room_MaxDouble.string = \"最大炸弹数:\" + this.GetMaxAddDouble();\r\n    },\r\n\r\n    GetMaxAddDouble: function () {\r\n        let maxAddDouble = this.Room.GetRoomConfigByProperty('maxAddDouble');\r\n        if (maxAddDouble == 0) {\r\n            return '无限制';\r\n        } else if (maxAddDouble == 1) {\r\n            return '5';\r\n        } else if (maxAddDouble == 2) {\r\n            return '10';\r\n        } else if (maxAddDouble == 3) {\r\n            return '20';\r\n        }\r\n    },\r\n\r\n    HideBigWinner: function () {\r\n        for (let i = 1; i < 5; i++) {\r\n            let node = this.GetWndNode(\"playerList/player\" + i + \"/icon_win\");\r\n            node.active = false;\r\n        }\r\n    },\r\n\r\n    HideOwner: function () {\r\n        for (let i = 1; i < 5; i++) {\r\n            let node = this.GetWndNode(\"playerList/player\" + i + \"/user_info/fangzhu\");\r\n            node.active = false;\r\n        }\r\n    },\r\n\r\n    GetCardNum: function () {\r\n        let cardNum = this.Room.GetRoomConfigByProperty(\"shoupai\");\r\n        if (cardNum == 0) {\r\n            //15张牌\r\n            cardNum = this.Define.MidHandCard;\r\n        } else if (cardNum == 1) {\r\n            //16张牌\r\n            cardNum = this.Define.MidHandCardEx;\r\n        } else {\r\n            //24张牌\r\n            cardNum = this.Define.MaxHandCard;\r\n        }\r\n\r\n        return cardNum;\r\n    },\r\n\r\n\r\n    ShowResultNormal: function (allPlayer, setEnd, isReconnect) {\r\n        let playerList = [];//pointList 得分\r\n        for (let idx in allPlayer) {\r\n            playerList.push(allPlayer[idx]);\r\n        }\r\n        //先排序一下\r\n        playerList.sort(function (a, b) {\r\n            return a.pos - b.pos;\r\n        });\r\n\r\n        let lastCard = this.GetCardNum();\r\n\r\n        let playerNum = playerList.length;\r\n\r\n        for (let i = 0; i < playerList.length; i++) {\r\n            let player = playerList[i];\r\n\r\n            let path = \"playerList/player\" + (i + 1).toString();\r\n            let playerNode = this.GetWndNode(path);\r\n            playerNode.active = true;\r\n\r\n            if (player.pid == this.RoomMgr.GetEnterRoom().GetRoomProperty(\"ownerID\")) {\r\n                playerNode.getChildByName(\"user_info\").getChildByName(\"fangzhu\").active = true;\r\n            }\r\n            let point = 0;\r\n            if (isReconnect) {\r\n                point = setEnd.posInfo[i].point;\r\n            } else {\r\n                point = setEnd.pointList[i];\r\n            }\r\n            let sportsPoint = 0;\r\n            if (isReconnect) {\r\n                if (typeof (setEnd.posInfo[i].sportsPoint) != \"undefined\") {\r\n                    if (setEnd.posInfo[i].sportsPoint > 0) {\r\n                        sportsPoint = \"+\" + setEnd.posInfo[i].sportsPoint;\r\n                    } else {\r\n                        sportsPoint = setEnd.posInfo[i].sportsPoint;\r\n                    }\r\n                }\r\n            } else {\r\n                if (typeof (setEnd.sportsPointList) != \"undefined\" && typeof (setEnd.sportsPointList[i]) != \"undefined\") {\r\n                    if (setEnd.sportsPointList[i] > 0) {\r\n                        sportsPoint = \"+\" + setEnd.sportsPointList[i];\r\n                    } else {\r\n                        sportsPoint = setEnd.sportsPointList[i];\r\n                    }\r\n                }\r\n            }\r\n\r\n            //显示胜利或失败图片和音效 \r\n            if (player.pos == this.RoomPosMgr.GetClientPos()) {\r\n                if (point > 0) {\r\n                    this.SoundManager.PlaySound(\"win\");\r\n                    this.sp_winLose.getComponent(cc.Sprite).spriteFrame = this.win;\r\n                    this.SoundManager.PlaySound(app.subGameName + \"Result_Win\");\r\n                } else {\r\n                    this.SoundManager.PlaySound(\"fail\");\r\n                    this.sp_winLose.getComponent(cc.Sprite).spriteFrame = this.lose;\r\n                    this.SoundManager.PlaySound(app.subGameName + \"Result_Lose\");\r\n                }\r\n            }\r\n\r\n            //玩家分数\r\n            let winNode = playerNode.getChildByName(\"lb_win_num\");\r\n            let loseNode = playerNode.getChildByName(\"lb_lose_num\");\r\n            winNode.active = false;\r\n            loseNode.active = false;\r\n\r\n            //新 玩家当局分数\r\n            let winLoseCurPoint = cc.find('newLayer/img_bjf/lb_bjf', playerNode);\r\n\r\n            //大赢家\r\n            if (point == this.bigWinner) {\r\n                playerNode.getChildByName(\"icon_win\").active = true;\r\n            }\r\n\r\n            if (point > 0) {\r\n                winLoseCurPoint.getComponent(cc.Label).string = \"+\" + point;\r\n            } else {\r\n                winLoseCurPoint.getComponent(cc.Label).string = point;\r\n            }\r\n\r\n            let playerPoint = player.point;\r\n            if (playerPoint > 0) {\r\n                winNode.active = true;\r\n                winNode.getComponent(cc.Label).string = \"+\" + playerPoint;\r\n            } else {\r\n                loseNode.active = true;\r\n                loseNode.getComponent(cc.Label).string = playerPoint;\r\n            }\r\n\r\n            //比赛分消耗\r\n            let lb_sportsPoint = playerNode.getChildByName(\"lb_sportsPoint\");\r\n            let roomCfg = this.Room.GetRoomConfig();\r\n            if (roomCfg.unionId > 0 && sportsPoint) {\r\n                if (sportsPoint > 0) {\r\n                    lb_sportsPoint.getComponent(cc.Label).string = sportsPoint;\r\n                } else {\r\n                    lb_sportsPoint.getComponent(cc.Label).string = sportsPoint;\r\n                }\r\n                lb_sportsPoint.active = true;\r\n            } else {\r\n                lb_sportsPoint.active = false;\r\n            }\r\n\r\n            //倍数\r\n            playerNode.getChildByName(\"lb_beiShu\").active = true;\r\n            let beishu = playerNode.getChildByName(\"lb_beiShu\").getComponent(cc.Label);\r\n            let boomNumber = cc.find('newLayer/img_zdf/lb_boom_num', playerNode).getComponent(cc.Label);\r\n\r\n            let number = 0;\r\n\r\n            if (isReconnect) {\r\n                number = setEnd.posInfo[i].addDouble;\r\n            } else {\r\n                for (let j = 0; j < setEnd.doubleList.length; j++) {\r\n                    if (player.pos == setEnd.doubleList[j].pos) {\r\n                        number = setEnd.doubleList[j].num;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            number <= 0 ? beishu.string = 0 : beishu.string = number;\r\n            boomNumber.string = beishu.string;\r\n\r\n            //显示抢关门或者反关门成功失败\r\n            let icon_qgm_win = playerNode.getChildByName(\"icon_qgm_win\");\r\n            let icon_qgm_lose = playerNode.getChildByName(\"icon_qgm_lose\");\r\n            let icon_bfgm = playerNode.getChildByName(\"icon_bfgm\");\r\n            let icon_bgm = playerNode.getChildByName(\"icon_bgm\");\r\n            icon_qgm_win.active = false;\r\n            icon_qgm_lose.active = false;\r\n            icon_bfgm.active = false;\r\n            icon_bgm.active = false;\r\n\r\n            //剩余手牌\r\n            playerNode.getChildByName(\"lb_cardNum1\").getComponent(cc.Label).string = \"0\";\r\n            playerNode.getChildByName(\"lb_cardNum2\").getComponent(cc.Label).string = \"0\";\r\n            playerNode.getChildByName(\"lb_cardNum3\").getComponent(cc.Label).string = \"0\";\r\n\r\n            if (isReconnect) {\r\n                for (let j = 0; j < setEnd.posInfo[i].surplusCardList.length; j++) {\r\n                    playerNode.getChildByName(\"lb_cardNum\" + (j + 1)).active = true;\r\n                    let cardNum = playerNode.getChildByName(\"lb_cardNum\" + (j + 1)).getComponent(cc.Label);\r\n                    cardNum.string = setEnd.posInfo[i].surplusCardList[j];\r\n                }\r\n                if (setEnd.posInfo[i].beShutDow && i == setEnd.firstOpPos) {\r\n                } else if (setEnd.posInfo[i].beShutDow) {\r\n                    //lb_guanmen.getComponent(cc.Label).string = \"被关门\";\r\n                    icon_bgm.active = true;\r\n                }\r\n\r\n            } else {\r\n                for (let j = 0; j < setEnd.surplusCardList.length; j++) {\r\n                    playerNode.getChildByName(\"lb_cardNum\" + (j + 1)).active = true;\r\n                    let cardNum = playerNode.getChildByName(\"lb_cardNum\" + (j + 1)).getComponent(cc.Label);\r\n                    cardNum.string = setEnd.surplusCardList[j][i];\r\n                }\r\n                if (setEnd.beShutDowList[i] && i == setEnd.firstOpPos) {\r\n                } else if (setEnd.beShutDowList[i]) {\r\n                    icon_bgm.active = true;\r\n                }\r\n            }\r\n\r\n            let head = playerNode.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(app.subGameName + \"_WeChatHeadImage\");\r\n            head.ShowHeroHead(player.pid);\r\n            //玩家名字\r\n            let playerName = \"\";\r\n            playerName = player.name;\r\n            if (playerName.length > app[app.subGameName + \"_ShareDefine\"]().SubNameLen) {\r\n                playerName = playerName.substring(0, app[app.subGameName + \"_ShareDefine\"]().SubNameLen) + '...';\r\n            }\r\n            let name = playerNode.getChildByName(\"user_info\").getChildByName(\"lable_name\").getComponent(cc.Label);\r\n            name.string = playerName;\r\n\r\n            let id = playerNode.getChildByName(\"user_info\").getChildByName(\"label_id\").getComponent(cc.Label);\r\n            id.string = this.ComTool.GetPid(player[\"pid\"]);\r\n        }\r\n    },\r\n\r\n    OnShow: function () {\r\n        this.FormManager.CloseForm(app.subGameName + \"_UIChat\");\r\n        let juShu = this.Room.GetRoomConfig().setCount;\r\n        let setID = this.RoomMgr.GetEnterRoom().GetRoomProperty(\"setID\");\r\n        if (setID >= juShu && !app[app.subGameName + \"_ShareDefine\"]().isCoinRoom) {\r\n            this.isEnd = true;\r\n            this.btn_continue.getChildByName(\"icon\").getComponent(cc.Label).string = \"总结算\";\r\n        } else {\r\n            this.isEnd = false;\r\n            this.btn_continue.getChildByName(\"icon\").getComponent(cc.Label).string = \"继续\";\r\n        }\r\n        this.HideBigWinner();\r\n        this.HideOwner();\r\n        for (let i = 0; i < this.playerList.children.length; i++) {\r\n            let child = this.playerList.children[i];\r\n            child.active = false;\r\n        }\r\n        this.ShowGameResult();\r\n        //初始化分享\r\n        this.sharemore.active = false;\r\n    },\r\n\r\n    OnClick: function (btnName, btnNode) {\r\n        if (btnName == \"btn_jixu\") {\r\n            if (!this.isEnd) {\r\n                if (app[app.subGameName + \"_ShareDefine\"]().isCoinRoom) {\r\n                    app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"GoldRoom\", {practiceId: app[app.subGameName + \"_ShareDefine\"]().practiceId}, this.OnSuccess.bind(this), this.OnEnterRoomFailed.bind(this));\r\n                } else {\r\n                    let room = this.RoomMgr.GetEnterRoom();\r\n                    if (!room) {\r\n                        this.ErrLog(\"Click_btn_ready not enter room\");\r\n                        return\r\n                    }\r\n                    let roomID = room.GetRoomProperty(\"roomID\");\r\n                    app[app.subGameName + \"_GameManager\"]().SendContinueGame(roomID);\r\n                }\r\n            } else {\r\n                this.FormManager.ShowForm(app.subGameName + \"_UILPPublic_Record\");\r\n                this.CloseForm();\r\n            }\r\n\r\n        } else if (btnName == \"btn_share\") {\r\n            this.Click_btn_Share();\r\n            this.sharemore.active = false;\r\n        } else if (btnName == \"btn_ddshare\") {\r\n            this.Click_btn_DDShare();\r\n            this.sharemore.active = false;\r\n        } else if (btnName == \"btn_xlshare\") {\r\n            this.Click_btn_XLShare();\r\n            this.sharemore.active = false;\r\n        } else if (btnName == \"btn_sharemore\") {\r\n            this.Click_btn_ShareMore();\r\n        } else if (btnName == \"btn_closeshare\") {\r\n            this.sharemore.active = false;\r\n        } else if (btnName == \"btn_out\") {\r\n            app[app.subGameName + \"_FormManager\"]().AddDefaultFormName(app.subGameName + \"_UIPractice\");\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        } else if (btnName == \"btn_xipai\") {\r\n            let room = this.SSSRoomMgr.GetEnterRoom();\r\n            if (!room) return;\r\n            let roomID = room.GetRoomProperty(\"roomID\");\r\n            let self = this;\r\n            app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"RommXiPai\", {\"roomID\": roomID});\r\n        }\r\n    },\r\n    Click_btn_Share: function () {\r\n        this.sharemore.active = false;\r\n        this.SDKManager.ShareScreen();\r\n    },\r\n    Click_btn_DDShare: function () {\r\n        this.sharemore.active = false;\r\n        this.SDKManager.ShareScreenDD();\r\n    },\r\n    Click_btn_XLShare: function () {\r\n        this.sharemore.active = false;\r\n        this.SDKManager.ShareScreenXL();\r\n    },\r\n    Click_btn_ShareMore: function () {\r\n        let active = this.sharemore.active;\r\n        if (active == true) {\r\n            this.sharemore.active = false;\r\n        } else {\r\n            this.sharemore.active = true;\r\n        }\r\n    },\r\n    OnSuccess: function (serverPack) {\r\n        let roomID = serverPack.roomID;\r\n        app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"GetRoomInfo\", {\"roomID\": roomID});\r\n        this.CloseForm();\r\n    },\r\n\r\n    OnEnterRoomFailed: function (serverPack) {\r\n        app[app.subGameName + \"Client\"].ExitGame();\r\n    },\r\n});\r\n"]}