{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\scene\\Layer/assets\\script\\scene\\Layer\\pdk_BackgroundLayer.js"],"names":["app","require","cc","Class","extends","Component","properties","OnCreate","sceneType","JS_Name","join","SysDataManager","subGameName","IntegrateImage","GetTableDict","ShowMap","mapID","imageName","hasOwnProperty","ErrLog","imagePath","bgNode","node","getChildByName","sprite","getComponent","Sprite","that","loader","loadRes","SpriteFrame","error","spriteFrame"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,UAASF,GAAGG,SADP;;AAGLC,aAAY,EAHP;;AAMRC,WAAU,kBAAUC,SAAV,EAAqB;AAC9B,OAAKC,OAAL,GAAe,CAACD,SAAD,EAAY,iBAAZ,EAA+BE,IAA/B,CAAoC,GAApC,CAAf;AACA,OAAKC,cAAL,GAAsBX,IAAIA,IAAIY,WAAJ,GAAkB,iBAAtB,GAAtB;AACA,OAAKC,cAAL,GAAsB,KAAKF,cAAL,CAAoBG,YAApB,CAAiC,gBAAjC,CAAtB;AACG,EAVI;;AAYR;AACAC,UAAQ,iBAASC,KAAT,EAAe;AACtB;AACA,MAAG,CAACA,KAAJ,EAAU;AACT;AACA;AACD,MAAIC,YAAY,EAAhB;;AAEA,MAAG,CAAC,KAAKJ,cAAL,CAAoBK,cAApB,CAAmCD,SAAnC,CAAJ,EAAkD;AACjD,QAAKE,MAAL,CAAY,wCAAZ,EAAsDF,SAAtD;AACA;AACA;AACD,MAAIG,YAAY,KAAKP,cAAL,CAAoBI,SAApB,EAA+B,UAA/B,CAAhB;;AAEA;AACA,MAAII,SAAS,KAAKC,IAAL,CAAUC,cAAV,CAAyB,SAAzB,CAAb;AACA,MAAG,CAACF,MAAJ,EAAW;AACV,QAAKF,MAAL,CAAY,0BAAZ;AACA;AACA;AACD,MAAIK,SAASH,OAAOI,YAAP,CAAoBvB,GAAGwB,MAAvB,CAAb;AACA,MAAG,CAACF,MAAJ,EAAW;AACV,QAAKL,MAAL,CAAY,oCAAZ;AACA;AACA;;AAED,MAAIQ,OAAO,IAAX;AACA;AACAzB,KAAG0B,MAAH,CAAUC,OAAV,CAAkBT,SAAlB,EAA6BlB,GAAG4B,WAAhC,EAA6C,UAAUC,KAAV,EAAiBC,WAAjB,EAA8B;AAC1E,OAAGD,KAAH,EAAS;AACRJ,SAAKR,MAAL,CAAY,uCAAZ,EAAqDC,SAArD,EAAgEW,KAAhE;AACA;AACA;AACDP,UAAOQ,WAAP,GAAqBA,WAArB;AACA,GAND;AAOA;;AA/CO,CAAT","file":"pdk_BackgroundLayer.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\scene\\Layer","sourcesContent":["/*\r\n    场景背景层\r\n*/\r\nvar app = require(\"pdk_app\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    },\r\n\r\n\tOnCreate: function (sceneType) {\r\n\t\tthis.JS_Name = [sceneType, \"BackgroundLayer\"].join(\"_\");\r\n\t\tthis.SysDataManager = app[app.subGameName + \"_SysDataManager\"]();\r\n\t\tthis.IntegrateImage = this.SysDataManager.GetTableDict(\"IntegrateImage\");\r\n    },\r\n\r\n\t//显示地图背景图\r\n\tShowMap:function(mapID){\r\n\t\t//如果没有地图，则使用编辑器默认编辑的图片\r\n\t\tif(!mapID){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet imageName = '';\r\n\r\n\t\tif(!this.IntegrateImage.hasOwnProperty(imageName)){\r\n\t\t\tthis.ErrLog(\"ShowMap IntegrateImage.txt not find:%s\", imageName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet imagePath = this.IntegrateImage[imageName][\"FilePath\"];\r\n\r\n\t\t//获取到背景node对象\r\n\t\tvar bgNode = this.node.getChildByName(\"bgImage\")\r\n\t\tif(!bgNode){\r\n\t\t\tthis.ErrLog(\"ShowMap bgImage not find\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet sprite = bgNode.getComponent(cc.Sprite);\r\n\t\tif(!sprite){\r\n\t\t\tthis.ErrLog(\"ShowMap bgImage not find cc.Sprite\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tvar that = this;\r\n\t\t//加载图片精灵\r\n\t\tcc.loader.loadRes(imagePath, cc.SpriteFrame, function (error, spriteFrame) {\r\n\t\t\tif(error){\r\n\t\t\t\tthat.ErrLog(\"ShowMap imagePath(%s) loader error:%s\", imagePath, error);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tsprite.spriteFrame = spriteFrame;\r\n\t\t});\r\n\t},\r\n\r\n});\r\n"]}