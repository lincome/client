{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\PDK\\RoomLogic/assets\\script\\game\\PDK\\RoomLogic\\PDKRoomSet.js"],"names":["app","require","PDKRoomSet","BaseClass","extend","Init","JS_Name","subGameName","toUpperCase","ComTool","ShareDefine","OnReload","Log","dataInfo","InitSetInfo","setInfo","console","log","OnInitRoomSetData","state","SetStateStringDict","hasOwnProperty","ErrLog","OnSetStart","SetState_Init","OnSetPlaying","opPos","SetState_Playing","OnSetEnd","setEnd","SetState_End","SetHandCard","pos","cardList","posInfo","cards","SetRoomSetProperty","key","value","GetRoomSetProperty","property","GetRoomSetInfo","GetHandCard","i","length","pid","GetHeroProperty","GetSecTotal","secTotal","g_PDKRoomSet","exports","GetModel"],"mappings":"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","file":"PDKRoomSet.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\script\\game\\PDK\\RoomLogic","sourcesContent":["/*\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @copyright: Copyright (c) 2004, 2010 Xiamen DDM Network Technology Co.,Ltd., All rights reserved.\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @package SSSRoomSet.js\r\n *  @todo: 拼罗松房间\r\n *\r\n *  @author hongdian\r\n *  @date 2014-10-30 16:04\r\n *  @version 1.0\r\n *\r\n *  修改时间 修改人 修改内容\r\n *  -------------------------------------------------------------------------------\r\n *\r\n */\r\nvar app = require('pdk_app');\r\n\r\n/**\r\n * 类构造\r\n */\r\nvar PDKRoomSet = app.BaseClass.extend({\r\n\r\n\t/**\r\n\t * 初始化\r\n\t */\r\n\tInit:function(){\r\n\r\n\t\tthis.JS_Name = app.subGameName.toUpperCase()+\"RoomSet\";\r\n\r\n\t\tthis.ComTool = app[app.subGameName+\"_ComTool\"]();\r\n\t\tthis.ShareDefine = app[app.subGameName+\"_ShareDefine\"]();\r\n\r\n\t\tthis.OnReload();\r\n\t\tthis.Log(\"Init\");\r\n\r\n\t},\r\n\r\n\tOnReload:function(){\r\n\t\tthis.dataInfo = {};\r\n\t},\r\n\r\n\tInitSetInfo:function(setInfo){\r\n\t\tconsole.log('InitSetInfo', setInfo);\r\n\r\n\t\tthis.dataInfo = setInfo;\r\n\t},\r\n\r\n\r\n\t//-----------------------回调函数-----------------------------\r\n\tOnInitRoomSetData:function(setInfo){\r\n\t\tthis.InitSetInfo(setInfo);\r\n\t\tlet state = this.dataInfo[\"state\"];\r\n\r\n\t\tif(this.ShareDefine.SetStateStringDict.hasOwnProperty(state)){\r\n\t\t\tthis.dataInfo[\"state\"] = this.ShareDefine.SetStateStringDict[state];\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"OnInitRoomSetData state:%s not find\", state);\r\n\t\t}\r\n\t\tthis.Log(\"OnInitRoomSetData:\", this.dataInfo);\r\n\t},\r\n\r\n\tOnSetStart:function(setInfo){\r\n\t\tthis.InitSetInfo(setInfo);\r\n\t\tthis.dataInfo[\"state\"] = this.ShareDefine.SetState_Init;\r\n\t},\r\n\r\n\tOnSetPlaying:function(opPos){\r\n\t\tthis.dataInfo[\"opPos\"] = opPos;\r\n\t\tthis.dataInfo[\"state\"] = this.ShareDefine.SetState_Playing;\r\n\t},\r\n\r\n\tOnSetEnd:function(setEnd){\r\n\t\tthis.dataInfo[\"setEnd\"] = setEnd;\r\n\t\tthis.dataInfo[\"state\"] = this.ShareDefine.SetState_End;\r\n\t\tthis.Log(\"OnSetEnd:\", this.dataInfo);\r\n\t},\r\n\tSetHandCard:function(pos, cardList){\r\n\t\tlet posInfo = this.dataInfo[\"posInfo\"];\r\n\t\tposInfo[pos].cards = cardList;\r\n\t},\r\n\tSetRoomSetProperty:function(key, value){\r\n\t\tthis.dataInfo[key] = value;\r\n\t},\r\n\r\n\t//----------------获取接口--------------------\r\n\r\n\t//获取set属性值\r\n\tGetRoomSetProperty:function(property){\r\n\t\tif(!this.dataInfo.hasOwnProperty(property)){\r\n\t\t\tthis.ErrLog(\"GetSetProperty(%s) not find\", property);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this.dataInfo[property];\r\n\t},\r\n\r\n\tGetRoomSetInfo:function(){\r\n\t\treturn this.dataInfo;\r\n\t},\r\n\r\n\tGetHandCard:function(){\r\n\t\tlet posInfo = this.dataInfo[\"posInfo\"];\r\n\t\tfor(let i = 0; i < posInfo.length; i++){\r\n\t\t\tif(posInfo[i].pid == app[app.subGameName+\"_HeroManager\"]().GetHeroProperty(\"pid\")){\r\n\t\t\t\treturn posInfo[i].cards;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tGetSecTotal: function(){\r\n\t\tlet posInfo = this.dataInfo[\"posInfo\"];\r\n\t\tfor(let i = 0; i < posInfo.length; i++){\r\n\t\t\tif(posInfo[i].pid == app[app.subGameName+\"_HeroManager\"]().GetHeroProperty(\"pid\")){\r\n\t\t\t\treturn posInfo[i].secTotal;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n})\r\n\r\nvar g_PDKRoomSet = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n\tif(!g_PDKRoomSet)\r\n\t\tg_PDKRoomSet = new PDKRoomSet();\r\n\treturn g_PDKRoomSet;\r\n}\r\n"]}